function hoozit(e){return e.constructor===String?"string":e.constructor===Boolean?"boolean":e.constructor===Number?isNaN(e)?"nan":"number":typeof e=="undefined"?"undefined":e===null?"null":e instanceof Array?"array":e instanceof Date?"date":e instanceof RegExp?"regexp":typeof e=="object"?"object":e instanceof Function?"function":undefined}function bindCallbacks(e,t,n){var r=hoozit(e);if(r)return hoozit(t[r])==="function"?t[r].apply(t,n):t[r]}(function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(!w.acceptData(e))return;var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===t&&typeof n=="string")return;l||(a?l=e[u]=c.pop()||w.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:w.noop});if(typeof n=="object"||typeof n=="function")i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),typeof n=="string"?(s=o[n],s==null&&(s=o[w.camelCase(n)])):s=o,s}function R(e,t,n){if(!w.acceptData(e))return;var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!z(o[u]))return}s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function U(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(I,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e){if(t==="data"&&w.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(w.find.attr(e,"type")!==null)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!w.hasData(e))return;var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,w.css(e,"display")==="none"||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=w.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=w.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&w.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&w.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,w.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e){r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],w.css(e,"display")==="inline"&&w.css(e,"float")==="none"&&(!w.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?c.display="inline-block":c.zoom=1)),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t){i=t[r];if($n.exec(i)){delete t[r],s=s||i==="toggle";if(i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){if(o.addEventListener||e.type==="load"||o.readyState==="complete")P(),w.ready()},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=T.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0));if(N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}s=o.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!w.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r)}return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?--w.readyWait:w.isReady)return;if(!o.body)return setTimeout(w.ready);w.isReady=!0;if(e!==!0&&--w.readyWait>0)return;n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready")},isFunction:function(e){return w.type(e)==="function"},isArray:Array.isArray||function(e){return w.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||w.type(e)!=="object"||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=w.trim(t);if(t&&C.test(t.replace(L,"@").replace(A,"]").replace(k,"")))return(new Function("return "+t))()}w.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:b&&!b.call("﻿ ")?function(e){return e==null?"":b.call(e)}:function(e){return e==null?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(H(Object(e))?w.merge(n,typeof e=="string"?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(w.type(r)==="object"){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n){n=w.Deferred();if(o.readyState==="complete")setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=e.frameElement==null&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;(t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[];if(!e||typeof e!="string")return n;if((a=t.nodeType)!==1&&a!==9)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){m=p=b,g=t,w=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){if(!n||(r=X.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(i=[]);n=!1;if(r=V.exec(u))n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length);for(o in s.filter)(r=G[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=x++;return t.first?function(t,n,i){while(t=t[r])if(t.nodeType===1||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[r])if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else{f=l[r]=[c],f[1]=e(t,n,u)||i;if(f[1]===!0)return!0}}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(W,"$1"),n,a<r&&St(e.slice(a,r)),r<i&&St(e=e.slice(r)),r<i&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=x==null?1:Math.random()||.1;E&&(f=a!==h&&a,i=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0];if(!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type])break;if(c=s.find[l])if(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&gt(u);if(!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp(I+"*[+~]"),J=new RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=new RegExp(z),Q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},r=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:E,n=t.defaultView;if(t===h||t.nodeType!==9||!t.documentElement)return h;h=t,p=t.documentElement,d=!u(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),r.getById=ft(function(e){return p.appendChild(e).id=b,!t.getElementsByName||!t.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},m=[],v=[];if(r.qsa=Y.test(t.querySelectorAll))ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")});return(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,n){if(e===n)return k=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i)return i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i?e===t||y(E,e)?-1:n===t||y(E,n)?1:l?j.call(l,e)-j.call(l,n):0:i&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return k=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:l?j.call(l,e)-j.call(l,n):0;if(s===o)return ct(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},t},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L);if(k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=o(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue;return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[b]||(c[b]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[n<0?n+t:n]}),even:dt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return e.compareDocumentPosition(h.createElement("div"))&1}),ft(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||lt("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!r.attributes||!ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&lt("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ft(function(e){return e.getAttribute("disabled")==null})||lt(F,function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e=typeof e=="string"?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!i||f)&&(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=r!==1||e&&w.isFunction(e.promise)?r:0,s=i===1?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0];if(!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute=p.className!=="t",t.leadingWhitespace=p.firstChild.nodeType===3,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized=r.getAttribute("href")==="/a",t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone=o.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=s.getAttribute("value")==="",s.value="t",s.setAttribute("type","radio"),t.radioValue=s.value==="t",s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box";for(h in w(t))break;return t.ownLast=h!=="0",w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];if(!a)return;n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,a.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=p.offsetWidth===4}),e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length){s=w.data(u);if(u.nodeType===1&&!w._data(u,"parsedAttrs")){r=u.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")===0&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}}return s}return typeof e=="object"?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=w._data(e,t),n&&(!r||w.isArray(n)?r=w._data(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=w.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else if(n===i||n==="boolean")this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace($,""):n==null?"":n);return}return i=w.isFunction(e),this.each(function(n){var s;if(this.nodeType!==1)return;i?s=e.call(this,n,w(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":w.isArray(s)&&(s=w.map(s,function(e){return e==null?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return t!=null?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(w.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!w.nodeName(n.parentNode,"optgroup"))){t=w(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=w.inArray(w(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute===i)return w.prop(e,n,r);if(u!==1||!w.isXMLDoc(e))n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W);if(r===t)return s&&"get"in s&&(o=s.get(e,n))!==null?o:(o=w.find.attr(e,n),o==null?t:o);if(r!==null)return s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r);w.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&e.nodeType===1)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&t==="radio"&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}});if(!Y||!G)w.attrHooks.value={set:function(e,t,n){if(!w.nodeName(e,"input"))return W&&W.set(e,t,n);e.defaultValue=t}};G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.value!==""?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,t===""?!1:t,n)}},w.each(["width","height"],function(e,t){w.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(w.isArray(t))return e.checked=w.inArray(w(e).val(),t)>=0}},w.support.checkOn||(w.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||!!e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort();if(!v)continue;c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(!m||!(l=m.events))return;t=(t||"").match(S)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)w.event.remove(e,p+t[f],n,r,!0);continue}c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&w.removeEvent(e,p,m.handle),delete l[p])}w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||o;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+w.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[w.expando]?n:new w.Event(v,typeof n=="object"&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{};if(!s&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!s&&!c.noBubble&&!w.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ot()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(w.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!w.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(w.nodeName(this,"form"))return!1;w.event.remove(this,"._submit")}}),w.support.changeBubbles||(w.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")w.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)});return!1}w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){n++===0&&o.addEventListener(e,r,!0)},teardown:function(){--n===0&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0;t<i;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,typeof e=="string"&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?w(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?typeof e=="string"?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return e.nodeType===1}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!w(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(w.support.htmlSerialize||!mt.test(e))&&(w.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(l<=1||typeof d!="string"||w.support.checkClone||!Tt.test(d)))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l){a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,a.childNodes.length===1&&(a=r);if(r){o=w.map(jt(a,"script"),_t),s=o.length;for(;f<l;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s){u=o[o.length-1].ownerDocument,w.map(o,Dt);for(f=0;f<s;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")))}a=r=null}}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!w.support.noCloneEvent||!w.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!w.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(w.type(s)==="object")w.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!w.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&w.inArray(s,r)!==-1)continue;o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;(n=e[u])!=null;u++)if(t||w.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+E+")(.*)$","i"),Jt=new RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=w.camelCase(n),f=e.style;n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!w.cssNumber[a]&&(r+="px"),!w.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!w.contains(e.ownerDocument,e)&&(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,w.support.boxSizing&&w.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&w.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,t){if(t)return w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,t){w.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?w(e).position()[t]+"px":n}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!w.support.reliableHiddenOffsets&&(e.style&&e.style.display||w.css(e,"display"))==="none"},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return n==null?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional);if(w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(b===2)return;b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&e<300||e===304,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l);if(l)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),e===204||c.type==="HEAD"?T="nocontent":e===304?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(mn[3]||(mn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(b===2)return x;a=c.global,a&&w.active++===0&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&b!==2){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(b<2))throw T;N(-1,T)}}return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||s!=="px"&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=w.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(e.elem.style[w.cssProps[e.prop]]!=null||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&typeof e=="object"?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};r.duration=w.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;Xn=w.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");r==="static"&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=(r==="absolute"||r==="fixed")&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return w.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&w.css(e,"position")==="static")e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=w:(e.jQuery=e.$=w,typeof define=="function"&&define.amd&&define("jquery",[],function(){return w}))})(window),eval("/**\n * @license\n * Lo-Dash 1.3.1 <http://lodash.com/>\n * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.4.4 <http://underscorejs.org/>\n * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.\n * Available under MIT license <http://lodash.com/license>\n */\n;(function(window) {\n\n  /** Used as a safe reference for `undefined` in pre ES5 environments */\n  var undefined;\n\n  /** Used to pool arrays and objects used internally */\n  var arrayPool = [],\n      objectPool = [];\n\n  /** Used to generate unique IDs */\n  var idCounter = 0;\n\n  /** Used internally to indicate various things */\n  var indicatorObject = {};\n\n  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */\n  var keyPrefix = +new Date + '';\n\n  /** Used as the size when optimizations are enabled for large arrays */\n  var largeArraySize = 75;\n\n  /** Used as the max size of the `arrayPool` and `objectPool` */\n  var maxPoolSize = 40;\n\n  /** Used to match empty string literals in compiled template source */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;\n\n  /**\n   * Used to match ES6 template delimiters\n   * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match regexp flags from their coerced string values */\n  var reFlags = /\\w*$/;\n\n  /** Used to match \"interpolate\" template delimiters */\n  var reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to detect functions containing a `this` reference */\n  var reThis = (reThis = /\\bthis\\b/) && reThis.test(runInContext) && reThis;\n\n  /** Used to detect and test whitespace */\n  var whitespace = (\n    // whitespace\n    ' \\t\\x0B\\f\\xA0\\ufeff' +\n\n    // line terminators\n    '\\n\\r\\u2028\\u2029' +\n\n    // unicode category \"Zs\" space separators\n    '\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000'\n  );\n\n  /** Used to match leading whitespace and zeros to be removed */\n  var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');\n\n  /** Used to ensure capturing order of template delimiters */\n  var reNoMatch = /($^)/;\n\n  /** Used to match HTML characters */\n  var reUnescapedHtml = /[&<>\"']/g;\n\n  /** Used to match unescaped characters in compiled string literals */\n  var reUnescapedString = /['\\n\\r\\t\\u2028\\u2029\\\\]/g;\n\n  /** Used to assign default `context` object properties */\n  var contextProps = [\n    'Array', 'Boolean', 'Date', 'Error', 'Function', 'Math', 'Number', 'Object',\n    'RegExp', 'String', '_', 'attachEvent', 'clearTimeout', 'isFinite', 'isNaN',\n    'parseInt', 'setImmediate', 'setTimeout'\n  ];\n\n  /** Used to fix the JScript [[DontEnum]] bug */\n  var shadowedProps = [\n    'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',\n    'toLocaleString', 'toString', 'valueOf'\n  ];\n\n  /** Used to make template sourceURLs easier to identify */\n  var templateCounter = 0;\n\n  /** `Object#toString` result shortcuts */\n  var argsClass = '[object Arguments]',\n      arrayClass = '[object Array]',\n      boolClass = '[object Boolean]',\n      dateClass = '[object Date]',\n      errorClass = '[object Error]',\n      funcClass = '[object Function]',\n      numberClass = '[object Number]',\n      objectClass = '[object Object]',\n      regexpClass = '[object RegExp]',\n      stringClass = '[object String]';\n\n  /** Used to identify object classifications that `_.clone` supports */\n  var cloneableClasses = {};\n  cloneableClasses[funcClass] = false;\n  cloneableClasses[argsClass] = cloneableClasses[arrayClass] =\n  cloneableClasses[boolClass] = cloneableClasses[dateClass] =\n  cloneableClasses[numberClass] = cloneableClasses[objectClass] =\n  cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;\n\n  /** Used to determine if values are of the language type Object */\n  var objectTypes = {\n    'boolean': false,\n    'function': true,\n    'object': true,\n    'number': false,\n    'string': false,\n    'undefined': false\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Detect free variable `exports` */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module` */\n  var freeModule = objectTypes[typeof module] && module && module.exports == freeExports && module;\n\n  /** Detect free variable `global`, from Node.js or Browserified code, and use it as `window` */\n  var freeGlobal = objectTypes[typeof global] && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {\n    window = freeGlobal;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A basic implementation of `_.indexOf` without support for binary searches\n   * or `fromIndex` constraints.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {Mixed} value The value to search for.\n   * @param {Number} [fromIndex=0] The index to search from.\n   * @returns {Number} Returns the index of the matched value or `-1`.\n   */\n  function basicIndexOf(array, value, fromIndex) {\n    var index = (fromIndex || 0) - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * An implementation of `_.contains` for cache objects that mimics the return\n   * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.\n   *\n   * @private\n   * @param {Object} cache The cache object to inspect.\n   * @param {Mixed} value The value to search for.\n   * @returns {Number} Returns `0` if `value` is found, else `-1`.\n   */\n  function cacheIndexOf(cache, value) {\n    var type = typeof value;\n    cache = cache.cache;\n\n    if (type == 'boolean' || value == null) {\n      return cache[value];\n    }\n    if (type != 'number' && type != 'string') {\n      type = 'object';\n    }\n    var key = type == 'number' ? value : keyPrefix + value;\n    cache = cache[type] || (cache[type] = {});\n\n    return type == 'object'\n      ? (cache[key] && basicIndexOf(cache[key], value) > -1 ? 0 : -1)\n      : (cache[key] ? 0 : -1);\n  }\n\n  /**\n   * Adds a given `value` to the corresponding cache object.\n   *\n   * @private\n   * @param {Mixed} value The value to add to the cache.\n   */\n  function cachePush(value) {\n    var cache = this.cache,\n        type = typeof value;\n\n    if (type == 'boolean' || value == null) {\n      cache[value] = true;\n    } else {\n      if (type != 'number' && type != 'string') {\n        type = 'object';\n      }\n      var key = type == 'number' ? value : keyPrefix + value,\n          typeCache = cache[type] || (cache[type] = {});\n\n      if (type == 'object') {\n        if ((typeCache[key] || (typeCache[key] = [])).push(value) == this.array.length) {\n          cache[type] = false;\n        }\n      } else {\n        typeCache[key] = true;\n      }\n    }\n  }\n\n  /**\n   * Used by `_.max` and `_.min` as the default `callback` when a given\n   * `collection` is a string value.\n   *\n   * @private\n   * @param {String} value The character to inspect.\n   * @returns {Number} Returns the code unit of given character.\n   */\n  function charAtCallback(value) {\n    return value.charCodeAt(0);\n  }\n\n  /**\n   * Used by `sortBy` to compare transformed `collection` values, stable sorting\n   * them in ascending order.\n   *\n   * @private\n   * @param {Object} a The object to compare to `b`.\n   * @param {Object} b The object to compare to `a`.\n   * @returns {Number} Returns the sort order indicator of `1` or `-1`.\n   */\n  function compareAscending(a, b) {\n    var ai = a.index,\n        bi = b.index;\n\n    a = a.criteria;\n    b = b.criteria;\n\n    // ensure a stable sort in V8 and other engines\n    // http://code.google.com/p/v8/issues/detail?id=90\n    if (a !== b) {\n      if (a > b || typeof a == 'undefined') {\n        return 1;\n      }\n      if (a < b || typeof b == 'undefined') {\n        return -1;\n      }\n    }\n    return ai < bi ? -1 : 1;\n  }\n\n  /**\n   * Creates a cache object to optimize linear searches of large arrays.\n   *\n   * @private\n   * @param {Array} [array=[]] The array to search.\n   * @returns {Null|Object} Returns the cache object or `null` if caching should not be used.\n   */\n  function createCache(array) {\n    var index = -1,\n        length = array.length;\n\n    var cache = getObject();\n    cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;\n\n    var result = getObject();\n    result.array = array;\n    result.cache = cache;\n    result.push = cachePush;\n\n    while (++index < length) {\n      result.push(array[index]);\n    }\n    return cache.object === false\n      ? (releaseObject(result), null)\n      : result;\n  }\n\n  /**\n   * Used by `template` to escape characters for inclusion in compiled\n   * string literals.\n   *\n   * @private\n   * @param {String} match The matched character to escape.\n   * @returns {String} Returns the escaped character.\n   */\n  function escapeStringChar(match) {\n    return '\\\\' + stringEscapes[match];\n  }\n\n  /**\n   * Gets an array from the array pool or creates a new one if the pool is empty.\n   *\n   * @private\n   * @returns {Array} The array from the pool.\n   */\n  function getArray() {\n    return arrayPool.pop() || [];\n  }\n\n  /**\n   * Gets an object from the object pool or creates a new one if the pool is empty.\n   *\n   * @private\n   * @returns {Object} The object from the pool.\n   */\n  function getObject() {\n    return objectPool.pop() || {\n      'args': '',\n      'array': null,\n      'bottom': '',\n      'cache': null,\n      'criteria': null,\n      'false': false,\n      'firstArg': '',\n      'index': 0,\n      'init': '',\n      'leading': false,\n      'loop': '',\n      'maxWait': 0,\n      'null': false,\n      'number': null,\n      'object': null,\n      'push': null,\n      'shadowedProps': null,\n      'string': null,\n      'support': null,\n      'top': '',\n      'trailing': false,\n      'true': false,\n      'undefined': false,\n      'useHas': false,\n      'useKeys': false,\n      'value': null\n    };\n  }\n\n  /**\n   * Checks if `value` is a DOM node in IE < 9.\n   *\n   * @private\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a DOM node, else `false`.\n   */\n  function isNode(value) {\n    // IE < 9 presents DOM nodes as `Object` objects except they have `toString`\n    // methods that are `typeof` \"string\" and still can coerce nodes to strings\n    return typeof value.toString != 'function' && typeof (value + '') == 'string';\n  }\n\n  /**\n   * A no-operation function.\n   *\n   * @private\n   */\n  function noop() {\n    // no operation performed\n  }\n\n  /**\n   * Releases the given `array` back to the array pool.\n   *\n   * @private\n   * @param {Array} [array] The array to release.\n   */\n  function releaseArray(array) {\n    array.length = 0;\n    if (arrayPool.length < maxPoolSize) {\n      arrayPool.push(array);\n    }\n  }\n\n  /**\n   * Releases the given `object` back to the object pool.\n   *\n   * @private\n   * @param {Object} [object] The object to release.\n   */\n  function releaseObject(object) {\n    var cache = object.cache;\n    if (cache) {\n      releaseObject(cache);\n    }\n    object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;\n    if (objectPool.length < maxPoolSize) {\n      objectPool.push(object);\n    }\n  }\n\n  /**\n   * Slices the `collection` from the `start` index up to, but not including,\n   * the `end` index.\n   *\n   * Note: This function is used, instead of `Array#slice`, to support node lists\n   * in IE < 9 and to ensure dense arrays are returned.\n   *\n   * @private\n   * @param {Array|Object|String} collection The collection to slice.\n   * @param {Number} start The start index.\n   * @param {Number} end The end index.\n   * @returns {Array} Returns the new array.\n   */\n  function slice(array, start, end) {\n    start || (start = 0);\n    if (typeof end == 'undefined') {\n      end = array ? array.length : 0;\n    }\n    var index = -1,\n        length = end - start || 0,\n        result = Array(length < 0 ? 0 : length);\n\n    while (++index < length) {\n      result[index] = array[start + index];\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new `lodash` function using the given `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Object} [context=window] The context object.\n   * @returns {Function} Returns the `lodash` function.\n   */\n  function runInContext(context) {\n    // Avoid issues with some ES3 environments that attempt to use values, named\n    // after built-in constructors like `Object`, for the creation of literals.\n    // ES5 clears this up by stating that literals must use built-in constructors.\n    // See http://es5.github.com/#x11.1.5.\n    context = context ? _.defaults(window.Object(), context, _.pick(window, contextProps)) : window;\n\n    /** Native constructor references */\n    var Array = context.Array,\n        Boolean = context.Boolean,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Number = context.Number,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /**\n     * Used for `Array` method references.\n     *\n     * Normally `Array.prototype` would suffice, however, using an array literal\n     * avoids issues in Narwhal.\n     */\n    var arrayRef = [];\n\n    /** Used for native method references */\n    var errorProto = Error.prototype,\n        objectProto = Object.prototype,\n        stringProto = String.prototype;\n\n    /** Used to restore the original `_` reference in `noConflict` */\n    var oldDash = context._;\n\n    /** Used to detect if a method is native */\n    var reNative = RegExp('^' +\n      String(objectProto.valueOf)\n        .replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n        .replace(/valueOf|for [^\\]]+/g, '.+?') + '$'\n    );\n\n    /** Native method shortcuts */\n    var ceil = Math.ceil,\n        clearTimeout = context.clearTimeout,\n        concat = arrayRef.concat,\n        floor = Math.floor,\n        fnToString = Function.prototype.toString,\n        getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,\n        hasOwnProperty = objectProto.hasOwnProperty,\n        push = arrayRef.push,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        setImmediate = context.setImmediate,\n        setTimeout = context.setTimeout,\n        toString = objectProto.toString;\n\n    /* Native method shortcuts for methods with the same name as other `lodash` methods */\n    var nativeBind = reNative.test(nativeBind = toString.bind) && nativeBind,\n        nativeCreate = reNative.test(nativeCreate =  Object.create) && nativeCreate,\n        nativeIsArray = reNative.test(nativeIsArray = Array.isArray) && nativeIsArray,\n        nativeIsFinite = context.isFinite,\n        nativeIsNaN = context.isNaN,\n        nativeKeys = reNative.test(nativeKeys = Object.keys) && nativeKeys,\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeSlice = arrayRef.slice;\n\n    /** Detect various environments */\n    var isIeOpera = reNative.test(context.attachEvent),\n        isV8 = nativeBind && !/\\n|true/.test(nativeBind + isIeOpera);\n\n    /** Used to lookup a built-in constructor by [[Class]] */\n    var ctorByClass = {};\n    ctorByClass[arrayClass] = Array;\n    ctorByClass[boolClass] = Boolean;\n    ctorByClass[dateClass] = Date;\n    ctorByClass[funcClass] = Function;\n    ctorByClass[objectClass] = Object;\n    ctorByClass[numberClass] = Number;\n    ctorByClass[regexpClass] = RegExp;\n    ctorByClass[stringClass] = String;\n\n    /** Used to avoid iterating non-enumerable properties in IE < 9 */\n    var nonEnumProps = {};\n    nonEnumProps[arrayClass] = nonEnumProps[dateClass] = nonEnumProps[numberClass] = { 'constructor': true, 'toLocaleString': true, 'toString': true, 'valueOf': true };\n    nonEnumProps[boolClass] = nonEnumProps[stringClass] = { 'constructor': true, 'toString': true, 'valueOf': true };\n    nonEnumProps[errorClass] = nonEnumProps[funcClass] = nonEnumProps[regexpClass] = { 'constructor': true, 'toString': true };\n    nonEnumProps[objectClass] = { 'constructor': true };\n\n    (function() {\n      var length = shadowedProps.length;\n      while (length--) {\n        var prop = shadowedProps[length];\n        for (var className in nonEnumProps) {\n          if (hasOwnProperty.call(nonEnumProps, className) && !hasOwnProperty.call(nonEnumProps[className], prop)) {\n            nonEnumProps[className][prop] = false;\n          }\n        }\n      }\n    }());\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object, which wraps the given `value`, to enable method\n     * chaining.\n     *\n     * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:\n     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,\n     * and `unshift`\n     *\n     * Chaining is supported in custom builds as long as the `value` method is\n     * implicitly or explicitly included in the build.\n     *\n     * The chainable wrapper functions are:\n     * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,\n     * `compose`, `concat`, `countBy`, `createCallback`, `debounce`, `defaults`,\n     * `defer`, `delay`, `difference`, `filter`, `flatten`, `forEach`, `forIn`,\n     * `forOwn`, `functions`, `groupBy`, `initial`, `intersection`, `invert`,\n     * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,\n     * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `push`, `range`,\n     * `reject`, `rest`, `reverse`, `shuffle`, `slice`, `sort`, `sortBy`, `splice`,\n     * `tap`, `throttle`, `times`, `toArray`, `transform`, `union`, `uniq`, `unshift`,\n     * `unzip`, `values`, `where`, `without`, `wrap`, and `zip`\n     *\n     * The non-chainable wrapper functions are:\n     * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `has`,\n     * `identity`, `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`,\n     * `isElement`, `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`,\n     * `isNull`, `isNumber`, `isObject`, `isPlainObject`, `isRegExp`, `isString`,\n     * `isUndefined`, `join`, `lastIndexOf`, `mixin`, `noConflict`, `parseInt`,\n     * `pop`, `random`, `reduce`, `reduceRight`, `result`, `shift`, `size`, `some`,\n     * `sortedIndex`, `runInContext`, `template`, `unescape`, `uniqueId`, and `value`\n     *\n     * The wrapper functions `first` and `last` return wrapped values when `n` is\n     * passed, otherwise they return unwrapped values.\n     *\n     * @name _\n     * @constructor\n     * @alias chain\n     * @category Chaining\n     * @param {Mixed} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns a `lodash` instance.\n     * @example\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // returns an unwrapped value\n     * wrapped.reduce(function(sum, num) {\n     *   return sum + num;\n     * });\n     * // => 6\n     *\n     * // returns a wrapped value\n     * var squares = wrapped.map(function(num) {\n     *   return num * num;\n     * });\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      // don't wrap if already wrapped, even if wrapped by a different `lodash` constructor\n      return (value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__'))\n       ? value\n       : new lodashWrapper(value);\n    }\n\n    /**\n     * A fast path for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {Mixed} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns a `lodash` instance.\n     */\n    function lodashWrapper(value) {\n      this.__wrapped__ = value;\n    }\n    // ensure `new lodashWrapper` is an instance of `lodash`\n    lodashWrapper.prototype = lodash.prototype;\n\n    /**\n     * An object used to flag environments features.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    var support = lodash.support = {};\n\n    (function() {\n      var ctor = function() { this.x = 1; },\n          object = { '0': 1, 'length': 1 },\n          props = [];\n\n      ctor.prototype = { 'valueOf': 1, 'y': 1 };\n      for (var prop in new ctor) { props.push(prop); }\n      for (prop in arguments) { }\n\n      /**\n       * Detect if `arguments` objects are `Object` objects (all but Narwhal and Opera < 10.5).\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.argsObject = arguments.constructor == Object && !(arguments instanceof Array);\n\n      /**\n       * Detect if an `arguments` object's [[Class]] is resolvable (all but Firefox < 4, IE < 9).\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.argsClass = isArguments(arguments);\n\n      /**\n       * Detect if `name` or `message` properties of `Error.prototype` are\n       * enumerable by default. (IE < 9, Safari < 5.1)\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.enumErrorProps = propertyIsEnumerable.call(errorProto, 'message') || propertyIsEnumerable.call(errorProto, 'name');\n\n      /**\n       * Detect if `prototype` properties are enumerable by default.\n       *\n       * Firefox < 3.6, Opera > 9.50 - Opera < 11.60, and Safari < 5.1\n       * (if the prototype or a property on the prototype has been set)\n       * incorrectly sets a function's `prototype` property [[Enumerable]]\n       * value to `true`.\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.enumPrototypes = propertyIsEnumerable.call(ctor, 'prototype');\n\n      /**\n       * Detect if `Function#bind` exists and is inferred to be fast (all but V8).\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.fastBind = nativeBind && !isV8;\n\n      /**\n       * Detect if own properties are iterated after inherited properties (all but IE < 9).\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.ownLast = props[0] != 'x';\n\n      /**\n       * Detect if `arguments` object indexes are non-enumerable\n       * (Firefox < 4, IE < 9, PhantomJS, Safari < 5.1).\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.nonEnumArgs = prop != 0;\n\n      /**\n       * Detect if properties shadowing those on `Object.prototype` are non-enumerable.\n       *\n       * In IE < 9 an objects own properties, shadowing non-enumerable ones, are\n       * made non-enumerable as well (a.k.a the JScript [[DontEnum]] bug).\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.nonEnumShadows = !/valueOf/.test(props);\n\n      /**\n       * Detect if `Array#shift` and `Array#splice` augment array-like objects correctly.\n       *\n       * Firefox < 10, IE compatibility mode, and IE < 9 have buggy Array `shift()`\n       * and `splice()` functions that fail to remove the last element, `value[0]`,\n       * of array-like objects even though the `length` property is set to `0`.\n       * The `shift()` method is buggy in IE 8 compatibility mode, while `splice()`\n       * is buggy regardless of mode in IE < 9 and buggy in compatibility mode in IE 9.\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.spliceObjects = (arrayRef.splice.call(object, 0, 1), !object[0]);\n\n      /**\n       * Detect lack of support for accessing string characters by index.\n       *\n       * IE < 8 can't access characters by index and IE 8 can only access\n       * characters by index on string literals.\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      support.unindexedChars = ('x'[0] + Object('x')[0]) != 'xx';\n\n      /**\n       * Detect if a DOM node's [[Class]] is resolvable (all but IE < 9)\n       * and that the JS engine errors when attempting to coerce an object to\n       * a string without a `toString` function.\n       *\n       * @memberOf _.support\n       * @type Boolean\n       */\n      try {\n        support.nodeClass = !(toString.call(document) == objectClass && !({ 'toString': 0 } + ''));\n      } catch(e) {\n        support.nodeClass = true;\n      }\n    }(1));\n\n    /**\n     * By default, the template delimiters used by Lo-Dash are similar to those in\n     * embedded Ruby (ERB). Change the following template settings to use alternative\n     * delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'escape': /<%-([\\s\\S]+?)%>/g,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'evaluate': /<%([\\s\\S]+?)%>/g,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type String\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type Object\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type Function\n         */\n        '_': lodash\n      }\n    };\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * The template used to create iterator functions.\n     *\n     * @private\n     * @param {Object} data The data object used to populate the text.\n     * @returns {String} Returns the interpolated text.\n     */\n    var iteratorTemplate = template(\n      // the `iterable` may be reassigned by the `top` snippet\n      'var index, iterable = <%= firstArg %>, ' +\n      // assign the `result` variable an initial value\n      'result = <%= init %>;\\n' +\n      // exit early if the first argument is falsey\n      'if (!iterable) return result;\\n' +\n      // add code before the iteration branches\n      '<%= top %>;' +\n\n      // array-like iteration:\n      '<% if (array) { %>\\n' +\n      'var length = iterable.length; index = -1;\\n' +\n      'if (<%= array %>) {' +\n\n      // add support for accessing string characters by index if needed\n      '  <% if (support.unindexedChars) { %>\\n' +\n      '  if (isString(iterable)) {\\n' +\n      \"    iterable = iterable.split('')\\n\" +\n      '  }' +\n      '  <% } %>\\n' +\n\n      // iterate over the array-like value\n      '  while (++index < length) {\\n' +\n      '    <%= loop %>;\\n' +\n      '  }\\n' +\n      '}\\n' +\n      'else {' +\n\n      // object iteration:\n      // add support for iterating over `arguments` objects if needed\n      '  <% } else if (support.nonEnumArgs) { %>\\n' +\n      '  var length = iterable.length; index = -1;\\n' +\n      '  if (length && isArguments(iterable)) {\\n' +\n      '    while (++index < length) {\\n' +\n      \"      index += '';\\n\" +\n      '      <%= loop %>;\\n' +\n      '    }\\n' +\n      '  } else {' +\n      '  <% } %>' +\n\n      // avoid iterating over `prototype` properties in older Firefox, Opera, and Safari\n      '  <% if (support.enumPrototypes) { %>\\n' +\n      \"  var skipProto = typeof iterable == 'function';\\n\" +\n      '  <% } %>' +\n\n      // avoid iterating over `Error.prototype` properties in older IE and Safari\n      '  <% if (support.enumErrorProps) { %>\\n' +\n      '  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\\n' +\n      '  <% } %>' +\n\n      // define conditions used in the loop\n      '  <%' +\n      '    var conditions = [];' +\n      '    if (support.enumPrototypes) { conditions.push(\\'!(skipProto && index == \"prototype\")\\'); }' +\n      '    if (support.enumErrorProps)  { conditions.push(\\'!(skipErrorProps && (index == \"message\" || index == \"name\"))\\'); }' +\n      '  %>' +\n\n      // iterate own properties using `Object.keys`\n      '  <% if (useHas && useKeys) { %>\\n' +\n      '  var ownIndex = -1,\\n' +\n      '      ownProps = objectTypes[typeof iterable] && keys(iterable),\\n' +\n      '      length = ownProps ? ownProps.length : 0;\\n\\n' +\n      '  while (++ownIndex < length) {\\n' +\n      '    index = ownProps[ownIndex];\\n<%' +\n      \"    if (conditions.length) { %>    if (<%= conditions.join(' && ') %>) {\\n  <% } %>\" +\n      '    <%= loop %>;' +\n      '    <% if (conditions.length) { %>\\n    }<% } %>\\n' +\n      '  }' +\n\n      // else using a for-in loop\n      '  <% } else { %>\\n' +\n      '  for (index in iterable) {\\n<%' +\n      '    if (useHas) { conditions.push(\"hasOwnProperty.call(iterable, index)\"); }' +\n      \"    if (conditions.length) { %>    if (<%= conditions.join(' && ') %>) {\\n  <% } %>\" +\n      '    <%= loop %>;' +\n      '    <% if (conditions.length) { %>\\n    }<% } %>\\n' +\n      '  }' +\n\n      // Because IE < 9 can't set the `[[Enumerable]]` attribute of an\n      // existing property and the `constructor` property of a prototype\n      // defaults to non-enumerable, Lo-Dash skips the `constructor`\n      // property when it infers it's iterating over a `prototype` object.\n      '    <% if (support.nonEnumShadows) { %>\\n\\n' +\n      '  if (iterable !== objectProto) {\\n' +\n      \"    var ctor = iterable.constructor,\\n\" +\n      '        isProto = iterable === (ctor && ctor.prototype),\\n' +\n      '        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\\n' +\n      '        nonEnum = nonEnumProps[className];\\n' +\n      '      <% for (k = 0; k < 7; k++) { %>\\n' +\n      \"    index = '<%= shadowedProps[k] %>';\\n\" +\n      '    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))<%' +\n      '        if (!useHas) { %> || (!nonEnum[index] && iterable[index] !== objectProto[index])<% }' +\n      '      %>) {\\n' +\n      '      <%= loop %>;\\n' +\n      '    }' +\n      '      <% } %>\\n' +\n      '  }' +\n      '    <% } %>' +\n      '  <% } %>' +\n      '  <% if (array || support.nonEnumArgs) { %>\\n}<% } %>\\n' +\n\n      // add code to the bottom of the iteration function\n      '<%= bottom %>;\\n' +\n      // finally, return the `result`\n      'return result'\n    );\n\n    /** Reusable iterator options for `assign` and `defaults` */\n    var defaultsIteratorOptions = {\n      'args': 'object, source, guard',\n      'top':\n        'var args = arguments,\\n' +\n        '    argsIndex = 0,\\n' +\n        \"    argsLength = typeof guard == 'number' ? 2 : args.length;\\n\" +\n        'while (++argsIndex < argsLength) {\\n' +\n        '  iterable = args[argsIndex];\\n' +\n        '  if (iterable && objectTypes[typeof iterable]) {',\n      'loop': \"if (typeof result[index] == 'undefined') result[index] = iterable[index]\",\n      'bottom': '  }\\n}'\n    };\n\n    /** Reusable iterator options shared by `each`, `forIn`, and `forOwn` */\n    var eachIteratorOptions = {\n      'args': 'collection, callback, thisArg',\n      'top': \"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)\",\n      'array': \"typeof length == 'number'\",\n      'loop': 'if (callback(iterable[index], index, collection) === false) return result'\n    };\n\n    /** Reusable iterator options for `forIn` and `forOwn` */\n    var forOwnIteratorOptions = {\n      'top': 'if (!objectTypes[typeof iterable]) return result;\\n' + eachIteratorOptions.top,\n      'array': false\n    };\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a function that, when called, invokes `func` with the `this` binding\n     * of `thisArg` and prepends any `partialArgs` to the arguments passed to the\n     * bound function.\n     *\n     * @private\n     * @param {Function|String} func The function to bind or the method name.\n     * @param {Mixed} [thisArg] The `this` binding of `func`.\n     * @param {Array} partialArgs An array of arguments to be partially applied.\n     * @param {Object} [idicator] Used to indicate binding by key or partially\n     *  applying arguments from the right.\n     * @returns {Function} Returns the new bound function.\n     */\n    function createBound(func, thisArg, partialArgs, indicator) {\n      var isFunc = isFunction(func),\n          isPartial = !partialArgs,\n          key = thisArg;\n\n      // juggle arguments\n      if (isPartial) {\n        var rightIndicator = indicator;\n        partialArgs = thisArg;\n      }\n      else if (!isFunc) {\n        if (!indicator) {\n          throw new TypeError;\n        }\n        thisArg = func;\n      }\n\n      function bound() {\n        // `Function#bind` spec\n        // http://es5.github.com/#x15.3.4.5\n        var args = arguments,\n            thisBinding = isPartial ? this : thisArg;\n\n        if (!isFunc) {\n          func = thisArg[key];\n        }\n        if (partialArgs.length) {\n          args = args.length\n            ? (args = nativeSlice.call(args), rightIndicator ? args.concat(partialArgs) : partialArgs.concat(args))\n            : partialArgs;\n        }\n        if (this instanceof bound) {\n          // ensure `new bound` is an instance of `func`\n          thisBinding = createObject(func.prototype);\n\n          // mimic the constructor's `return` behavior\n          // http://es5.github.com/#x13.2.2\n          var result = func.apply(thisBinding, args);\n          return isObject(result) ? result : thisBinding;\n        }\n        return func.apply(thisBinding, args);\n      }\n      return bound;\n    }\n\n    /**\n     * Creates compiled iteration functions.\n     *\n     * @private\n     * @param {Object} [options1, options2, ...] The compile options object(s).\n     *  array - A string of code to determine if the iterable is an array or array-like.\n     *  useHas - A boolean to specify using `hasOwnProperty` checks in the object loop.\n     *  useKeys - A boolean to specify using `_.keys` for own property iteration.\n     *  args - A string of comma separated arguments the iteration function will accept.\n     *  top - A string of code to execute before the iteration branches.\n     *  loop - A string of code to execute in the object loop.\n     *  bottom - A string of code to execute after the iteration branches.\n     * @returns {Function} Returns the compiled function.\n     */\n    function createIterator() {\n      var data = getObject();\n\n      // data properties\n      data.shadowedProps = shadowedProps;\n      data.support = support;\n\n      // iterator options\n      data.array = data.bottom = data.loop = data.top = '';\n      data.init = 'iterable';\n      data.useHas = true;\n      data.useKeys = !!keys;\n\n      // merge options into a template data object\n      for (var object, index = 0; object = arguments[index]; index++) {\n        for (var key in object) {\n          data[key] = object[key];\n        }\n      }\n      var args = data.args;\n      data.firstArg = /^[^,]+/.exec(args)[0];\n\n      // create the function factory\n      var factory = Function(\n          'errorClass, errorProto, hasOwnProperty, isArguments, isArray, ' +\n          'isString, keys, lodash, objectProto, objectTypes, nonEnumProps, ' +\n          'stringClass, stringProto, toString',\n        'return function(' + args + ') {\\n' + iteratorTemplate(data) + '\\n}'\n      );\n\n      releaseObject(data);\n\n      // return the compiled function\n      return factory(\n        errorClass, errorProto, hasOwnProperty, isArguments, isArray,\n        isString, keys, lodash, objectProto, objectTypes, nonEnumProps,\n        stringClass, stringProto, toString\n      );\n    }\n\n    /**\n     * Creates a new object with the specified `prototype`.\n     *\n     * @private\n     * @param {Object} prototype The prototype object.\n     * @returns {Object} Returns the new object.\n     */\n    function createObject(prototype) {\n      return isObject(prototype) ? nativeCreate(prototype) : {};\n    }\n    // fallback for browsers without `Object.create`\n    if  (!nativeCreate) {\n      var createObject = function(prototype) {\n        if (isObject(prototype)) {\n          noop.prototype = prototype;\n          var result = new noop;\n          noop.prototype = null;\n        }\n        return result || {};\n      };\n    }\n\n    /**\n     * Used by `escape` to convert characters to HTML entities.\n     *\n     * @private\n     * @param {String} match The matched character to escape.\n     * @returns {String} Returns the escaped character.\n     */\n    function escapeHtmlChar(match) {\n      return htmlEscapes[match];\n    }\n\n    /**\n     * Gets the appropriate \"indexOf\" function. If the `_.indexOf` method is\n     * customized, this method returns the custom method, otherwise it returns\n     * the `basicIndexOf` function.\n     *\n     * @private\n     * @returns {Function} Returns the \"indexOf\" function.\n     */\n    function getIndexOf(array, value, fromIndex) {\n      var result = (result = lodash.indexOf) === indexOf ? basicIndexOf : result;\n      return result;\n    }\n\n    /**\n     * Creates a function that juggles arguments, allowing argument overloading\n     * for `_.flatten` and `_.uniq`, before passing them to the given `func`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @returns {Function} Returns the new function.\n     */\n    function overloadWrapper(func) {\n      return function(array, flag, callback, thisArg) {\n        // juggle arguments\n        if (typeof flag != 'boolean' && flag != null) {\n          thisArg = callback;\n          callback = !(thisArg && thisArg[flag] === array) ? flag : undefined;\n          flag = false;\n        }\n        if (callback != null) {\n          callback = lodash.createCallback(callback, thisArg);\n        }\n        return func(array, flag, callback, thisArg);\n      };\n    }\n\n    /**\n     * A fallback implementation of `isPlainObject` which checks if a given `value`\n     * is an object created by the `Object` constructor, assuming objects created\n     * by the `Object` constructor have no inherited enumerable properties and that\n     * there are no `Object.prototype` extensions.\n     *\n     * @private\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if `value` is a plain object, else `false`.\n     */\n    function shimIsPlainObject(value) {\n      var ctor,\n          result;\n\n      // avoid non Object objects, `arguments` objects, and DOM elements\n      if (!(value && toString.call(value) == objectClass) ||\n          (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor)) ||\n          (!support.argsClass && isArguments(value)) ||\n          (!support.nodeClass && isNode(value))) {\n        return false;\n      }\n      // IE < 9 iterates inherited properties before own properties. If the first\n      // iterated property is an object's own property then there are no inherited\n      // enumerable properties.\n      if (support.ownLast) {\n        forIn(value, function(value, key, object) {\n          result = hasOwnProperty.call(object, key);\n          return false;\n        });\n        return result !== false;\n      }\n      // In most environments an object's own properties are iterated before\n      // its inherited properties. If the last iterated property is an object's\n      // own property then there are no inherited enumerable properties.\n      forIn(value, function(value, key) {\n        result = key;\n      });\n      return result === undefined || hasOwnProperty.call(value, result);\n    }\n\n    /**\n     * Used by `unescape` to convert HTML entities to characters.\n     *\n     * @private\n     * @param {String} match The matched character to unescape.\n     * @returns {String} Returns the unescaped character.\n     */\n    function unescapeHtmlChar(match) {\n      return htmlUnescapes[match];\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Checks if `value` is an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is an `arguments` object, else `false`.\n     * @example\n     *\n     * (function() { return _.isArguments(arguments); })(1, 2, 3);\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    function isArguments(value) {\n      return toString.call(value) == argsClass;\n    }\n    // fallback for browsers that can't detect `arguments` objects by [[Class]]\n    if (!support.argsClass) {\n      isArguments = function(value) {\n        return value ? hasOwnProperty.call(value, 'callee') : false;\n      };\n    }\n\n    /**\n     * Checks if `value` is an array.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is an array, else `false`.\n     * @example\n     *\n     * (function() { return _.isArray(arguments); })();\n     * // => false\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     */\n    var isArray = nativeIsArray || function(value) {\n      return value ? (typeof value == 'object' && toString.call(value) == arrayClass) : false;\n    };\n\n    /**\n     * A fallback implementation of `Object.keys` which produces an array of the\n     * given object's own enumerable property names.\n     *\n     * @private\n     * @type Function\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns a new array of property names.\n     */\n    var shimKeys = createIterator({\n      'args': 'object',\n      'init': '[]',\n      'top': 'if (!(objectTypes[typeof object])) return result',\n      'loop': 'result.push(index)'\n    });\n\n    /**\n     * Creates an array composed of the own enumerable property names of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns a new array of property names.\n     * @example\n     *\n     * _.keys({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => ['one', 'two', 'three'] (order is not guaranteed)\n     */\n    var keys = !nativeKeys ? shimKeys : function(object) {\n      if (!isObject(object)) {\n        return [];\n      }\n      if ((support.enumPrototypes && typeof object == 'function') ||\n          (support.nonEnumArgs && object.length && isArguments(object))) {\n        return shimKeys(object);\n      }\n      return nativeKeys(object);\n    };\n\n    /**\n     * A function compiled to iterate `arguments` objects, arrays, objects, and\n     * strings consistenly across environments, executing the `callback` for each\n     * element in the `collection`. The `callback` is bound to `thisArg` and invoked\n     * with three arguments; (value, index|key, collection). Callbacks may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @type Function\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array|Object|String} Returns `collection`.\n     */\n    var basicEach = createIterator(eachIteratorOptions);\n\n    /**\n     * Used to convert characters to HTML entities:\n     *\n     * Though the `>` character is escaped for symmetry, characters like `>` and `/`\n     * don't require escaping in HTML and have no special meaning unless they're part\n     * of a tag or an unquoted attribute value.\n     * http://mathiasbynens.be/notes/ambiguous-ampersands (under \"semi-related fun fact\")\n     */\n    var htmlEscapes = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n\n    /** Used to convert HTML entities to characters */\n    var htmlUnescapes = invert(htmlEscapes);\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object. Subsequent sources will overwrite property assignments of previous\n     * sources. If a `callback` function is passed, it will be executed to produce\n     * the assigned values. The `callback` is bound to `thisArg` and invoked with\n     * two arguments; (objectValue, sourceValue).\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @alias extend\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {Object} [source1, source2, ...] The source objects.\n     * @param {Function} [callback] The function to customize assigning values.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * _.assign({ 'name': 'moe' }, { 'age': 40 });\n     * // => { 'name': 'moe', 'age': 40 }\n     *\n     * var defaults = _.partialRight(_.assign, function(a, b) {\n     *   return typeof a == 'undefined' ? b : a;\n     * });\n     *\n     * var food = { 'name': 'apple' };\n     * defaults(food, { 'name': 'banana', 'type': 'fruit' });\n     * // => { 'name': 'apple', 'type': 'fruit' }\n     */\n    var assign = createIterator(defaultsIteratorOptions, {\n      'top':\n        defaultsIteratorOptions.top.replace(';',\n          ';\\n' +\n          \"if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\\n\" +\n          '  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\\n' +\n          \"} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\\n\" +\n          '  callback = args[--argsLength];\\n' +\n          '}'\n        ),\n      'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'\n    });\n\n    /**\n     * Creates a clone of `value`. If `deep` is `true`, nested objects will also\n     * be cloned, otherwise they will be assigned by reference. If a `callback`\n     * function is passed, it will be executed to produce the cloned values. If\n     * `callback` returns `undefined`, cloning will be handled by the method instead.\n     * The `callback` is bound to `thisArg` and invoked with one argument; (value).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to clone.\n     * @param {Boolean} [deep=false] A flag to indicate a deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @param- {Array} [stackA=[]] Tracks traversed source objects.\n     * @param- {Array} [stackB=[]] Associates clones with source counterparts.\n     * @returns {Mixed} Returns the cloned `value`.\n     * @example\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * var shallow = _.clone(stooges);\n     * shallow[0] === stooges[0];\n     * // => true\n     *\n     * var deep = _.clone(stooges, true);\n     * deep[0] === stooges[0];\n     * // => false\n     *\n     * _.mixin({\n     *   'clone': _.partialRight(_.clone, function(value) {\n     *     return _.isElement(value) ? value.cloneNode(false) : undefined;\n     *   })\n     * });\n     *\n     * var clone = _.clone(document.body);\n     * clone.childNodes.length;\n     * // => 0\n     */\n    function clone(value, deep, callback, thisArg, stackA, stackB) {\n      var result = value;\n\n      // allows working with \"Collections\" methods without using their `callback`\n      // argument, `index|key`, for this method's `callback`\n      if (typeof deep != 'boolean' && deep != null) {\n        thisArg = callback;\n        callback = deep;\n        deep = false;\n      }\n      if (typeof callback == 'function') {\n        callback = (typeof thisArg == 'undefined')\n          ? callback\n          : lodash.createCallback(callback, thisArg, 1);\n\n        result = callback(result);\n        if (typeof result != 'undefined') {\n          return result;\n        }\n        result = value;\n      }\n      // inspect [[Class]]\n      var isObj = isObject(result);\n      if (isObj) {\n        var className = toString.call(result);\n        if (!cloneableClasses[className] || (!support.nodeClass && isNode(result))) {\n          return result;\n        }\n        var isArr = isArray(result);\n      }\n      // shallow clone\n      if (!isObj || !deep) {\n        return isObj\n          ? (isArr ? slice(result) : assign({}, result))\n          : result;\n      }\n      var ctor = ctorByClass[className];\n      switch (className) {\n        case boolClass:\n        case dateClass:\n          return new ctor(+result);\n\n        case numberClass:\n        case stringClass:\n          return new ctor(result);\n\n        case regexpClass:\n          return ctor(result.source, reFlags.exec(result));\n      }\n      // check for circular references and return corresponding clone\n      var initedStack = !stackA;\n      stackA || (stackA = getArray());\n      stackB || (stackB = getArray());\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == value) {\n          return stackB[length];\n        }\n      }\n      // init cloned object\n      result = isArr ? ctor(result.length) : {};\n\n      // add array properties assigned by `RegExp#exec`\n      if (isArr) {\n        if (hasOwnProperty.call(value, 'index')) {\n          result.index = value.index;\n        }\n        if (hasOwnProperty.call(value, 'input')) {\n          result.input = value.input;\n        }\n      }\n      // add the source value to the stack of traversed objects\n      // and associate it with its clone\n      stackA.push(value);\n      stackB.push(result);\n\n      // recursively populate clone (susceptible to call stack limits)\n      (isArr ? basicEach : forOwn)(value, function(objValue, key) {\n        result[key] = clone(objValue, deep, callback, undefined, stackA, stackB);\n      });\n\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return result;\n    }\n\n    /**\n     * Creates a deep clone of `value`. If a `callback` function is passed,\n     * it will be executed to produce the cloned values. If `callback` returns\n     * `undefined`, cloning will be handled by the method instead. The `callback`\n     * is bound to `thisArg` and invoked with one argument; (value).\n     *\n     * Note: This method is loosely based on the structured clone algorithm. Functions\n     * and DOM nodes are **not** cloned. The enumerable properties of `arguments` objects and\n     * objects created by constructors other than `Object` are cloned to plain `Object` objects.\n     * See http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the deep cloned `value`.\n     * @example\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * var deep = _.cloneDeep(stooges);\n     * deep[0] === stooges[0];\n     * // => false\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'node': element\n     * };\n     *\n     * var clone = _.cloneDeep(view, function(value) {\n     *   return _.isElement(value) ? value.cloneNode(true) : undefined;\n     * });\n     *\n     * clone.node == view.node;\n     * // => false\n     */\n    function cloneDeep(value, callback, thisArg) {\n      return clone(value, true, callback, thisArg);\n    }\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object for all destination properties that resolve to `undefined`. Once a\n     * property is set, additional defaults of the same property will be ignored.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {Object} [source1, source2, ...] The source objects.\n     * @param- {Object} [guard] Allows working with `_.reduce` without using its\n     *  callback's `key` and `object` arguments as sources.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * var food = { 'name': 'apple' };\n     * _.defaults(food, { 'name': 'banana', 'type': 'fruit' });\n     * // => { 'name': 'apple', 'type': 'fruit' }\n     */\n    var defaults = createIterator(defaultsIteratorOptions);\n\n    /**\n     * This method is similar to `_.find`, except that it returns the key of the\n     * element that passes the callback check, instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to search.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the key of the found element, else `undefined`.\n     * @example\n     *\n     * _.findKey({ 'a': 1, 'b': 2, 'c': 3, 'd': 4 }, function(num) {\n     *   return num % 2 == 0;\n     * });\n     * // => 'b'\n     */\n    function findKey(object, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg);\n      forOwn(object, function(value, key, object) {\n        if (callback(value, key, object)) {\n          result = key;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Iterates over `object`'s own and inherited enumerable properties, executing\n     * the `callback` for each property. The `callback` is bound to `thisArg` and\n     * invoked with three arguments; (value, key, object). Callbacks may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Dog(name) {\n     *   this.name = name;\n     * }\n     *\n     * Dog.prototype.bark = function() {\n     *   alert('Woof, woof!');\n     * };\n     *\n     * _.forIn(new Dog('Dagny'), function(value, key) {\n     *   alert(key);\n     * });\n     * // => alerts 'name' and 'bark' (order is not guaranteed)\n     */\n    var forIn = createIterator(eachIteratorOptions, forOwnIteratorOptions, {\n      'useHas': false\n    });\n\n    /**\n     * Iterates over an object's own enumerable properties, executing the `callback`\n     * for each property. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, key, object). Callbacks may exit iteration early by explicitly\n     * returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n     *   alert(key);\n     * });\n     * // => alerts '0', '1', and 'length' (order is not guaranteed)\n     */\n    var forOwn = createIterator(eachIteratorOptions, forOwnIteratorOptions);\n\n    /**\n     * Creates a sorted array of all enumerable properties, own and inherited,\n     * of `object` that have function values.\n     *\n     * @static\n     * @memberOf _\n     * @alias methods\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns a new array of property names that have function values.\n     * @example\n     *\n     * _.functions(_);\n     * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]\n     */\n    function functions(object) {\n      var result = [];\n      forIn(object, function(value, key) {\n        if (isFunction(value)) {\n          result.push(key);\n        }\n      });\n      return result.sort();\n    }\n\n    /**\n     * Checks if the specified object `property` exists and is a direct property,\n     * instead of an inherited property.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to check.\n     * @param {String} property The property to check for.\n     * @returns {Boolean} Returns `true` if key is a direct property, else `false`.\n     * @example\n     *\n     * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');\n     * // => true\n     */\n    function has(object, property) {\n      return object ? hasOwnProperty.call(object, property) : false;\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of the given `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the created inverted object.\n     * @example\n     *\n     *  _.invert({ 'first': 'moe', 'second': 'larry' });\n     * // => { 'moe': 'first', 'larry': 'second' }\n     */\n    function invert(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index];\n        result[object[key]] = key;\n      }\n      return result;\n    }\n\n    /**\n     * Checks if `value` is a boolean value.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a boolean value, else `false`.\n     * @example\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false || toString.call(value) == boolClass;\n    }\n\n    /**\n     * Checks if `value` is a date.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a date, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     */\n    function isDate(value) {\n      return value ? (typeof value == 'object' && toString.call(value) == dateClass) : false;\n    }\n\n    /**\n     * Checks if `value` is a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     */\n    function isElement(value) {\n      return value ? value.nodeType === 1 : false;\n    }\n\n    /**\n     * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a\n     * length of `0` and objects with no own enumerable properties are considered\n     * \"empty\".\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Array|Object|String} value The value to inspect.\n     * @returns {Boolean} Returns `true`, if the `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({});\n     * // => true\n     *\n     * _.isEmpty('');\n     * // => true\n     */\n    function isEmpty(value) {\n      var result = true;\n      if (!value) {\n        return result;\n      }\n      var className = toString.call(value),\n          length = value.length;\n\n      if ((className == arrayClass || className == stringClass ||\n          (support.argsClass ? className == argsClass : isArguments(value))) ||\n          (className == objectClass && typeof length == 'number' && isFunction(value.splice))) {\n        return !length;\n      }\n      forOwn(value, function() {\n        return (result = false);\n      });\n      return result;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent to each other. If `callback` is passed, it will be executed to\n     * compare values. If `callback` returns `undefined`, comparisons will be handled\n     * by the method instead. The `callback` is bound to `thisArg` and invoked with\n     * two arguments; (a, b).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} a The value to compare.\n     * @param {Mixed} b The other value to compare.\n     * @param {Function} [callback] The function to customize comparing values.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @param- {Array} [stackA=[]] Tracks traversed `a` objects.\n     * @param- {Array} [stackB=[]] Tracks traversed `b` objects.\n     * @returns {Boolean} Returns `true`, if the values are equivalent, else `false`.\n     * @example\n     *\n     * var moe = { 'name': 'moe', 'age': 40 };\n     * var copy = { 'name': 'moe', 'age': 40 };\n     *\n     * moe == copy;\n     * // => false\n     *\n     * _.isEqual(moe, copy);\n     * // => true\n     *\n     * var words = ['hello', 'goodbye'];\n     * var otherWords = ['hi', 'goodbye'];\n     *\n     * _.isEqual(words, otherWords, function(a, b) {\n     *   var reGreet = /^(?:hello|hi)$/i,\n     *       aGreet = _.isString(a) && reGreet.test(a),\n     *       bGreet = _.isString(b) && reGreet.test(b);\n     *\n     *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;\n     * });\n     * // => true\n     */\n    function isEqual(a, b, callback, thisArg, stackA, stackB) {\n      // used to indicate that when comparing objects, `a` has at least the properties of `b`\n      var whereIndicator = callback === indicatorObject;\n      if (typeof callback == 'function' && !whereIndicator) {\n        callback = lodash.createCallback(callback, thisArg, 2);\n        var result = callback(a, b);\n        if (typeof result != 'undefined') {\n          return !!result;\n        }\n      }\n      // exit early for identical values\n      if (a === b) {\n        // treat `+0` vs. `-0` as not equal\n        return a !== 0 || (1 / a == 1 / b);\n      }\n      var type = typeof a,\n          otherType = typeof b;\n\n      // exit early for unlike primitive values\n      if (a === a &&\n          (!a || (type != 'function' && type != 'object')) &&\n          (!b || (otherType != 'function' && otherType != 'object'))) {\n        return false;\n      }\n      // exit early for `null` and `undefined`, avoiding ES3's Function#call behavior\n      // http://es5.github.com/#x15.3.4.4\n      if (a == null || b == null) {\n        return a === b;\n      }\n      // compare [[Class]] names\n      var className = toString.call(a),\n          otherClass = toString.call(b);\n\n      if (className == argsClass) {\n        className = objectClass;\n      }\n      if (otherClass == argsClass) {\n        otherClass = objectClass;\n      }\n      if (className != otherClass) {\n        return false;\n      }\n      switch (className) {\n        case boolClass:\n        case dateClass:\n          // coerce dates and booleans to numbers, dates to milliseconds and booleans\n          // to `1` or `0`, treating invalid dates coerced to `NaN` as not equal\n          return +a == +b;\n\n        case numberClass:\n          // treat `NaN` vs. `NaN` as equal\n          return (a != +a)\n            ? b != +b\n            // but treat `+0` vs. `-0` as not equal\n            : (a == 0 ? (1 / a == 1 / b) : a == +b);\n\n        case regexpClass:\n        case stringClass:\n          // coerce regexes to strings (http://es5.github.com/#x15.10.6.4)\n          // treat string primitives and their corresponding object instances as equal\n          return a == String(b);\n      }\n      var isArr = className == arrayClass;\n      if (!isArr) {\n        // unwrap any `lodash` wrapped values\n        if (hasOwnProperty.call(a, '__wrapped__ ') || hasOwnProperty.call(b, '__wrapped__')) {\n          return isEqual(a.__wrapped__ || a, b.__wrapped__ || b, callback, thisArg, stackA, stackB);\n        }\n        // exit for functions and DOM nodes\n        if (className != objectClass || (!support.nodeClass && (isNode(a) || isNode(b)))) {\n          return false;\n        }\n        // in older versions of Opera, `arguments` objects have `Array` constructors\n        var ctorA = !support.argsObject && isArguments(a) ? Object : a.constructor,\n            ctorB = !support.argsObject && isArguments(b) ? Object : b.constructor;\n\n        // non `Object` object instances with different constructors are not equal\n        if (ctorA != ctorB && !(\n              isFunction(ctorA) && ctorA instanceof ctorA &&\n              isFunction(ctorB) && ctorB instanceof ctorB\n            )) {\n          return false;\n        }\n      }\n      // assume cyclic structures are equal\n      // the algorithm for detecting cyclic structures is adapted from ES 5.1\n      // section 15.12.3, abstract operation `JO` (http://es5.github.com/#x15.12.3)\n      var initedStack = !stackA;\n      stackA || (stackA = getArray());\n      stackB || (stackB = getArray());\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == a) {\n          return stackB[length] == b;\n        }\n      }\n      var size = 0;\n      result = true;\n\n      // add `a` and `b` to the stack of traversed objects\n      stackA.push(a);\n      stackB.push(b);\n\n      // recursively compare objects and arrays (susceptible to call stack limits)\n      if (isArr) {\n        length = a.length;\n        size = b.length;\n\n        // compare lengths to determine if a deep comparison is necessary\n        result = size == a.length;\n        if (!result && !whereIndicator) {\n          return result;\n        }\n        // deep compare the contents, ignoring non-numeric properties\n        while (size--) {\n          var index = length,\n              value = b[size];\n\n          if (whereIndicator) {\n            while (index--) {\n              if ((result = isEqual(a[index], value, callback, thisArg, stackA, stackB))) {\n                break;\n              }\n            }\n          } else if (!(result = isEqual(a[size], value, callback, thisArg, stackA, stackB))) {\n            break;\n          }\n        }\n        return result;\n      }\n      // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`\n      // which, in this case, is more costly\n      forIn(b, function(value, key, b) {\n        if (hasOwnProperty.call(b, key)) {\n          // count the number of properties.\n          size++;\n          // deep compare each property value.\n          return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));\n        }\n      });\n\n      if (result && !whereIndicator) {\n        // ensure both objects have the same number of properties\n        forIn(a, function(value, key, a) {\n          if (hasOwnProperty.call(a, key)) {\n            // `size` will be `-1` if `a` has more properties than `b`\n            return (result = --size > -1);\n          }\n        });\n      }\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return result;\n    }\n\n    /**\n     * Checks if `value` is, or can be coerced to, a finite number.\n     *\n     * Note: This is not the same as native `isFinite`, which will return true for\n     * booleans and empty strings. See http://es5.github.com/#x15.1.2.5.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is finite, else `false`.\n     * @example\n     *\n     * _.isFinite(-101);\n     * // => true\n     *\n     * _.isFinite('10');\n     * // => true\n     *\n     * _.isFinite(true);\n     * // => false\n     *\n     * _.isFinite('');\n     * // => false\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     */\n    function isFinite(value) {\n      return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));\n    }\n\n    /**\n     * Checks if `value` is a function.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     */\n    function isFunction(value) {\n      return typeof value == 'function';\n    }\n    // fallback for older versions of Chrome and Safari\n    if (isFunction(/x/)) {\n      isFunction = function(value) {\n        return typeof value == 'function' && toString.call(value) == funcClass;\n      };\n    }\n\n    /**\n     * Checks if `value` is the language type of Object.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // check if the value is the ECMAScript language type of Object\n      // http://es5.github.com/#x8\n      // and avoid a V8 bug\n      // http://code.google.com/p/v8/issues/detail?id=2291\n      return !!(value && objectTypes[typeof value]);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * Note: This is not the same as native `isNaN`, which will return `true` for\n     * `undefined` and other values. See http://es5.github.com/#x15.1.2.4.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // `NaN` as a primitive is the only value that is not equal to itself\n      // (perform the [[Class]] check first to avoid errors with some host objects in IE)\n      return isNumber(value) && value != +value\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(undefined);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is a number.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(8.4 * 5);\n     * // => true\n     */\n    function isNumber(value) {\n      return typeof value == 'number' || toString.call(value) == numberClass;\n    }\n\n    /**\n     * Checks if a given `value` is an object created by the `Object` constructor.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Stooge(name, age) {\n     *   this.name = name;\n     *   this.age = age;\n     * }\n     *\n     * _.isPlainObject(new Stooge('moe', 40));\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'name': 'moe', 'age': 40 });\n     * // => true\n     */\n    var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function(value) {\n      if (!(value && toString.call(value) == objectClass) || (!support.argsClass && isArguments(value))) {\n        return false;\n      }\n      var valueOf = value.valueOf,\n          objProto = typeof valueOf == 'function' && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);\n\n      return objProto\n        ? (value == objProto || getPrototypeOf(value) == objProto)\n        : shimIsPlainObject(value);\n    };\n\n    /**\n     * Checks if `value` is a regular expression.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a regular expression, else `false`.\n     * @example\n     *\n     * _.isRegExp(/moe/);\n     * // => true\n     */\n    function isRegExp(value) {\n      return !!(value && objectTypes[typeof value]) && toString.call(value) == regexpClass;\n    }\n\n    /**\n     * Checks if `value` is a string.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('moe');\n     * // => true\n     */\n    function isString(value) {\n      return typeof value == 'string' || toString.call(value) == stringClass;\n    }\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Mixed} value The value to check.\n     * @returns {Boolean} Returns `true`, if the `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     */\n    function isUndefined(value) {\n      return typeof value == 'undefined';\n    }\n\n    /**\n     * Recursively merges own enumerable properties of the source object(s), that\n     * don't resolve to `undefined`, into the destination object. Subsequent sources\n     * will overwrite property assignments of previous sources. If a `callback` function\n     * is passed, it will be executed to produce the merged values of the destination\n     * and source properties. If `callback` returns `undefined`, merging will be\n     * handled by the method instead. The `callback` is bound to `thisArg` and\n     * invoked with two arguments; (objectValue, sourceValue).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {Object} [source1, source2, ...] The source objects.\n     * @param {Function} [callback] The function to customize merging properties.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @param- {Object} [deepIndicator] Indicates that `stackA` and `stackB` are\n     *  arrays of traversed objects, instead of source objects.\n     * @param- {Array} [stackA=[]] Tracks traversed source objects.\n     * @param- {Array} [stackB=[]] Associates values with source counterparts.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * var names = {\n     *   'stooges': [\n     *     { 'name': 'moe' },\n     *     { 'name': 'larry' }\n     *   ]\n     * };\n     *\n     * var ages = {\n     *   'stooges': [\n     *     { 'age': 40 },\n     *     { 'age': 50 }\n     *   ]\n     * };\n     *\n     * _.merge(names, ages);\n     * // => { 'stooges': [{ 'name': 'moe', 'age': 40 }, { 'name': 'larry', 'age': 50 }] }\n     *\n     * var food = {\n     *   'fruits': ['apple'],\n     *   'vegetables': ['beet']\n     * };\n     *\n     * var otherFood = {\n     *   'fruits': ['banana'],\n     *   'vegetables': ['carrot']\n     * };\n     *\n     * _.merge(food, otherFood, function(a, b) {\n     *   return _.isArray(a) ? a.concat(b) : undefined;\n     * });\n     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }\n     */\n    function merge(object, source, deepIndicator) {\n      var args = arguments,\n          index = 0,\n          length = 2;\n\n      if (!isObject(object)) {\n        return object;\n      }\n      if (deepIndicator === indicatorObject) {\n        var callback = args[3],\n            stackA = args[4],\n            stackB = args[5];\n      } else {\n        var initedStack = true;\n        stackA = getArray();\n        stackB = getArray();\n\n        // allows working with `_.reduce` and `_.reduceRight` without\n        // using their `callback` arguments, `index|key` and `collection`\n        if (typeof deepIndicator != 'number') {\n          length = args.length;\n        }\n        if (length > 3 && typeof args[length - 2] == 'function') {\n          callback = lodash.createCallback(args[--length - 1], args[length--], 2);\n        } else if (length > 2 && typeof args[length - 1] == 'function') {\n          callback = args[--length];\n        }\n      }\n      while (++index < length) {\n        (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {\n          var found,\n              isArr,\n              result = source,\n              value = object[key];\n\n          if (source && ((isArr = isArray(source)) || isPlainObject(source))) {\n            // avoid merging previously merged cyclic sources\n            var stackLength = stackA.length;\n            while (stackLength--) {\n              if ((found = stackA[stackLength] == source)) {\n                value = stackB[stackLength];\n                break;\n              }\n            }\n            if (!found) {\n              var isShallow;\n              if (callback) {\n                result = callback(value, source);\n                if ((isShallow = typeof result != 'undefined')) {\n                  value = result;\n                }\n              }\n              if (!isShallow) {\n                value = isArr\n                  ? (isArray(value) ? value : [])\n                  : (isPlainObject(value) ? value : {});\n              }\n              // add `source` and associated `value` to the stack of traversed objects\n              stackA.push(source);\n              stackB.push(value);\n\n              // recursively merge objects and arrays (susceptible to call stack limits)\n              if (!isShallow) {\n                value = merge(value, source, indicatorObject, callback, stackA, stackB);\n              }\n            }\n          }\n          else {\n            if (callback) {\n              result = callback(value, source);\n              if (typeof result == 'undefined') {\n                result = source;\n              }\n            }\n            if (typeof result != 'undefined') {\n              value = result;\n            }\n          }\n          object[key] = value;\n        });\n      }\n\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return object;\n    }\n\n    /**\n     * Creates a shallow clone of `object` excluding the specified properties.\n     * Property names may be specified as individual arguments or as arrays of\n     * property names. If a `callback` function is passed, it will be executed\n     * for each property in the `object`, omitting the properties `callback`\n     * returns truthy for. The `callback` is bound to `thisArg` and invoked\n     * with three arguments; (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The source object.\n     * @param {Function|String} callback|[prop1, prop2, ...] The properties to omit\n     *  or the function called per iteration.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns an object without the omitted properties.\n     * @example\n     *\n     * _.omit({ 'name': 'moe', 'age': 40 }, 'age');\n     * // => { 'name': 'moe' }\n     *\n     * _.omit({ 'name': 'moe', 'age': 40 }, function(value) {\n     *   return typeof value == 'number';\n     * });\n     * // => { 'name': 'moe' }\n     */\n    function omit(object, callback, thisArg) {\n      var indexOf = getIndexOf(),\n          isFunc = typeof callback == 'function',\n          result = {};\n\n      if (isFunc) {\n        callback = lodash.createCallback(callback, thisArg);\n      } else {\n        var props = concat.apply(arrayRef, nativeSlice.call(arguments, 1));\n      }\n      forIn(object, function(value, key, object) {\n        if (isFunc\n              ? !callback(value, key, object)\n              : indexOf(props, key) < 0\n            ) {\n          result[key] = value;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Creates a two dimensional array of the given object's key-value pairs,\n     * i.e. `[[key1, value1], [key2, value2]]`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns new array of key-value pairs.\n     * @example\n     *\n     * _.pairs({ 'moe': 30, 'larry': 40 });\n     * // => [['moe', 30], ['larry', 40]] (order is not guaranteed)\n     */\n    function pairs(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        var key = props[index];\n        result[index] = [key, object[key]];\n      }\n      return result;\n    }\n\n    /**\n     * Creates a shallow clone of `object` composed of the specified properties.\n     * Property names may be specified as individual arguments or as arrays of property\n     * names. If `callback` is passed, it will be executed for each property in the\n     * `object`, picking the properties `callback` returns truthy for. The `callback`\n     * is bound to `thisArg` and invoked with three arguments; (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The source object.\n     * @param {Array|Function|String} callback|[prop1, prop2, ...] The function called\n     *  per iteration or properties to pick, either as individual arguments or arrays.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns an object composed of the picked properties.\n     * @example\n     *\n     * _.pick({ 'name': 'moe', '_userid': 'moe1' }, 'name');\n     * // => { 'name': 'moe' }\n     *\n     * _.pick({ 'name': 'moe', '_userid': 'moe1' }, function(value, key) {\n     *   return key.charAt(0) != '_';\n     * });\n     * // => { 'name': 'moe' }\n     */\n    function pick(object, callback, thisArg) {\n      var result = {};\n      if (typeof callback != 'function') {\n        var index = -1,\n            props = concat.apply(arrayRef, nativeSlice.call(arguments, 1)),\n            length = isObject(object) ? props.length : 0;\n\n        while (++index < length) {\n          var key = props[index];\n          if (key in object) {\n            result[key] = object[key];\n          }\n        }\n      } else {\n        callback = lodash.createCallback(callback, thisArg);\n        forIn(object, function(value, key, object) {\n          if (callback(value, key, object)) {\n            result[key] = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * An alternative to `_.reduce`, this method transforms an `object` to a new\n     * `accumulator` object which is the result of running each of its elements\n     * through the `callback`, with each `callback` execution potentially mutating\n     * the `accumulator` object. The `callback` is bound to `thisArg` and invoked\n     * with four arguments; (accumulator, value, key, object). Callbacks may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [accumulator] The custom accumulator value.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the accumulated value.\n     * @example\n     *\n     * var squares = _.transform([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], function(result, num) {\n     *   num *= num;\n     *   if (num % 2) {\n     *     return result.push(num) < 3;\n     *   }\n     * });\n     * // => [1, 9, 25]\n     *\n     * var mapped = _.transform({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n     *   result[key] = num * 3;\n     * });\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     */\n    function transform(object, callback, accumulator, thisArg) {\n      var isArr = isArray(object);\n      callback = lodash.createCallback(callback, thisArg, 4);\n\n      if (accumulator == null) {\n        if (isArr) {\n          accumulator = [];\n        } else {\n          var ctor = object && object.constructor,\n              proto = ctor && ctor.prototype;\n\n          accumulator = createObject(proto);\n        }\n      }\n      (isArr ? basicEach : forOwn)(object, function(value, index, object) {\n        return callback(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Creates an array composed of the own enumerable property values of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns a new array of property values.\n     * @example\n     *\n     * _.values({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => [1, 2, 3] (order is not guaranteed)\n     */\n    function values(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = object[props[index]];\n      }\n      return result;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements from the specified indexes, or keys, of the\n     * `collection`. Indexes may be specified as individual arguments or as arrays\n     * of indexes.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Array|Number|String} [index1, index2, ...] The indexes of\n     *  `collection` to retrieve, either as individual arguments or arrays.\n     * @returns {Array} Returns a new array of elements corresponding to the\n     *  provided indexes.\n     * @example\n     *\n     * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);\n     * // => ['a', 'c', 'e']\n     *\n     * _.at(['moe', 'larry', 'curly'], 0, 2);\n     * // => ['moe', 'curly']\n     */\n    function at(collection) {\n      var index = -1,\n          props = concat.apply(arrayRef, nativeSlice.call(arguments, 1)),\n          length = props.length,\n          result = Array(length);\n\n      if (support.unindexedChars && isString(collection)) {\n        collection = collection.split('');\n      }\n      while(++index < length) {\n        result[index] = collection[props[index]];\n      }\n      return result;\n    }\n\n    /**\n     * Checks if a given `target` element is present in a `collection` using strict\n     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used\n     * as the offset from the end of the collection.\n     *\n     * @static\n     * @memberOf _\n     * @alias include\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Mixed} target The value to check for.\n     * @param {Number} [fromIndex=0] The index to search from.\n     * @returns {Boolean} Returns `true` if the `target` element is found, else `false`.\n     * @example\n     *\n     * _.contains([1, 2, 3], 1);\n     * // => true\n     *\n     * _.contains([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.contains({ 'name': 'moe', 'age': 40 }, 'moe');\n     * // => true\n     *\n     * _.contains('curly', 'ur');\n     * // => true\n     */\n    function contains(collection, target, fromIndex) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = collection ? collection.length : 0,\n          result = false;\n\n      fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;\n      if (length && typeof length == 'number') {\n        result = (isString(collection)\n          ? collection.indexOf(target, fromIndex)\n          : indexOf(collection, target, fromIndex)\n        ) > -1;\n      } else {\n        basicEach(collection, function(value) {\n          if (++index >= fromIndex) {\n            return !(result = value === target);\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed of keys returned from running each element of the\n     * `collection` through the given `callback`. The corresponding value of each key\n     * is the number of times the key was returned by the `callback`. The `callback`\n     * is bound to `thisArg` and invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    function countBy(collection, callback, thisArg) {\n      var result = {};\n      callback = lodash.createCallback(callback, thisArg);\n\n      forEach(collection, function(value, key, collection) {\n        key = String(callback(value, key, collection));\n        (hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1);\n      });\n      return result;\n    }\n\n    /**\n     * Checks if the `callback` returns a truthy value for **all** elements of a\n     * `collection`. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias all\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Boolean} Returns `true` if all elements pass the callback check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.every(stooges, 'age');\n     * // => true\n     *\n     * // using \"_.where\" callback shorthand\n     * _.every(stooges, { 'age': 50 });\n     * // => false\n     */\n    function every(collection, callback, thisArg) {\n      var result = true;\n      callback = lodash.createCallback(callback, thisArg);\n\n      if (isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          if (!(result = !!callback(collection[index], index, collection))) {\n            break;\n          }\n        }\n      } else {\n        basicEach(collection, function(value, index, collection) {\n          return (result = !!callback(value, index, collection));\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Examines each element in a `collection`, returning an array of all elements\n     * the `callback` returns truthy for. The `callback` is bound to `thisArg` and\n     * invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias select\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of elements that passed the callback check.\n     * @example\n     *\n     * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n     * // => [2, 4, 6]\n     *\n     * var food = [\n     *   { 'name': 'apple',  'organic': false, 'type': 'fruit' },\n     *   { 'name': 'carrot', 'organic': true,  'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.filter(food, 'organic');\n     * // => [{ 'name': 'carrot', 'organic': true, 'type': 'vegetable' }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.filter(food, { 'type': 'fruit' });\n     * // => [{ 'name': 'apple', 'organic': false, 'type': 'fruit' }]\n     */\n    function filter(collection, callback, thisArg) {\n      var result = [];\n      callback = lodash.createCallback(callback, thisArg);\n\n      if (isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (callback(value, index, collection)) {\n            result.push(value);\n          }\n        }\n      } else {\n        basicEach(collection, function(value, index, collection) {\n          if (callback(value, index, collection)) {\n            result.push(value);\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Examines each element in a `collection`, returning the first that the `callback`\n     * returns truthy for. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias detect, findWhere\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the found element, else `undefined`.\n     * @example\n     *\n     * _.find([1, 2, 3, 4], function(num) {\n     *   return num % 2 == 0;\n     * });\n     * // => 2\n     *\n     * var food = [\n     *   { 'name': 'apple',  'organic': false, 'type': 'fruit' },\n     *   { 'name': 'banana', 'organic': true,  'type': 'fruit' },\n     *   { 'name': 'beet',   'organic': false, 'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.where\" callback shorthand\n     * _.find(food, { 'type': 'vegetable' });\n     * // => { 'name': 'beet', 'organic': false, 'type': 'vegetable' }\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.find(food, 'organic');\n     * // => { 'name': 'banana', 'organic': true, 'type': 'fruit' }\n     */\n    function find(collection, callback, thisArg) {\n      callback = lodash.createCallback(callback, thisArg);\n\n      if (isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (callback(value, index, collection)) {\n            return value;\n          }\n        }\n      } else {\n        var result;\n        basicEach(collection, function(value, index, collection) {\n          if (callback(value, index, collection)) {\n            result = value;\n            return false;\n          }\n        });\n        return result;\n      }\n    }\n\n    /**\n     * Iterates over a `collection`, executing the `callback` for each element in\n     * the `collection`. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index|key, collection). Callbacks may exit iteration early\n     * by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias each\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array|Object|String} Returns `collection`.\n     * @example\n     *\n     * _([1, 2, 3]).forEach(alert).join(',');\n     * // => alerts each number and returns '1,2,3'\n     *\n     * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, alert);\n     * // => alerts each number value (order is not guaranteed)\n     */\n    function forEach(collection, callback, thisArg) {\n      if (callback && typeof thisArg == 'undefined' && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          if (callback(collection[index], index, collection) === false) {\n            break;\n          }\n        }\n      } else {\n        basicEach(collection, callback, thisArg);\n      }\n      return collection;\n    }\n\n    /**\n     * Creates an object composed of keys returned from running each element of the\n     * `collection` through the `callback`. The corresponding value of each key is\n     * an array of elements passed to `callback` that returned the key. The `callback`\n     * is bound to `thisArg` and invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    function groupBy(collection, callback, thisArg) {\n      var result = {};\n      callback = lodash.createCallback(callback, thisArg);\n\n      forEach(collection, function(value, key, collection) {\n        key = String(callback(value, key, collection));\n        (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);\n      });\n      return result;\n    }\n\n    /**\n     * Invokes the method named by `methodName` on each element in the `collection`,\n     * returning an array of the results of each invoked method. Additional arguments\n     * will be passed to each invoked method. If `methodName` is a function, it will\n     * be invoked for, and `this` bound to, each element in the `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|String} methodName The name of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the method with.\n     * @returns {Array} Returns a new array of the results of each invoked method.\n     * @example\n     *\n     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invoke([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    function invoke(collection, methodName) {\n      var args = nativeSlice.call(arguments, 2),\n          index = -1,\n          isFunc = typeof methodName == 'function',\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      forEach(collection, function(value) {\n        result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an array of values by running each element in the `collection`\n     * through the `callback`. The `callback` is bound to `thisArg` and invoked with\n     * three arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias collect\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of the results of each `callback` execution.\n     * @example\n     *\n     * _.map([1, 2, 3], function(num) { return num * 3; });\n     * // => [3, 6, 9]\n     *\n     * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });\n     * // => [3, 6, 9] (order is not guaranteed)\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.map(stooges, 'name');\n     * // => ['moe', 'larry']\n     */\n    function map(collection, callback, thisArg) {\n      var index = -1,\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      callback = lodash.createCallback(callback, thisArg);\n      if (isArray(collection)) {\n        while (++index < length) {\n          result[index] = callback(collection[index], index, collection);\n        }\n      } else {\n        basicEach(collection, function(value, key, collection) {\n          result[++index] = callback(value, key, collection);\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the maximum value of an `array`. If `callback` is passed,\n     * it will be executed for each value in the `array` to generate the\n     * criterion by which the value is ranked. The `callback` is bound to\n     * `thisArg` and invoked with three arguments; (value, index, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * _.max(stooges, function(stooge) { return stooge.age; });\n     * // => { 'name': 'larry', 'age': 50 };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.max(stooges, 'age');\n     * // => { 'name': 'larry', 'age': 50 };\n     */\n    function max(collection, callback, thisArg) {\n      var computed = -Infinity,\n          result = computed;\n\n      if (!callback && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (value > result) {\n            result = value;\n          }\n        }\n      } else {\n        callback = (!callback && isString(collection))\n          ? charAtCallback\n          : lodash.createCallback(callback, thisArg);\n\n        basicEach(collection, function(value, index, collection) {\n          var current = callback(value, index, collection);\n          if (current > computed) {\n            computed = current;\n            result = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the minimum value of an `array`. If `callback` is passed,\n     * it will be executed for each value in the `array` to generate the\n     * criterion by which the value is ranked. The `callback` is bound to `thisArg`\n     * and invoked with three arguments; (value, index, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * _.min(stooges, function(stooge) { return stooge.age; });\n     * // => { 'name': 'moe', 'age': 40 };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.min(stooges, 'age');\n     * // => { 'name': 'moe', 'age': 40 };\n     */\n    function min(collection, callback, thisArg) {\n      var computed = Infinity,\n          result = computed;\n\n      if (!callback && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (value < result) {\n            result = value;\n          }\n        }\n      } else {\n        callback = (!callback && isString(collection))\n          ? charAtCallback\n          : lodash.createCallback(callback, thisArg);\n\n        basicEach(collection, function(value, index, collection) {\n          var current = callback(value, index, collection);\n          if (current < computed) {\n            computed = current;\n            result = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the value of a specified property from all elements in the `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {String} property The property to pluck.\n     * @returns {Array} Returns a new array of property values.\n     * @example\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * _.pluck(stooges, 'name');\n     * // => ['moe', 'larry']\n     */\n    var pluck = map;\n\n    /**\n     * Reduces a `collection` to a value which is the accumulated result of running\n     * each element in the `collection` through the `callback`, where each successive\n     * `callback` execution consumes the return value of the previous execution.\n     * If `accumulator` is not passed, the first element of the `collection` will be\n     * used as the initial `accumulator` value. The `callback` is bound to `thisArg`\n     * and invoked with four arguments; (accumulator, value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @alias foldl, inject\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [accumulator] Initial value of the accumulator.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the accumulated value.\n     * @example\n     *\n     * var sum = _.reduce([1, 2, 3], function(sum, num) {\n     *   return sum + num;\n     * });\n     * // => 6\n     *\n     * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n     *   result[key] = num * 3;\n     *   return result;\n     * }, {});\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     */\n    function reduce(collection, callback, accumulator, thisArg) {\n      var noaccum = arguments.length < 3;\n      callback = lodash.createCallback(callback, thisArg, 4);\n\n      if (isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        if (noaccum) {\n          accumulator = collection[++index];\n        }\n        while (++index < length) {\n          accumulator = callback(accumulator, collection[index], index, collection);\n        }\n      } else {\n        basicEach(collection, function(value, index, collection) {\n          accumulator = noaccum\n            ? (noaccum = false, value)\n            : callback(accumulator, value, index, collection)\n        });\n      }\n      return accumulator;\n    }\n\n    /**\n     * This method is similar to `_.reduce`, except that it iterates over a\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias foldr\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {Mixed} [accumulator] Initial value of the accumulator.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the accumulated value.\n     * @example\n     *\n     * var list = [[0, 1], [2, 3], [4, 5]];\n     * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, callback, accumulator, thisArg) {\n      var iterable = collection,\n          length = collection ? collection.length : 0,\n          noaccum = arguments.length < 3;\n\n      if (typeof length != 'number') {\n        var props = keys(collection);\n        length = props.length;\n      } else if (support.unindexedChars && isString(collection)) {\n        iterable = collection.split('');\n      }\n      callback = lodash.createCallback(callback, thisArg, 4);\n      forEach(collection, function(value, index, collection) {\n        index = props ? props[--length] : --length;\n        accumulator = noaccum\n          ? (noaccum = false, iterable[index])\n          : callback(accumulator, iterable[index], index, collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The opposite of `_.filter`, this method returns the elements of a\n     * `collection` that `callback` does **not** return truthy for.\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of elements that did **not** pass the\n     *  callback check.\n     * @example\n     *\n     * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n     * // => [1, 3, 5]\n     *\n     * var food = [\n     *   { 'name': 'apple',  'organic': false, 'type': 'fruit' },\n     *   { 'name': 'carrot', 'organic': true,  'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.reject(food, 'organic');\n     * // => [{ 'name': 'apple', 'organic': false, 'type': 'fruit' }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.reject(food, { 'type': 'fruit' });\n     * // => [{ 'name': 'carrot', 'organic': true, 'type': 'vegetable' }]\n     */\n    function reject(collection, callback, thisArg) {\n      callback = lodash.createCallback(callback, thisArg);\n      return filter(collection, function(value, index, collection) {\n        return !callback(value, index, collection);\n      });\n    }\n\n    /**\n     * Creates an array of shuffled `array` values, using a version of the\n     * Fisher-Yates shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to shuffle.\n     * @returns {Array} Returns a new shuffled collection.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4, 5, 6]);\n     * // => [4, 1, 6, 3, 5, 2]\n     */\n    function shuffle(collection) {\n      var index = -1,\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      forEach(collection, function(value) {\n        var rand = floor(nativeRandom() * (++index + 1));\n        result[index] = result[rand];\n        result[rand] = value;\n      });\n      return result;\n    }\n\n    /**\n     * Gets the size of the `collection` by returning `collection.length` for arrays\n     * and array-like objects or the number of own enumerable properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to inspect.\n     * @returns {Number} Returns `collection.length` or number of own enumerable properties.\n     * @example\n     *\n     * _.size([1, 2]);\n     * // => 2\n     *\n     * _.size({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => 3\n     *\n     * _.size('curly');\n     * // => 5\n     */\n    function size(collection) {\n      var length = collection ? collection.length : 0;\n      return typeof length == 'number' ? length : keys(collection).length;\n    }\n\n    /**\n     * Checks if the `callback` returns a truthy value for **any** element of a\n     * `collection`. The function returns as soon as it finds passing value, and\n     * does not iterate over the entire `collection`. The `callback` is bound to\n     * `thisArg` and invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias any\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Boolean} Returns `true` if any element passes the callback check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var food = [\n     *   { 'name': 'apple',  'organic': false, 'type': 'fruit' },\n     *   { 'name': 'carrot', 'organic': true,  'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.some(food, 'organic');\n     * // => true\n     *\n     * // using \"_.where\" callback shorthand\n     * _.some(food, { 'type': 'meat' });\n     * // => false\n     */\n    function some(collection, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg);\n\n      if (isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          if ((result = callback(collection[index], index, collection))) {\n            break;\n          }\n        }\n      } else {\n        basicEach(collection, function(value, index, collection) {\n          return !(result = callback(value, index, collection));\n        });\n      }\n      return !!result;\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in the `collection` through the `callback`. This method\n     * performs a stable sort, that is, it will preserve the original sort order of\n     * equal elements. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index|key, collection).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of sorted elements.\n     * @example\n     *\n     * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });\n     * // => [3, 1, 2]\n     *\n     * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);\n     * // => [3, 1, 2]\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.sortBy(['banana', 'strawberry', 'apple'], 'length');\n     * // => ['apple', 'banana', 'strawberry']\n     */\n    function sortBy(collection, callback, thisArg) {\n      var index = -1,\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      callback = lodash.createCallback(callback, thisArg);\n      forEach(collection, function(value, key, collection) {\n        var object = result[++index] = getObject();\n        object.criteria = callback(value, key, collection);\n        object.index = index;\n        object.value = value;\n      });\n\n      length = result.length;\n      result.sort(compareAscending);\n      while (length--) {\n        var object = result[length];\n        result[length] = object.value;\n        releaseObject(object);\n      }\n      return result;\n    }\n\n    /**\n     * Converts the `collection` to an array.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to convert.\n     * @returns {Array} Returns the new converted array.\n     * @example\n     *\n     * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);\n     * // => [2, 3, 4]\n     */\n    function toArray(collection) {\n      if (collection && typeof collection.length == 'number') {\n        return (support.unindexedChars && isString(collection))\n          ? collection.split('')\n          : slice(collection);\n      }\n      return values(collection);\n    }\n\n    /**\n     * Examines each element in a `collection`, returning an array of all elements\n     * that have the given `properties`. When checking `properties`, this method\n     * performs a deep comparison between values to determine if they are equivalent\n     * to each other.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Collections\n     * @param {Array|Object|String} collection The collection to iterate over.\n     * @param {Object} properties The object of property values to filter by.\n     * @returns {Array} Returns a new array of elements that have the given `properties`.\n     * @example\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * _.where(stooges, { 'age': 40 });\n     * // => [{ 'name': 'moe', 'age': 40 }]\n     */\n    var where = filter;\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array with all falsey values of `array` removed. The values\n     * `false`, `null`, `0`, `\"\"`, `undefined` and `NaN` are all falsey.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns a new filtered array.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of `array` elements not present in the other arrays\n     * using strict equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @param {Array} [array1, array2, ...] Arrays to check.\n     * @returns {Array} Returns a new array of `array` elements not present in the\n     *  other arrays.\n     * @example\n     *\n     * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);\n     * // => [1, 3, 4]\n     */\n    function difference(array) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          seen = concat.apply(arrayRef, nativeSlice.call(arguments, 1)),\n          result = [];\n\n      var isLarge = length >= largeArraySize && indexOf === basicIndexOf;\n\n      if (isLarge) {\n        var cache = createCache(seen);\n        if (cache) {\n          indexOf = cacheIndexOf;\n          seen = cache;\n        } else {\n          isLarge = false;\n        }\n      }\n      while (++index < length) {\n        var value = array[index];\n        if (indexOf(seen, value) < 0) {\n          result.push(value);\n        }\n      }\n      if (isLarge) {\n        releaseObject(seen);\n      }\n      return result;\n    }\n\n    /**\n     * This method is similar to `_.find`, except that it returns the index of\n     * the element that passes the callback check, instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * _.findIndex(['apple', 'banana', 'beet'], function(food) {\n     *   return /^b/.test(food);\n     * });\n     * // => 1\n     */\n    function findIndex(array, callback, thisArg) {\n      var index = -1,\n          length = array ? array.length : 0;\n\n      callback = lodash.createCallback(callback, thisArg);\n      while (++index < length) {\n        if (callback(array[index], index, array)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Gets the first element of the `array`. If a number `n` is passed, the first\n     * `n` elements of the `array` are returned. If a `callback` function is passed,\n     * elements at the beginning of the array are returned as long as the `callback`\n     * returns truthy. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias head, take\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|Number|String} [callback|n] The function called\n     *  per element or the number of elements to return. If a property name or\n     *  object is passed, it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the first element(s) of `array`.\n     * @example\n     *\n     * _.first([1, 2, 3]);\n     * // => 1\n     *\n     * _.first([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.first([1, 2, 3], function(num) {\n     *   return num < 3;\n     * });\n     * // => [1, 2]\n     *\n     * var food = [\n     *   { 'name': 'banana', 'organic': true },\n     *   { 'name': 'beet',   'organic': false },\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.first(food, 'organic');\n     * // => [{ 'name': 'banana', 'organic': true }]\n     *\n     * var food = [\n     *   { 'name': 'apple',  'type': 'fruit' },\n     *   { 'name': 'banana', 'type': 'fruit' },\n     *   { 'name': 'beet',   'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.where\" callback shorthand\n     * _.first(food, { 'type': 'fruit' });\n     * // => [{ 'name': 'apple', 'type': 'fruit' }, { 'name': 'banana', 'type': 'fruit' }]\n     */\n    function first(array, callback, thisArg) {\n      if (array) {\n        var n = 0,\n            length = array.length;\n\n        if (typeof callback != 'number' && callback != null) {\n          var index = -1;\n          callback = lodash.createCallback(callback, thisArg);\n          while (++index < length && callback(array[index], index, array)) {\n            n++;\n          }\n        } else {\n          n = callback;\n          if (n == null || thisArg) {\n            return array[0];\n          }\n        }\n        return slice(array, 0, nativeMin(nativeMax(0, n), length));\n      }\n    }\n\n    /**\n     * Flattens a nested array (the nesting can be to any depth). If `isShallow`\n     * is truthy, `array` will only be flattened a single level. If `callback`\n     * is passed, each element of `array` is passed through a `callback` before\n     * flattening. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to flatten.\n     * @param {Boolean} [isShallow=false] A flag to indicate only flattening a single level.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2], [3, [[4]]]]);\n     * // => [1, 2, 3, 4];\n     *\n     * _.flatten([1, [2], [3, [[4]]]], true);\n     * // => [1, 2, 3, [[4]]];\n     *\n     * var stooges = [\n     *   { 'name': 'curly', 'quotes': ['Oh, a wise guy, eh?', 'Poifect!'] },\n     *   { 'name': 'moe', 'quotes': ['Spread out!', 'You knucklehead!'] }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.flatten(stooges, 'quotes');\n     * // => ['Oh, a wise guy, eh?', 'Poifect!', 'Spread out!', 'You knucklehead!']\n     */\n    var flatten = overloadWrapper(function flatten(array, isShallow, callback) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (callback) {\n          value = callback(value, index, array);\n        }\n        // recursively flatten arrays (susceptible to call stack limits)\n        if (isArray(value)) {\n          push.apply(result, isShallow ? value : flatten(value));\n        } else {\n          result.push(value);\n        }\n      }\n      return result;\n    });\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found using\n     * strict equality for comparisons, i.e. `===`. If the `array` is already\n     * sorted, passing `true` for `fromIndex` will run a faster binary search.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Mixed} value The value to search for.\n     * @param {Boolean|Number} [fromIndex=0] The index to search from or `true` to\n     *  perform a binary search on a sorted `array`.\n     * @returns {Number} Returns the index of the matched value or `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 3, 1, 2, 3], 2);\n     * // => 1\n     *\n     * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);\n     * // => 4\n     *\n     * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);\n     * // => 2\n     */\n    function indexOf(array, value, fromIndex) {\n      if (typeof fromIndex == 'number') {\n        var length = array ? array.length : 0;\n        fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0);\n      } else if (fromIndex) {\n        var index = sortedIndex(array, value);\n        return array[index] === value ? index : -1;\n      }\n      return array ? basicIndexOf(array, value, fromIndex) : -1;\n    }\n\n    /**\n     * Gets all but the last element of `array`. If a number `n` is passed, the\n     * last `n` elements are excluded from the result. If a `callback` function\n     * is passed, elements at the end of the array are excluded from the result\n     * as long as the `callback` returns truthy. The `callback` is bound to\n     * `thisArg` and invoked with three arguments; (value, index, array).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|Number|String} [callback|n=1] The function called\n     *  per element or the number of elements to exclude. If a property name or\n     *  object is passed, it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.initial([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.initial([1, 2, 3], function(num) {\n     *   return num > 1;\n     * });\n     * // => [1]\n     *\n     * var food = [\n     *   { 'name': 'beet',   'organic': false },\n     *   { 'name': 'carrot', 'organic': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.initial(food, 'organic');\n     * // => [{ 'name': 'beet',   'organic': false }]\n     *\n     * var food = [\n     *   { 'name': 'banana', 'type': 'fruit' },\n     *   { 'name': 'beet',   'type': 'vegetable' },\n     *   { 'name': 'carrot', 'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.where\" callback shorthand\n     * _.initial(food, { 'type': 'vegetable' });\n     * // => [{ 'name': 'banana', 'type': 'fruit' }]\n     */\n    function initial(array, callback, thisArg) {\n      if (!array) {\n        return [];\n      }\n      var n = 0,\n          length = array.length;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = length;\n        callback = lodash.createCallback(callback, thisArg);\n        while (index-- && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = (callback == null || thisArg) ? 1 : callback || n;\n      }\n      return slice(array, 0, nativeMin(nativeMax(0, length - n), length));\n    }\n\n    /**\n     * Computes the intersection of all the passed-in arrays using strict equality\n     * for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} [array1, array2, ...] Arrays to process.\n     * @returns {Array} Returns a new array of unique elements that are present\n     *  in **all** of the arrays.\n     * @example\n     *\n     * _.intersection([1, 2, 3], [101, 2, 1, 10], [2, 1]);\n     * // => [1, 2]\n     */\n    function intersection(array) {\n      var args = arguments,\n          argsLength = args.length,\n          argsIndex = -1,\n          caches = getArray(),\n          index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          result = [],\n          seen = getArray();\n\n      while (++argsIndex < argsLength) {\n        var value = args[argsIndex];\n        caches[argsIndex] = indexOf === basicIndexOf &&\n          (value ? value.length : 0) >= largeArraySize &&\n          createCache(argsIndex ? args[argsIndex] : seen);\n      }\n      outer:\n      while (++index < length) {\n        var cache = caches[0];\n        value = array[index];\n\n        if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {\n          argsIndex = argsLength;\n          (cache || seen).push(value);\n          while (--argsIndex) {\n            cache = caches[argsIndex];\n            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n      }\n      while (argsLength--) {\n        cache = caches[argsLength];\n        if (cache) {\n          releaseObject(cache);\n        }\n      }\n      releaseArray(caches);\n      releaseArray(seen);\n      return result;\n    }\n\n    /**\n     * Gets the last element of the `array`. If a number `n` is passed, the\n     * last `n` elements of the `array` are returned. If a `callback` function\n     * is passed, elements at the end of the array are returned as long as the\n     * `callback` returns truthy. The `callback` is bound to `thisArg` and\n     * invoked with three arguments;(value, index, array).\n     *\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|Number|String} [callback|n] The function called\n     *  per element or the number of elements to return. If a property name or\n     *  object is passed, it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Mixed} Returns the last element(s) of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     *\n     * _.last([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.last([1, 2, 3], function(num) {\n     *   return num > 1;\n     * });\n     * // => [2, 3]\n     *\n     * var food = [\n     *   { 'name': 'beet',   'organic': false },\n     *   { 'name': 'carrot', 'organic': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.last(food, 'organic');\n     * // => [{ 'name': 'carrot', 'organic': true }]\n     *\n     * var food = [\n     *   { 'name': 'banana', 'type': 'fruit' },\n     *   { 'name': 'beet',   'type': 'vegetable' },\n     *   { 'name': 'carrot', 'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.where\" callback shorthand\n     * _.last(food, { 'type': 'vegetable' });\n     * // => [{ 'name': 'beet', 'type': 'vegetable' }, { 'name': 'carrot', 'type': 'vegetable' }]\n     */\n    function last(array, callback, thisArg) {\n      if (array) {\n        var n = 0,\n            length = array.length;\n\n        if (typeof callback != 'number' && callback != null) {\n          var index = length;\n          callback = lodash.createCallback(callback, thisArg);\n          while (index-- && callback(array[index], index, array)) {\n            n++;\n          }\n        } else {\n          n = callback;\n          if (n == null || thisArg) {\n            return array[length - 1];\n          }\n        }\n        return slice(array, nativeMax(0, length - n));\n      }\n    }\n\n    /**\n     * Gets the index at which the last occurrence of `value` is found using strict\n     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used\n     * as the offset from the end of the collection.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Mixed} value The value to search for.\n     * @param {Number} [fromIndex=array.length-1] The index to search from.\n     * @returns {Number} Returns the index of the matched value or `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);\n     * // => 4\n     *\n     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var index = array ? array.length : 0;\n      if (typeof fromIndex == 'number') {\n        index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;\n      }\n      while (index--) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to but not including `end`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Number} [start=0] The start of the range.\n     * @param {Number} end The end of the range.\n     * @param {Number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns a new range array.\n     * @example\n     *\n     * _.range(10);\n     * // => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n     *\n     * _.range(1, 11);\n     * // => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n     *\n     * _.range(0, 30, 5);\n     * // => [0, 5, 10, 15, 20, 25]\n     *\n     * _.range(0, -10, -1);\n     * // => [0, -1, -2, -3, -4, -5, -6, -7, -8, -9]\n     *\n     * _.range(0);\n     * // => []\n     */\n    function range(start, end, step) {\n      start = +start || 0;\n      step = +step || 1;\n\n      if (end == null) {\n        end = start;\n        start = 0;\n      }\n      // use `Array(length)` so V8 will avoid the slower \"dictionary\" mode\n      // http://youtu.be/XAqIpGU8ZZk#t=17m25s\n      var index = -1,\n          length = nativeMax(0, ceil((end - start) / step)),\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The opposite of `_.initial`, this method gets all but the first value of\n     * `array`. If a number `n` is passed, the first `n` values are excluded from\n     * the result. If a `callback` function is passed, elements at the beginning\n     * of the array are excluded from the result as long as the `callback` returns\n     * truthy. The `callback` is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias drop, tail\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|Number|String} [callback|n=1] The function called\n     *  per element or the number of elements to exclude. If a property name or\n     *  object is passed, it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a slice of `array`.\n     * @example\n     *\n     * _.rest([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.rest([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.rest([1, 2, 3], function(num) {\n     *   return num < 3;\n     * });\n     * // => [3]\n     *\n     * var food = [\n     *   { 'name': 'banana', 'organic': true },\n     *   { 'name': 'beet',   'organic': false },\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.rest(food, 'organic');\n     * // => [{ 'name': 'beet', 'organic': false }]\n     *\n     * var food = [\n     *   { 'name': 'apple',  'type': 'fruit' },\n     *   { 'name': 'banana', 'type': 'fruit' },\n     *   { 'name': 'beet',   'type': 'vegetable' }\n     * ];\n     *\n     * // using \"_.where\" callback shorthand\n     * _.rest(food, { 'type': 'fruit' });\n     * // => [{ 'name': 'beet', 'type': 'vegetable' }]\n     */\n    function rest(array, callback, thisArg) {\n      if (typeof callback != 'number' && callback != null) {\n        var n = 0,\n            index = -1,\n            length = array ? array.length : 0;\n\n        callback = lodash.createCallback(callback, thisArg);\n        while (++index < length && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = (callback == null || thisArg) ? 1 : nativeMax(0, callback);\n      }\n      return slice(array, n);\n    }\n\n    /**\n     * Uses a binary search to determine the smallest index at which the `value`\n     * should be inserted into `array` in order to maintain the sort order of the\n     * sorted `array`. If `callback` is passed, it will be executed for `value` and\n     * each element in `array` to compute their sort ranking. The `callback` is\n     * bound to `thisArg` and invoked with one argument; (value).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to inspect.\n     * @param {Mixed} value The value to evaluate.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Number} Returns the index at which the value should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([20, 30, 50], 40);\n     * // => 2\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');\n     * // => 2\n     *\n     * var dict = {\n     *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }\n     * };\n     *\n     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n     *   return dict.wordToNumber[word];\n     * });\n     * // => 2\n     *\n     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n     *   return this.wordToNumber[word];\n     * }, dict);\n     * // => 2\n     */\n    function sortedIndex(array, value, callback, thisArg) {\n      var low = 0,\n          high = array ? array.length : low;\n\n      // explicitly reference `identity` for better inlining in Firefox\n      callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;\n      value = callback(value);\n\n      while (low < high) {\n        var mid = (low + high) >>> 1;\n        (callback(array[mid]) < value)\n          ? low = mid + 1\n          : high = mid;\n      }\n      return low;\n    }\n\n    /**\n     * Computes the union of the passed-in arrays using strict equality for\n     * comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} [array1, array2, ...] Arrays to process.\n     * @returns {Array} Returns a new array of unique values, in order, that are\n     *  present in one or more of the arrays.\n     * @example\n     *\n     * _.union([1, 2, 3], [101, 2, 1, 10], [2, 1]);\n     * // => [1, 2, 3, 101, 10]\n     */\n    function union(array) {\n      if (!isArray(array)) {\n        arguments[0] = array ? nativeSlice.call(array) : arrayRef;\n      }\n      return uniq(concat.apply(arrayRef, arguments));\n    }\n\n    /**\n     * Creates a duplicate-value-free version of the `array` using strict equality\n     * for comparisons, i.e. `===`. If the `array` is already sorted, passing `true`\n     * for `isSorted` will run a faster algorithm. If `callback` is passed, each\n     * element of `array` is passed through the `callback` before uniqueness is computed.\n     * The `callback` is bound to `thisArg` and invoked with three arguments; (value, index, array).\n     *\n     * If a property name is passed for `callback`, the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is passed for `callback`, the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias unique\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @param {Boolean} [isSorted=false] A flag to indicate that the `array` is already sorted.\n     * @param {Function|Object|String} [callback=identity] The function called per\n     *  iteration. If a property name or object is passed, it will be used to create\n     *  a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a duplicate-value-free array.\n     * @example\n     *\n     * _.uniq([1, 2, 1, 3, 1]);\n     * // => [1, 2, 3]\n     *\n     * _.uniq([1, 1, 2, 2, 3], true);\n     * // => [1, 2, 3]\n     *\n     * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });\n     * // => ['A', 'b', 'C']\n     *\n     * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);\n     * // => [1, 2.5, 3]\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var uniq = overloadWrapper(function(array, isSorted, callback) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          result = [];\n\n      var isLarge = !isSorted && length >= largeArraySize && indexOf === basicIndexOf,\n          seen = (callback || isLarge) ? getArray() : result;\n\n      if (isLarge) {\n        var cache = createCache(seen);\n        if (cache) {\n          indexOf = cacheIndexOf;\n          seen = cache;\n        } else {\n          isLarge = false;\n          seen = callback ? seen : (releaseArray(seen), result);\n        }\n      }\n      while (++index < length) {\n        var value = array[index],\n            computed = callback ? callback(value, index, array) : value;\n\n        if (isSorted\n              ? !index || seen[seen.length - 1] !== computed\n              : indexOf(seen, computed) < 0\n            ) {\n          if (callback || isLarge) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      if (isLarge) {\n        releaseArray(seen.array);\n        releaseObject(seen);\n      } else if (callback) {\n        releaseArray(seen);\n      }\n      return result;\n    });\n\n    /**\n     * The inverse of `_.zip`, this method splits groups of elements into arrays\n     * composed of elements from each group at their corresponding indexes.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @returns {Array} Returns a new array of the composed arrays.\n     * @example\n     *\n     * _.unzip([['moe', 30, true], ['larry', 40, false]]);\n     * // => [['moe', 'larry'], [30, 40], [true, false]];\n     */\n    function unzip(array) {\n      var index = -1,\n          length = array ? max(pluck(array, 'length')) : 0,\n          result = Array(length < 0 ? 0 : length);\n\n      while (++index < length) {\n        result[index] = pluck(array, index);\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all occurrences of the passed values removed using\n     * strict equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to filter.\n     * @param {Mixed} [value1, value2, ...] Values to remove.\n     * @returns {Array} Returns a new filtered array.\n     * @example\n     *\n     * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);\n     * // => [2, 3, 4]\n     */\n    function without(array) {\n      return difference(array, nativeSlice.call(arguments, 1));\n    }\n\n    /**\n     * Groups the elements of each array at their corresponding indexes. Useful for\n     * separate data sources that are coordinated through matching array indexes.\n     * For a matrix of nested arrays, `_.zip.apply(...)` can transpose the matrix\n     * in a similar fashion.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} [array1, array2, ...] Arrays to process.\n     * @returns {Array} Returns a new array of grouped elements.\n     * @example\n     *\n     * _.zip(['moe', 'larry'], [30, 40], [true, false]);\n     * // => [['moe', 30, true], ['larry', 40, false]]\n     */\n    function zip(array) {\n      return array ? unzip(arguments) : [];\n    }\n\n    /**\n     * Creates an object composed from arrays of `keys` and `values`. Pass either\n     * a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`, or\n     * two arrays, one of `keys` and one of corresponding `values`.\n     *\n     * @static\n     * @memberOf _\n     * @alias object\n     * @category Arrays\n     * @param {Array} keys The array of keys.\n     * @param {Array} [values=[]] The array of values.\n     * @returns {Object} Returns an object composed of the given keys and\n     *  corresponding values.\n     * @example\n     *\n     * _.zipObject(['moe', 'larry'], [30, 40]);\n     * // => { 'moe': 30, 'larry': 40 }\n     */\n    function zipObject(keys, values) {\n      var index = -1,\n          length = keys ? keys.length : 0,\n          result = {};\n\n      while (++index < length) {\n        var key = keys[index];\n        if (values) {\n          result[key] = values[index];\n        } else {\n          result[key[0]] = key[1];\n        }\n      }\n      return result;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * If `n` is greater than `0`, a function is created that is restricted to\n     * executing `func`, with the `this` binding and arguments of the created\n     * function, only after it is called `n` times. If `n` is less than `1`,\n     * `func` is executed immediately, without a `this` binding or additional\n     * arguments, and its result is returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Number} n The number of times the function must be called before\n     * it is executed.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var renderNotes = _.after(notes.length, render);\n     * _.forEach(notes, function(note) {\n     *   note.asyncSave({ 'success': renderNotes });\n     * });\n     * // `renderNotes` is run once, after all notes have saved\n     */\n    function after(n, func) {\n      if (n < 1) {\n        return func();\n      }\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that, when called, invokes `func` with the `this`\n     * binding of `thisArg` and prepends any additional `bind` arguments to those\n     * passed to the bound function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to bind.\n     * @param {Mixed} [thisArg] The `this` binding of `func`.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var func = function(greeting) {\n     *   return greeting + ' ' + this.name;\n     * };\n     *\n     * func = _.bind(func, { 'name': 'moe' }, 'hi');\n     * func();\n     * // => 'hi moe'\n     */\n    function bind(func, thisArg) {\n      // use `Function#bind` if it exists and is fast\n      // (in V8 `Function#bind` is slower except when partially applied)\n      return support.fastBind || (nativeBind && arguments.length > 2)\n        ? nativeBind.call.apply(nativeBind, arguments)\n        : createBound(func, thisArg, nativeSlice.call(arguments, 2));\n    }\n\n    /**\n     * Binds methods on `object` to `object`, overwriting the existing method.\n     * Method names may be specified as individual arguments or as arrays of method\n     * names. If no method names are provided, all the function properties of `object`\n     * will be bound.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {String} [methodName1, methodName2, ...] Method names on the object to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *  'label': 'docs',\n     *  'onClick': function() { alert('clicked ' + this.label); }\n     * };\n     *\n     * _.bindAll(view);\n     * jQuery('#docs').on('click', view.onClick);\n     * // => alerts 'clicked docs', when the button is clicked\n     */\n    function bindAll(object) {\n      var funcs = arguments.length > 1 ? concat.apply(arrayRef, nativeSlice.call(arguments, 1)) : functions(object),\n          index = -1,\n          length = funcs.length;\n\n      while (++index < length) {\n        var key = funcs[index];\n        object[key] = bind(object[key], object);\n      }\n      return object;\n    }\n\n    /**\n     * Creates a function that, when called, invokes the method at `object[key]`\n     * and prepends any additional `bindKey` arguments to those passed to the bound\n     * function. This method differs from `_.bind` by allowing bound functions to\n     * reference methods that will be redefined or don't yet exist.\n     * See http://michaux.ca/articles/lazy-function-definition-pattern.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Object} object The object the method belongs to.\n     * @param {String} key The key of the method.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'name': 'moe',\n     *   'greet': function(greeting) {\n     *     return greeting + ' ' + this.name;\n     *   }\n     * };\n     *\n     * var func = _.bindKey(object, 'greet', 'hi');\n     * func();\n     * // => 'hi moe'\n     *\n     * object.greet = function(greeting) {\n     *   return greeting + ', ' + this.name + '!';\n     * };\n     *\n     * func();\n     * // => 'hi, moe!'\n     */\n    function bindKey(object, key) {\n      return createBound(object, key, nativeSlice.call(arguments, 2), indicatorObject);\n    }\n\n    /**\n     * Creates a function that is the composition of the passed functions,\n     * where each function consumes the return value of the function that follows.\n     * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.\n     * Each function is executed with the `this` binding of the composed function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} [func1, func2, ...] Functions to compose.\n     * @returns {Function} Returns the new composed function.\n     * @example\n     *\n     * var greet = function(name) { return 'hi ' + name; };\n     * var exclaim = function(statement) { return statement + '!'; };\n     * var welcome = _.compose(exclaim, greet);\n     * welcome('moe');\n     * // => 'hi moe!'\n     */\n    function compose() {\n      var funcs = arguments;\n      return function() {\n        var args = arguments,\n            length = funcs.length;\n\n        while (length--) {\n          args = [funcs[length].apply(this, args)];\n        }\n        return args[0];\n      };\n    }\n\n    /**\n     * Produces a callback bound to an optional `thisArg`. If `func` is a property\n     * name, the created callback will return the property value for a given element.\n     * If `func` is an object, the created callback will return `true` for elements\n     * that contain the equivalent object properties, otherwise it will return `false`.\n     *\n     * Note: All Lo-Dash methods, that accept a `callback` argument, use `_.createCallback`.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Mixed} [func=identity] The value to convert to a callback.\n     * @param {Mixed} [thisArg] The `this` binding of the created callback.\n     * @param {Number} [argCount=3] The number of arguments the callback accepts.\n     * @returns {Function} Returns a callback function.\n     * @example\n     *\n     * var stooges = [\n     *   { 'name': 'moe', 'age': 40 },\n     *   { 'name': 'larry', 'age': 50 }\n     * ];\n     *\n     * // wrap to create custom callback shorthands\n     * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {\n     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);\n     *   return !match ? func(callback, thisArg) : function(object) {\n     *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];\n     *   };\n     * });\n     *\n     * _.filter(stooges, 'age__gt45');\n     * // => [{ 'name': 'larry', 'age': 50 }]\n     *\n     * // create mixins with support for \"_.pluck\" and \"_.where\" callback shorthands\n     * _.mixin({\n     *   'toLookup': function(collection, callback, thisArg) {\n     *     callback = _.createCallback(callback, thisArg);\n     *     return _.reduce(collection, function(result, value, index, collection) {\n     *       return (result[callback(value, index, collection)] = value, result);\n     *     }, {});\n     *   }\n     * });\n     *\n     * _.toLookup(stooges, 'name');\n     * // => { 'moe': { 'name': 'moe', 'age': 40 }, 'larry': { 'name': 'larry', 'age': 50 } }\n     */\n    function createCallback(func, thisArg, argCount) {\n      if (func == null) {\n        return identity;\n      }\n      var type = typeof func;\n      if (type != 'function') {\n        if (type != 'object') {\n          return function(object) {\n            return object[func];\n          };\n        }\n        var props = keys(func);\n        return function(object) {\n          var length = props.length,\n              result = false;\n          while (length--) {\n            if (!(result = isEqual(object[props[length]], func[props[length]], indicatorObject))) {\n              break;\n            }\n          }\n          return result;\n        };\n      }\n      if (typeof thisArg == 'undefined' || (reThis && !reThis.test(fnToString.call(func)))) {\n        return func;\n      }\n      if (argCount === 1) {\n        return function(value) {\n          return func.call(thisArg, value);\n        };\n      }\n      if (argCount === 2) {\n        return function(a, b) {\n          return func.call(thisArg, a, b);\n        };\n      }\n      if (argCount === 4) {\n        return function(accumulator, value, index, collection) {\n          return func.call(thisArg, accumulator, value, index, collection);\n        };\n      }\n      return function(value, index, collection) {\n        return func.call(thisArg, value, index, collection);\n      };\n    }\n\n    /**\n     * Creates a function that will delay the execution of `func` until after\n     * `wait` milliseconds have elapsed since the last time it was invoked. Pass\n     * an `options` object to indicate that `func` should be invoked on the leading\n     * and/or trailing edge of the `wait` timeout. Subsequent calls to the debounced\n     * function will return the result of the last `func` call.\n     *\n     * Note: If `leading` and `trailing` options are `true`, `func` will be called\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to debounce.\n     * @param {Number} wait The number of milliseconds to delay.\n     * @param {Object} options The options object.\n     *  [leading=false] A boolean to specify execution on the leading edge of the timeout.\n     *  [maxWait] The maximum time `func` is allowed to be delayed before it's called.\n     *  [trailing=true] A boolean to specify execution on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * var lazyLayout = _.debounce(calculateLayout, 300);\n     * jQuery(window).on('resize', lazyLayout);\n     *\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 200, {\n     *   'leading': true,\n     *   'trailing': false\n     * });\n     */\n    function debounce(func, wait, options) {\n      var args,\n          result,\n          thisArg,\n          callCount = 0,\n          lastCalled = 0,\n          maxWait = false,\n          maxTimeoutId = null,\n          timeoutId = null,\n          trailing = true;\n\n      function clear() {\n        clearTimeout(maxTimeoutId);\n        clearTimeout(timeoutId);\n        callCount = 0;\n        maxTimeoutId = timeoutId = null;\n      }\n\n      function delayed() {\n        var isCalled = trailing && (!leading || callCount > 1);\n        clear();\n        if (isCalled) {\n          if (maxWait !== false) {\n            lastCalled = new Date;\n          }\n          result = func.apply(thisArg, args);\n        }\n      }\n\n      function maxDelayed() {\n        clear();\n        if (trailing || (maxWait !== wait)) {\n          lastCalled = new Date;\n          result = func.apply(thisArg, args);\n        }\n      }\n\n      wait = nativeMax(0, wait || 0);\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = options.leading;\n        maxWait = 'maxWait' in options && nativeMax(wait, options.maxWait || 0);\n        trailing = 'trailing' in options ? options.trailing : trailing;\n      }\n      return function() {\n        args = arguments;\n        thisArg = this;\n        callCount++;\n\n        // avoid issues with Titanium and `undefined` timeout ids\n        // https://github.com/appcelerator/titanium_mobile/blob/3_1_0_GA/android/titanium/src/java/ti/modules/titanium/TitaniumModule.java#L185-L192\n        clearTimeout(timeoutId);\n\n        if (maxWait === false) {\n          if (leading && callCount < 2) {\n            result = func.apply(thisArg, args);\n          }\n        } else {\n          var now = new Date;\n          if (!maxTimeoutId && !leading) {\n            lastCalled = now;\n          }\n          var remaining = maxWait - (now - lastCalled);\n          if (remaining <= 0) {\n            clearTimeout(maxTimeoutId);\n            maxTimeoutId = null;\n            lastCalled = now;\n            result = func.apply(thisArg, args);\n          }\n          else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Defers executing the `func` function until the current call stack has cleared.\n     * Additional arguments will be passed to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to defer.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.\n     * @returns {Number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function() { alert('deferred'); });\n     * // returns from the function before `alert` is called\n     */\n    function defer(func) {\n      var args = nativeSlice.call(arguments, 1);\n      return setTimeout(function() { func.apply(undefined, args); }, 1);\n    }\n    // use `setImmediate` if it's available in Node.js\n    if (isV8 && freeModule && typeof setImmediate == 'function') {\n      defer = bind(setImmediate, context);\n    }\n\n    /**\n     * Executes the `func` function after `wait` milliseconds. Additional arguments\n     * will be passed to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to delay.\n     * @param {Number} wait The number of milliseconds to delay execution.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.\n     * @returns {Number} Returns the timer id.\n     * @example\n     *\n     * var log = _.bind(console.log, console);\n     * _.delay(log, 1000, 'logged later');\n     * // => 'logged later' (Appears after one second.)\n     */\n    function delay(func, wait) {\n      var args = nativeSlice.call(arguments, 2);\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * passed, it will be used to determine the cache key for storing the result\n     * based on the arguments passed to the memoized function. By default, the first\n     * argument passed to the memoized function is used as the cache key. The `func`\n     * is executed with the `this` binding of the memoized function. The result\n     * cache is exposed as the `cache` property on the memoized function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] A function used to resolve the cache key.\n     * @returns {Function} Returns the new memoizing function.\n     * @example\n     *\n     * var fibonacci = _.memoize(function(n) {\n     *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n     * });\n     */\n    function memoize(func, resolver) {\n      function memoized() {\n        var cache = memoized.cache,\n            key = keyPrefix + (resolver ? resolver.apply(this, arguments) : arguments[0]);\n\n        return hasOwnProperty.call(cache, key)\n          ? cache[key]\n          : (cache[key] = func.apply(this, arguments));\n      }\n      memoized.cache = {};\n      return memoized;\n    }\n\n    /**\n     * Creates a function that is restricted to execute `func` once. Repeat calls to\n     * the function will return the value of the first call. The `func` is executed\n     * with the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // `initialize` executes `createApplication` once\n     */\n    function once(func) {\n      var ran,\n          result;\n\n      return function() {\n        if (ran) {\n          return result;\n        }\n        ran = true;\n        result = func.apply(this, arguments);\n\n        // clear the `func` variable so the function may be garbage collected\n        func = null;\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that, when called, invokes `func` with any additional\n     * `partial` arguments prepended to those passed to the new function. This\n     * method is similar to `_.bind`, except it does **not** alter the `this` binding.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) { return greeting + ' ' + name; };\n     * var hi = _.partial(greet, 'hi');\n     * hi('moe');\n     * // => 'hi moe'\n     */\n    function partial(func) {\n      return createBound(func, nativeSlice.call(arguments, 1));\n    }\n\n    /**\n     * This method is similar to `_.partial`, except that `partial` arguments are\n     * appended to those passed to the new function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var defaultsDeep = _.partialRight(_.merge, _.defaults);\n     *\n     * var options = {\n     *   'variable': 'data',\n     *   'imports': { 'jq': $ }\n     * };\n     *\n     * defaultsDeep(options, _.templateSettings);\n     *\n     * options.variable\n     * // => 'data'\n     *\n     * options.imports\n     * // => { '_': _, 'jq': $ }\n     */\n    function partialRight(func) {\n      return createBound(func, nativeSlice.call(arguments, 1), null, indicatorObject);\n    }\n\n    /**\n     * Creates a function that, when executed, will only call the `func` function\n     * at most once per every `wait` milliseconds. Pass an `options` object to\n     * indicate that `func` should be invoked on the leading and/or trailing edge\n     * of the `wait` timeout. Subsequent calls to the throttled function will\n     * return the result of the last `func` call.\n     *\n     * Note: If `leading` and `trailing` options are `true`, `func` will be called\n     * on the trailing edge of the timeout only if the the throttled function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to throttle.\n     * @param {Number} wait The number of milliseconds to throttle executions to.\n     * @param {Object} options The options object.\n     *  [leading=true] A boolean to specify execution on the leading edge of the timeout.\n     *  [trailing=true] A boolean to specify execution on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * var throttled = _.throttle(updatePosition, 100);\n     * jQuery(window).on('scroll', throttled);\n     *\n     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {\n     *   'trailing': false\n     * }));\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (options === false) {\n        leading = false;\n      } else if (isObject(options)) {\n        leading = 'leading' in options ? options.leading : leading;\n        trailing = 'trailing' in options ? options.trailing : trailing;\n      }\n      options = getObject();\n      options.leading = leading;\n      options.maxWait = wait;\n      options.trailing = trailing;\n\n      var result = debounce(func, wait, options);\n      releaseObject(options);\n      return result;\n    }\n\n    /**\n     * Creates a function that passes `value` to the `wrapper` function as its\n     * first argument. Additional arguments passed to the function are appended\n     * to those passed to the `wrapper` function. The `wrapper` is executed with\n     * the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Mixed} value The value to wrap.\n     * @param {Function} wrapper The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var hello = function(name) { return 'hello ' + name; };\n     * hello = _.wrap(hello, function(func) {\n     *   return 'before, ' + func('moe') + ', after';\n     * });\n     * hello();\n     * // => 'before, hello moe, after'\n     */\n    function wrap(value, wrapper) {\n      return function() {\n        var args = [value];\n        push.apply(args, arguments);\n        return wrapper.apply(this, args);\n      };\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Converts the characters `&`, `<`, `>`, `\"`, and `'` in `string` to their\n     * corresponding HTML entities.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {String} string The string to escape.\n     * @returns {String} Returns the escaped string.\n     * @example\n     *\n     * _.escape('Moe, Larry & Curly');\n     * // => 'Moe, Larry &amp; Curly'\n     */\n    function escape(string) {\n      return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);\n    }\n\n    /**\n     * This method returns the first argument passed to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Mixed} value Any value.\n     * @returns {Mixed} Returns `value`.\n     * @example\n     *\n     * var moe = { 'name': 'moe' };\n     * moe === _.identity(moe);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Adds functions properties of `object` to the `lodash` function and chainable\n     * wrapper.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Object} object The object of function properties to add to `lodash`.\n     * @example\n     *\n     * _.mixin({\n     *   'capitalize': function(string) {\n     *     return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n     *   }\n     * });\n     *\n     * _.capitalize('moe');\n     * // => 'Moe'\n     *\n     * _('moe').capitalize();\n     * // => 'Moe'\n     */\n    function mixin(object) {\n      forEach(functions(object), function(methodName) {\n        var func = lodash[methodName] = object[methodName];\n\n        lodash.prototype[methodName] = function() {\n          var value = this.__wrapped__,\n              args = [value];\n\n          push.apply(args, arguments);\n          var result = func.apply(lodash, args);\n          return (value && typeof value == 'object' && value === result)\n            ? this\n            : new lodashWrapper(result);\n        };\n      });\n    }\n\n    /**\n     * Reverts the '_' variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      context._ = oldDash;\n      return this;\n    }\n\n    /**\n     * Converts the given `value` into an integer of the specified `radix`.\n     * If `radix` is `undefined` or `0`, a `radix` of `10` is used unless the\n     * `value` is a hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * Note: This method avoids differences in native ES3 and ES5 `parseInt`\n     * implementations. See http://es5.github.com/#E.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {String} value The value to parse.\n     * @param {Number} [radix] The radix used to interpret the value to parse.\n     * @returns {Number} Returns the new integer value.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     */\n    var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function(value, radix) {\n      // Firefox and Opera still follow the ES3 specified implementation of `parseInt`\n      return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);\n    };\n\n    /**\n     * Produces a random number between `min` and `max` (inclusive). If only one\n     * argument is passed, a number between `0` and the given number will be returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Number} [min=0] The minimum possible value.\n     * @param {Number} [max=1] The maximum possible value.\n     * @returns {Number} Returns a random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => a number between 0 and 5\n     *\n     * _.random(5);\n     * // => also a number between 0 and 5\n     */\n    function random(min, max) {\n      if (min == null && max == null) {\n        max = 1;\n      }\n      min = +min || 0;\n      if (max == null) {\n        max = min;\n        min = 0;\n      } else {\n        max = +max || 0;\n      }\n      var rand = nativeRandom();\n      return (min % 1 || max % 1)\n        ? min + nativeMin(rand * (max - min + parseFloat('1e-' + ((rand +'').length - 1))), max)\n        : min + floor(rand * (max - min + 1));\n    }\n\n    /**\n     * Resolves the value of `property` on `object`. If `property` is a function,\n     * it will be invoked with the `this` binding of `object` and its result returned,\n     * else the property value is returned. If `object` is falsey, then `undefined`\n     * is returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Object} object The object to inspect.\n     * @param {String} property The property to get the value of.\n     * @returns {Mixed} Returns the resolved value.\n     * @example\n     *\n     * var object = {\n     *   'cheese': 'crumpets',\n     *   'stuff': function() {\n     *     return 'nonsense';\n     *   }\n     * };\n     *\n     * _.result(object, 'cheese');\n     * // => 'crumpets'\n     *\n     * _.result(object, 'stuff');\n     * // => 'nonsense'\n     */\n    function result(object, property) {\n      var value = object ? object[property] : undefined;\n      return isFunction(value) ? object[property]() : value;\n    }\n\n    /**\n     * A micro-templating method that handles arbitrary delimiters, preserves\n     * whitespace, and correctly escapes quotes within interpolated code.\n     *\n     * Note: In the development build, `_.template` utilizes sourceURLs for easier\n     * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n     *\n     * For more information on precompiling templates see:\n     * http://lodash.com/#custom-builds\n     *\n     * For more information on Chrome extension sandboxes see:\n     * http://developer.chrome.com/stable/extensions/sandboxingEval.html\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {String} text The template text.\n     * @param {Object} data The data object used to populate the text.\n     * @param {Object} options The options object.\n     *  escape - The \"escape\" delimiter regexp.\n     *  evaluate - The \"evaluate\" delimiter regexp.\n     *  interpolate - The \"interpolate\" delimiter regexp.\n     *  sourceURL - The sourceURL of the template's compiled source.\n     *  variable - The data object variable name.\n     * @returns {Function|String} Returns a compiled function when no `data` object\n     *  is given, else it returns the interpolated text.\n     * @example\n     *\n     * // using a compiled template\n     * var compiled = _.template('hello <%= name %>');\n     * compiled({ 'name': 'moe' });\n     * // => 'hello moe'\n     *\n     * var list = '<% _.forEach(people, function(name) { %><li><%= name %></li><% }); %>';\n     * _.template(list, { 'people': ['moe', 'larry'] });\n     * // => '<li>moe</li><li>larry</li>'\n     *\n     * // using the \"escape\" delimiter to escape HTML in data property values\n     * _.template('<b><%- value %></b>', { 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // using the ES6 delimiter as an alternative to the default \"interpolate\" delimiter\n     * _.template('hello ${ name }', { 'name': 'curly' });\n     * // => 'hello curly'\n     *\n     * // using the internal `print` function in \"evaluate\" delimiters\n     * _.template('<% print(\"hello \" + epithet); %>!', { 'epithet': 'stooge' });\n     * // => 'hello stooge!'\n     *\n     * // using custom template delimiters\n     * _.templateSettings = {\n     *   'interpolate': /{{([\\s\\S]+?)}}/g\n     * };\n     *\n     * _.template('hello {{ name }}!', { 'name': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // using the `sourceURL` option to specify a custom sourceURL for the template\n     * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector\n     *\n     * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n     * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     *   var __t, __p = '', __e = _.escape;\n     *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';\n     *   return __p;\n     * }\n     *\n     * // using the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and a stack trace\n     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(text, data, options) {\n      // based on John Resig's `tmpl` implementation\n      // http://ejohn.org/blog/javascript-micro-templating/\n      // and Laura Doktorova's doT.js\n      // https://github.com/olado/doT\n      var settings = lodash.templateSettings;\n      text || (text = '');\n\n      // avoid missing dependencies when `iteratorTemplate` is not defined\n      options = iteratorTemplate ? defaults({}, options, settings) : settings;\n\n      var imports = iteratorTemplate && defaults({}, options.imports, settings.imports),\n          importsKeys = iteratorTemplate ? keys(imports) : ['_'],\n          importsValues = iteratorTemplate ? values(imports) : [lodash];\n\n      var isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // compile the regexp to match each delimiter\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      text.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // escape characters that cannot be included in string literals\n        source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // replace delimiters with snippets\n        if (escapeValue) {\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // the JS engine embedded in Adobe products requires returning the `match`\n        // string in order to produce the correct `offset` value\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // if `variable` is not specified, wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain\n      var variable = options.variable,\n          hasVariable = variable;\n\n      if (!hasVariable) {\n        variable = 'obj';\n        source = 'with (' + variable + ') {\\n' + source + '\\n}\\n';\n      }\n      // cleanup code by stripping empty strings\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // frame code as the function body\n      source = 'function(' + variable + ') {\\n' +\n        (hasVariable ? '' : variable + ' || (' + variable + ' = {});\\n') +\n        \"var __t, __p = '', __e = _.escape\" +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      // Use a sourceURL for easier debugging and wrap in a multi-line comment to\n      // avoid issues with Narwhal, IE conditional compilation, and the JS engine\n      // embedded in Adobe products.\n      // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n      var sourceURL = '\\n/*\\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\\n*/';\n\n      try {\n        var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);\n      } catch(e) {\n        e.source = source;\n        throw e;\n      }\n      if (data) {\n        return result(data);\n      }\n      // provide the compiled function's source via its `toString` method, in\n      // supported environments, or the `source` property as a convenience for\n      // inlining compiled templates during the build process\n      result.source = source;\n      return result;\n    }\n\n    /**\n     * Executes the `callback` function `n` times, returning an array of the results\n     * of each `callback` execution. The `callback` is bound to `thisArg` and invoked\n     * with one argument; (index).\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Number} n The number of times to execute the callback.\n     * @param {Function} callback The function called per iteration.\n     * @param {Mixed} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of the results of each `callback` execution.\n     * @example\n     *\n     * var diceRolls = _.times(3, _.partial(_.random, 1, 6));\n     * // => [3, 6, 4]\n     *\n     * _.times(3, function(n) { mage.castSpell(n); });\n     * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively\n     *\n     * _.times(3, function(n) { this.cast(n); }, mage);\n     * // => also calls `mage.castSpell(n)` three times\n     */\n    function times(n, callback, thisArg) {\n      n = (n = +n) > -1 ? n : 0;\n      var index = -1,\n          result = Array(n);\n\n      callback = lodash.createCallback(callback, thisArg, 1);\n      while (++index < n) {\n        result[index] = callback(index);\n      }\n      return result;\n    }\n\n    /**\n     * The inverse of `_.escape`, this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their\n     * corresponding characters.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {String} string The string to unescape.\n     * @returns {String} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('Moe, Larry &amp; Curly');\n     * // => 'Moe, Larry & Curly'\n     */\n    function unescape(string) {\n      return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is passed, the ID will be appended to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {String} [prefix] The value to prefix the ID with.\n     * @returns {String} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return String(prefix == null ? '' : prefix) + id;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Invokes `interceptor` with the `value` as the first argument, and then\n     * returns `value`. The purpose of this method is to \"tap into\" a method chain,\n     * in order to perform operations on intermediate results within the chain.\n     *\n     * @static\n     * @memberOf _\n     * @category Chaining\n     * @param {Mixed} value The value to pass to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {Mixed} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3, 4])\n     *  .filter(function(num) { return num % 2 == 0; })\n     *  .tap(alert)\n     *  .map(function(num) { return num * num; })\n     *  .value();\n     * // => // [2, 4] (alerted)\n     * // => [4, 16]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * Produces the `toString` result of the wrapped value.\n     *\n     * @name toString\n     * @memberOf _\n     * @category Chaining\n     * @returns {String} Returns the string result.\n     * @example\n     *\n     * _([1, 2, 3]).toString();\n     * // => '1,2,3'\n     */\n    function wrapperToString() {\n      return String(this.__wrapped__);\n    }\n\n    /**\n     * Extracts the wrapped value.\n     *\n     * @name valueOf\n     * @memberOf _\n     * @alias value\n     * @category Chaining\n     * @returns {Mixed} Returns the wrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).valueOf();\n     * // => [1, 2, 3]\n     */\n    function wrapperValueOf() {\n      return this.__wrapped__;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions that return wrapped values when chaining\n    lodash.after = after;\n    lodash.assign = assign;\n    lodash.at = at;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.compact = compact;\n    lodash.compose = compose;\n    lodash.countBy = countBy;\n    lodash.createCallback = createCallback;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.filter = filter;\n    lodash.flatten = flatten;\n    lodash.forEach = forEach;\n    lodash.forIn = forIn;\n    lodash.forOwn = forOwn;\n    lodash.functions = functions;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.invert = invert;\n    lodash.invoke = invoke;\n    lodash.keys = keys;\n    lodash.map = map;\n    lodash.max = max;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.min = min;\n    lodash.omit = omit;\n    lodash.once = once;\n    lodash.pairs = pairs;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.pick = pick;\n    lodash.pluck = pluck;\n    lodash.range = range;\n    lodash.reject = reject;\n    lodash.rest = rest;\n    lodash.shuffle = shuffle;\n    lodash.sortBy = sortBy;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.times = times;\n    lodash.toArray = toArray;\n    lodash.transform = transform;\n    lodash.union = union;\n    lodash.uniq = uniq;\n    lodash.unzip = unzip;\n    lodash.values = values;\n    lodash.where = where;\n    lodash.without = without;\n    lodash.wrap = wrap;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n\n    // add aliases\n    lodash.collect = map;\n    lodash.drop = rest;\n    lodash.each = forEach;\n    lodash.extend = assign;\n    lodash.methods = functions;\n    lodash.object = zipObject;\n    lodash.select = filter;\n    lodash.tail = rest;\n    lodash.unique = uniq;\n\n    // add functions to `lodash.prototype`\n    mixin(lodash);\n\n    // add Underscore compat\n    lodash.chain = lodash;\n    lodash.prototype.chain = function() { return this; };\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions that return unwrapped values when chaining\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.contains = contains;\n    lodash.escape = escape;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.has = has;\n    lodash.identity = identity;\n    lodash.indexOf = indexOf;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isBoolean = isBoolean;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isNaN = isNaN;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isString = isString;\n    lodash.isUndefined = isUndefined;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.mixin = mixin;\n    lodash.noConflict = noConflict;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.result = result;\n    lodash.runInContext = runInContext;\n    lodash.size = size;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.template = template;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n\n    // add aliases\n    lodash.all = every;\n    lodash.any = some;\n    lodash.detect = find;\n    lodash.findWhere = find;\n    lodash.foldl = reduce;\n    lodash.foldr = reduceRight;\n    lodash.include = contains;\n    lodash.inject = reduce;\n\n    forOwn(lodash, function(func, methodName) {\n      if (!lodash.prototype[methodName]) {\n        lodash.prototype[methodName] = function() {\n          var args = [this.__wrapped__];\n          push.apply(args, arguments);\n          return func.apply(lodash, args);\n        };\n      }\n    });\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions capable of returning wrapped and unwrapped values when chaining\n    lodash.first = first;\n    lodash.last = last;\n\n    // add aliases\n    lodash.take = first;\n    lodash.head = first;\n\n    forOwn(lodash, function(func, methodName) {\n      if (!lodash.prototype[methodName]) {\n        lodash.prototype[methodName]= function(callback, thisArg) {\n          var result = func(this.__wrapped__, callback, thisArg);\n          return callback == null || (thisArg && typeof callback != 'function')\n            ? result\n            : new lodashWrapper(result);\n        };\n      }\n    });\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type String\n     */\n    lodash.VERSION = '1.3.1';\n\n    // add \"Chaining\" functions to the wrapper\n    lodash.prototype.toString = wrapperToString;\n    lodash.prototype.value = wrapperValueOf;\n    lodash.prototype.valueOf = wrapperValueOf;\n\n    // add `Array` functions that return unwrapped values\n    basicEach(['join', 'pop', 'shift'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        return func.apply(this.__wrapped__, arguments);\n      };\n    });\n\n    // add `Array` functions that return the wrapped value\n    basicEach(['push', 'reverse', 'sort', 'unshift'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        func.apply(this.__wrapped__, arguments);\n        return this;\n      };\n    });\n\n    // add `Array` functions that return new wrapped values\n    basicEach(['concat', 'slice', 'splice'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        return new lodashWrapper(func.apply(this.__wrapped__, arguments));\n      };\n    });\n\n    // avoid array-like object bugs with `Array#shift` and `Array#splice`\n    // in Firefox < 10 and IE < 9\n    if (!support.spliceObjects) {\n      basicEach(['pop', 'shift', 'splice'], function(methodName) {\n        var func = arrayRef[methodName],\n            isSplice = methodName == 'splice';\n\n        lodash.prototype[methodName] = function() {\n          var value = this.__wrapped__,\n              result = func.apply(value, arguments);\n\n          if (value.length === 0) {\n            delete value[0];\n          }\n          return isSplice ? new lodashWrapper(result) : result;\n        };\n      });\n    }\n\n    // add pseudo private property to be used and removed during the build process\n    lodash._basicEach = basicEach;\n    lodash._iteratorTemplate = iteratorTemplate;\n    lodash._shimKeys = shimKeys;\n\n    return lodash;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // expose Lo-Dash\n  var _ = runInContext();\n\n  // some AMD build optimizers, like r.js, check for specific condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lo-Dash to the global object even when an AMD loader is present in\n    // case Lo-Dash was injected by a third-party script and not intended to be\n    // loaded as a module. The global assignment can be reverted in the Lo-Dash\n    // module via its `noConflict()` method.\n    window._ = _;\n\n    // define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module\n    define('underscore',[],function() {\n      return _;\n    });\n  }\n  // check for `exports` after `define` in case a build optimizer adds an `exports` object\n  else if (freeExports && !freeExports.nodeType) {\n    // in Node.js or RingoJS v0.8.0+\n    if (freeModule) {\n      (freeModule.exports = _)._ = _;\n    }\n    // in Narwhal or RingoJS v0.7.0-\n    else {\n      freeExports._ = _;\n    }\n  }\n  else {\n    // in a browser or Rhino\n    window._ = _;\n  }\n}(this));\n\n//# sourceURL=/Users/dwarrowdelf/Sites/slp-frontend/public/components/lodash/lodash.js"),function(e,t,n){function i(e){return e}function s(e){return o(decodeURIComponent(e.replace(r," ")))}function o(e){return e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e}function u(e){return a.json?JSON.parse(e):e}var r=/\+/g,a=e.cookie=function(r,o,f){if(o!==n){f=e.extend({},a.defaults,f),o===null&&(f.expires=-1);if(typeof f.expires=="number"){var l=f.expires,c=f.expires=new Date;c.setDate(c.getDate()+l)}return o=a.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(r),"=",a.raw?o:encodeURIComponent(o),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}var h=a.raw?i:s,p=t.cookie.split("; "),d=r?null:{};for(var v=0,m=p.length;v<m;v++){var g=p[v].split("="),y=h(g.shift()),b=h(g.join("="));if(r&&r===y){d=u(b);break}r||(d[y]=u(b))}return d};a.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document),define("jquery.cookie",["jquery"],function(){}),eval("define('App.Environment',['jquery', 'underscore', 'jquery.cookie'], function ($, _, cookie) {\n	'use strict';\n\n	var env = {\n\n		// AJAX Header\n		header: {\n			accept: 'application/json',\n			contentType: 'application/json'\n		},\n		// Services\n		serviceVersion: 'v1',\n		serverRoot: '',\n		servicesBaseURI: 'api',\n		services: {\n			account: 'account',\n			accounts: 'accounts',\n			formData: 'formData',\n			formSchema: 'form/schema',\n			user: 'user'\n		},\n		// Locale\n		locale: {\n\n		},\n\n		// AJAX Pollers\n		pollers: {\n\n		},\n		// Analytics\n		analytics: {\n			enabled: false,\n			useQueue: true,\n			queueInterval: 3000\n		},\n		// Caching\n		cache: {\n			enabled: true,\n			cacheBuster: false\n		},\n		// Google Analytics\n		ga: {\n			accountId: '',\n			enabled: false,\n			varName: '_gaq'\n		},\n		// Debugging\n		debug: {\n			enabled: false\n		}\n	};\n\n	/*\n	 * URL = http://[serverRoot]/[servicesBaseURI]/[services]\n	 *\n	 * cache: Controls whether backbone will cache models\n	 *\n	 * debug: Controls whether the debug-console is enabled or disabled\n	 *\n	 */\n\n	return function (envOverride, global) {\n\n		// Extend override with Environment Settings\n		_.merge(env, envOverride);\n\n		var root = env.serverRoot;\n		var base = env.servicesBaseURI;\n		var services = env.services;\n		var version = env.serviceVersion;\n\n		_.each(_.keys(services), function (service) {\n			services[service] = [root, base, version, services[service]].join('/');\n		});\n\n		// Environment Setting Cookies\n		var cookie = {\n			debug: $.cookie('slp-debug'),\n			session: $.cookie('slp-session')\n		};\n		env.session = cookie.session;\n\n		// AJAX\n		$.ajaxSetup({\n			beforeSend: function (xhr, settings) {\n				xhr.setRequestHeader('Accept', env.header.accept);\n			\n				if (settings.type === 'PUT' || settings.type === 'POST') {\n					xhr.setRequestHeader('Content-Type', env.header.contentType);\n				}\n			},\n			cache: !env.cache.cacheBuster\n		});\n\n		// Debugging\n		if (!(cookie.debug || env.debug.enabled) || !global.console) {\n			global.console = {\n				log: function () {}\n			};\n			if (_.isFunction(debug.setLevel)) {\n				debug.setLevel(0);\n			}\n		}\n\n		// Cache Buster\n		if (env.cache.cacheBuster) {\n			require.config({\n				urlArgs: '_=' + (+new Date())\n			});\n		}\n\n		// Goggle Analytics\n		env.ga.gaq = global._gaq = [];\n\n		return env;\n	};\n});\n//# sourceURL=/App.Environment.js"),eval("define('Config/local',['require'],function (require) {\n	'use strict';\n\n	// These are default developer overrides\n	// Copy this file to /src/environment.js\n	return {\n		analytics: {\n			enabled: false\n		},\n		cache: {\n			cacheBuster: true\n		},\n		debug: {\n			enabled: true\n		},\n		ga: {\n			enabled: false\n		}\n	};\n});\n//# sourceURL=/Config/local.js"),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),Backbone.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this),delete this._views[n],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(r){t.isFunction(r[e])&&r[e].apply(r,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(r,function(e){n.prototype[e]=function(){var n=t.values(this._views),r=[n].concat(t.toArray(arguments));return t[e].apply(t,r)}}),n}(Backbone,_),Backbone.Wreqr=function(e,t,n){var r={};return r.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var r=null;t.isObject(e)&&!t.isFunction(e)&&(r=e.context,e=e.callback),this.setHandler(n,e,r)},this)},setHandler:function(e,t,n){var r={callback:t,context:n};this._wreqrHandlers[e]=r,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),r.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),r.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,r){var i=this.storage.getCommands(e);n.each(i.instances,function(e){t.apply(r,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,r=e.storageType||this.storageType;n.isFunction(r)?t=new r:t=r,this.storage=t}})}(r),r.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(r),r.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),r}(Backbone,Backbone.Marionette,_);var Marionette=function(e,t,n){function s(e){return i.call(e)}function o(e,t){var n=new Error(e);throw n.name=t||"Error",n}var r={};t.Marionette=r,r.$=t.$;var i=Array.prototype.slice;return r.extend=t.Model.extend,r.getOption=function(e,t){if(!e||!t)return;var n;return e.options&&t in e.options&&e.options[t]!==undefined?n=e.options[t]:n=e[t],n},r.triggerMethod=function(){function t(e,t,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi,r=function(r){var i="on"+r.replace(e,t),s=this[i];this.trigger.apply(this,arguments);if(n.isFunction(s))return s.apply(this,n.tail(arguments))};return r}(),r.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,r(e)}function t(e){e._isRendered=!0,r(e)}function r(e){e._isShown&&e._isRendered&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){e(n)}),n.listenTo(n,"render",function(){t(n)})}}(),function(e){function t(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];i||o("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,r,i,e)})}function r(e,t,n,r){e.listenTo(t,n,r,e)}function i(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];e.stopListening(t,r,i,e)})}function s(e,t,n,r){e.stopListening(t,n,r,e)}function u(e,t,r,i,s){if(!t||!r)return;n.isFunction(r)&&(r=r.call(e)),n.each(r,function(r,o){n.isFunction(r)?i(e,t,o,r):s(e,t,o,r)})}e.bindEntityEvents=function(e,n,i){u(e,n,i,r,t)},e.unbindEntityEvents=function(e,t,n){u(e,t,n,s,i)}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},n.extend(r.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,r){t&&(n=t),e.call(n,r)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.triggerMethod=r.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,n.extend(r.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(e){this.options=e||{},this.el=r.getOption(this,"el");if(!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(r.Region,{buildRegion:function(e,t){var r=typeof e=="string",i=typeof e.selector=="string",s=typeof e.regionType=="undefined",o=typeof e=="function";if(!o&&!r&&!i)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var u,a;r&&(u=e),e.selector&&(u=e.selector),o&&(a=e),!o&&s&&(a=t),e.regionType&&(a=e.regionType);var f=new a({el:u});return e.parentEl&&(f.getEl=function(t){var r=e.parentEl;return n.isFunction(r)&&(r=r()),r.find(t)}),f}}),n.extend(r.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,r.triggerMethod.call(this,"show",e),r.triggerMethod.call(e,"show")},ensureEl:function(){if(!this.$el||this.$el.length===0)this.$el=this.getEl(this.el)},getEl:function(e){return r.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;if(!e||e.isClosed)return;e.close?e.close():e.remove&&e.remove(),r.triggerMethod.call(this,"close"),delete this.currentView},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var r={};return n.each(e,function(e,i){typeof e=="string"&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(i,e);r[i]=s},this),r},addRegion:function(t,r){var i,s=n.isObject(r),o=n.isString(r),u=!!r.selector;return o||s&&u?i=e.Region.buildRegion(r,e.Region):n.isFunction(r)?i=e.Region.buildRegion(r,e.Region):i=r,this._store(t,i),this.triggerMethod("region:add",t,i),i},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(r,function(e){t.prototype[e]=function(){var t=n.values(this._regions),r=[t].concat(n.toArray(arguments));return n[e].apply(n,r)}}),t}(r),r.TemplateCache=function(e){this.templateId=e},n.extend(r.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new r.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=r.$(e).html();return(!t||t.length===0)&&o("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),r.Renderer={render:function(e,t){if(!e){var n=new Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return typeof e=="function"?i=e:i=r.TemplateCache.get(e),i(t)}},r.View=t.View.extend({constructor:function(){n.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:r.triggerMethod,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=this.templateHelpers;return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},configureTriggers:function(){if(!this.triggers)return;var e={},t=n.result(this,"triggers");return n.each(t,function(t,n){e[n]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,n)}},this),e},delegateEvents:function(e){this._delegateDOMEvents(e),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var r={},i=this.configureTriggers();n.extend(r,e,i),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(this.isClosed)return;var e=this.triggerMethod("before:close");if(e===!1)return;this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove()},bindUIElements:function(){if(!this.ui)return;this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)},unbindUIElements:function(){if(!this.ui)return;n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings}}),r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,s(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=r.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){if(this.isClosed)return;this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,s(arguments)),this.triggerMethod("item:closed")}}),r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,s(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e,t,n){this.closeEmptyView();var r=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,r,i)},onShowCalled:function(){this.children.each(function(e){r.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=r.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(e){var t=r.getOption(this,"itemView");return t||o("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var s=r.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,e,i));var o=this.buildItemView(e,t,s);this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,i),this._isShown&&r.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o)},addChildViewEventForwarding:function(e){var t=r.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=s(arguments);n[0]=t+":"+n[0],n.splice(1,0,e),r.triggerMethod.apply(this,n)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,r){var i=n.extend({model:e},r);return new t(i)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){(!this.collection||this.collection.length===0)&&this.showEmptyView()},appendHtml:function(e,t,n){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){if(this.isClosed)return;this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,s(arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.prototype.constructor.apply(this,s(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(e){var t=r.getOption(this,"itemView")||this.constructor;return t||o("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return r.Renderer.render(t,e)},appendHtml:function(e,t,n){var r=this.getItemViewContainer(e);r.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t;if(e.itemViewContainer){var r=n.result(e,"itemViewContainer");t=e.$(r),t.length<=0&&o("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.prototype.constructor.call(this,e)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=r.ItemView.prototype.render.apply(this,e);return t},close:function(){if(this.isClosed)return;this.regionManager.close();var e=Array.prototype.slice.apply(arguments);r.ItemView.prototype.close.apply(this,e)},addRegion:function(e,t){var n={};return n[e]=t,this.addRegions(n)[e]},addRegions:function(e){return this.regions=n.extend(this.regions||{},e),this._buildRegions(e)},removeRegion:function(e){return this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),n.isFunction(this.regions)?t=this.regions(e):t=this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),r.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,s(arguments)),this.options=e;if(this.appRoutes){var n=r.getOption(this,"controller");this.processAppRoutes(n,this.appRoutes)}},processAppRoutes:function(e,t){var r=n.keys(t).reverse();n.each(r,function(r){var i=t[r],s=e[i];if(!s)throw new Error("Method '"+i+"' was not found on the controller");this.route(r,i,n.bind(s,e))},this)}}),r.Application=function(e){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=r.triggerMethod},n.extend(r.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},removeRegion:function(e){this._regionManager.removeRegion(e)},module:function(e,t){var n=s(arguments);return n.unshift(this),r.Module.create.apply(r.Module,n)},_initRegionManager:function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),r.Application.extend=r.extend,r.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=r.triggerMethod},n.extend(r.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){if(this._isInitialized)return;n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e)},stop:function(){if(!this._isInitialized)return;this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(undefined,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop")},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(!e)return;var s=n.flatten([this,this.app,t,r,r.$,n,i]);e.apply(this,s)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),n.extend(r.Module,{create:function(e,t,r){var i=e,o=s(arguments);o.splice(0,3),t=t.split(".");var u=t.length,a=[];return a[u-1]=r,n.each(t,function(t,n){var r=i;i=this._getModule(r,t,e),this._addModuleDefinition(r,i,a[n],o)},this),i},_getModule:function(e,t,n,i,s){var o=e[t];return o||(o=new r.Module(t,n),e[t]=o,e.submodules[t]=o),o},_addModuleDefinition:function(e,t,r,i){var s,o;n.isFunction(r)?(s=r,o=!0):n.isObject(r)?(s=r.define,o=r.startWithParent):o=!0,s&&t.addDefinition(s,i),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),r}(this,Backbone,_);define("marionette",["jquery","underscore","backbone"],function(e){return function(){var t,n;return t||e.Marionette}}(this)),eval("define('error',['require'],function (require){\n	'use strict';\n\n	var ErrorInstance = function (name, message){\n		this.name = name;\n		this.constructor = name;\n		this.message = message;\n	};\n	ErrorInstance.prototype = new Error();\n\n	return ErrorInstance;\n});\n\n//# sourceURL=/Shared/Utils/ErrorInstance.js"),window.debug=function(){function c(t){i&&(s||!n||!n.log)&&i.apply(e,t)}function h(e){return o>0?o>e:u.length+o<=e}var e=this,t=Array.prototype.slice,n=e.console,r={},i,s,o=9,u=["error","warn","info","debug","log"],a="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),f=a.length,l=[];while(--f>=0)(function(e){r[e]=function(){o!==0&&n&&n[e]&&n[e].apply(n,arguments)}})(a[f]);f=u.length;while(--f>=0)(function(i,s){r[s]=function(){var r=t.call(arguments),o=[s].concat(r);l.push(o),c(o);if(!n||!h(i))return;n.firebug?n[s].apply(e,r):n[s]?n[s](r):n.log(r)}})(f,u[f]);return r.setLevel=function(e){o=typeof e=="number"?e:9},r.setCallback=function(){var e=t.call(arguments),n=l.length,r=n;i=e.shift()||null,s=typeof e[0]=="boolean"?e.shift():!1,r-=typeof e[0]=="number"?e.shift():n;while(r<n)c(l[r++])},r}(),define("debug",function(){}),eval("define('Shared/Utils/Poller',['require','underscore','error'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var ErrorInstance = require('error');\n\n	function Poller(callback, interval, context) {\n		if (!_.isFunction(callback)) {\n			throw new ErrorInstance('InvalidArgumentException',\n				'Poller requires a callback function');\n		}\n		this.setInterval(interval);\n		this.callback = callback;\n		this.context = context || null;\n		this.timeout = null;\n		this.result = null;\n		this.pollCount = 0;\n		return this;\n	}\n	Poller.prototype = {\n		setInterval: function (interval) {\n			if (!_.isNumber(interval)) {\n				throw new ErrorInstance('InvalidArgumentException',\n					'Poller requires a numeric interval');\n			}\n			this.interval = interval;\n		},\n		start: function () {\n			if (!this.isPolling()) {\n				this.continuePolling = true;\n				this.result = this.callback.call(this.context);\n				this.poll();\n			}\n			return this;\n		},\n		stop: function () {\n			if (this.timeout) {\n				clearTimeout(this.timeout);\n				this.timeout = null;\n			}\n			this.continuePolling = false;\n			return this;\n		},\n		restart: function () {\n			if (this.isPolling()) {\n				this.stop();\n				this.start();\n			} else {\n				this.start();\n			}\n		},\n		isPolling: function () {\n			return !!this.continuePolling;\n		},\n		updateInterval: function (interval) {\n			if (this.interval !== interval) {\n				this.stop();\n				this.setInterval(interval);\n				this.start();\n			}\n			return this;\n		},\n		poll: function () {\n			var self = this;\n			if (this.isPolling()) {\n				this.pollCount = this.pollCount + 1;\n				this.timeout = setTimeout(function () {\n					self.result = self.callback.call(self.context);\n					if (self.continuePolling) {\n						self.poll();\n					}\n				}, this.interval);\n			}\n		},\n		getResult: function () {\n			return this.result;\n		}\n	};\n	return Poller;\n});\n//# sourceURL=/Shared/Utils/Poller.js"),eval("  define('Shared/Analytics/App.Analytics',['require','jquery','underscore','error','debug','Shared/Utils/Poller'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var ErrorInstance = require('error');\n	var debug = require('debug');\n\n	var Poller = require('Shared/Utils/Poller');\n\n	// var TrackTiming = require('Mixins/TrackTiming');\n\n	// Handle Internal Analytics Tracking\n\n	function Analytics(options) {\n\n\n		_.extend(this, options.ga);\n		this.url = options.services.analytics;\n		// this.multipleUrl = options.services.analyticsBatch;\n\n		this.initialTime = + new Date();\n		this.eventQueue = [];\n\n		// if (this.useQueue && this.enabled) {\n		// 	this.initQueue();\n		// }\n\n	}\n\n	Analytics.prototype = {\n\n\n\n		// addToQueue \n		// Add an event data object to the queue. Calculate a time offset for it in milliseconds based on the initial captured time.\n\n		enqueue: function (data) {\n			if (!this.enabled) {\n				return false;\n			}\n\n			if (this.initialTime === null) {\n				this.initialTime = new Date().getTime();\n				data.offsetTime = 0;\n			} else {\n				data.offsetTime = new Date().getTime() - this.initialTime;\n			}\n\n			if (App.SignupFlow) {\n				data.eventData.formId = App.Overridely.overrides.version;\n			}\n\n			this.eventQueue.push(data);\n			debug.info('<ANALYTICS> add to queue', data);\n		},\n\n		// processQueue\n		// Send the contents of the event queue to /api/tracks via a POST and reset the initial timestamp for offsets.\n\n		processQueue: function () {\n			var self = this;\n\n			if (this.eventQueue.length) {\n\n				debug.info('<ANALYTICS> process queue after ' + this.queueInterval + 'ms ',\n					this.eventQueue ? this.eventQueue : '[no events]');\n				// TODO: post data to server\n\n				var data = {\n					timeStamp: this.initialTime,\n					events: this.eventQueue\n				};\n\n				var queueJSON = JSON.stringify(data);\n\n				this.initialTime = null;\n\n				$.ajax({\n					url: this.multipleUrl,\n					type: 'POST',\n					data: queueJSON,\n					dataType: 'json',\n					success: _.bind(this._log, {\n						result: 'queue send success',\n						data: data\n					}),\n					error: _.bind(this._log, {\n						result: 'queue send failure',\n						data: data\n					})\n				});\n\n				delete this.eventQueue;\n				this.eventQueue = [];\n			}\n\n		},\n\n		// postToServer\n		// Send a single event data object to /api/track via a POST.\n\n		postToServer: function (data) {\n			var self = this;\n\n			$.ajax({\n				url: this.url,\n				type: 'POST',\n				data: JSON.stringify(data),\n				dataType: 'json',\n				success: _.bind(this._log, {\n					result: 'success',\n					data: data\n				}),\n				error: _.bind(this._log, {\n					result: 'failure',\n					data: data\n				})\n			});\n		},\n\n		_log: function () {\n			if (this.data) {\n				var eventData = _.reduce(this.data.eventData, function (memo, value) {\n					memo.push(value);\n					return memo;\n				}, []);\n\n				debug.info(['<ANALYTICS> (' + this.result + ')', this.data.eventType].concat(eventData).join(' : '));\n			}\n\n		},\n\n		decomposeTrigger: function (trigger, event) {\n\n			var t = trigger.split(':');\n\n			var triggerData = {\n				prefix: t.shift(),\n				data: {\n					eventType: t.shift(),\n					eventData: {\n						section: t.shift(),\n						name: t.shift()\n					}\n				}\n			};\n\n			if (event && event.pageX && event.pageY) {\n				_.extend(triggerData.data.eventData, {\n					coords: [event.pageX, event.pageY],\n					type: event.type\n				});\n				if (!this.useQueue)\n					triggerData.data.eventData.timeStamp = event.timeStamp;\n			}\n			return triggerData;\n		},\n\n		// trackEvent\n		// Manually send an event to the server with the specified type and an optional data object.\n		//\n		// Specify immediate parameter as true to bypass the event queue and send the event directly to the server.\n		//\n		// Example keys for data object:\n		//\n		// section, name, page\n\n		trackEvent: function (type, data, immediate) {\n			if (!data) {\n				data = {};\n			}\n\n			var triggerData = {\n				eventType: type,\n				eventData: data\n			};\n\n			this.prepareEvent(triggerData, immediate);\n		},\n\n\n		// prepareEvent\n		// Add an event to the queue or to the server, depending on settings. \n		// \n		// If options.useQueue = false or if the immediate parameter is passed as true, the event is sent straight to the server.\n\n		prepareEvent: function (data, immediate) {\n\n			if (this.useQueue && !immediate) {\n				this.addToQueue(data);\n			} else {\n				this.postToServer(data);\n			}\n\n		},\n\n		// dispatchTrigger\n		// Calls to this should be made in the format of:\n		// '_track:{eventType}:{section}:{name}'\n\n		dispatchTrigger: function (trigger, event, context) {\n\n			var triggerObj = this.decomposeTrigger(trigger, event);\n\n			// Filter and process triggers that begin with _track\n			if (this.enabled && triggerObj.prefix === '_track') {\n\n				// Look up trigger in triggerCodeMap to see if a custom block for handling the trigger exists\n				if (this.triggerCodeMap.hasOwnProperty(trigger)) {\n\n					// Execute that custom block if it exists\n					this.triggerCodeMap[trigger].apply(context || null);\n\n				} else if (this.triggerCodeMap.hasOwnProperty(triggerObj.data.eventType)) {\n\n					this.triggerCodeMap[triggerObj.data.eventType].apply(context || this, [trigger, triggerObj, event]);\n\n				} else {\n\n					// Otherwise, send it to the server as-is\n					this.prepareEvent(triggerObj.data);\n				}\n\n				// debug.info('ANALYTICS (trigger): ', trigger);\n			}\n\n		},\n\n		dispatchEvent: function (event) {\n			/*\n			 * if (this.enabled) { var e = event[0]; // var html = $(e.target)[0].outerHTML; var coords = [e.pageX,\n			 * e.pageY]; var type = e.type; var timestamp = e.timeStamp;\n			 *\n			 * debug.info('ANALYTICS (event): ', [type, '(' + coords.join(',') + ')', new Date(timestamp)].join(':')); }\n			 */\n		}\n	};\n	return Analytics;\n});\n//# sourceURL=/Shared/Analytics/App.Analytics.js"),eval("define('Shared/Analytics/App.GoogleAnalytics',['require','underscore','error'],function (require){\n	'use strict';\n\n	var _ = require('underscore');\n	var ErrorInstance = require('error');\n	// var TrackTiming = require('Shared/Utils/TrackTiming');\n\n	// Handle Google Analytics Tracking\n	function GoogleAnalytics (options){\n		this.gaq = options.gaq;\n		this.ga_enabled = options.enabled;\n		this.accountId = options.accountId;\n\n		if(this.ga_enabled){\n			if (!_.isArray(this.gaq)) {\n				throw new ErrorInstance('GoogleAnalyticsNotFoundError', 'window._gaq not present');\n			}\n			this.initialize();\n		}\n		return this;\n	}\n	GoogleAnalytics.prototype = {\n	    initialize: function (){\n		    this.gaq.push(['_setAccount', this.accountId]);\n		    this.gaq.push(['_trackPageview']);\n		    this.appendScript();\n	    },\n	    appendScript: function (){\n		    var ga = document.createElement('script');\n		    ga.type = 'text/javascript';\n		    ga.async = true;\n		    ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n\n		    var s = document.getElementsByTagName('script')[0];\n		    s.parentNode.insertBefore(ga, s);\n	    },\n	    pushToGA: function (key, value, queued){\n		    debug.info('Google Analytics (' + key + ', ' + value + ')');\n		    this.gaq.push([key, value]);\n	    },\n	    // Track the users page views\n	    //\n	    // In the event of window._gaq not being present, will push the events to a queue that will wait until a\n	    // future\n	    // call where the global is available and will fire all at that point in time\n	    trackPageView: function (page){\n		    if (this.ga_enabled) {\n			    this.pushToGA('_trackPageview', page);\n		    }\n		    return this;\n	    },\n	    trackTiming: function (category, variable, time, opt_label, opt_sample){\n		    // if (this.ga_enabled) {\n		    // var timing = new TrackTiming();\n		    //\n		    // timing.startTime();\n		    //\n		    // // var totalTime = timing.\n		    //\n		    // this.gaq.push('_trackTiming', category, variable, time, opt_label, opt_sample);\n		    // debug.info('GA XHR Request Timing (' + totalTime + ')');\n		    // }\n		    // return this;\n	    }\n	};\n	return GoogleAnalytics;\n});\n//# sourceURL=/Shared/Analytics/App.GoogleAnalytics.js"),eval("define('Shared/Cache/Trait.QueryParams',['require','jquery','underscore','error'],function(require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var ErrorInstance = require('error');\n\n	return {\n		url: function() {\n			var encodedQuery = this.flattenQueryParams(this.getQueryParams());\n			return App.environment.services[this.getService()] + (encodedQuery ? '/?' + encodedQuery : '');\n		},\n		generateCacheKey: function(service, id) {\n			var timestamp = +new Date();\n			return [service, id, timestamp].join('-');\n		},\n		getService: function() {\n			return this.service;\n		},\n		setService: function(service) {\n			this.service = service;\n		},\n		getQueryParams: function() {\n			return this.queryParams;\n		},\n		setQueryParams: function(params) {\n			this.queryParams = params;\n		},\n		addQueryParams: function(params) {\n			_.extend(this.queryParams, params);\n		},\n		flattenQueryParams: function(params) {\n			var value;\n			var key;\n			var stack = [];\n\n			for(var unencodedKey in params) {\n				if(params.hasOwnProperty(unencodedKey)) {\n					key = encodeURIComponent(unencodedKey);\n					value = params[unencodedKey];\n\n					if(_.isNull(value) || _.isUndefined(value) || value === '') {\n						continue;\n					}\n					if(_.isArray(value)) {\n						_.each(_.compact(value), function(item) {\n							stack.push(key + '=' + encodeURIComponent(item));\n						});\n					} else {\n						stack.push(key + '=' + encodeURIComponent(value));\n					}\n				}\n			}\n			return stack.join('&');\n		},\n		register: function(service, params) {\n			if(!this.hasRegistered) {\n				_.bindAll(this);\n				this.setService(service);\n				this.setQueryParams(params || {});\n				this.hasRegistered = true;\n			}\n		},\n		create: function() {\n			throw new ErrorInstance('InvalidFunctionInvocation', 'Cannot call backbone methods when using cacheable');\n		},\n		fetch: function() {\n			throw new ErrorInstance('InvalidFunctionInvocation', 'Cannot call backbone methods when using cacheable');\n		},\n		save: function() {\n			throw new ErrorInstance('InvalidFunctionInvocation', 'Cannot call backbone methods when using cacheable');\n		},\n		destroy: function() {\n			throw new ErrorInstance('InvalidFunctionInvocation', 'Cannot call backbone methods when using cacheable');\n		}\n	};\n});\n//# sourceURL=/Shared/Cache/Trait.QueryParams.js"),eval("define('Shared/Cache/Cache.Entry',['require','jquery','underscore'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n\n	function CacheEntry(name, entry) {\n		entry.cacheEntry = this;\n		this.name = name;\n		this.entry = entry;\n		this.isValid = true;\n		this.isRefreshing = false;\n		this.service = entry.service;\n	}\n\n	CacheEntry.prototype = {\n		validate: function () {\n			this.isValid = true;\n			this.isRefreshing = false;\n		},\n		invalidate: function () {\n			if (this.isValid && !this.isRefreshing) {\n				App.Cache._log(' INVALIDATE ', this.name, this.entry);\n				this.isValid = false;\n				this.entry.trigger('cache:invalidated');\n			}\n			return this;\n		},\n		evict: function () {\n			App.Cache._log('  EVICTION  ', this.name, this.entry);\n			this.isValid = false;\n			this.entry.trigger('cache:evicted');\n			this.entry = null;\n			return this;\n		},\n		refresh: function () {\n			if (!this.isValid && !this.isRefreshing) {\n				App.Cache._log('  RE-FRESH  ', this.name, this.entry);\n\n				this.isRefreshing = true;\n				this.entry.trigger('cache:refresh:begin');\n\n				var self = this;\n				$.when(this.entry.serverRead()).then(function () {\n					self.isValid = true;\n					self.isRefreshing = false;\n					self.entry.trigger('cache:refresh:complete');\n				});\n			}\n			return this;\n		}\n	};\n	return CacheEntry;\n});\n//# sourceURL=/Shared/Cache/Cache.Entry.js"),eval("define('Shared/Cache/App.Cache',['require','underscore','error','./Trait.QueryParams','./Cache.Entry'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var ErrorInstance = require('error');\n\n	var QueryParamsTrait = require('./Trait.QueryParams');\n	var CacheEntry = require('./Cache.Entry');\n\n	/*\n	 * Cache\n	 *\n	 * All requests should be written towards this facade, as it will automatically handle cache invalidation\n	 * dependencies and trigger auto gets.\n	 */\n\n	function Cache(options) {\n		if (!_.isObject(options)) {\n			throw new ErrorInstance('InvalidArgument', 'Must pass a configuration object to instantiate');\n		}\n		if (!options.hasOwnProperty('enabled')) {\n			throw new ErrorInstance('InvalidArgument', 'Must specify if cache is enabled');\n		}\n		if (!options.hasOwnProperty('constructorMap')) {\n			throw new ErrorInstance('InvalidArgument', 'Must contain a constructorMap');\n		}\n		if (!options.hasOwnProperty('invalidateMap')) {\n			throw new ErrorInstance('InvalidArgument', 'Must contain an invalidateMap');\n		}\n		this.enabled = options.enabled;\n		this.constructorMap = options.constructorMap;\n		this.invalidateMap = this._buildInvalidationMap(options.invalidateMap);\n\n		// this.log = options.log || this._noop;\n\n		this.cache = {};\n		return this;\n	}\n	Cache.prototype = {\n		/*\n		 * Get\n		 */\n		get: function (name, params, success, error) {\n			var hash = this._generateHash(name, params);\n			var cached = this.enabled && this.cache.hasOwnProperty(hash);\n			var resource, cacheEntry;\n\n			var logCache = cached;\n			if (!cached) {\n				resource = this._requestFromServer(this.constructorMap[name], name, params, success, error);\n				this.cache[hash] = new CacheEntry(name, resource);\n			} else {\n				cacheEntry = this.cache[hash];\n				resource = cacheEntry.entry;\n				if (!cacheEntry.valid) {\n					cacheEntry.refresh();\n					cached = false;\n				}\n			}\n			if (!logCache) {\n				this._log('GET ' + (logCache ? '(cached)' : '(SERVER)'), name, resource);\n			}\n			return resource;\n		},\n		prepare: function (name, params) {\n			var hash = this._generateHash(name, params);\n			var cached = this.enabled && this.cache.hasOwnProperty(hash);\n\n			var resource = cached ? this.cache[hash] : new this.constructorMap[name]();\n\n			if (!cached) {\n				this.cache[hash] = new CacheEntry(name, resource);\n			}\n			return resource;\n		},\n		/*\n		 * Flush\n		 */\n		flush: function (name, params) {\n			var hash = this._generateHash(name, params);\n			if (this.cache.hasOwnProperty(hash)) {\n				this.cache[hash].invalidate();\n				delete this.cache[hash];\n			}\n			return this;\n		},\n		/*\n		 * Invalidate\n		 */\n		invalidate: function (name, params) {\n			var hash = this._generateHash(name, params);\n			if (this.cache.hasOwnProperty(hash)) {\n				this.cache[hash].invalidate();\n			}\n			return this;\n		},\n		/*\n		 * InvalidateAll\n		 */\n		invalidateAll: function () {\n			_.each(this.cache, function (entry, key) {\n				entry.invalidate();\n			}, this);\n			return this;\n		},\n		/*\n		 * InvalidateService\n		 */\n		invalidateService: function (service) {\n			_.each(this.cache, function (entry, key) {\n				if (entry.service === service) {\n					entry.invalidate();\n				}\n			});\n			return this;\n		},\n		/*\n		 * InvalidateDependencies\n		 */\n		invalidateDependencies: function (method, service) {\n			if (!this.invalidateMap.hasOwnProperty(service)) {\n				throw new ErrorInstance('InvalidServiceDependencyError', service + ' is not a valid service');\n			}\n			var dependentSections = this.invalidateMap[service];\n			_.each(this.cache, function (entry, key) {\n				if (dependentSections.hasOwnProperty(entry.service)) {\n					entry.invalidate();\n				}\n			});\n			return this;\n		},\n		/*\n		 * Refresh\n		 */\n		refresh: function () {\n			_.each(this.cache, function (entry, key) {\n				if (!entry.valid) {\n					entry.refresh();\n				}\n			});\n			return this;\n		},\n		/*\n		 * RefreshEntry\n		 */\n		refreshEntry: function (name, params) {\n			var hash = this._generateHash(name, params);\n			if (this.cache.hasOwnProperty(hash)) {\n				this.cache[hash].refresh();\n			}\n			return this;\n		},\n		/*\n		 * No operation fn\n		 */\n		_noop: function () {},\n		/*\n		 * _log\n		 */\n		_log: function (method, name, entry) {\n			var padding = '                     ';\n			var url = _.isFunction(entry.urlRead) ? entry.urlRead() : entry.url();\n\n			var left = Math.floor((16 - name.length) / 2);\n			var right = (name.length % 2) ? left + 1 : left;\n			name = padding.split('', left).join('') + name + padding.split('', right).join('');\n\n			debug.info(['<CACHE> ' + method, name, url].join(' : '));\n		},\n		/*\n		 * _buildInvalidationMap\n		 *\n		 *  Builds a map of invalidation that keys the service name with a value of true\n		 */\n		_buildInvalidationMap: function (map) {\n			var result = {};\n			var reduceFn = function (memo, item) {\n				memo[item] = true;\n				return memo;\n			};\n			for (var i in map) {\n				if (map.hasOwnProperty(i)) {\n					result[i] = _.reduce(map[i], reduceFn, {});\n				}\n			}\n			return result;\n		},\n		/*\n		 * _generateHash\n		 *\n		 * TODO: it is possible that flattenQueryParams could generate two different hashes for the same collection if\n		 * the params evaluated in a different order\n		 */\n		_generateHash: function (name, params) {\n			return name + '|' + QueryParamsTrait.flattenQueryParams(params || {});\n		},\n		/*\n		 * RequestFromServer\n		 *\n		 * Makes a request from the server by first constructing the model or collection, then issuing a fetch\n		 */\n		_requestFromServer: function (Constructor, name, params, success, error) {\n			if (!Constructor) {\n				throw new ErrorInstance('CacheConstructorNotFound', 'Could not locate constructor for ' + name);\n			}\n			var resource = new Constructor();\n\n			if (resource.queryParams) {\n				resource.setQueryParams(params || {});\n			}\n\n			resource.serverRead({\n				success: success || Constructor.prototype.readSuccess || this._noop,\n				error: error || Constructor.prototype.readError || this._noop\n			});\n			return resource;\n		}\n	};\n	return Cache;\n});\n//# sourceURL=/Shared/Cache/App.Cache.js"),eval("define('Shared/Cache/Model.Cacheable',['require','underscore','backbone','./Trait.QueryParams','error'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var QueryParamsTrait = require('./Trait.QueryParams');\n	var ErrorInstance = require('error');\n\n	return Backbone.Model.extend(_.extend({\n\n		_toJSON: Backbone.Model.prototype.toJSON,\n\n		// CREATE\n		serverCreate: function (options) {\n			var dataFormat = this.toJSONCreate || this._toJSON;\n			var urlFormat = this.urlCreate || this.url;\n\n			return this.crud('create', dataFormat, urlFormat, options);\n		},\n		// READ\n		serverRead: function (options) {\n			var dataFormat = this.toJSONRead || this._toJSON;\n			var urlFormat = this.urlRead || this.url;\n\n			return this.crud('read', dataFormat, urlFormat, options);\n		},\n		// UPDATE\n		serverUpdate: function (options) {\n			var dataFormat = this.toJSONUpdate || this._toJSON;\n			var urlFormat = this.urlUpdate || this.url;\n\n			return this.crud('update', dataFormat, urlFormat, options);\n		},\n		// DELETE\n		serverDelete: function (options) {\n			var dataFormat = this.toJSONDelete || this._toJSON;\n			var urlFormat = this.urlDelete || this.url;\n\n			return this.crud('delete', dataFormat, urlFormat, options);\n		},\n		// CRUD Abstract\n		crud: function (method, dataFormat, urlFormat, options) {\n			options = options ? _.clone(options) : {};\n\n			var url = this.url;\n			var toJSON = this.toJSON;\n\n			var model = _.extend(this, {\n				toJSON: dataFormat,\n				url: urlFormat\n			});\n			var success = options.success;\n			var error = options.error;\n\n			var that = this;\n\n			_.extend(options, {\n				success: function (response, status, xhr) {\n\n					_.extend(that, {\n						toJSON: toJSON,\n						url: url\n					});\n\n					var attrs = model.parse(response, xhr);\n					if (!model.set(_.isArray(attrs) ? attrs.shift() : attrs, options)) {\n						return false;\n					}\n					if (method !== 'read') {\n						App.Cache.invalidateDependencies(method, model.service);\n					}\n					if (_.isFunction(success)) {\n\n						success(model, response);\n					} else if (method !== 'read') {\n						model.trigger('sync', model, response, options);\n\n					}\n				}\n				// ,error: Backbone.wrapError(error, model, options)\n			});\n			this.deferred = Backbone.sync.call(model, method, model, options);\n			return this.deferred;\n		}\n	}, QueryParamsTrait));\n});\n//# sourceURL=/Shared/Cache/Model.Cacheable.js"),eval("define('ServerResources/Model.Auth',['require','jquery','underscore','Shared/Cache/Model.Cacheable'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var CacheableModel = require('Shared/Cache/Model.Cacheable');\n\n	var AuthModel = CacheableModel.extend({\n		// defaults: {\n		// 	id: '',\n		// 	username: '',\n		// 	password: '',\n		// 	remember: '',\n		// 	session: ''\n		// },\n		writeOnly: true,\n		url: function () {\n			return '../api/login';\n		},\n		initialize: function () {\n			this.register('auth');\n		},\n		setSession: function () {\n			var session = $.cookie('slp-session');\n			this.set('session', session);\n			App.env.session = session;\n		}\n	});\n	return AuthModel;\n});\n//# sourceURL=/ServerResources/Model.Auth.js"),eval("define('ServerResources/Accounts/Model.Account',['require','underscore','Shared/Cache/Model.Cacheable'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var CacheableModel = require('Shared/Cache/Model.Cacheable');\n\n	// var LoanCollection = require('../Loans/Collection.Loans');\n\n	var AccountModel = CacheableModel.extend({\n		url: function () {\n			// return ['/api/account', this.id].join('/');\n			return '../api/accounts/' + this.get('id');\n		},\n		initialize: function () {\n			this.register('account');\n		}\n		// ,\n		// parse: function(account){\n		// 	var loans = account.loans;\n		// 	delete account.loans;\n		// 	this.loans = new LoanCollection(loans);\n		// 	return account;\n		// }\n		//,\n		// compoundPeriods: function(){\n		// },\n		// project: function (range) {\n		// 	var model = this;\n		// 	return _.map(range, function(tick){\n		// 		return model.compoundPeriods(tick);\n		// 	});\n		// }\n		// ,\n		// parse: function (account) {\n		// 	return account;\n		// }\n	});\n	return AccountModel;\n});\n//# sourceURL=/ServerResources/Accounts/Model.Account.js"),function(e){function M(e,t){return function(n){return F(e.call(this,n),t)}}function _(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function D(){}function P(e){B(this,e)}function H(e){var t=e.years||e.year||e.y||0,n=e.months||e.month||e.M||0,r=e.weeks||e.week||e.w||0,i=e.days||e.day||e.d||0,s=e.hours||e.hour||e.h||0,o=e.minutes||e.minute||e.m||0,u=e.seconds||e.second||e.s||0,a=e.milliseconds||e.millisecond||e.ms||0;this._input=e,this._milliseconds=a+u*1e3+o*6e4+s*36e5,this._days=i+r*7,this._months=n+t*12,this._data={},this._bubble()}function B(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function j(e){return e<0?Math.ceil(e):Math.floor(e)}function F(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function I(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months,a,f,l;s&&e._d.setTime(+e._d+s*r);if(o||u)a=e.minute(),f=e.hour();o&&e.date(e.date()+o*r),u&&e.month(e.month()+u*r),s&&!i&&t.updateOffset(e);if(o||u)e.minute(a),e.hour(f)}function q(e){return Object.prototype.toString.call(e)==="[object Array]"}function R(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function U(e){return e?C[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function z(e,t){return t.abbr=e,s[e]||(s[e]=new D),s[e].set(t),s[e]}function W(e){if(!e)return t.fn._lang;if(!s[e]&&o)try{require("./lang/"+e)}catch(n){return t.fn._lang}return s[e]}function X(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t=e.match(f),n,r;for(n=0,r=t.length;n<r;n++)O[t[n]]?t[n]=O[t[n]]:t[n]=X(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function $(e,t){function r(t){return e.lang().longDateFormat(t)||t}var n=5;while(n--&&l.test(t))t=t.replace(l,r);return k[t]||(k[t]=V(t)),k[t](e)}function J(e,t){switch(e){case"DDDD":return p;case"YYYY":return d;case"YYYYY":return v;case"S":case"SS":case"SSS":case"DDD":return h;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return m;case"a":case"A":return W(t._l)._meridiemParse;case"X":return b;case"Z":case"ZZ":return g;case"T":return y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return c;default:return new RegExp(e.replace("\\",""))}}function K(e){var t=(g.exec(e)||[])[0],n=(t+"").match(x)||["-",0,0],r=+(n[1]*60)+~~n[2];return n[0]==="+"?-r:r}function Q(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":i[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":r=W(n._l).monthsParse(t),r!=null?i[1]=r:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(i[2]=~~t);break;case"YY":i[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":i[0]=~~t;break;case"a":case"A":n._isPm=W(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[3]=~~t;break;case"m":case"mm":i[4]=~~t;break;case"s":case"ss":i[5]=~~t;break;case"S":case"SS":case"SSS":i[6]=~~(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=K(t)}t==null&&(n._isValid=!1)}function G(e){var t,n,r=[];if(e._d)return;for(t=0;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];r[3]+=~~((e._tzm||0)/60),r[4]+=~~((e._tzm||0)%60),n=new Date(0),e._useUTC?(n.setUTCFullYear(r[0],r[1],r[2]),n.setUTCHours(r[3],r[4],r[5],r[6])):(n.setFullYear(r[0],r[1],r[2]),n.setHours(r[3],r[4],r[5],r[6])),e._d=n}function Y(e){var t=e._f.match(f),n=e._i,r,i;e._a=[];for(r=0;r<t.length;r++)i=(J(t[r],e).exec(n)||[])[0],i&&(n=n.slice(n.indexOf(i)+i.length)),O[t[r]]&&Q(t[r],i,e);n&&(e._il=n),e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&e._a[3]===12&&(e._a[3]=0),G(e)}function Z(e){var t,n,r,i=99,s,o;for(s=0;s<e._f.length;s++)t=B({},e),t._f=e._f[s],Y(t),n=new P(t),o=R(t._a,n.toArray()),n._il&&(o+=n._il.length),o<i&&(i=o,r=n);B(e,r)}function et(e){var t,n=e._i,r=w.exec(n);if(r){e._f="YYYY-MM-DD"+(r[2]||" ");for(t=0;t<4;t++)if(S[t][1].exec(n)){e._f+=S[t][0];break}g.exec(n)&&(e._f+=" Z"),Y(e)}else e._d=new Date(n)}function tt(t){var n=t._i,r=u.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?et(t):q(n)?(t._a=n.slice(0),G(t)):t._d=n instanceof Date?new Date(+n):new Date(n)}function nt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function rt(e,t,n){var i=r(Math.abs(e)/1e3),s=r(i/60),o=r(s/60),u=r(o/24),a=r(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",r(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,nt.apply({},f)}function it(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function st(e){var n=e._i,r=e._f;return n===null||n===""?null:(typeof n=="string"&&(e._i=n=W().preparse(n)),t.isMoment(n)?(e=B({},n),e._d=new Date(+n._d)):r?q(r)?Z(e):Y(e):tt(e),new P(e))}function ot(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var r=this._isUTC?"UTC":"";return e!=null?(this._d["set"+r+n](e),t.updateOffset(this),this):this._d["get"+r+n]()}}function ut(e){t.duration.fn[e]=function(){return this._data[e]}}function at(e,n){t.duration.fn["as"+e]=function(){return+this/n}}var t,n="2.1.0",r=Math.round,i,s={},o=typeof module!="undefined"&&module.exports,u=/^\/?Date\((\-?\d+)/i,a=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,f=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,l=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,c=/\d\d?/,h=/\d{1,3}/,p=/\d{3}/,d=/\d{1,4}/,v=/[+\-]?\d{1,6}/,m=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,g=/Z|[\+\-]\d\d:?\d\d/i,y=/T/i,b=/[\+\-]?\d+(\.\d{1,3})?/,w=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,E="YYYY-MM-DDTHH:mm:ssZ",S=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],x=/([\+\-]|\d\d)/gi,T="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),N={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},C={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},k={},L="DDD w W M D d".split(" "),A="M D H h m s w W".split(" "),O={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return F(this.year()%100,2)},YYYY:function(){return F(this.year(),4)},YYYYY:function(){return F(this.year(),5)},gg:function(){return F(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return F(this.weekYear(),5)},GG:function(){return F(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return F(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return F(~~(this.milliseconds()/10),2)},SSS:function(){return F(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+F(~~(e/60),2)+":"+F(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+F(~~(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};while(L.length)i=L.pop(),O[i+"o"]=_(O[i],i);while(A.length)i=A.pop(),O[i+i]=M(O[i],2);O.DDDD=M(O.DDD,3),D.prototype={set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase()[0]==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return it(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},t=function(e,t,n){return st({_i:e,_f:t,_l:n,_isUTC:!1})},t.utc=function(e,t,n){return st({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t})},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=t.isDuration(e),i=typeof e=="number",s=r?e._input:i?{}:e,o=a.exec(e),u,f;return i?n?s[n]=e:s.milliseconds=e:o&&(u=o[1]==="-"?-1:1,s={y:0,d:~~o[2]*u,h:~~o[3]*u,m:~~o[4]*u,s:~~o[5]*u,ms:~~o[6]*u}),f=new H(s),r&&e.hasOwnProperty("_lang")&&(f._lang=e._lang),f},t.version=n,t.defaultFormat=E,t.updateOffset=function(){},t.lang=function(e,n){if(!e)return t.fn._lang._abbr;n?z(e,n):s[e]||W(e),t.duration.fn._lang=t.fn._lang=W(e)},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),W(e)},t.isMoment=function(e){return e instanceof P},t.isDuration=function(e){return e instanceof H},t.fn=P.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return $(t(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return this._isValid==null&&(this._a?this._isValid=!R(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var n=$(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),I(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),I(this,r,-1),this},diff:function(e,n,r){var i=this._isUTC?t(e).zone(this._offset||0):t(e).local(),s=(this.zone()-i.zone())*6e4,o,u;return n=U(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,u-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:j(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().startOf("day"),"days",!0),n=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){if(typeof e=="string"){e=this.lang().weekdaysParse(e);if(typeof e!="number")return this}return this.add({d:e-t})}return t},month:function(e){var n=this._isUTC?"UTC":"",r,i;if(e!=null){if(typeof e=="string"){e=this.lang().monthsParse(e);if(typeof e!="number")return this}return r=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(r,this.daysInMonth())),t.updateOffset(this),this}return this._d["get"+n+"Month"]()},startOf:function(e){e=U(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),this},endOf:function(e){return this.startOf(e).add(e,1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)===+t(e).startOf(n)},min:function(e){return e=t.apply(null,arguments),e<this?this:e},max:function(e){return e=t.apply(null,arguments),e>this?this:e},zone:function(e){var n=this._offset||0;return e==null?this._isUTC?n:this._d.getTimezoneOffset():(typeof e=="string"&&(e=K(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,n!==e&&I(this,t.duration(n-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var n=r((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},weekYear:function(e){var t=it(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=it(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=it(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},lang:function(t){return t===e?this._lang:(this._lang=W(t),this)}};for(i=0;i<T.length;i++)ot(T[i].toLowerCase().replace(/s$/,""),T[i]);ot("year","FullYear"),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.toJSON=t.fn.toISOString,t.duration.fn=H.prototype={_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u;r.milliseconds=e%1e3,i=j(e/1e3),r.seconds=i%60,s=j(i/60),r.minutes=s%60,o=j(s/60),r.hours=o%24,t+=j(o/24),r.days=t%30,n+=j(t/30),r.months=n%12,u=j(n/12),r.years=u},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+~~(this._months/12)*31536e6},humanize:function(e){var t=+this,n=rt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=U(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=U(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:t.fn.lang};for(i in N)N.hasOwnProperty(i)&&(at(i,N[i]),ut(i.toLowerCase()));at("Weeks",6048e5),t.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},t.lang("en",{ordinal:function(e){var t=e%10,n=~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),o&&(module.exports=t),typeof ender=="undefined"&&(this.moment=t),typeof define=="function"&&define.amd&&define("moment",[],function(){return t})}.call(this),eval("define('Shared/Cache/Collection.Cacheable',['require','underscore','backbone','./Trait.QueryParams','error'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n\n	var QueryParamsTrait = require('./Trait.QueryParams');\n	var ErrorInstance = require('error');\n\n	return Backbone.Collection.extend(_.extend({\n		_toJSON: Backbone.Collection.prototype.toJSON,\n		// CREATE\n		serverCreate: function (model, options) {\n			var dataFormat = this.toJSONCreate || this._toJSON;\n			var urlFormat = this.urlCreate || this.url;\n\n			model = this._prepareModel(model, options);\n			this.add(model, options);\n\n			return this.crud('create', dataFormat, urlFormat, options, model);\n		},\n		// READ\n		serverRead: function (options) {\n			var dataFormat = this.toJSONRead || this._toJSON;\n			var urlFormat = this.urlRead || this.url;\n\n			return this.crud('read', dataFormat, urlFormat, options);\n		},\n		// UPDATE\n		serverUpdate: function (options) {\n			var dataFormat = this.toJSONUpdate || this._toJSON;\n			var urlFormat = this.urlUpdate || this.url;\n\n			return this.crud('update', dataFormat, urlFormat, options);\n		},\n		// DELETE\n		serverDelete: function (options) {\n			var dataFormat = this.toJSONDelete || this._toJSON;\n			var urlFormat = this.urlDelete || this.url;\n\n			return this.crud('delete', dataFormat, urlFormat, options);\n		},\n		// CRUD Abstract\n		crud: function (method, dataFormat, urlFormat, options, model) {\n			options = options ? _.clone(options) : {};\n\n			var toJSON = this.toJSON;\n			var url = this.url;\n\n			var collection = _.extend(this, {\n				toJSON: dataFormat,\n				url: urlFormat\n			});\n			var success = options.success;\n			var error = options.error;\n			var self = this;\n\n			_.extend(options, {\n				success: function (resp, status, xhr) {\n					var opts = options;\n					var result = true;\n					self.response = resp;\n\n					// collection.cacheEntry.validate();\n					// restore original\n					_.extend(self, {\n						toJSON: toJSON,\n						url: url\n					});\n\n					if (!collection[options.add ? 'add' : 'reset'](collection.parse(resp, xhr), opts)) {\n						result = false;\n					}\n\n					if (method !== 'read') {\n						App.Cache.invalidateDependencies(method, collection.service);\n					}\n					if (!result) {\n						return result;\n					}\n					if (_.isFunction(success)) {\n						success(collection, resp);\n					} else if (model) {\n						collection.trigger('sync', model, resp, options);\n					}\n				}\n				// ,error: wrapError(error, collection, options)\n			});\n			this.deferred = Backbone.sync.call(collection, method, collection, options);\n			return this.deferred;\n		}\n	}, QueryParamsTrait));\n});\n//# sourceURL=/Shared/Cache/Collection.Cacheable.js"),eval("define('ServerResources/Accounts/Trait.Accountant',['require','underscore','moment'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var momment = require('moment');\n\n	var Accountant = {\n		futureValue: function (presentValue, compoundingPeriods, periodInterestRate, payment) {\n\n			var compounding = Math.pow(1 + periodInterestRate, compoundingPeriods);\n\n			var growth = presentValue * compounding;\n			var paydown = (payment / periodInterestRate) * (compounding - 1);\n\n			return growth - paydown;\n		},\n		numberOfPayments: function (presentValue, futureValue, periodInterestRate, payment) {\n\n			var future = (futureValue * periodInterestRate) - payment;\n			var present = (presentValue * periodInterestRate) - payment;\n\n			return Math.log(future / present) / Math.log(1 + periodInterestRate);\n		},\n		calculatePayment: function (presentValue, futureValue, compoundingPeriods, periodInterestRate) {\n\n			var compounding = Math.pow(1 + periodInterestRate, compoundingPeriods);\n\n			return ((presentValue * periodInterestRate * compounding) - (futureValue * periodInterestRate)) / (compounding - 1);\n		},\n		timeProjection: function (range) {\n			return _.map(range, function (index) {\n				var today = (new moment())\n				return +today.add(moment.duration(index, 'month'));\n			});\n		},\n		balanceProjection: function (balance, interest, payment, range) {\n			var self = this;\n			return _.map(range, function (index) {\n				var bal = self.futureValue(balance, index, (interest / (12 * 100)), payment);\n				return bal > 0 ? bal : 0;\n			});\n		},\n		timeBalanceProjection: function (balance, interest, payment, range) {\n			var time = this.timeProjection(range);\n			var bal = this.balanceProjection(balance, interest, payment, range);\n			return _.zip(time, bal);\n		},\n		necessaryPeriods: function (loans) {\n			return Math.ceil(_.max(_.map(loans, function (loan) {\n				var balance = loan.balance;\n				var interest = loan.interest_rate;\n				var payment = loan.minimum_payment;\n\n				return Accountant.numberOfPayments(balance, 0, interest / (12 * 100), payment);\n			})));\n		},\n		selectedPeriods: function (from, to) {\n			if (!from || !to) {\n				return;\n			}\n			var start = (from === 'now') ? new momment() : new moment(from);\n			var end = new moment(to);\n\n			return end.diff(start, 'months');\n		}\n	};\n	return Accountant;\n});\n//# sourceURL=/ServerResources/Accounts/Trait.Accountant.js"),eval('define(\'ServerResources/Accounts/Collection.Accounts\',[\'require\',\'underscore\',\'moment\',\'Shared/Cache/Collection.Cacheable\',\'./Model.Account\',\'./Trait.Accountant\'],function (require) {\n	\'use strict\';\n\n	var _ = require(\'underscore\');\n	var moment = require(\'moment\');\n	var CacheableCollection = require(\'Shared/Cache/Collection.Cacheable\');\n	var AccountModel = require(\'./Model.Account\');\n\n	var Accountant = require(\'./Trait.Accountant\');\n\n	var AccountCollection = CacheableCollection.extend({\n		model: AccountModel,\n		url: function () {\n			// return [\'/api\', App.userId, \'accounts\'].join(\'/\');\n			// return \'../api/accounts\';\n			return \'../api/form/schema\';\n		},\n		initialize: function () {\n			this.register(\'accounts\');\n		},\n		parse: function (data) {\n			return [{\n				"account_id": 29878,\n				"nslds_servicer_id": 2,\n				"is_linked": 0,\n				"is_saved": 1,\n				"is_error": 0,\n				"start_refresh": 1,\n				"yodlee_item_id": 0,\n				"name": "Sallie Mae (Department of Education Loan Services)",\n				"last_refresh_time": 0,\n				"servicer_id": 1089,\n				"site_display_name": "Sallie Mae (Department of Education Loan Services)",\n				"logo_image": null,\n				"phone_number": "888-272-5543",\n				"website": "https://www.salliemae.com/",\n				"balance": 23323,\n				"minimum_payment": 0,\n				"due_date": 0,\n				"loan_count": 10,\n				"refresh_status": "SUCCESS",\n				"loans": [{\n					"name": "Cornell University",\n					"loan_id": 73579,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 2712,\n					"minimum_payment": 57.15,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73578,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 4355,\n					"minimum_payment": 66.23,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73577,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 2177,\n					"minimum_payment": 23.15,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73576,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 3155,\n					"minimum_payment": 33.10,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73575,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 1183,\n					"minimum_payment": 27.18,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73574,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 2362,\n					"minimum_payment": 23.23,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73573,\n					"account_id": 29878,\n					"loan_type_id": 2,\n					"loan_type_name": "Stafford Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 1968,\n					"minimum_payment": 44.11,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73572,\n					"account_id": 29878,\n					"loan_type_id": 5,\n					"loan_type_name": "Stafford Unsubsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 3380,\n					"minimum_payment": 33.10,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73571,\n					"account_id": 29878,\n					"loan_type_id": 5,\n					"loan_type_name": "Stafford Unsubsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 1336,\n					"minimum_payment": 13.87,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}, {\n					"name": "School Code For Consolidation Loans",\n					"loan_id": 73570,\n					"account_id": 29878,\n					"loan_type_id": 23,\n					"loan_type_name": "Consolidation Subsidized",\n					"payment_plan_id": 0,\n					"interest_rate": 6.2,\n					"balance": 695,\n					"minimum_payment": 8.88,\n					"account_name": "DEPT OF ED/SALLIE MAE"\n				}],\n				"created_at": 1375833455,\n				"is_deleted": 0\n			}, {\n				"account_id": 29879,\n				"nslds_servicer_id": 49,\n				"is_linked": 0,\n				"is_saved": 1,\n				"is_error": 0,\n				"start_refresh": 1,\n				"yodlee_item_id": 0,\n				"name": "CARNEGIE-MELLON UNIVERSITY",\n				"last_refresh_time": 0,\n				"servicer_id": 0,\n				"site_display_name": null,\n				"logo_image": null,\n				"phone_number": "Unknown",\n				"website": "Unknown",\n				"balance": 11917,\n				"minimum_payment": 0,\n				"due_date": 0,\n				"loan_count": 3,\n				"refresh_status": "SUCCESS",\n				"loans": [{\n					"name": "Carnegie-mellon University",\n					"loan_id": 73582,\n					"account_id": 29879,\n					"loan_type_id": 19,\n					"loan_type_name": "Perkins",\n					"payment_plan_id": 0,\n					"interest_rate": 6.4,\n					"balance": 2939,\n					"minimum_payment": 25.25,\n					"account_name": "CARNEGIE-MELLON UNIVERSITY"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73581,\n					"account_id": 29879,\n					"loan_type_id": 19,\n					"loan_type_name": "Perkins",\n					"payment_plan_id": 0,\n					"interest_rate": 5.2,\n					"balance": 7879,\n					"minimum_payment": 95.27,\n					"account_name": "CARNEGIE-MELLON UNIVERSITY"\n				}, {\n					"name": "Cornell University",\n					"loan_id": 73580,\n					"account_id": 29879,\n					"loan_type_id": 19,\n					"loan_type_name": "Perkins",\n					"payment_plan_id": 0,\n					"interest_rate": 2.1,\n					"balance": 1099,\n					"minimum_payment": 13.23,\n					"account_name": "CARNEGIE-MELLON UNIVERSITY"\n				}],\n				"created_at": 1375833455,\n				"is_deleted": 0\n			}];\n		},\n		getAllLoans: function () {\n			return _.reduce(this.models, function (result, model) {\n				return result.concat(model.get(\'loans\'));\n			}, []);\n		},\n		chooseRange: function (loans, until) {\n			// Choose best range\n			var defaultPeriods = 12 * 20;\n			var necessaryPeriods = Accountant.necessaryPeriods(loans);\n			var selectedPeriods = until; //Accountant.selectedPeriods(\'now\', until);\n\n			return _.range(0, selectedPeriods || necessaryPeriods || defaultPeriods);\n		},\n		projectAggregate: function (until) {\n\n			var loans = this.getAllLoans();\n			var range = this.chooseRange(loans, until);\n\n			// Map d3 format\n			var timeProjection = Accountant.timeProjection(range);\n			var balanceProjection = _.map(loans, function (loan) {\n				var name = loan.name;\n				var balance = loan.balance;\n				var interest = loan.interest_rate;\n				var payment = loan.minimum_payment;\n\n				return Accountant.balanceProjection(balance, interest, payment, range);\n			});\n\n			// Transpose from column to row\n			var transpose = _.zip.apply(_, balanceProjection);\n\n			var aggregate = _.map(transpose, function (item) {\n				return _.reduce(item, function (a, b) {\n					return a + b;\n				}, 0);\n			});\n\n			return [{\n				key: \'ALL\',\n				values: _.zip(timeProjection, aggregate)\n			}];\n		},\n		projection: function (until) {\n\n			// var self = this;\n\n			var loans = this.getAllLoans();\n			var range = this.chooseRange(loans, until);\n\n			// Map d3 format\n			return _.map(loans, function (loan) {\n				var name = loan.name;\n				var balance = loan.balance;\n				var interest = loan.interest_rate;\n				var payment = loan.minimum_payment;\n\n				return {\n					key: name,\n					// color: self.palette.get(),\n					values: Accountant.timeBalanceProjection(balance, interest, payment, range)\n				};\n			});\n		},\n		calculateTotalBalance: function () {\n			return _.reduce(this.getAllLoans(), function (sum, loan) {\n				return sum + loan.balance;\n			}, 0);\n		}\n	});\n	return AccountCollection;\n});\n//# sourceURL=/ServerResources/Accounts/Collection.Accounts.js'),eval("define('ServerResources/Forms/Model.FormData',['require','underscore','Shared/Cache/Model.Cacheable'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var CacheableModel = require('Shared/Cache/Model.Cacheable');\n\n	var FormDataModel = CacheableModel.extend({\n		url: function () {\n			// return ['/api/form', App.userId, 'data'].join('/');\n			return '../api/form/status';\n		},\n		initialize: function () {\n			this.register('formData');\n		},\n		readError: function(){\n			App.trigger('error:ajaxReadFail', {\n				name: 'User Form',\n				resource: this\n			});\n		}\n	});\n	return FormDataModel;\n});\n//# sourceURL=/ServerResources/Forms/Model.FormData.js"),eval("define('ServerResources/Forms/Model.FormSchema',['require','underscore','Shared/Cache/Model.Cacheable'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var CacheableModel = require('Shared/Cache/Model.Cacheable');\n\n	var FormSchemaModel = CacheableModel.extend({\n		url: function () {\n			return '../api/form/schema';\n		},\n		initialize: function () {\n			this.register('formSchema');\n		},\n		readError: function(){\n			App.trigger('error:ajaxReadFail', {\n				name: 'Form Schema',\n				resource: this\n			});\n		}\n	});\n	return FormSchemaModel;\n});\n//# sourceURL=/ServerResources/Forms/Model.FormSchema.js"),eval("define('ServerResources/Model.User',['require','underscore','Shared/Cache/Model.Cacheable'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var CacheableModel = require('Shared/Cache/Model.Cacheable');\n\n	var UserModel = CacheableModel.extend({\n		defaults: {\n			password: '',\n			username: '',\n			email: '',\n			agrees: false\n		},\n		writeOnly: true,\n		url: function () {\n			return '../api/users';\n		},\n		initialize: function () {\n			this.register('user');\n		},\n		hasErrors: function () {\n			var errors = this.getErrors();\n			if (errors.password || errors.username || errors.email || errors.agrees) {\n				return errors;\n			}\n			return false;\n		},\n		getErrors: function () {\n			var username = this.get('username');\n			var email = this.get('email');\n			var password = this.get('password');\n			var agrees = this.get('agrees');\n\n			return {\n				password: password.length < 4 || password.length > 12,\n				username: username.length < 4 || username.length > 12,\n				email: email.length < 4 || email.length > 20,\n				agrees: !agrees\n			};\n		}\n	});\n	return UserModel;\n});\n//# sourceURL=/ServerResources/Model.User.js"),eval("define('ServerResources/Map.ServerResources',['require','./Model.Auth','./Accounts/Model.Account','./Accounts/Collection.Accounts','./Forms/Model.FormData','./Forms/Model.FormSchema','./Model.User'],function (require) {\n	'use strict';\n\n	var Auth = require('./Model.Auth');\n	var Account = require('./Accounts/Model.Account');\n	var Accounts = require('./Accounts/Collection.Accounts');\n	var FormData = require('./Forms/Model.FormData');\n	var FormSchema = require('./Forms/Model.FormSchema');\n	var User = require('./Model.User');\n\n	return {\n		constructorMap: {\n			'auth': Auth,\n			'account': Account,\n			'accounts': Accounts,\n			'formData': FormData,\n			'formSchema': FormSchema,\n			'user': User\n		},\n		invalidateMap: {\n			'auth': [],\n			'account': ['account', 'accounts'],\n			'accounts': ['accounts'],\n			'formData': ['formData'],\n			'formSchema': ['formSchema'],\n			'user': ['user']\n		}\n	};\n});\n//# sourceURL=/ServerResources/Map.ServerResources.js");var Handlebars={};(function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,r="[object Function]",i="[object Object]";e.registerHelper=function(t,r,s){if(n.call(t)===i){if(s||r)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else s&&(r.not=s),this.helpers[t]=r},e.registerPartial=function(t,r){n.call(t)===i?e.Utils.extend(this.partials,t):this.partials[t]=r},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,i){var s=i.fn,o=i.inverse,u=0,a="",f,l=n.call(t);l===r&&(t=t.call(this)),i.data&&(f=e.createFrame(i.data));if(t&&typeof t=="object")if(t instanceof Array)for(var c=t.length;u<c;u++)f&&(f.index=u),a+=s(t[u],{data:f});else for(var h in t)t.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(t[h],{data:f}),u++);return u===0&&(a=o(this)),a}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,i){var s=n.call(t);s===r&&(t=t.call(this));if(!e.Utils.isEmpty(t))return i.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)});var s=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<s.length;n++)this[s[n]]=t[s[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,a=/[&<>"'`]/,f=function(e){return o[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":(t=t.toString(),a.test(t)?t.replace(u,f):t)},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?i=e.VM.program(t,n,r):i||(i=this.programs[t]=e.VM.program(t,n)),i},merge:function(t,n){var r=t||n;return t&&n&&(r={},e.Utils.extend(r,n),e.Utils.extend(r,t)),r},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template})(Handlebars),define("handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),eval("define('hbars',['handlebars'], function (Handlebars) {\n	'use strict';\n\n	var buildMap = {};\n \n	return {\n		load: function (name, parentRequire, onload, config) {\n			if (config.isBuild) {\n				var fsPath = config.dirBaseUrl + 'Templates/' + name + '.handlebars'; // TODO - add ext into config options\n				buildMap[name] = nodeRequire('fs').readFileSync(fsPath).toString();\n				onload();\n			} else {\n				var JST = window.JST || {};\n				var path = 'src/Templates/' + name + '.handlebars'; // TODO: add path into config options\n\n				if (JST[path]) {\n					// Grunt.js pre-compiles templates into JST[]\n					onload(JST[path]);\n				} else {\n					// use text.js plugin when loading templates during development\n					parentRequire(['text!templates/' + name + '.handlebars'], function (raw) {\n						onload(Handlebars.compile(raw));\n					});\n				}\n			}\n		}\n	};\n});\n\n\n\n//# sourceURL=/Shared/Shims/Shim.Handlebars.js"),eval("define('templates',['require','hbars!Chart-LoanCalculator','hbars!Login','hbars!Error-PathNotFound','hbars!Error-AjaxRead','hbars!Marketing','hbars!Header','hbars!Footer','hbars!Dashboard','hbars!Dashboard-Sidenav','hbars!Dashboard-LoanSummary','hbars!Dashboard-Loading','hbars!Signup','hbars!Signup-BasicRegistration','hbars!Signup-AdvancedRegistration','hbars!Signup-Form','hbars!Signup-Loading'],function (require) {\n	'use strict';\n\n	return {\n		// Charts\n		'LoanCalculator': require('hbars!Chart-LoanCalculator'),\n\n		// Login\n		'Login': require('hbars!Login'),\n\n		// Errors\n		'PathNotFound': require('hbars!Error-PathNotFound'),\n		'AjaxReadError': require('hbars!Error-AjaxRead'),\n\n		// Marketing\n		'Marketing': require('hbars!Marketing'),\n\n		// Header\n		'Header': require('hbars!Header'),\n\n		// Footer\n		'Footer': require('hbars!Footer'),\n\n		// Section.Dashboard\n		'Dashboard': require('hbars!Dashboard'),\n		'DashboardSidenav': require('hbars!Dashboard-Sidenav'),\n		'LoanSummary': require('hbars!Dashboard-LoanSummary'),\n		'DashboardLoading': require('hbars!Dashboard-Loading'),\n		\n		// Section.Signup\n		'Signup': require('hbars!Signup'),\n		'BasicRegistration': require('hbars!Signup-BasicRegistration'),\n		'AdvancedRegistration': require('hbars!Signup-AdvancedRegistration'),\n		'SignupForm': require('hbars!Signup-Form'),\n		'SignupLoading': require('hbars!Signup-Loading')\n\n	};\n});\n//# sourceURL=/templates.js"),eval("define('Views/Section.Dashboard/ItemView.LoanSummary',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var LoanSummary = Backbone.Marionette.ItemView.extend({\n		template: Template.LoanSummary,\n		templateHelpers: function () {\n\n			var loans = this.accounts.getAllLoans();\n			return {\n				total: this.accounts.calculateTotalBalance(),\n				loans: loans\n			};\n		},\n		initialize: function () {\n			this.accounts = this.cache.get('accounts');\n		}\n	});\n	return LoanSummary;\n});\n//# sourceURL=/Views/Section.Dashboard/ItemView.LoanSummary.js"),d3=function(){function l(e){return e!=null&&!isNaN(e)}function h(e){return e.length}function p(e){var t=1;while(e*t%1)t*=10;return t}function d(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function v(){}function y(){}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function w(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=E.length;n<r;++n){var i=E[n]+t;if(i in e)return i}}function x(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}function T(e){return Array.prototype.slice.call(e)}function C(){}function k(){}function L(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n=new v;return r.on=function(r,i){var s=n.get(r),o;return arguments.length<2?s&&s.on:(s&&(s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function A(){e.event.preventDefault()}function O(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t}function M(t){var n=new k,r=0,i=arguments.length;while(++r<i)n[arguments[r]]=L(n);return n.of=function(r,i){return function(s){try{var o=s.sourceEvent=e.event;s.target=t,e.event=s,n[s.type].apply(r,i)}finally{e.event=o}}},n}function P(e){return D(e,I),e}function q(e){return typeof e=="function"?e:function(){return H(e,this)}}function R(e){return typeof e=="function"?e:function(){return B(e,this)}}function z(t,n){function r(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function s(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=e.ns.qualify(t),n==null?t.local?i:r:typeof n=="function"?t.local?a:u:t.local?o:s}function W(e){return e.trim().replace(/\s+/g," ")}function X(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function V(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=e.trim().split(/\s+/).map($);var n=e.length;return typeof t=="function"?i:r}function $(e){var t=X(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",W(i+" "+e))):n.setAttribute("class",W(i.replace(t," ")))}}function J(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return t==null?r:typeof t=="function"?s:i}function K(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return t==null?n:typeof t=="function"?i:r}function Q(n){return typeof n=="function"?n:(n=e.ns.qualify(n)).local?function(){return t.createElementNS(n.space,n.local)}:function(){return t.createElementNS(this.namespaceURI,n)}}function G(e){return{__data__:e}}function Y(e){return function(){return F(this,e)}}function Z(t){return arguments.length||(t=e.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function et(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=0,o=i.length,u;s<o;s++)(u=i[s])&&t(u,s,n);return e}function tt(e){return D(e,nt),e}function rt(e){var t,n;return function(r,i,s){var o=e[s].update,u=o.length,a;s!=n&&(n=s,t=0),i>=t&&(t=i+1);while(!(a=o[t])&&++t<u);return a}}function st(t,n,r){function a(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}function f(){var e=o(n,S(arguments));a.call(this),this.addEventListener(t,this[i]=e,e.$=r),e._=n}function l(){var n=new RegExp("^__on([^.]+)"+e.requote(t)+"$"),r;for(var i in this)if(r=i.match(n)){var s=this[i];this.removeEventListener(r[1],s,s.$),delete this[i]}}var i="__on"+t,s=t.indexOf("."),o=ut;s>0&&(t=t.substring(0,s));var u=ot.get(t);return u&&(t=u,o=at),s?n?f:a:n?C:l}function ut(t,n){return function(r){var i=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function at(e,t){var n=ut(e,t);return function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!(r.compareDocumentPosition(t)&8))&&n.call(t,e)}}function ct(){var t=".dragsuppress-"+ ++lt,i="touchmove"+t,s="selectstart"+t,o="dragstart"+t,u="click"+t,a=e.select(r).on(i,A).on(s,A).on(o,A),f=n.style,l=f[ft];return f[ft]="none",function(e){a.on(t,null),f[ft]=l;if(e){function n(){a.on(u,null)}a.on(u,function(){A(),n()},!0),setTimeout(n,0)}}}function pt(t,n){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var s=i.createSVGPoint();if(ht<0&&(r.scrollX||r.scrollY)){i=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=i[0][0].getScreenCTM();ht=!o.f&&!o.e,i.remove()}return ht?(s.x=n.pageX,s.y=n.pageY):(s.x=n.clientX,s.y=n.clientY),s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function gt(){}function yt(e,t,n){return new bt(e,t,n)}function bt(e,t,n){this.h=e,this.s=t,this.l=n}function Et(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,Gt(o(e+120),o(e),o(e-120))}function kt(e){return e>0?1:e<0?-1:0}function Lt(e){return e>1?0:e<-1?St:Math.acos(e)}function At(e){return e>1?St/2:e<-1?-St/2:Math.asin(e)}function Ot(e){return(Math.exp(e)-Math.exp(-e))/2}function Mt(e){return(Math.exp(e)+Math.exp(-e))/2}function _t(e){return(e=Math.sin(e/2))*e}function Dt(e,t,n){return new Pt(e,t,n)}function Pt(e,t,n){this.h=e,this.c=t,this.l=n}function Bt(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),jt(n,Math.cos(e*=Nt)*t,Math.sin(e)*t)}function jt(e,t,n){return new Ft(e,t,n)}function Ft(e,t,n){this.l=e,this.a=t,this.b=n}function Wt(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=Vt(i)*qt,r=Vt(r)*Rt,s=Vt(s)*Ut,Gt(Jt(3.2404542*i-1.5371385*r-.4985314*s),Jt(-0.969266*i+1.8760108*r+.041556*s),Jt(.0556434*i-.2040259*r+1.0572252*s))}function Xt(e,t,n){return e>0?Dt(Math.atan2(n,t)*Ct,Math.sqrt(t*t+n*n),e):Dt(NaN,NaN,e)}function Vt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function $t(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function Jt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function Kt(e){return Gt(e>>16,e>>8&255,e&255)}function Qt(e){return Kt(e)+""}function Gt(e,t,n){return new Yt(e,t,n)}function Yt(e,t,n){this.r=e,this.g=t,this.b=n}function en(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function tn(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(on(u[0]),on(u[1]),on(u[2]))}}return(a=un.get(e))?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&(e.length===4?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):e.length===7&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),r=parseInt(r,16),i=parseInt(i,16),s=parseInt(s,16)),t(r,i,s))}function nn(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):(o=NaN,u=a>0&&a<1?0:o),yt(o,u,a)}function rn(e,t,n){e=sn(e),t=sn(t),n=sn(n);var r=$t((.4124564*e+.3575761*t+.1804375*n)/qt),i=$t((.2126729*e+.7151522*t+.072175*n)/Rt),s=$t((.0193339*e+.119192*t+.9503041*n)/Ut);return jt(116*i-16,500*(r-i),200*(i-s))}function sn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function on(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function an(e){return typeof e=="function"?e:function(){return e}}function fn(e){return e}function ln(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=null),cn(t,n,e,r)}}function cn(t,n,i,s){function c(){var e=f.status,t;if(!e&&f.responseText||e>=200&&e<300||e===304){try{t=i.call(o,f)}catch(n){u.error.call(o,n);return}u.load.call(o,t)}else u.error.call(o,f)}var o={},u=e.dispatch("progress","load","error"),a={},f=new XMLHttpRequest,l=null;return r.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(t)&&(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=c:f.onreadystatechange=function(){f.readyState>3&&c()},f.onprogress=function(t){var n=e.event;e.event=t;try{u.progress.call(o,f)}finally{e.event=n}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?a[e]:(t==null?delete a[e]:a[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(n=e==null?null:e+"",o):n},o.responseType=function(e){return arguments.length?(l=e,o):l},o.response=function(e){return i=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(S(arguments)))}}),o.send=function(e,r,i){arguments.length===2&&typeof r=="function"&&(i=r,r=null),f.open(e,t,!0),n!=null&&!("accept"in a)&&(a.accept=n+",*/*");if(f.setRequestHeader)for(var s in a)f.setRequestHeader(s,a[s]);return n!=null&&f.overrideMimeType&&f.overrideMimeType(n),l!=null&&(f.responseType=l),i!=null&&o.on("error",i).on("load",function(e){i(null,e)}),f.send(r==null?null:r),o},o.abort=function(){return f.abort(),o},e.rebind(o,u,"on"),s==null?o:o.get(hn(s))}function hn(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function bn(){var e=En(),t=Sn()-e;t>24?(isFinite(t)&&(clearTimeout(mn),mn=setTimeout(bn,t)),vn=0):(vn=1,yn(bn))}function wn(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now()),gn.callback=e,gn.time=n+t}function En(){var e=Date.now();gn=pn;while(gn)e>=gn.time&&(gn.flush=gn.callback(e-gn.time)),gn=gn.next;return e}function Sn(){var e,t=pn,n=Infinity;while(t)t.flush?t=e?e.next=t.next:pn=t.next:(t.time<n&&(n=t.time),t=(e=t).next);return dn=e,n}function Ln(e,t){var n=Math.pow(10,Math.abs(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Mn(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function _n(e){return e+""}function Hn(){}function jn(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Fn(e,t){e&&qn.hasOwnProperty(e.type)&&qn[e.type](e,t)}function Rn(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1]);t.lineEnd()}function Un(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Rn(e[n],t,1);t.polygonEnd()}function Vn(){function s(e,t){e*=Nt,t=t*Nt/2+St/4;var s=e-n,o=Math.cos(t),u=Math.sin(t),a=i*u,f=r*o+a*Math.cos(s),l=a*Math.sin(s);Wn.add(Math.atan2(l,f)),n=e,r=o,i=u}var e,t,n,r,i;Xn.point=function(o,u){Xn.point=s,n=(e=o)*Nt,r=Math.cos(u=(t=u)*Nt/2+St/4),i=Math.sin(u)},Xn.lineEnd=function(){s(e,t)}}function $n(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Gn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Yn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Zn(e){return[Math.atan2(e[1],e[0]),At(e[2])]}function er(e,t){return Math.abs(e[0]-t[0])<xt&&Math.abs(e[1]-t[1])<xt}function pr(e,t){e*=Nt;var n=Math.cos(t*=Nt);dr(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function dr(e,t,n){++tr,rr+=(e-rr)/tr,ir+=(t-ir)/tr,sr+=(n-sr)/tr}function vr(){function r(r,i){r*=Nt;var s=Math.cos(i*=Nt),o=s*Math.cos(r),u=s*Math.sin(r),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=t*a-n*u)*f+(f=n*o-e*a)*f+(f=e*u-t*o)*f),e*o+t*u+n*a);nr+=f,or+=f*(e+(e=o)),ur+=f*(t+(t=u)),ar+=f*(n+(n=a)),dr(e,t,n)}var e,t,n;hr.point=function(i,s){i*=Nt;var o=Math.cos(s*=Nt);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(s),hr.point=r,dr(e,t,n)}}function mr(){hr.point=pr}function gr(){function s(e,t){e*=Nt;var s=Math.cos(t*=Nt),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(t),f=r*a-i*u,l=i*o-n*a,c=n*u-r*o,h=Math.sqrt(f*f+l*l+c*c),p=n*o+r*u+i*a,d=h&&-Lt(p)/h,v=Math.atan2(h,p);fr+=d*f,lr+=d*l,cr+=d*c,nr+=v,or+=v*(n+(n=o)),ur+=v*(r+(r=u)),ar+=v*(i+(i=a)),dr(n,r,i)}var e,t,n,r,i;hr.point=function(o,u){e=o,t=u,hr.point=s,o*=Nt;var a=Math.cos(u*=Nt);n=a*Math.cos(o),r=a*Math.sin(o),i=Math.sin(u),dr(n,r,i)},hr.lineEnd=function(){s(e,t),hr.lineEnd=mr,hr.point=pr}}function yr(){return!0}function br(e,t,n,r,i){var s=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(er(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}var a={point:n,points:e,other:null,visited:!1,entry:!0,subject:!0},f={point:n,points:[n],other:a,visited:!1,entry:!1,subject:!1};a.other=f,s.push(a),o.push(f),a={point:r,points:[r],other:null,visited:!1,entry:!1,subject:!0},f={point:r,points:[r],other:a,visited:!1,entry:!0,subject:!1},a.other=f,s.push(a),o.push(f)}),o.sort(t),wr(s),wr(o);if(!s.length)return;if(n)for(var u=1,a=!n(o[0].point),f=o.length;u<f;++u)o[u].entry=a=!a;var l=s[0],c,h,p;for(;;){c=l;while(c.visited)if((c=c.next)===l)return;h=c.points,i.lineStart();do{c.visited=c.other.visited=!0;if(c.entry){if(c.subject)for(var u=0;u<h.length;u++)i.point((p=h[u])[0],p[1]);else r(c.point,c.next.point,1,i);c=c.next}else{if(c.subject){h=c.prev.points;for(var u=h.length;--u>=0;)i.point((p=h[u])[0],p[1])}else r(c.point,c.prev.point,-1,i);c=c.prev}c=c.other,h=c.points}while(!c.visited);i.lineEnd()}}function wr(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.next=i=e[n],i.prev=r,r=i;r.next=i=e[0],i.prev=r}function Er(t,n,r,i){return function(s){function a(e,n){t(e,n)&&s.point(e,n)}function f(e,t){o.point(e,t)}function l(){u.point=f,o.lineStart()}function c(){u.point=a,o.lineEnd()}function g(e,t){d.point(e,t),m.push([e,t])}function y(){d.lineStart(),m=[]}function b(){g(m[0][0],m[0][1]),d.lineEnd();var e=d.clean(),t=p.buffer(),n,r=t.length;m.pop(),v.push(m),m=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,o;s.lineStart();while(++i<r)s.point((o=n[i])[0],o[1]);s.lineEnd();return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),h.push(t.filter(Sr))}var o=n(s),u={point:a,lineStart:l,lineEnd:c,polygonStart:function(){u.point=g,u.lineStart=y,u.lineEnd=b,h=[],v=[],s.polygonStart()},polygonEnd:function(){u.point=a,u.lineStart=l,u.lineEnd=c,h=e.merge(h),h.length?br(h,Tr,null,r,s):i(v)&&(s.lineStart(),r(null,null,1,s),s.lineEnd()),s.polygonEnd(),h=v=null},sphere:function(){s.polygonStart(),s.lineStart(),r(null,null,1,s),s.lineEnd(),s.polygonEnd()}},h,p=xr(),d=n(p),v,m;return u}}function Sr(e){return e.length>1}function xr(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:C,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Tr(e,t){return((e=e.point)[0]<0?e[1]-St/2-xt:St/2-e[1])-((t=t.point)[0]<0?t[1]-St/2-xt:St/2-t[1])}function Nr(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=!1,u=!1,a=0;Wn.reset();for(var f=0,l=t.length;f<l;++f){var c=t[f],h=c.length;if(!h)continue;var p=c[0],d=p[0],v=p[1]/2+St/4,m=Math.sin(v),g=Math.cos(v),y=1;for(;;){y===h&&(y=0),e=c[y];var b=e[0],w=e[1]/2+St/4,E=Math.sin(w),S=Math.cos(w),x=b-d,T=Math.abs(x)>St,N=m*E;Wn.add(Math.atan2(N*Math.sin(x),g*S+N*Math.cos(x))),Math.abs(w)<xt&&(u=!0),s+=T?x+(x>=0?2:-2)*St:x;if(T^d>=n^b>=n){var C=Kn($n(p),$n(e));Yn(C);var k=Kn(i,C);Yn(k);var L=(T^x>=0?-1:1)*At(k[2]);r>L&&(a+=T^x>=0?1:-1)}if(!(y++))break;d=b,m=E,g=S,p=e}Math.abs(s)>xt&&(o=!0)}return(!u&&!o&&Wn<0||s<-xt)^a&1}function kr(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?St:-St,a=Math.abs(s-t);Math.abs(a-St)<xt?(e.point(t,n=(n+o)/2>0?St/2:-St/2),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=St&&(Math.abs(t-r)<xt&&(t-=r*xt),Math.abs(s-u)<xt&&(s-=u*xt),n=Lr(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Lr(e,t,n,r){var i,s,o=Math.sin(e-n);return Math.abs(o)>xt?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Ar(e,t,n,r){var i;if(e==null)i=n*St/2,r.point(-St,i),r.point(0,i),r.point(St,i),r.point(St,0),r.point(St,-i),r.point(0,-i),r.point(-St,-i),r.point(-St,0),r.point(-St,i);else if(Math.abs(e[0]-t[0])>xt){var s=(e[0]<t[0]?1:-1)*St;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Mr(e){return Nr(Or,e)}function _r(e){function o(e,n){return Math.cos(e)*Math.cos(n)>t}function u(e){var t,r,s,u,l;return{lineStart:function(){u=s=!1,l=1},point:function(c,h){var p=[c,h],d,v=o(c,h),m=n?v?0:f(c,h):v?f(c+(c<0?St:-St),h):0;!t&&(u=s=v)&&e.lineStart();if(v!==s){d=a(t,p);if(er(t,d)||er(p,d))p[0]+=xt,p[1]+=xt,v=o(p[0],p[1])}if(v!==s)l=0,v?(e.lineStart(),d=a(p,t),e.point(d[0],d[1])):(d=a(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(i&&t&&n^v){var g;!(m&r)&&(g=a(p,t,!0))&&(l=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!er(t,p))&&e.point(p[0],p[1]),t=p,s=v,r=m},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(u&&s)<<1}}}function a(e,n,r){var i=$n(e),s=$n(n),o=[1,0,0],u=Kn(i,s),a=Jn(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=t*a/l,h=-t*f/l,p=Kn(o,u),d=Gn(o,c),v=Gn(u,h);Qn(d,v);var m=p,g=Jn(d,m),y=Jn(m,m),b=g*g-y*(Jn(d,d)-1);if(b<0)return;var w=Math.sqrt(b),E=Gn(m,(-g-w)/y);Qn(E,d),E=Zn(E);if(!r)return E;var S=e[0],x=n[0],T=e[1],N=n[1],C;x<S&&(C=S,S=x,x=C);var k=x-S,L=Math.abs(k-St)<xt,A=L||k<xt;!L&&N<T&&(C=T,T=N,N=C);if(A?L?T+N>0^E[1]<(Math.abs(E[0]-S)<xt?T:N):T<=E[1]&&E[1]<=N:k>St^(S<=E[0]&&E[0]<=x)){var O=Gn(m,(-g+w)/y);return Qn(O,d),[E,Zn(O)]}}function f(t,r){var i=n?e:St-e,s=0;return t<-i?s|=1:t>i&&(s|=2),r<-i?s|=4:r>i&&(s|=8),s}function l(e){return Nr(r,e)}var t=Math.cos(e),n=t>0,r=[e,0],i=Math.abs(t)>xt,s=pi(e,6*Nt);return Er(o,u,s,l)}function Pr(t,n,r,i){function s(e,i){return Math.abs(e[0]-t)<xt?i>0?0:3:Math.abs(e[0]-r)<xt?i>0?2:1:Math.abs(e[1]-n)<xt?i>0?1:0:i>0?3:2}function o(e,t){return u(e.point,t.point)}function u(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}function a(e,s){var o=s[0]-e[0],u=s[1]-e[1],a=[0,1];return Math.abs(o)<xt&&Math.abs(u)<xt?t<=e[0]&&e[0]<=r&&n<=e[1]&&e[1]<=i:Hr(t-e[0],o,a)&&Hr(e[0]-r,-o,a)&&Hr(n-e[1],u,a)&&Hr(e[1]-i,-u,a)?(a[1]<1&&(s[0]=e[0]+a[1]*o,s[1]=e[1]+a[1]*u),a[0]>0&&(e[0]+=a[0]*o,e[1]+=a[0]*u),!0):!1}return function(f){function m(e){var o=s(e,-1),u=g([o===0||o===3?t:r,o>1?i:n]);return u}function g(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i)for(var s=1,o=p[i],u=o.length,a=o[0],f;s<u;++s)f=o[s],a[1]<=r?f[1]>r&&y(a,f,e)>0&&++t:f[1]<=r&&y(a,f,e)<0&&--t,a=f;return t!==0}function y(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function b(e,o,a,f){var l=0,c=0;if(e==null||(l=s(e,a))!==(c=s(o,a))||u(e,o)<0^a>0){do f.point(l===0||l===3?t:r,l>1?i:n);while((l=(l+a+4)%4)!==c)}else f.point(o[0],o[1])}function w(e,s){return t<=e&&e<=r&&n<=s&&s<=i}function E(e,t){w(e,t)&&f.point(e,t)}function A(){v.point=M,p&&p.push(d=[]),L=!0,k=!1,N=C=NaN}function O(){h&&(M(S,x),T&&k&&c.rejoin(),h.push(c.buffer())),v.point=E,k&&f.lineEnd()}function M(e,t){e=Math.max(-Dr,Math.min(Dr,e)),t=Math.max(-Dr,Math.min(Dr,t));var n=w(e,t);p&&d.push([e,t]);if(L)S=e,x=t,T=n,L=!1,n&&(f.lineStart(),f.point(e,t));else if(n&&k)f.point(e,t);else{var r=[N,C],i=[e,t];a(r,i)?(k||(f.lineStart(),f.point(r[0],r[1])),f.point(i[0],i[1]),n||f.lineEnd()):n&&(f.lineStart(),f.point(e,t))}N=e,C=t,k=n}var l=f,c=xr(),h,p,d,v={point:E,lineStart:A,lineEnd:O,polygonStart:function(){f=c,h=[],p=[]},polygonEnd:function(){f=l,(h=e.merge(h)).length?(f.polygonStart(),br(h,o,m,b,f),f.polygonEnd()):g([t,n])&&(f.polygonStart(),f.lineStart(),b(null,null,1,f),f.lineEnd(),f.polygonEnd()),h=p=d=null}},S,x,T,N,C,k,L;return v}}function Hr(e,t,n){if(Math.abs(t)<xt)return e<=0;var r=e/t;if(t>0){if(r>n[1])return!1;r>n[0]&&(n[0]=r)}else{if(r<n[0])return!1;r<n[1]&&(n[1]=r)}return!0}function Br(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function jr(e){var t=0,n=St/3,r=oi(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*St/180,n=e[1]*St/180):[t/St*180,n/St*180]},i}function Fr(e,t){function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),s=Math.sqrt(i)/r;return o.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,At((i-(e*e+n*n)*r*r)/(2*r))]},o}function Ur(){function i(e,t){qr+=r*e-n*t,n=e,r=t}var e,t,n,r;Rr.point=function(s,o){Rr.point=i,e=n=s,t=r=o},Rr.lineEnd=function(){i(e,t)}}function Jr(e,t){e<zr&&(zr=e),e>Xr&&(Xr=e),t<Wr&&(Wr=t),t>Vr&&(Vr=t)}function Kr(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=r}function u(){t.push("Z")}var e=Qr(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=Qr(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};return n}function Qr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Yr(e,t){rr+=e,ir+=t,++sr}function Zr(){function n(n,r){var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s);or+=o*(e+n)/2,ur+=o*(t+r)/2,ar+=o,Yr(e=n,t=r)}var e,t;Gr.point=function(r,i){Gr.point=n,Yr(e=r,t=i)}}function ei(){Gr.point=Yr}function ti(){function i(e,t){var i=e-n,s=t-r,o=Math.sqrt(i*i+s*s);or+=o*(n+e)/2,ur+=o*(r+t)/2,ar+=o,o=r*e-n*t,fr+=o*(n+e),lr+=o*(r+t),cr+=o*3,Yr(n=e,r=t)}var e,t,n,r;Gr.point=function(s,o){Gr.point=i,Yr(e=n=s,t=r=o)},Gr.lineEnd=function(){i(e,t)}}function ni(e){function r(n,r){e.moveTo(n,r),e.arc(n,r,t,0,2*St)}function i(t,r){e.moveTo(t,r),n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:C};return n}function ri(e){function i(t){function y(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){h=NaN,g.point=w,t.lineStart()}function w(n,i){var o=$n([n,i]),u=e(n,i);s(h,p,c,d,v,m,h=u[0],p=u[1],c=n,d=o[0],v=o[1],m=o[2],r,t),t.point(h,p)}function E(){g.point=y,t.lineEnd()}function S(){b(),g.point=x,g.lineEnd=T}function x(e,t){w(n=e,i=t),o=h,u=p,a=d,f=v,l=m,g.point=w}function T(){s(h,p,c,d,v,m,o,u,n,a,f,l,r,t),g.lineEnd=E,E()}var n,i,o,u,a,f,l,c,h,p,d,v,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=S},polygonEnd:function(){t.polygonEnd(),g.lineStart=b}};return g}function s(r,i,o,u,a,f,l,c,h,p,d,v,m,g){var y=l-r,b=c-i,w=y*y+b*b;if(w>4*t&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=Math.abs(Math.abs(x)-1)<xt?(o+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-r,M=A-i,_=b*O-y*M;if(_*_/w>t||Math.abs((y*O+b*M)/w-.5)>.3||u*p+a*d+f*v<n)s(r,i,o,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),s(L,A,C,E,S,x,l,c,h,p,d,v,m,g)}}var t=.5,n=Math.cos(30*Nt),r=16;return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function ii(e){var t=ri(function(t,n){return e([t*Ct,n*Ct])});return function(e){return e=t(e),{point:function(t,n){e.point(t*Nt,n*Nt)},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}}function si(e){return oi(function(){return e})()}function oi(t){function E(e){return e=i(e[0]*Nt,e[1]*Nt),[e[0]*o+d,v-e[1]*o]}function S(e){return e=i.invert((e[0]-d)/o,(v-e[1])/o),e&&[e[0]*Ct,e[1]*Ct]}function x(){i=Br(r=fi(c,h,p),n);var e=n(f,l);return d=u-e[0]*o,v=a+e[1]*o,T()}function T(){return w&&(w.valid=!1,w=null),E}var n,r,i,s=ri(function(e,t){return e=n(e,t),[e[0]*o+d,v-e[1]*o]}),o=150,u=480,a=250,f=0,l=0,c=0,h=0,p=0,d,v,m=Cr,g=fn,y=null,b=null,w;return E.stream=function(e){return w&&(w.valid=!1),w=ui(r,m(s(g(e)))),w.valid=!0,w},E.clipAngle=function(e){return arguments.length?(m=e==null?(y=e,Cr):_r((y=+e)*Nt),T()):y},E.clipExtent=function(e){return arguments.length?(b=e,g=e==null?fn:Pr(e[0][0],e[0][1],e[1][0],e[1][1]),T()):b},E.scale=function(e){return arguments.length?(o=+e,x()):o},E.translate=function(e){return arguments.length?(u=+e[0],a=+e[1],x()):[u,a]},E.center=function(e){return arguments.length?(f=e[0]%360*Nt,l=e[1]%360*Nt,x()):[f*Ct,l*Ct]},E.rotate=function(e){return arguments.length?(c=e[0]%360*Nt,h=e[1]%360*Nt,p=e.length>2?e[2]%360*Nt:0,x()):[c*Ct,h*Ct,p*Ct]},e.rebind(E,s,"precision"),function(){return n=t.apply(this,arguments),E.invert=n.invert&&S,x()}}function ui(e,t){return{point:function(n,r){r=e(n*Nt,r*Nt),n=r[0],t.point(n>St?n-2*St:n<-St?n+2*St:n,r[1])},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ai(e,t){return[e,t]}function fi(e,t,n){return e?t||n?Br(ci(e),hi(t,n)):ci(e):t||n?hi(t,n):ai}function li(e){return function(t,n){return t+=e,[t>St?t-2*St:t<-St?t+2*St:t,n]}}function ci(e){var t=li(e);return t.invert=li(-e),t}function hi(e,t){function o(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*n+u*r;return[Math.atan2(a*i-l*s,u*n-f*r),At(l*i+a*s)]}var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),s=Math.sin(t);return o.invert=function(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*i-a*s;return[Math.atan2(a*i+f*s,u*n+l*r),At(l*n-u*r)]},o}function pi(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){if(i!=null){i=di(n,i),s=di(n,s);if(o>0?i<s:i>s)i+=o*2*St}else i=e+o*2*St,s=e;var a;for(var f=o*t,l=i;o>0?l>s:l<s;l-=f)u.point((a=Zn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],a[1])}}function di(e,t){var n=$n(t);n[0]-=e,Yn(n);var r=Lt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-xt)%(2*Math.PI)}function vi(t,n,r){var i=e.range(t,n-xt,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function mi(t,n,r){var i=e.range(t,n-xt,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function gi(e){return e.source}function yi(e){return e.target}function bi(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(_t(r-t)+i*o*_t(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Ct,Math.atan2(o,Math.sqrt(r*r+i*i))*Ct]}:function(){return[e*Ct,t*Ct]};return d.distance=h,d}function Si(){function r(r,i){var s=Math.sin(i*=Nt),o=Math.cos(i),u=Math.abs((r*=Nt)-e),a=Math.cos(u);wi+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=n*s-t*o*a)*u),t*s+n*o*a),e=r,t=s,n=o}var e,t,n;Ei.point=function(i,s){e=i*Nt,t=Math.sin(s*=Nt),n=Math.cos(s),Ei.point=r},Ei.lineEnd=function(){Ei.point=Ei.lineEnd=C}}function xi(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function Ci(e,t){function o(e,t){var n=Math.abs(Math.abs(t)-St/2)<xt?0:s/Math.pow(r(t),i);return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var n=Math.cos(e),r=function(e){return Math.tan(St/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),s=n*Math.pow(r(e),i)/i;return i?(o.invert=function(e,t){var n=s-t,r=kt(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(s/r,1/i))-St/2]},o):Ai}function ki(e,t){function s(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return Math.abs(r)<xt?ai:(s.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-kt(r)*Math.sqrt(e*e+n*n)]},s)}function Ai(e,t){return[e,Math.log(Math.tan(St/4+t/2))]}function Oi(e){var t=si(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(){var e=n.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.translate=function(){var e=r.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(s=e==null){var u=St*n(),a=r();i([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else s&&(o=null);return o},t.clipExtent(null)}function Di(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function Pi(e){function u(s){function d(){u.push("M",i(e(a),o))}var u=[],a=[],f=-1,l=s.length,c,h=an(t),p=an(n);while(++f<l)r.call(this,c=s[f],f)?a.push([+h.call(this,c,f),+p.call(this,c,f)]):a.length&&(d(),a=[]);return a.length&&d(),u.length?u.join(""):null}var t=Hi,n=Bi,r=yr,i=Fi,s=i.key,o=.7;return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.interpolate=function(e){return arguments.length?(typeof e=="function"?s=i=e:s=(i=ji.get(e)||Fi).key,u):s},u.tension=function(e){return arguments.length?(o=e,u):o},u}function Hi(e){return e[0]}function Bi(e){return e[1]}function Fi(e){return e.join("L")}function Ii(e){return Fi(e)+"Z"}function qi(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Ri(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ui(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function zi(e,t){return e.length<4?Fi(e):e[1]+Vi(e.slice(1,e.length-1),$i(e,t))}function Wi(e,t){return e.length<3?Fi(e):e[0]+Vi((e.push(e[0]),e),$i([e[e.length-2]].concat(e,[e[1]]),t))}function Xi(e,t){return e.length<3?Fi(e):e[0]+Vi(e,$i(e,t))}function Vi(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Fi(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function $i(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function Ji(e){if(e.length<3)return Fi(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",Yi(ts,o),",",Yi(ts,u)];e.push(e[n-1]);while(++t<=n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),ns(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Ki(e){if(e.length<4)return Fi(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(Yi(ts,s)+","+Yi(ts,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),ns(t,s,o);return t.join("")}function Qi(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[Yi(ts,o),",",Yi(ts,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),ns(t,o,u);return t.join("")}function Gi(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o)}return Ji(e)}function Yi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ns(e,t,n){e.push("C",Yi(Zi,t),",",Yi(Zi,n),",",Yi(es,t),",",Yi(es,n),",",Yi(ts,t),",",Yi(ts,n))}function rs(e,t){return(t[1]-e[1])/(t[0]-e[0])}function is(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=rs(i,s);while(++t<n)r[t]=(o+(o=rs(i=s,s=e[t+1])))/2;return r[t]=o,r}function ss(e){var t=[],n,r,i,s,o=is(e),u=-1,a=e.length-1;while(++u<a)n=rs(e[u],e[u+1]),Math.abs(n)<1e-6?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function os(e){return e.length<3?Fi(e):e[0]+Vi(e,ss(e))}function us(e,t,n,r){var i,s,o,u,a,f,l;return i=r[e],s=i[0],o=i[1],i=r[t],u=i[0],a=i[1],i=r[n],f=i[0],l=i[1],(l-o)*(u-s)-(a-o)*(f-s)>0}function fs(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ls(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function cs(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function ps(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=r.leftEnd;do t=t.r;while(t!=r.rightEnd&&i.rightOf(t,e));return t=t.l,t},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return e.edge==null?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return e.edge==null?n.bottomSite:e.edge.region[hs[e.side]]}},i={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},r=t.x-e.x,i=t.y-e.y,s=r>0?r:-r,o=i>0?i:-i;return n.c=e.x*r+e.y*i+(r*r+i*i)*.5,s>o?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(e,t){var n=e.edge,r=t.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var s=(n.c*r.b-r.c*n.b)/i,o=(r.c*n.a-n.c*r.a)/i,u=n.region.r,a=r.region.r,f,l;u.y<a.y||u.y==a.y&&u.x<a.x?(f=e,l=n):(f=t,l=r);var c=s>=l.region.r.x;return c&&f.side==="l"||!c&&f.side==="r"?null:{x:s,y:o}},rightOf:function(e,t){var n=e.edge,r=n.region.r,i=t.x>r.x;if(i&&e.side==="l")return 1;if(!i&&e.side==="r")return 0;if(n.a===1){var s=t.y-r.y,o=t.x-r.x,u=0,a=0;!i&&n.b<0||i&&n.b>=0?a=u=s>=n.b*o:(a=t.x+t.y*n.b>n.c,n.b<0&&(a=!a),a||(u=1));if(!u){var f=r.x-n.region.l.x;a=n.b*(o*o-s*s)<f*s*(1+2*o/f+n.b*n.b),n.b<0&&(a=!a)}}else{var l=n.c-n.a*t.x,c=t.y-l,h=t.x-r.x,p=l-r.y;a=c*c>h*h+p*p}return e.side==="l"?a:!a},endPoint:function(e,n,r){e.ep[n]=r;if(!e.ep[hs[n]])return;t(e)},distance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},s={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var r=0,i=s.list,o=i.length;r<o;r++){var u=i[r];if(e.ystar>u.ystar||e.ystar==u.ystar&&t.x>u.vertex.x)continue;break}i.splice(r,0,e)},del:function(e){for(var t=0,n=s.list,r=n.length;t<r&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return s.list.length===0},nextEvent:function(e){for(var t=0,n=s.list,r=n.length;t<r;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=s.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return s.list.shift()}};r.init(),n.bottomSite=n.list.shift();var o=n.list.shift(),u,a,f,l,c,h,p,d,v,m,g,y,b;for(;;){s.empty()||(u=s.min());if(o&&(s.empty()||o.y<u.y||o.y==u.y&&o.x<u.x))a=r.leftBound(o),f=r.right(a),p=r.rightRegion(a),y=i.bisect(p,o),h=r.createHalfEdge(y,"l"),r.insert(a,h),m=i.intersect(a,h),m&&(s.del(a),s.insert(a,m,i.distance(m,o))),a=h,h=r.createHalfEdge(y,"r"),r.insert(a,h),m=i.intersect(h,f),m&&s.insert(h,m,i.distance(m,o)),o=n.list.shift();else{if(!!s.empty())break;a=s.extractMin(),l=r.left(a),f=r.right(a),c=r.right(f),p=r.leftRegion(a),d=r.rightRegion(f),g=a.vertex,i.endPoint(a.edge,a.side,g),i.endPoint(f.edge,f.side,g),r.del(a),s.del(f),r.del(f),b="l",p.y>d.y&&(v=p,p=d,d=v,b="r"),y=i.bisect(p,d),h=r.createHalfEdge(y,b),r.insert(l,h),i.endPoint(y,hs[b],g),m=i.intersect(l,h),m&&(s.del(l),s.insert(l,m,i.distance(m,p))),m=i.intersect(h,c),m&&s.insert(h,m,i.distance(m,p))}}for(a=r.right(r.leftEnd);a!=r.rightEnd;a=r.right(a))t(a.edge)}function ds(e){return e.x}function vs(e){return e.y}function ms(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gs(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&gs(e,a[0],n,r,o,u),a[1]&&gs(e,a[1],o,r,i,u),a[2]&&gs(e,a[2],n,u,o,s),a[3]&&gs(e,a[3],o,u,i,s)}}function ys(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,i=t.g,s=t.b,o=n.r-r,u=n.g-i,a=n.b-s;return function(e){return"#"+en(Math.round(r+o*e))+en(Math.round(i+u*e))+en(Math.round(s+a*e))}}function bs(e,t){var n={},r={},i;for(i in e)i in t?n[i]=xs(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}}function ws(e,t){return t-=e=+e,function(n){return e+t*n}}function Es(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;e+="",t+="",Ss.lastIndex=0;for(r=0;n=Ss.exec(t);++r)n.index&&u.push(t.substring(s,o=n.index)),a.push({i:u.length,x:n[0]}),u.push(null),s=Ss.lastIndex;s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=Ss.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x,u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1],u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1),f--,r--}else l.x=ws(parseFloat(n[0]),parseFloat(l.x))}while(r<f)l=a.pop(),u[l.i+1]==null?u[l.i]=l.x:(u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1)),f--;return u.length===1?u[0]==null?(l=a[0].x,function(e){return l(e)+""}):function(){return t}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}}function xs(t,n){var r=e.interpolators.length,i;while(--r>=0&&!(i=e.interpolators[r](t,n)));return i}function Ts(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(xs(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}}function Ls(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function As(e){return function(t){return 1-e(1-t)}}function Os(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ms(e){return e*e}function _s(e){return e*e*e}function Ds(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Ps(e){return function(t){return Math.pow(t,e)}}function Hs(e){return 1-Math.cos(e*St/2)}function Bs(e){return Math.pow(2,10*(e-1))}function js(e){return 1-Math.sqrt(1-e*e)}function Fs(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/(2*St)*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin((r-n)*2*St/t)}}function Is(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function qs(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Rs(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,i=t.c,s=t.l,o=n.h-r,u=n.c-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return Bt(r+o*e,i+u*e,s+a*e)+""}}function Us(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,i=t.s,s=t.l,o=n.h-r,u=n.s-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return Et(r+o*e,i+u*e,s+a*e)+""}}function zs(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,i=t.a,s=t.b,o=n.l-r,u=n.a-i,a=n.b-s;return function(e){return Wt(r+o*e,i+u*e,s+a*e)+""}}function Ws(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Xs(e){var t=[e.a,e.b],n=[e.c,e.d],r=$s(t),i=Vs(t,n),s=$s(Js(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ct,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Ct:0}function Vs(e,t){return e[0]*t[0]+e[1]*t[1]}function $s(e){var t=Math.sqrt(Vs(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Js(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Qs(t,n){var r=[],i=[],s,o=e.transform(t),u=e.transform(n),a=o.translate,f=u.translate,l=o.rotate,c=u.rotate,h=o.skew,p=u.skew,d=o.scale,v=u.scale;return a[0]!=f[0]||a[1]!=f[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:ws(a[0],f[0])},{i:3,x:ws(a[1],f[1])})):f[0]||f[1]?r.push("translate("+f+")"):r.push(""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:ws(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=p?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:ws(h,p)}):p&&r.push(r.pop()+"skewX("+p+")"),d[0]!=v[0]||d[1]!=v[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:s-4,x:ws(d[0],v[0])},{i:s-2,x:ws(d[1],v[1])})):(v[0]!=1||v[1]!=1)&&r.push(r.pop()+"scale("+v+")"),s=i.length,function(e){var t=-1,n;while(++t<s)r[(n=i[t]).i]=n.x(e);return r.join("")}}function Gs(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Ys(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Zs(e){var t=e.source,n=e.target,r=to(t,n),i=[t];while(t!==r)t=t.parent,i.push(t);var s=i.length;while(n!==r)i.splice(s,0,n),n=n.parent;return i}function eo(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function to(e,t){if(e===t)return e;var n=eo(e),r=eo(t),i=n.pop(),s=r.pop(),o=null;while(i===s)o=i,i=n.pop(),s=r.pop();return o}function no(e){e.fixed|=2}function ro(e){e.fixed&=-7}function io(e){e.fixed|=4,e.px=e.x,e.py=e.y}function so(e){e.fixed&=-5}function oo(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;oo(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy}}if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function fo(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=po,t}function lo(e){return e.children}function co(e){return e.value}function ho(e,t){return t.value-e.value}function po(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function mo(e){return e.x}function go(e){return e.y}function yo(e,t,n){e.y0=t,e.y=n}function Eo(t){return e.range(t.length)}function So(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function xo(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function To(e){return e.reduce(No,0)}function No(e,t){return e+t[1]}function Co(e,t){return ko(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ko(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function Lo(t){return[e.min(t),e.max(t)]}function Ao(e,t){return e.parent==t.parent?1:2}function Oo(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Mo(e){var t=e.children,n;return t&&(n=t.length)?t[n-1]:e._tree.thread}function _o(e,t){var n=e.children;if(n&&(i=n.length)){var r,i,s=-1;while(++s<i)t(r=_o(n[s],t),e)>0&&(e=r)}return e}function Do(e,t){return e.x-t.x}function Po(e,t){return t.x-e.x}function Ho(e,t){return e.depth-t.depth}function Bo(e,t){function n(e,r){var i=e.children;if(i&&(a=i.length)){var s,o=null,u=-1,a;while(++u<a)s=i[u],n(s,o),o=s}t(e,r)}n(e,null)}function jo(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i]._tree,s.prelim+=t,s.mod+=t,t+=s.shift+(n+=s.change)}function Fo(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function Io(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function qo(e,t){return e.value-t.value}function Ro(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Uo(e,t){e._pack_next=t,t._pack_prev=e}function zo(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Wo(e){function p(e){n=Math.min(e.x-e.r,n),r=Math.max(e.x+e.r,r),i=Math.min(e.y-e.r,i),s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(Xo),o=t[0],o.x=-o.r,o.y=0,p(o);if(h>1){u=t[1],u.x=u.r,u.y=0,p(u);if(h>2){a=t[2],Jo(o,u,a),p(a),Ro(o,a),o._pack_prev=a,Ro(a,u),u=o._pack_next;for(f=3;f<h;f++){Jo(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(zo(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(zo(c,a))break;d?(v<m||v==m&&u.r<o.r?Uo(o,u=l):Uo(o=c,u),f--):(Ro(o,a),u=a,p(a))}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++)a=t[f],a.x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach(Vo)}function Xo(e){e._pack_next=e._pack_prev=e}function Vo(e){delete e._pack_next,delete e._pack_prev}function $o(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)$o(i[s],t,n,r)}}function Jo(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ko(t){return 1+e.max(t,function(e){return e.y})}function Qo(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Go(e){var t=e.children;return t&&t.length?Go(t[0]):e}function Yo(e){var t=e.children,n;return t&&(n=t.length)?Yo(t[n-1]):e}function Zo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function eu(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function tu(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function nu(e){return e.rangeExtent?e.rangeExtent():tu(e.range())}function ru(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function iu(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function su(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ou}function uu(t,n,r,i){var s=[],o=[],u=0,a=Math.min(t.length,n.length)-1;t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++u<=a)s.push(r(t[u-1],t[u])),o.push(i(n[u-1],n[u]));return function(n){var r=e.bisect(t,n,1,a)-1;return o[r](s[r](n))}}function au(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?uu:ru,a=r?Ys:Gs;return i=o(e,t,a,n),s=o(t,e,a,xs),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(Ws)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return pu(e,t)},u.tickFormat=function(t,n){return du(e,t,n)},u.nice=function(t){return lu(e,t),o()},u.copy=function(){return au(e,t,n,r)},o()}function fu(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function lu(e,t){return iu(e,su(t?hu(e,t)[2]:cu(e)))}function cu(e){var t=tu(e),n=t[1]-t[0];return Math.pow(10,Math.round(Math.log(n)/Math.LN10)-1)}function hu(e,t){var n=tu(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function pu(t,n){return e.range.apply(e,hu(t,n))}function du(t,n,r){var i=-Math.floor(Math.log(hu(t,n)[2])/Math.LN10+.01);return e.format(r?r.replace(An,function(e,t,n,r,s,o,u,a,f,l){return[t,n,r,s,o,u,a,f||"."+(i-(l==="%")*2),l].join("")}):",."+i+"f")}function vu(t,n,r,i){function s(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(s(e))}return u.invert=function(e){return o(t.invert(e))},u.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((i=e.map(Number)).map(s)),u):i},u.base=function(e){return arguments.length?(n=+e,t.domain(i.map(s)),u):n},u.nice=function(){var e=iu(i.map(s),r?Math:gu);return t.domain(e),i=e.map(o),u},u.ticks=function(){var e=tu(i),t=[],u=e[0],a=e[1],f=Math.floor(s(u)),l=Math.ceil(s(a)),c=n%1?2:n;if(isFinite(l-f)){if(r){for(;f<l;f++)for(var h=1;h<c;h++)t.push(o(f)*h);t.push(o(f))}else{t.push(o(f));for(;f++<l;)for(var h=c-1;h>0;h--)t.push(o(f)*h)}for(f=0;t[f]<u;f++);for(l=t.length;t[l-1]>a;l--);t=t.slice(f,l)}return t},u.tickFormat=function(t,n){if(!arguments.length)return mu;arguments.length<2?n=mu:typeof n!="function"&&(n=e.format(n));var i=Math.max(.1,t/u.ticks().length),a=r?(f=1e-12,Math.ceil):(f=-1e-12,Math.floor),f;return function(e){return e/o(a(s(e)+f))<=i?n(e):""}},u.copy=function(){return vu(t.copy(),n,r,i)},fu(u,t)}function yu(e,t,n){function s(t){return e(r(t))}var r=bu(t),i=bu(1/t);return s.invert=function(t){return i(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),s):n},s.ticks=function(e){return pu(n,e)},s.tickFormat=function(e,t){return du(n,e,t)},s.nice=function(e){return s.domain(lu(n,e))},s.exponent=function(o){return arguments.length?(r=bu(t=o),i=bu(1/t),e.domain(n.map(r)),s):t},s.copy=function(){return yu(e.copy(),t,n)},fu(s,e)}function bu(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wu(t,n){function o(e){return i[((r.get(e)||r.set(e,t.push(e)))-1)%i.length]}function u(n,r){return e.range(t.length).map(function(e){return n+r*e})}var r,i,s;return o.domain=function(e){if(!arguments.length)return t;t=[],r=new v;var i=-1,s=e.length,u;while(++i<s)r.has(u=e[i])||r.set(u,t.push(u));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(i=e,s=0,n={t:"range",a:arguments},o):i},o.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],f=e[1],l=(f-a)/(Math.max(1,t.length-1)+r);return i=u(t.length<2?(a+f)/2:a+l*r/2,l),s=0,n={t:"rangePoints",a:arguments},o},o.rangeBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=(c-l)/(t.length-r+2*a);return i=u(l+h*a,h),f&&i.reverse(),s=h*(1-r),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=Math.floor((c-l)/(t.length-r+2*a)),p=c-l-(t.length-r)*h;return i=u(l+Math.round(p/2),h),f&&i.reverse(),s=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return s},o.rangeExtent=function(){return tu(n.a[0])},o.copy=function(){return wu(t,n)},o.domain(t)}function Nu(t,n){function i(){var i=0,o=n.length;r=[];while(++i<o)r[i-1]=e.quantile(t,i/o);return s}function s(t){if(!isNaN(t=+t))return n[e.bisect(r,t)]}var r;return s.domain=function(n){return arguments.length?(t=n.filter(function(e){return!isNaN(e)}).sort(e.ascending),i()):t},s.range=function(e){return arguments.length?(n=e,i()):n},s.quantiles=function(){return r},s.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]},s.copy=function(){return Nu(t,n)},i()}function Cu(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/r+e,[t,t+1/r]},s.copy=function(){return Cu(e,t,n)},o()}function ku(t,n){function r(r){if(r<=r)return n[e.bisect(t,r)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return ku(t,n)},r}function Lu(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return pu(e,t)},t.tickFormat=function(t,n){return du(e,t,n)},t.copy=function(){return Lu(e)},t}function Mu(e){return e.innerRadius}function _u(e){return e.outerRadius}function Du(e){return e.startAngle}function Pu(e){return e.endAngle}function Hu(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+Au,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function Bu(e){function c(u){function x(){c.push("M",o(e(p),l),f,a(e(h.reverse()),l),"Z")}var c=[],h=[],p=[],d=-1,v=u.length,m,g=an(t),y=an(r),b=t===n?function(){return E}:an(n),w=r===i?function(){return S}:an(i),E,S;while(++d<v)s.call(this,m=u[d],d)?(h.push([E=+g.call(this,m,d),S=+y.call(this,m,d)]),p.push([+b.call(this,m,d),+w.call(this,m,d)])):h.length&&(x(),h=[],p=[]);return h.length&&x(),c.length?c.join(""):null}var t=Hi,n=Hi,r=0,i=Bi,s=yr,o=Fi,u=o.key,a=o,f="L",l=.7;return c.x=function(e){return arguments.length?(t=n=e,c):n},c.x0=function(e){return arguments.length?(t=e,c):t},c.x1=function(e){return arguments.length?(n=e,c):n},c.y=function(e){return arguments.length?(r=i=e,c):i},c.y0=function(e){return arguments.length?(r=e,c):r},c.y1=function(e){return arguments.length?(i=e,c):i},c.defined=function(e){return arguments.length?(s=e,c):s},c.interpolate=function(e){return arguments.length?(typeof e=="function"?u=o=e:u=(o=ji.get(e)||Fi).key,a=o.reverse||o,f=o.closed?"M":"L",c):u},c.tension=function(e){return arguments.length?(l=e,c):l},c}function ju(e){return e.radius}function Fu(e){return[e.x,e.y]}function Iu(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+Au;return[n*Math.cos(r),n*Math.sin(r)]}}function qu(){return 64}function Ru(){return"circle"}function Uu(e){var t=Math.sqrt(e/St);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Vu(e,t){return D(e,$u),e.id=t,e}function Gu(e,t,n,r){var i=e.id;return et(e,typeof n=="function"?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Yu(e){return e==null&&(e=""),function(){this.textContent=e}}function Zu(t,n,r,i){var s=t.__transition__||(t.__transition__={active:0,count:0}),o=s[r];if(!o){var u=i.time;o=s[r]={tween:new v,time:u,ease:i.ease,delay:i.delay,duration:i.duration},++s.count,e.timer(function(e){function h(e){if(s.active>r)return d();s.active=r,o.event&&o.event.start.call(t,i,n),o.tween.forEach(function(e,r){(r=r.call(t,i,n))&&c.push(r)});if(p(e))return 1;wn(p,0,u)}function p(e){if(s.active!==r)return d();var u=(e-f)/l,h=a(u),p=c.length;while(p>0)c[--p].call(t,h);if(u>=1)return d(),o.event&&o.event.end.call(t,i,n),1}function d(){return--s.count?delete s[r]:delete t.__transition__,1}var i=t.__data__,a=o.ease,f=o.delay,l=o.duration,c=[];if(f<=e)return h(e);wn(h,f,u)},0,u)}}function na(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function ra(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function ia(e,t,n){i=[];if(n&&t.length>1){var r=tu(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function fa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ya(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new ua(n-1)),1),n}function s(e,n){return t(e=new ua(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)while(o<r)n(o)%s||u.push(new Date(+o)),t(o,1);else while(o<r)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ua=fa;var r=new fa;return r._=e,o(r,t,n)}finally{ua=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=ba(e);return a.floor=a,a.round=ba(r),a.ceil=ba(i),a.offset=ba(s),a.range=u,e}function ba(e){return function(t,n){try{ua=fa;var r=new fa;return r._=t,e(r,n)._}finally{ua=Date}}}function wa(e,t,n,r){var i,s,o=0,u=t.length,a=n.length;while(o<u){if(r>=a)return-1;i=t.charCodeAt(o++);if(i===37){s=Ha[t.charAt(o++)];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Ea(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function Sa(e){var t=new v,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function xa(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function Ba(e,t,n){Ca.lastIndex=0;var r=Ca.exec(t.substring(n));return r?(e.w=ka.get(r[0].toLowerCase()),n+r[0].length):-1}function ja(e,t,n){Ta.lastIndex=0;var r=Ta.exec(t.substring(n));return r?(e.w=Na.get(r[0].toLowerCase()),n+r[0].length):-1}function Fa(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ia(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function qa(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ra(e,t,n){Oa.lastIndex=0;var r=Oa.exec(t.substring(n));return r?(e.m=Ma.get(r[0].toLowerCase()),n+r[0].length):-1}function Ua(e,t,n){La.lastIndex=0;var r=La.exec(t.substring(n));return r?(e.m=Aa.get(r[0].toLowerCase()),n+r[0].length):-1}function za(e,t,n){return wa(e,Pa.c.toString(),t,n)}function Wa(e,t,n){return wa(e,Pa.x.toString(),t,n)}function Xa(e,t,n){return wa(e,Pa.X.toString(),t,n)}function Va(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $a(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.y=Ja(+r[0]),n+r[0].length):-1}function Ja(e){return e+(e>68?1900:2e3)}function Ka(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qa(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ga(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Ya(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Za(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ef(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tf(e,t,n){nf.lastIndex=0;var r=nf.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rf(e,t,n){var r=sf.get(t.substring(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}function of(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(Math.abs(t)/60),i=Math.abs(t)%60;return n+xa(r,"0",2)+xa(i,"0",2)}function uf(e,t,n){_a.lastIndex=0;var r=_a.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function ff(e){return e.toISOString()}function lf(t,n,r){function i(e){return t(e)}return i.invert=function(e){return cf(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(cf)},i.nice=function(e){return i.domain(iu(i.domain(),e))},i.ticks=function(r,s){var o=tu(i.domain());if(typeof r!="function"){var u=o[1]-o[0],a=u/r,f=e.bisect(vf,a);if(f==vf.length)return n.year(o,r);if(!f)return t.ticks(r).map(cf);a/vf[f-1]<vf[f]/a&&--f,r=n[f],s=r[1],r=r[0].range}return r(o[0],new Date(+o[1]+1),s)},i.tickFormat=function(){return r},i.copy=function(){return lf(t.copy(),n,r)},fu(i,t)}function cf(e){return new Date(e)}function hf(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}function pf(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function df(e){var t=e.getFullYear(),n=pf(t),r=pf(t+1);return t+(e-n)/(r-n)}function xf(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function Tf(e){var t=e.getUTCFullYear(),n=xf(t),r=xf(t+1);return t+(e-n)/(r-n)}function Nf(e){return JSON.parse(e.responseText)}function Cf(e){var n=t.createRange();return n.selectNode(t.body),n.createContextualFragment(e.responseText)}var e={version:"3.2.8"};Date.now||(Date.now=function(){return+(new Date)});var t=document,n=t.documentElement,r=window;try{t.createElement("div").style.setProperty("opacity",0,"")}catch(i){var s=r.Element.prototype,o=s.setAttribute,u=s.setAttributeNS,a=r.CSSStyleDeclaration.prototype,f=a.setProperty;s.setAttribute=function(e,t){o.call(this,e,t+"")},s.setAttributeNS=function(e,t,n){u.call(this,e,t,n+"")},a.setProperty=function(e,t,n){f.call(this,e,t+"",n)}}e.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},e.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},e.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&!((i=o=e[n])!=null&&i<=i))i=o=undefined;while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r&&!((i=o=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},e.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},e.mean=function(e,t){var n=e.length,r,i=0,s=-1,o=0;if(arguments.length===1)while(++s<n)l(r=e[s])&&(i+=(r-i)/++o);else while(++s<n)l(r=t.call(e,e[s],s))&&(i+=(r-i)/++o);return o?i:undefined},e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},e.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(l),t.length?e.quantile(t.sort(e.ascending),.5):undefined},e.bisector=function(e){return{left:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e.call(t,t[s],s)<n?r=s+1:i=s}return r},right:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;n<e.call(t,t[s],s)?i=s:r=s+1}return r}}};var c=e.bisector(function(e){return e});e.bisectLeft=c.left,e.bisect=e.bisectRight=c.right,e.shuffle=function(e){var t=e.length,n,r;while(t)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e},e.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r},e.zip=function(){if(!(s=arguments.length))return[];for(var t=-1,n=e.min(arguments,h),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=arguments[i][t];return r},e.transpose=function(t){return e.zip.apply(e,t)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.merge=function(e){return Array.prototype.concat.apply([],e)},e.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=p(Math.abs(n)),s=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++s)>t)r.push(o/i);else while((o=e+n*++s)<t)r.push(o/i);return r},e.map=function(e){var t=new v;if(e instanceof v)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},d(v,{has:function(e){return m+e in this},get:function(e){return this[m+e]},set:function(e,t){return this[m+e]=t},remove:function(e){return e=m+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===g&&e.call(this,t.substring(1),this[t])}});var m="\0",g=m.charCodeAt(0);e.nest=function(){function o(e,r,u){if(u>=n.length)return s?s.call(t,r):i?r.sort(i):r;var a=-1,f=r.length,l=n[u++],c,h,p,d=new v,m;while(++a<f)(m=d.get(c=l(h=r[a])))?m.push(h):d.set(c,[h]);return e?(h=e(),p=function(t,n){h.set(t,o(e,n,u))}):(h={},p=function(t,n){h[t]=o(e,n,u)}),d.forEach(p),h}function u(e,t){if(t>=n.length)return e;var i=[],s=r[t++];return e.forEach(function(e,n){i.push({key:e,values:u(n,t)})}),s?i.sort(function(e,t){return s(e.key,t.key)}):i}var t={},n=[],r=[],i,s;return t.map=function(e,t){return o(t,e,0)},t.entries=function(t){return u(o(e.map,t,0),0)},t.key=function(e){return n.push(e),t},t.sortKeys=function(e){return r[n.length-1]=e,t},t.sortValues=function(e){return i=e,t},t.rollup=function(e){return s=e,t},t},e.set=function(e){var t=new y;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},d(y,{has:function(e){return m+e in this},add:function(e){return this[m+e]=!0,e},remove:function(e){return e=m+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===g&&e.call(this,t.substring(1))}}),e.behavior={},e.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=b(e,t,t[i]);return e};var E=["webkit","ms","moz","Moz","o","O"],S=T;try{S(n.childNodes)[0].nodeType}catch(N){S=x}e.dispatch=function(){var e=new k,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=L(e);return e},k.prototype.on=function(e,t){var n=e.indexOf("."),r="";n>=0&&(r=e.substring(n+1),e=e.substring(0,n));if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},e.event=null,e.requote=function(e){return e.replace(_,"\\$&")};var _=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,D={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},H=function(e,t){return t.querySelector(e)},B=function(e,t){return t.querySelectorAll(e)},j=n[w(n,"matchesSelector")],F=function(e,t){return j.call(e,t)};typeof Sizzle=="function"&&(H=function(e,t){return Sizzle(e,t)[0]||null},B=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},F=Sizzle.matchesSelector),e.selection=function(){return it};var I=e.selection.prototype=[];I.select=function(e){var t=[],n,r,i,s;e=q(e);for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a,o)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return P(t)},I.selectAll=function(e){var t=[],n,r;e=R(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)if(r=o[u])t.push(n=S(e.call(r,r.__data__,u,i))),n.parentNode=r;return P(t)};var U={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:U,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),U.hasOwnProperty(n)?{space:U[n],local:e}:e}},I.attr=function(t,n){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=e.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},I.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.getAttribute("class");while(++i<r)if(!X(e[i]).test(t))return!1}return!0}for(t in e)this.each(V(t,e[t]));return this}return this.each(V(e,t))},I.style=function(e,t,n){var i=arguments.length;if(i<3){if(typeof e!="string"){i<2&&(t="");for(n in e)this.each(J(n,e[n],t));return this}if(i<2)return r.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(J(e,t,n))},I.property=function(e,t){if(arguments.length<2){if(typeof e=="string")return this.node()[e];for(t in e)this.each(K(t,e[t]));return this}return this.each(K(e,t))},I.text=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},I.html=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},I.append=function(e){return e=Q(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},I.insert=function(e,t){return e=Q(e),t=q(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments))})},I.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},I.data=function(e,t){function o(e,n){var r,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(s),c=new Array(s),h=new Array(i),p,d;if(t){var m=new v,g=new v,y=[],b;for(r=-1;++r<i;)b=t.call(p=e[r],p.__data__,r),m.has(b)?h[r]=p:m.set(b,p),y.push(b);for(r=-1;++r<s;)b=t.call(n,d=n[r],r),(p=m.get(b))?(l[r]=p,p.__data__=d):g.has(b)||(c[r]=G(d)),g.set(b,d),m.remove(b);for(r=-1;++r<i;)m.has(y[r])&&(h[r]=e[r])}else{for(r=-1;++r<o;)p=e[r],d=n[r],p?(p.__data__=d,l[r]=p):c[r]=G(d);for(;r<s;++r)c[r]=G(n[r]);for(;r<i;++r)h[r]=e[r]}c.update=l,c.parentNode=l.parentNode=h.parentNode=e.parentNode,u.push(c),a.push(l),f.push(h)}var n=-1,r=this.length,i,s;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r)if(s=i[n])e[n]=s.__data__;return e}var u=tt([]),a=P([]),f=P([]);if(typeof e=="function")while(++n<r)o(i=this[n],e.call(i,i.parentNode.__data__,n));else while(++n<r)o(i=this[n],e);return a.enter=function(){return u},a.exit=function(){return f},a},I.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},I.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=Y(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return P(t)},I.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},I.sort=function(e){e=Z.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},I.each=function(e){return et(this,function(t,n,r){e.call(t,t.__data__,n,r)})},I.call=function(e){var t=S(arguments);return e.apply(t[0]=this,t),this},I.empty=function(){return!this.node()},I.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null},I.size=function(){var e=0;return this.each(function(){++e}),e};var nt=[];e.selection.enter=tt,e.selection.enter.prototype=nt,nt.append=I.append,nt.empty=I.empty,nt.node=I.node,nt.call=I.call,nt.size=I.size,nt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f,u)),r.__data__=o.__data__):n.push(null)}return P(t)},nt.insert=function(e,t){return arguments.length<2&&(t=rt(this)),I.insert.call(this,e,t)},I.transition=function(){var e=Ku||++Ju,t=[],n,r,i=Qu||{time:Date.now(),ease:Ds,delay:0,duration:250};for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(r=u[a])&&Zu(r,a,e,i),n.push(r)}return Vu(t,e)},e.select=function(e){var r=[typeof e=="string"?H(e,t):e];return r.parentNode=n,P([r])},e.selectAll=function(e){var r=S(typeof e=="string"?B(e,t):e);return r.parentNode=n,P([r])};var it=e.select(n);I.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t=!1);for(n in e)this.each(st(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(st(e,t,n))};var ot=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});ot.forEach(function(e){"on"+e in t&&ot.remove(e)});var ft=w(n.style,"userSelect"),lt=0;e.mouse=function(e){return pt(e,O())};var ht=/WebKit/.test(r.navigator.userAgent)?-1:0;e.touches=function(e,t){return arguments.length<2&&(t=O().touches),t?S(t).map(function(t){var n=pt(e,t);return n.identifier=t.identifier,n}):[]},e.behavior.drag=function(){function o(){this.on("mousedown.drag",i).on("touchstart.drag",s)}function u(){return e.event.changedTouches[0].identifier}function a(t,n){return e.touches(t).filter(function(e){return e.identifier===n})[0]}function f(i,s,o,u){return function(){function b(){if(!f)return w();var e=s(f,h),t=e[0]-d[0],n=e[1]-d[1];v|=t|n,d=e,l({type:"drag",x:e[0]+m[0],y:e[1]+m[1],dx:t,dy:n})}function w(){g.on(o+"."+p,null).on(u+"."+p,null),y(v&&e.event.target===c),l({type:"dragend"})}var a=this,f=a.parentNode,l=t.of(a,arguments),c=e.event.target,h=i(),p=h==null?"drag":"drag-"+h,d=s(f,h),v=0,m,g=e.select(r).on(o+"."+p,b).on(u+"."+p,w),y=ct();n?(m=n.apply(a,arguments),m=[m.x-d[0],m.y-d[1]]):m=[0,0],l({type:"dragstart"})}}var t=M(o,"drag","dragstart","dragend"),n=null,i=f(C,e.mouse,"mousemove","mouseup"),s=f(u,a,"touchmove","touchend");return o.origin=function(e){return arguments.length?(n=e,o):n},e.rebind(o,t,"on")},e.behavior.zoom=function(){function y(){this.on(o,N).on(mt+".zoom",k).on(u,L).on("dblclick.zoom",O).on(f,C)}function b(e){return[(e[0]-t[0])/i,(e[1]-t[1])/i]}function w(e){return[e[0]*i+t[0],e[1]*i+t[1]]}function E(e){i=Math.max(s[0],Math.min(s[1],e))}function S(e,n){n=w(n),t[0]+=e[0]-n[0],t[1]+=e[1]-n[1]}function x(){v&&v.domain(d.range().map(function(e){return(e-t[0])/i}).map(d.invert)),g&&g.domain(m.range().map(function(e){return(e-t[1])/i}).map(m.invert))}function T(e){x(),e({type:"zoom",scale:i,translate:t})}function N(){function c(){s=1,S(e.mouse(t),f),T(n)}function h(){o.on(u,r===t?L:null).on(a,null),l(s&&e.event.target===i)}var t=this,n=p.of(t,arguments),i=e.event.target,s=0,o=e.select(r).on(u,c).on(a,h),f=b(e.mouse(t)),l=ct()}function C(){function g(){var n=e.touches(t);return a=i,s={},n.forEach(function(e){s[e.identifier]=b(e)}),n}function y(){var e=Date.now(),t=g();if(t.length===1){if(e-h<500){var r=t[0],o=s[r.identifier];E(i*2),S(r,o),A(),T(n)}h=e}else if(t.length>1){var r=t[0],a=t[1],f=r[0]-a[0],l=r[1]-a[1];u=f*f+l*l}}function w(){var r=e.touches(t),i=r[0],o=s[i.identifier];if(f=r[1]){var f,l=s[f.identifier],c=e.event.scale;if(c==null){var p=(p=f[0]-i[0])*p+(p=f[1]-i[1])*p;c=u&&Math.sqrt(p/u)}i=[(i[0]+f[0])/2,(i[1]+f[1])/2],o=[(o[0]+l[0])/2,(o[1]+l[1])/2],E(c*a)}h=null,S(i,o),T(n)}function x(){e.event.touches.length?g():(d.on(l,null).on(c,null),v.on(o,N).on(f,C),m())}var t=this,n=p.of(t,arguments),s,u=0,a,d=e.select(r).on(l,w).on(c,x),v=e.select(t).on(o,null).on(f,y),m=ct();y()}function k(){A(),n||(n=b(e.mouse(this))),E(Math.pow(2,vt()*.002)*i),S(e.mouse(this),n),T(p.of(this,arguments))}function L(){n=null}function O(){var t=e.mouse(this),n=b(t),r=Math.log(i)/Math.LN2;E(Math.pow(2,e.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)),S(t,n),T(p.of(this,arguments))}var t=[0,0],n,i=1,s=dt,o="mousedown.zoom",u="mousemove.zoom",a="mouseup.zoom",f="touchstart.zoom",l="touchmove.zoom",c="touchend.zoom",h,p=M(y,"zoom"),d,v,m,g;return y.translate=function(e){return arguments.length?(t=e.map(Number),x(),y):t},y.scale=function(e){return arguments.length?(i=+e,x(),y):i},y.scaleExtent=function(e){return arguments.length?(s=e==null?dt:e.map(Number),y):s},y.x=function(e){return arguments.length?(v=e,d=e.copy(),t=[0,0],i=1,y):v},y.y=function(e){return arguments.length?(g=e,m=e.copy(),t=[0,0],i=1,y):g},e.rebind(y,p,"on")};var dt=[0,Infinity],vt,mt="onwheel"in t?(vt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in t?(vt=function(){return e.event.wheelDelta},"mousewheel"):(vt=function(){return-e.event.detail},"MozMousePixelScroll");gt.prototype.toString=function(){return this.rgb()+""},e.hsl=function(e,t,n){return arguments.length===1?e instanceof bt?yt(e.h,e.s,e.l):tn(""+e,nn,yt):yt(+e,+t,+n)};var wt=bt.prototype=new gt;wt.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),yt(this.h,this.s,this.l/e)},wt.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),yt(this.h,this.s,e*this.l)},wt.rgb=function(){return Et(this.h,this.s,this.l)};var St=Math.PI,xt=1e-6,Tt=xt*xt,Nt=St/180,Ct=180/St;e.hcl=function(t,n,r){return arguments.length===1?t instanceof Pt?Dt(t.h,t.c,t.l):t instanceof Ft?Xt(t.l,t.a,t.b):Xt((t=rn((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):Dt(+t,+n,+r)};var Ht=Pt.prototype=new gt;Ht.brighter=function(e){return Dt(this.h,this.c,Math.min(100,this.l+It*(arguments.length?e:1)))},Ht.darker=function(e){return Dt(this.h,this.c,Math.max(0,this.l-It*(arguments.length?e:1)))},Ht.rgb=function(){return Bt(this.h,this.c,this.l).rgb()},e.lab=function(t,n,r){return arguments.length===1?t instanceof Ft?jt(t.l,t.a,t.b):t instanceof Pt?Bt(t.l,t.c,t.h):rn((t=e.rgb(t)).r,t.g,t.b):jt(+t,+n,+r)};var It=18,qt=.95047,Rt=1,Ut=1.08883,zt=Ft.prototype=new gt;zt.brighter=function(e){return jt(Math.min(100,this.l+It*(arguments.length?e:1)),this.a,this.b)},zt.darker=function(e){return jt(Math.max(0,this.l-It*(arguments.length?e:1)),this.a,this.b)},zt.rgb=function(){return Wt(this.l,this.a,this.b)},e.rgb=function(e,t,n){return arguments.length===1?e instanceof Yt?Gt(e.r,e.g,e.b):tn(""+e,Gt,Et):Gt(~~e,~~t,~~n)};var Zt=Yt.prototype=new gt;Zt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?Gt(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),Gt(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(r/e))))},Zt.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),Gt(~~(e*this.r),~~(e*this.g),~~(e*this.b))},Zt.hsl=function(){return nn(this.r,this.g,this.b)},Zt.toString=function(){return"#"+en(this.r)+en(this.g)+en(this.b)};var un=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});un.forEach(function(e,t){un.set(e,Kt(t))}),e.functor=an,e.xhr=ln(fn),e.dsv=function(t,n){function s(t,r,i){arguments.length<3&&(i=r,r=null);var s=e.xhr(t,n,i);return s.row=function(e){return arguments.length?s.response((r=e)==null?o:u(e)):r},s.row(r)}function o(e){return s.parse(e.responseText)}function u(e){return function(t){return s.parse(t.responseText,e)}}function a(e){return e.map(f).join(t)}function f(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var r=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);return s.parse=function(e,t){var n;return s.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},s.parseRows=function(e,t){function c(){if(u>=o)return r;if(l)return l=!1,n;var t=u;if(e.charCodeAt(t)===34){var s=t;while(s++<o)if(e.charCodeAt(s)===34){if(e.charCodeAt(s+1)!==34)break;++s}u=s+2;var a=e.charCodeAt(s+1);return a===13?(l=!0,e.charCodeAt(s+2)===10&&++u):a===10&&(l=!0),e.substring(t+1,s).replace(/""/g,'"')}while(u<o){var a=e.charCodeAt(u++),f=1;if(a===10)l=!0;else if(a===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(a!==i)continue;return e.substring(t,u-f)}return e.substring(t)}var n={},r={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==r){var h=[];while(f!==n&&f!==r)h.push(f),f=c();if(t&&!(h=t(h,a++)))continue;s.push(h)}return s},s.format=function(e){if(Array.isArray(e[0]))return s.formatRows(e);var n=new y,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(f).join(t)].concat(e.map(function(e){return r.map(function(t){return f(e[t])}).join(t)})).join("\n")},s.formatRows=function(e){return e.map(a).join("\n")},s},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var pn,dn,vn,mn,gn,yn=r[w(r,"requestAnimationFrame")]||function(e){setTimeout(e,17)};e.timer=function(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,s={callback:e,time:i,next:null};dn?dn.next=s:pn=s,dn=s,vn||(mn=clearTimeout(mn),vn=1,yn(bn))},e.timer.flush=function(){En(),Sn()};var xn=".",Tn=",",Nn=[3,3],Cn="$",kn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ln);e.formatPrefix=function(t,n){var r=0;return t&&(t<0&&(t*=-1),n&&(t=e.round(t,Mn(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r<=0?r+1:r-1)/3)*3))),kn[8+r/3]},e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},e.format=function(t){var n=An.exec(t),r=n[1]||" ",i=n[2]||">",s=n[3]||"",o=n[4]||"",u=n[5],a=+n[6],f=n[7],l=n[8],c=n[9],h=1,p="",d=!1;l&&(l=+l.substring(1));if(u||r==="0"&&i==="=")u=r="0",i="=",f&&(a-=Math.floor((a-1)/4));switch(c){case"n":f=!0,c="g";break;case"%":h=100,p="%",c="f";break;case"p":h=100,p="%",c="r";break;case"b":case"o":case"x":case"X":o==="#"&&(o="0"+c.toLowerCase());case"c":case"d":d=!0,l=0;break;case"s":h=-1,c="r"}o==="#"?o="":o==="$"&&(o=Cn),c=="r"&&!l&&(c="g");if(l!=null)if(c=="g")l=Math.max(1,Math.min(21,l));else if(c=="e"||c=="f")l=Math.max(0,Math.min(20,l));c=On.get(c)||_n;var v=u&&f;return function(t){if(d&&t%1)return"";var n=t<0||t===0&&1/t<0?(t=-t,"-"):s;if(h<0){var m=e.formatPrefix(t,l);t=m.scale(t),p=m.symbol}else t*=h;t=c(t,l);var g=t.lastIndexOf("."),y=g<0?t:t.substring(0,g),b=g<0?"":xn+t.substring(g+1);!u&&f&&(y=Dn(y));var w=o.length+y.length+b.length+(v?0:n.length),E=w<a?(new Array(w=a-w+1)).join(r):"";return v&&(y=Dn(E+y)),n+=o,t=y+b,(i==="<"?n+t+E:i===">"?E+n+t:i==="^"?E.substring(0,w>>=1)+n+t+E.substring(w):n+(v?t:E+t))+p}};var An=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,On=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,Mn(t,n))).toFixed(Math.max(0,Math.min(20,Mn(t*(1+1e-15),n))))}}),Dn=fn;if(Nn){var Pn=Nn.length;Dn=function(e){var t=e.length,n=[],r=0,i=Nn[0];while(t>0&&i>0)n.push(e.substring(t-=i,t+i)),i=Nn[r=(r+1)%Pn];return n.reverse().join(Tn)}}e.geo={},Hn.prototype={s:0,t:0,add:function(e){jn(e,this.t,Bn),jn(Bn.s,this.s,this),this.s?this.t+=Bn.t:this.s=Bn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Bn=new Hn;e.geo.stream=function(e,t){e&&In.hasOwnProperty(e.type)?In[e.type](e,t):Fn(e,t)};var In={Feature:function(e,t){Fn(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Fn(n[r].geometry,t)}},qn={Sphere:function(e,t){t.sphere()},Point:function(e,t){var n=e.coordinates;t.point(n[0],n[1])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length,s;while(++r<i)s=n[r],t.point(s[0],s[1])},LineString:function(e,t){Rn(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Rn(n[r],t,0)},Polygon:function(e,t){Un(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Un(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Fn(n[r],t)}};e.geo.area=function(t){return zn=0,e.geo.stream(t,Xn),zn};var zn,Wn=new Hn,Xn={sphere:function(){zn+=4*St},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Wn.reset(),Xn.lineStart=Vn},polygonEnd:function(){var e=2*Wn;zn+=e<0?4*St+e:e,Xn.lineStart=Xn.lineEnd=Xn.point=C}};e.geo.bounds=function(){function p(e,s){l.push(c=[t=e,r=e]),s<n&&(n=s),s>i&&(i=s)}function d(e,o){var u=$n([e*Nt,o*Nt]);if(a){var f=Kn(a,u),l=[f[1],-f[0],0],c=Kn(l,f);Yn(c),c=Zn(c);var h=e-s,d=h>0?1:-1,v=c[0]*Ct*d,m=Math.abs(h)>180;if(m^(d*s<v&&v<d*e)){var g=c[1]*Ct;g>i&&(i=g)}else if(v=(v+360)%360-180,m^(d*s<v&&v<d*e)){var g=-c[1]*Ct;g<n&&(n=g)}else o<n&&(n=o),o>i&&(i=o);m?e<s?w(t,e)>w(t,r)&&(r=e):w(e,r)>w(t,r)&&(t=e):r>=t?(e<t&&(t=e),e>r&&(r=e)):e>s?w(t,e)>w(t,r)&&(r=e):w(e,r)>w(t,r)&&(t=e)}else p(e,o);a=u,s=e}function v(){h.point=d}function m(){c[0]=t,c[1]=r,h.point=p,a=null}function g(e,t){if(a){var n=e-s;f+=Math.abs(n)>180?n+(n>0?360:-360):n}else o=e,u=t;Xn.point(e,t),d(e,t)}function y(){Xn.lineStart()}function b(){g(o,u),Xn.lineEnd(),Math.abs(f)>xt&&(t=-(r=180)),c[0]=t,c[1]=r,a=null}function w(e,t){return(t-=e)<0?t+360:t}function E(e,t){return e[0]-t[0]}function S(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var t,n,r,i,s,o,u,a,f,l,c,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=b,f=0,Xn.polygonStart()},polygonEnd:function(){Xn.polygonEnd(),h.point=p,h.lineStart=v,h.lineEnd=m,Wn<0?(t=-(r=180),n=-(i=90)):f>xt?i=90:f<-xt&&(n=-90),c[0]=t,c[1]=r}};return function(s){i=r=-(t=n=Infinity),l=[],e.geo.stream(s,h);var o=l.length;if(o){l.sort(E);for(var u=1,a=l[0],f,p=[a];u<o;++u)f=l[u],S(f[0],a)||S(f[1],a)?(w(a[0],f[1])>w(a[0],a[1])&&(a[1]=f[1]),w(f[0],a[1])>w(a[0],a[1])&&(a[0]=f[0])):p.push(a=f);var d=-Infinity,v;for(var o=p.length-1,u=0,a=p[o],f;u<=o;a=f,++u)f=p[u],(v=w(a[1],f[0]))>d&&(d=v,t=f[0],r=a[1])}return l=c=null,t===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,i]]}}(),e.geo.centroid=function(t){tr=nr=rr=ir=sr=or=ur=ar=fr=lr=cr=0,e.geo.stream(t,hr);var n=fr,r=lr,i=cr,s=n*n+r*r+i*i;if(s<Tt){n=or,r=ur,i=ar,nr<xt&&(n=rr,r=ir,i=sr),s=n*n+r*r+i*i;if(s<Tt)return[NaN,NaN]}return[Math.atan2(r,n)*Ct,At(i/Math.sqrt(s))*Ct]};var tr,nr,rr,ir,sr,or,ur,ar,fr,lr,cr,hr={sphere:C,point:pr,lineStart:vr,lineEnd:mr,polygonStart:function(){hr.lineStart=gr},polygonEnd:function(){hr.lineStart=vr}},Cr=Er(yr,kr,Ar,Mr),Or=[-St,0],Dr=1e9;(e.geo.conicEqualArea=function(){return jr(Fr)}).raw=Fr,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){function f(e){var t=e[0],n=e[1];return i=null,(o(t,n),i)||(u(t,n),i)||a(t,n),i}var t=e.geo.albers(),n=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,s={point:function(e,t){i=[e,t]}},o,u,a;return f.invert=function(e){var i=t.scale(),s=t.translate(),o=(e[0]-s[0])/i,u=(e[1]-s[1])/i;return(u>=.12&&u<.234&&o>=-0.425&&o<-0.214?n:u>=.166&&u<.234&&o>=-0.214&&o<-0.115?r:t).invert(e)},f.stream=function(e){var i=t.stream(e),s=n.stream(e),o=r.stream(e);return{point:function(e,t){i.point(e,t),s.point(e,t),o.point(e,t)},sphere:function(){i.sphere(),s.sphere(),o.sphere()},lineStart:function(){i.lineStart(),s.lineStart(),o.lineStart()},lineEnd:function(){i.lineEnd(),s.lineEnd(),o.lineEnd()},polygonStart:function(){i.polygonStart(),s.polygonStart(),o.polygonStart()},polygonEnd:function(){i.polygonEnd(),s.polygonEnd(),o.polygonEnd()}}},f.precision=function(e){return arguments.length?(t.precision(e),n.precision(e),r.precision(e),f):t.precision()},f.scale=function(e){return arguments.length?(t.scale(e),n.scale(e*.35),r.scale(e),f.translate(t.translate())):t.scale()},f.translate=function(e){if(!arguments.length)return t.translate();var i=t.scale(),l=+e[0],c=+e[1];return o=t.translate(e).clipExtent([[l-.455*i,c-.238*i],[l+.455*i,c+.238*i]]).stream(s).point,u=n.translate([l-.307*i,c+.201*i]).clipExtent([[l-.425*i+xt,c+.12*i+xt],[l-.214*i-xt,c+.234*i-xt]]).stream(s).point,a=r.translate([l-.205*i,c+.212*i]).clipExtent([[l-.214*i+xt,c+.166*i+xt],[l-.115*i-xt,c+.234*i-xt]]).stream(s).point,f},f.scale(1070)};var Ir,qr,Rr={point:C,lineStart:C,lineEnd:C,polygonStart:function(){qr=0,Rr.lineStart=Ur},polygonEnd:function(){Rr.lineStart=Rr.lineEnd=Rr.point=C,Ir+=Math.abs(qr/2)}},zr,Wr,Xr,Vr,$r={point:Jr,lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C},Gr={point:Yr,lineStart:Zr,lineEnd:ei,polygonStart:function(){Gr.lineStart=ti},polygonEnd:function(){Gr.point=Yr,Gr.lineStart=Zr,Gr.lineEnd=ei}};e.geo.path=function(){function u(n){if(n){typeof t=="function"&&s.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=i(s);e.geo.stream(n,o)}return s.result()}function a(){return o=null,u}var t=4.5,n,r,i,s,o;return u.area=function(t){return Ir=0,e.geo.stream(t,i(Rr)),Ir},u.centroid=function(t){return rr=ir=sr=or=ur=ar=fr=lr=cr=0,e.geo.stream(t,i(Gr)),cr?[fr/cr,lr/cr]:ar?[or/ar,ur/ar]:sr?[rr/sr,ir/sr]:[NaN,NaN]},u.bounds=function(t){return Xr=Vr=-(zr=Wr=Infinity),e.geo.stream(t,i($r)),[[zr,Wr],[Xr,Vr]]},u.projection=function(e){return arguments.length?(i=(n=e)?e.stream||ii(e):fn,a()):n},u.context=function(e){return arguments.length?(s=(r=e)==null?new Kr:new ni(e),typeof t!="function"&&s.pointRadius(t),a()):r},u.pointRadius=function(e){return arguments.length?(t=typeof e=="function"?e:(s.pointRadius(+e),+e),u):t},u.projection(e.geo.albersUsa()).context(null)},e.geo.projection=si,e.geo.projectionMutator=oi,(e.geo.equirectangular=function(){return si(ai)}).raw=ai.invert=ai,e.geo.rotation=function(e){function t(t){return t=e(t[0]*Nt,t[1]*Nt),t[0]*=Ct,t[1]*=Ct,t}return e=fi(e[0]%360*Nt,e[1]*Nt,e.length>2?e[2]*Nt:0),t.invert=function(t){return t=e.invert(t[0]*Nt,t[1]*Nt),t[0]*=Ct,t[1]*=Ct,t},t},e.geo.circle=function(){function i(){var t=typeof e=="function"?e.apply(this,arguments):e,n=fi(-t[0]*Nt,-t[1]*Nt,0).invert,i=[];return r(null,null,1,{point:function(e,t){i.push(e=n(e,t)),e[0]*=Ct,e[1]*=Ct}}),{type:"Polygon",coordinates:[i]}}var e=[0,0],t,n=6,r;return i.origin=function(t){return arguments.length?(e=t,i):e},i.angle=function(e){return arguments.length?(r=pi((t=+e)*Nt,n*Nt),i):t},i.precision=function(e){return arguments.length?(r=pi(t*Nt,(n=+e)*Nt),i):n},i.angle(90)},e.geo.distance=function(e,t){var n=(t[0]-e[0])*Nt,r=e[1]*Nt,i=t[1]*Nt,s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),a=Math.cos(r),f=Math.sin(i),l=Math.cos(i),c;return Math.atan2(Math.sqrt((c=l*s)*c+(c=a*f-u*l*o)*c),u*f+a*l*o)},e.geo.graticule=function(){function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return e.range(Math.ceil(i/c)*c,r,c).map(v).concat(e.range(Math.ceil(a/h)*h,u,h).map(m)).concat(e.range(Math.ceil(n/f)*f,t,f).filter(function(e){return Math.abs(e%c)>xt}).map(p)).concat(e.range(Math.ceil(o/l)*l,s,l).filter(function(e){return Math.abs(e%h)>xt}).map(d))}var t,n,r,i,s,o,u,a,f=10,l=f,c=90,h=360,p,d,v,m,g=2.5;return y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(m(u).slice(1),v(r).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],a=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),a>u&&(e=a,a=u,u=e),y.precision(g)):[[i,a],[r,u]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],s=+e[1][1],n>t&&(e=n,n=t,t=e),o>s&&(e=o,o=s,s=e),y.precision(g)):[[n,o],[t,s]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(c=+e[0],h=+e[1],y):[c,h]},y.minorStep=function(e){return arguments.length?(f=+e[0],l=+e[1],y):[f,l]},y.precision=function(e){return arguments.length?(g=+e,p=vi(o,s,90),d=mi(n,t,g),v=vi(a,u,90),m=mi(i,r,g),y):g},y.majorExtent([[-180,-90+xt],[180,90-xt]]).minorExtent([[-180,-80-xt],[180,80+xt]])},e.geo.greatArc=function(){function s(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),i||r.apply(this,arguments)]}}var t=gi,n,r=yi,i;return s.distance=function(){return e.geo.distance(n||t.apply(this,arguments),i||r.apply(this,arguments))},s.source=function(e){return arguments.length?(t=e,n=typeof e=="function"?null:e,s):t},s.target=function(e){return arguments.length?(r=e,i=typeof e=="function"?null:e,s):r},s.precision=function(){return arguments.length?s:0},s},e.geo.interpolate=function(e,t){return bi(e[0]*Nt,e[1]*Nt,t[0]*Nt,t[1]*Nt)},e.geo.length=function(t){return wi=0,e.geo.stream(t,Ei),wi};var wi,Ei={sphere:C,point:C,lineStart:Si,lineEnd:C,polygonStart:C,polygonEnd:C},Ti=xi(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return si(Ti)}).raw=Ti;var Ni=xi(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},fn);(e.geo.azimuthalEquidistant=function(){return si(Ni)}).raw=Ni,(e.geo.conicConformal=function(){return jr(Ci)}).raw=Ci,(e.geo.conicEquidistant=function(){return jr(ki)}).raw=ki;var Li=xi(function(e){return 1/e},Math.atan);(e.geo.gnomonic=function(){return si(Li)}).raw=Li,Ai.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-St/2]},(e.geo.mercator=function(){return Oi(Ai)}).raw=Ai;var Mi=xi(function(){return 1},Math.asin);(e.geo.orthographic=function(){return si(Mi)}).raw=Mi;var _i=xi(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(e.geo.stereographic=function(){return si(_i)}).raw=_i,Di.invert=function(e,t){return[Math.atan2(Ot(e),Math.cos(t)),At(Math.sin(t)/Mt(e))]},(e.geo.transverseMercator=function(){return Oi(Di)}).raw=Di,e.geom={},e.svg={},e.svg.line=function(){return Pi(fn)};var ji=e.map({linear:Fi,"linear-closed":Ii,step:qi,"step-before":Ri,"step-after":Ui,basis:Ji,"basis-open":Ki,"basis-closed":Qi,bundle:Gi,cardinal:Xi,"cardinal-open":zi,"cardinal-closed":Wi,monotone:os});ji.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Zi=[0,2/3,1/3,0],es=[0,1/3,2/3,0],ts=[0,1/6,2/3,1/6];e.geom.hull=function(e){function r(e){if(e.length<3)return[];var r=an(t),i=an(n),s=e.length,o,u=s-1,a=[],f=[],l,c,h,p=0,d,v,m,g,y,b,w,E;if(r===Hi&&n===Bi)o=e;else for(c=0,o=[];c<s;++c)o.push([+r.call(this,l=e[c],c),+i.call(this,l,c)]);for(c=1;c<s;++c)if(o[c][1]<o[p][1]||o[c][1]==o[p][1]&&o[c][0]<o[p][0])p=c;for(c=0;c<s;++c){if(c===p)continue;v=o[c][1]-o[p][1],d=o[c][0]-o[p][0],a.push({angle:Math.atan2(v,d),index:c})}a.sort(function(e,t){return e.angle-t.angle}),w=a[0].angle,b=a[0].index,y=0;for(c=1;c<u;++c){h=a[c].index;if(w==a[c].angle){d=o[b][0]-o[p][0],v=o[b][1]-o[p][1],m=o[h][0]-o[p][0],g=o[h][1]-o[p][1];if(d*d+v*v>=m*m+g*g){a[c].index=-1;continue}a[y].index=-1}w=a[c].angle,y=c,b=h}f.push(p);for(c=0,h=0;c<2;++h)a[h].index>-1&&(f.push(a[h].index),c++);E=f.length;for(;h<u;++h){if(a[h].index<0)continue;while(!us(f[E-2],f[E-1],a[h].index,o))--E;f[E++]=a[h].index}var S=[];for(c=E-1;c>=0;--c)S.push(e[f[c]]);return S}var t=Hi,n=Bi;return arguments.length?r(e):(r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r)},e.geom.polygon=function(e){return D(e,as),e};var as=e.geom.polygon.prototype=[];as.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t)n=r,r=this[e],i+=n[1]*r[0]-n[0]*r[1];return i*.5},as.centroid=function(e){var t=-1,n=this.length,r=0,i=0,s,o=this[n-1],u;arguments.length||(e=-1/(6*this.area()));while(++t<n)s=o,o=this[t],u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return[r*e,i*e]},as.clip=function(e){var t,n=cs(e),r=-1,i=this.length-cs(this),s,o,u=this[i-1],a,f,l;while(++r<i){t=e.slice(),e.length=0,a=this[r],f=t[(o=t.length-n)-1],s=-1;while(++s<o)l=t[s],fs(l,u,a)?(fs(f,u,a)||e.push(ls(f,l,u,a)),e.push(l)):fs(f,u,a)&&e.push(ls(f,l,u,a)),f=l;n&&e.push(e[0]),u=a}return e},e.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return ps(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,r){var i=e[r],s=i[0],o=i[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-s,e[1]-o)}),t.sort(function(e,t){return e.angle-t.angle});for(var u=0,a=t.length-1;u<a;u++)n.push([i,t[u],t[u+1]])}),n},e.geom.voronoi=function(t){function s(t){var s,o=t.map(function(){return[]}),u=an(n),a=an(r),f,l,c=t.length,h=1e6;if(u===Hi&&a===Bi)s=t;else for(s=new Array(c),l=0;l<c;++l)s[l]=[+u.call(this,f=t[l],l),+a.call(this,f,l)];ps(s,function(e){var t,n,r,i,s,u;e.a===1&&e.b>=0?(t=e.ep.r,n=e.ep.l):(t=e.ep.l,n=e.ep.r),e.a===1?(s=t?t.y:-h,r=e.c-e.b*s,u=n?n.y:h,i=e.c-e.b*u):(r=t?t.x:-h,s=e.c-e.a*r,i=n?n.x:h,u=e.c-e.a*i);var a=[r,s],f=[i,u];o[e.region.l.index].push(a,f),o[e.region.r.index].push(a,f)}),o=o.map(function(t,n){var r=s[n][0],i=s[n][1],o=t.map(function(e){return Math.atan2(e[0]-r,e[1]-i)}),u=e.range(t.length).sort(function(e,t){return o[e]-o[t]});return u.filter(function(e,t){return!t||o[e]-o[u[t-1]]>xt}).map(function(e){return t[e]})}),o.forEach(function(e,t){var n=e.length;if(!n)return e.push([-h,-h],[-h,h],[h,h],[h,-h]);if(n>2)return;var r=s[t],i=e[0],o=e[1],u=r[0],a=r[1],f=i[0],l=i[1],c=o[0],p=o[1],d=Math.abs(c-f),v=p-l;if(Math.abs(v)<xt){var m=a<l?-h:h;e.push([-h,m],[h,m])}else if(d<xt){var g=u<f?-h:h;e.push([g,-h],[g,h])}else{var m=(c-f)*(l-a)<(f-u)*(p-l)?h:-h,y=Math.abs(v)-d;Math.abs(y)<xt?e.push([v<0?m:-m,m]):(y>0&&(m*=-1),e.push([-h,m],[h,m]))}});if(i)for(l=0;l<c;++l)i.clip(o[l]);for(l=0;l<c;++l)o[l].point=t[l];return o}var n=Hi,r=Bi,i=null;return arguments.length?s(t):(s.x=function(e){return arguments.length?(n=e,s):n},s.y=function(e){return arguments.length?(r=e,s):r},s.clipExtent=function(t){if(!arguments.length)return i&&[i[0],i[2]];if(t==null)i=null;else{var n=+t[0][0],r=+t[0][1],o=+t[1][0],u=+t[1][1];i=e.geom.polygon([[n,r],[n,u],[o,u],[o,r]])}return s},s.size=function(e){return arguments.length?s.clipExtent(e&&[[0,0],e]):i&&i[2]},s.links=function(e){var t,i=e.map(function(){return[]}),s=[],o=an(n),u=an(r),a,f,l=e.length;if(o===Hi&&u===Bi)t=e;else for(t=new Array(l),f=0;f<l;++f)t[f]=[+o.call(this,a=e[f],f),+u.call(this,a,f)];return ps(t,function(t){var n=t.region.l.index,r=t.region.r.index;if(i[n][r])return;i[n][r]=i[r][n]=!0,s.push({source:e[n],target:e[r]})}),s},s.triangles=function(t){if(n===Hi&&r===Bi)return e.geom.delaunay(t);var i=new Array(f),s=an(n),o=an(r),u,a=-1,f=t.length;while(++a<f)(i[a]=[+s.call(this,u=t[a],a),+o.call(this,u,a)]).data=u;return e.geom.delaunay(i).map(function(e){return e.map(function(e){return e.data})})},s)};var hs={l:"r",r:"l"};e.geom.quadtree=function(e,t,n,r,i){function a(e){function x(e,t,n,r,i,s,o,u){if(isNaN(n)||isNaN(r))return;if(e.leaf){var a=e.x,f=e.y;if(a!=null)if(Math.abs(a-n)+Math.abs(f-r)<.01)T(e,t,n,r,i,s,o,u);else{var l=e.point;e.x=e.y=e.point=null,T(e,l,a,f,i,s,o,u),T(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else T(e,t,n,r,i,s,o,u)}function T(e,t,n,r,i,s,o,u){var a=(i+o)*.5,f=(s+u)*.5,l=n>=a,c=r>=f,h=(c<<1)+l;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=ms()),l?i=a:o=a,c?s=f:u=f,x(e,t,n,r,i,s,o,u)}var a,f=an(s),l=an(o),c,h,p,d,v,m,g,y;if(t!=null)v=t,m=n,g=r,y=i;else{g=y=-(v=m=Infinity),c=[],h=[],d=e.length;if(u)for(p=0;p<d;++p)a=e[p],a.x<v&&(v=a.x),a.y<m&&(m=a.y),a.x>g&&(g=a.x),a.y>y&&(y=a.y),c.push(a.x),h.push(a.y);else for(p=0;p<d;++p){var b=+f(a=e[p],p),w=+l(a,p);b<v&&(v=b),w<m&&(m=w),b>g&&(g=b),w>y&&(y=w),c.push(b),h.push(w)}}var E=g-v,S=y-m;E>S?y=m+E:g=v+S;var N=ms();N.add=function(e){x(N,e,+f(e,++p),+l(e,p),v,m,g,y)},N.visit=function(e){gs(e,N,v,m,g,y)},p=-1;if(t==null){while(++p<d)x(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=a=null,N}var s=Hi,o=Bi,u;return(u=arguments.length)?(s=ds,o=vs,u===3&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(o=e,a):o},a.extent=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):t==null?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):t==null?null:[r-t,i-n]},a)},e.interpolateRgb=ys,e.interpolateObject=bs,e.interpolateNumber=ws,e.interpolateString=Es;var Ss=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;e.interpolate=xs,e.interpolators=[function(e,t){var n=typeof t;return(n==="string"?un.has(t)||/^(#|rgb\(|hsl\()/.test(t)?ys:Es:t instanceof gt?ys:n==="object"?Array.isArray(t)?Ts:bs:ws)(e,t)}],e.interpolateArray=Ts;var Ns=function(){return fn},Cs=e.map({linear:Ns,poly:Ps,quad:function(){return Ms},cubic:function(){return _s},sin:function(){return Hs},exp:function(){return Bs},circle:function(){return js},elastic:Fs,back:Is,bounce:function(){return qs}}),ks=e.map({"in":fn,out:As,"in-out":Os,"out-in":function(e){return Os(As(e))}});e.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=Cs.get(n)||Ns,r=ks.get(r)||fn,Ls(r(n.apply(null,Array.prototype.slice.call(arguments,1))))},e.interpolateHcl=Rs,e.interpolateHsl=Us,e.interpolateLab=zs,e.interpolateRound=Ws,e.transform=function(n){var r=t.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Xs(t?t.matrix:Ks)})(n)},Xs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ks={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=Qs,e.layout={},e.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(Zs(e[n]));return t}},e.layout.chord=function(){function l(){var t={},l=[],h=e.range(s),p=[],d,v,m,g,y;n=[],r=[],d=0,g=-1;while(++g<s){v=0,y=-1;while(++y<s)v+=i[g][y];l.push(v),p.push(e.range(s)),d+=v}u&&h.sort(function(e,t){return u(l[e],l[t])}),a&&p.forEach(function(e,t){e.sort(function(e,n){return a(i[t][e],i[t][n])})}),d=(2*St-o*s)/d,v=0,g=-1;while(++g<s){m=v,y=-1;while(++y<s){var b=h[g],w=p[b][y],E=i[b][w],S=v,x=v+=E*d;t[b+"-"+w]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}r[b]={index:b,startAngle:m,endAngle:v,value:(v-m)/d},v+=o}g=-1;while(++g<s){y=g-1;while(++y<s){var T=t[g+"-"+y],N=t[y+"-"+g];(T.value||N.value)&&n.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}f&&c()}function c(){n.sort(function(e,t){return f((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var t={},n,r,i,s,o=0,u,a,f;return t.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,t):i},t.padding=function(e){return arguments.length?(o=e,n=r=null,t):o},t.sortGroups=function(e){return arguments.length?(u=e,n=r=null,t):u},t.sortSubgroups=function(e){return arguments.length?(a=e,n=null,t):a},t.sortChords=function(e){return arguments.length?(f=e,n&&c(),t):f},t.chords=function(){return n||l(),n},t.groups=function(){return r||l(),r},t},e.layout.force=function(){function g(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=1/Math.sqrt(s*s+o*o);if((i-n)*u<c){var a=t.charge*u*u;return e.px-=s*a,e.py-=o*a,!0}if(t.point&&isFinite(u)){var a=t.pointCharge*u*u;e.px-=s*a,e.py-=o*a}}return!t.charge}}function y(n){n.px=e.event.x,n.py=e.event.y,t.resume()}var t={},n=e.dispatch("start","tick","end"),r=[1,1],i,s,o=.9,u=uo,a=ao,f=-30,l=.1,c=.8,h=[],p=[],d,v,m;return t.tick=function(){if((s*=.99)<.005)return n.end({type:"end",alpha:s=0}),!0;var t=h.length,i=p.length,u,a,c,y,b,w,E,S,x;for(a=0;a<i;++a){c=p[a],y=c.source,b=c.target,S=b.x-y.x,x=b.y-y.y;if(w=S*S+x*x)w=s*v[a]*((w=Math.sqrt(w))-d[a])/w,S*=w,x*=w,b.x-=S*(E=y.weight/(b.weight+y.weight)),b.y-=x*E,y.x+=S*(E=1-E),y.y+=x*E}if(E=s*l){S=r[0]/2,x=r[1]/2,a=-1;if(E)while(++a<t)c=h[a],c.x+=(S-c.x)*E,c.y+=(x-c.y)*E}if(f){oo(u=e.geom.quadtree(h),s,m),a=-1;while(++a<t)(c=h[a]).fixed||u.visit(g(c))}a=-1;while(++a<t)c=h[a],c.fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*o,c.y-=(c.py-(c.py=c.y))*o);n.tick({type:"tick",alpha:s})},t.nodes=function(e){return arguments.length?(h=e,t):h},t.links=function(e){return arguments.length?(p=e,t):p},t.size=function(e){return arguments.length?(r=e,t):r},t.linkDistance=function(e){return arguments.length?(u=typeof e=="function"?e:+e,t):u},t.distance=t.linkDistance,t.linkStrength=function(e){return arguments.length?(a=typeof e=="function"?e:+e,t):a},t.friction=function(e){return arguments.length?(o=+e,t):o},t.charge=function(e){return arguments.length?(f=typeof e=="function"?e:+e,t):f},t.gravity=function(e){return arguments.length?(l=+e,t):l},t.theta=function(e){return arguments.length?(c=+e,t):c},t.alpha=function(r){return arguments.length?(r=+r,s?r>0?s=r:s=0:r>0&&(n.start({type:"start",alpha:s=r}),e.timer(t.tick)),t):s},t.start=function(){function y(t,n){var r=b(e),i=-1,s=r.length,o;while(++i<s)if(!isNaN(o=r[i][t]))return o;return Math.random()*n}function b(){if(!c){c=[];for(n=0;n<i;++n)c[n]=[];for(n=0;n<s;++n){var t=p[n];c[t.source.index].push(t.target),c[t.target.index].push(t.source)}}return c[e]}var e,n,i=h.length,s=p.length,o=r[0],l=r[1],c,g;for(e=0;e<i;++e)(g=h[e]).index=e,g.weight=0;for(e=0;e<s;++e)g=p[e],typeof g.source=="number"&&(g.source=h[g.source]),typeof g.target=="number"&&(g.target=h[g.target]),++g.source.weight,++g.target.weight;for(e=0;e<i;++e)g=h[e],isNaN(g.x)&&(g.x=y("x",o)),isNaN(g.y)&&(g.y=y("y",l)),isNaN(g.px)&&(g.px=g.x),isNaN(g.py)&&(g.py=g.y);d=[];if(typeof u=="function")for(e=0;e<s;++e)d[e]=+u.call(this,p[e],e);else for(e=0;e<s;++e)d[e]=u;v=[];if(typeof a=="function")for(e=0;e<s;++e)v[e]=+a.call(this,p[e],e);else for(e=0;e<s;++e)v[e]=a;m=[];if(typeof f=="function")for(e=0;e<i;++e)m[e]=+f.call(this,h[e],e);else for(e=0;e<i;++e)m[e]=f;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){i||(i=e.behavior.drag().origin(fn).on("dragstart.force",no).on("drag.force",y).on("dragend.force",ro));if(!arguments.length)return i;this.on("mouseover.force",io).on("mouseout.force",so).call(i)},e.rebind(t,n,"on")};var uo=20,ao=1;e.layout.hierarchy=function(){function r(i,o,u){var a=t.call(s,i,o);i.depth=o,u.push(i);if(a&&(l=a.length)){var f=-1,l,c=i.children=[],h=0,p=o+1,d;while(++f<l)d=r(a[f],p,u),d.parent=i,c.push(d),h+=d.value;e&&c.sort(e),n&&(i.value=h)}else n&&(i.value=+n.call(s,i,o)||0);return i}function i(e,t){var r=e.children,o=0;if(r&&(a=r.length)){var u=-1,a,f=t+1;while(++u<a)o+=i(r[u],f)}else n&&(o=+n.call(s,e,t)||0);return n&&(e.value=o),o}function s(e){var t=[];return r(e,0,t),t}var e=ho,t=lo,n=co;return s.sort=function(t){return arguments.length?(e=t,s):e},s.children=function(e){return arguments.length?(t=e,s):t},s.value=function(e){return arguments.length?(n=e,s):n},s.revalue=function(e){return i(e,0),e},s},e.layout.partition=function(){function r(e,t,n,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=n,e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;n=e.value?n/e.value:0;while(++o<u)r(a=s[o],t,f=a.value*n,i),t+=f}}function i(e){var t=e.children,n=0;if(t&&(s=t.length)){var r=-1,s;while(++r<s)n=Math.max(n,i(t[r]))}return 1+n}function s(e,s){var o=t.call(this,e,s);return r(o[0],0,n[0],n[1]/i(o[0])),o}var t=e.layout.hierarchy(),n=[1,1];return s.size=function(e){return arguments.length?(n=e,s):n},fo(s,t)},e.layout.pie=function(){function s(o){var u=o.map(function(e,n){return+t.call(s,e,n)}),a=+(typeof r=="function"?r.apply(this,arguments):r),f=((typeof i=="function"?i.apply(this,arguments):i)-a)/e.sum(u),l=e.range(o.length);n!=null&&l.sort(n===vo?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])});var c=[];return l.forEach(function(e){var t;c[e]={data:o[e],value:t=u[e],startAngle:a,endAngle:a+=t*f}}),c}var t=Number,n=vo,r=0,i=2*St;return s.value=function(e){return arguments.length?(t=e,s):t},s.sort=function(e){return arguments.length?(n=e,s):n},s.startAngle=function(e){return arguments.length?(r=e,s):r},s.endAngle=function(e){return arguments.length?(i=e,s):i},s};var vo={};e.layout.stack=function(){function u(a,f){var l=a.map(function(e,n){return t.call(u,e,n)}),c=l.map(function(e){return e.map(function(e,t){return[s.call(u,e,t),o.call(u,e,t)]})}),h=n.call(u,c,f);l=e.permute(l,h),c=e.permute(c,h);var p=r.call(u,c,f),d=l.length,v=l[0].length,m,g,y;for(g=0;g<v;++g){i.call(u,l[0][g],y=p[g],c[0][g][1]);for(m=1;m<d;++m)i.call(u,l[m][g],y+=c[m-1][g][1],c[m][g][1])}return a}var t=fn,n=Eo,r=So,i=yo,s=mo,o=go;return u.values=function(e){return arguments.length?(t=e,u):t},u.order=function(e){return arguments.length?(n=typeof e=="function"?e:bo.get(e)||Eo,u):n},u.offset=function(e){return arguments.length?(r=typeof e=="function"?e:wo.get(e)||So,u):r},u.x=function(e){return arguments.length?(s=e,u):s},u.y=function(e){return arguments.length?(o=e,u):o},u.out=function(e){return arguments.length?(i=e,u):i},u};var bo=e.map({"inside-out":function(t){var n=t.length,r,i,s=t.map(xo),o=t.map(To),u=e.range(n).sort(function(e,t){return s[e]-s[t]}),a=0,f=0,l=[],c=[];for(r=0;r<n;++r)i=u[r],a<f?(a+=o[i],l.push(i)):(f+=o[i],c.push(i));return c.reverse().concat(l)},reverse:function(t){return e.range(t.length).reverse()},"default":Eo}),wo=e.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,s,o,u,a,f,l,c,h,p=[];p[0]=c=h=0;for(s=1;s<r;++s){for(i=0,u=0;i<t;++i)u+=e[i][s][1];for(i=0,a=0,l=n[s][0]-n[s-1][0];i<t;++i){for(o=0,f=(e[i][s][1]-e[i][s-1][1])/(2*l);o<i;++o)f+=(e[o][s][1]-e[o][s-1][1])/l;a+=f*e[i][s][1]}p[s]=c-=u?a/u*l:0,c<h&&(h=c)}for(s=0;s<r;++s)p[s]-=h;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:So});e.layout.histogram=function(){function s(s,o){var u=[],a=s.map(n,this),f=r.call(this,a,o),l=i.call(this,f,a,o),c,o=-1,h=a.length,p=l.length-1,d=t?1:1/h,v;while(++o<p)c=u[o]=[],c.dx=l[o+1]-(c.x=l[o]),c.y=0;if(p>0){o=-1;while(++o<h)v=a[o],v>=f[0]&&v<=f[1]&&(c=u[e.bisect(l,v,1,p)-1],c.y+=d,c.push(s[o]))}return u}var t=!0,n=Number,r=Lo,i=Co;return s.value=function(e){return arguments.length?(n=e,s):n},s.range=function(e){return arguments.length?(r=an(e),s):r},s.bins=function(e){return arguments.length?(i=typeof e=="number"?function(t){return ko(t,e)}:an(e),s):i},s.frequency=function(e){return arguments.length?(t=!!e,s):t},s},e.layout.tree=function(){function s(e,s){function a(e,t){var r=e.children,i=e._tree;if(r&&(s=r.length)){var s,o=r[0],u,f=o,c,h=-1;while(++h<s)c=r[h],a(c,u),f=l(c,u,f),u=c;jo(e);var p=.5*(o._tree.prelim+c._tree.prelim);t?(i.prelim=t._tree.prelim+n(e,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+n(e,t))}function f(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var r=-1,i;t+=e._tree.mod;while(++r<i)f(n[r],t)}}function l(e,t,r){if(t){var i=e,s=e,o=t,u=e.parent.children[0],a=i._tree.mod,f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h;while(o=Mo(o),i=Oo(i),o&&i)u=Oo(u),s=Mo(s),s._tree.ancestor=e,h=o._tree.prelim+l-i._tree.prelim-a+n(o,i),h>0&&(Fo(Io(o,e,r),e,h),a+=h,f+=h),l+=o._tree.mod,a+=i._tree.mod,c+=u._tree.mod,f+=s._tree.mod;o&&!Mo(s)&&(s._tree.thread=o,s._tree.mod+=l-f),i&&!Oo(u)&&(u._tree.thread=i,u._tree.mod+=a-c,r=e)}return r}var o=t.call(this,e,s),u=o[0];Bo(u,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),a(u),f(u,-u._tree.prelim);var c=_o(u,Po),h=_o(u,Do),p=_o(u,Ho),d=c.x-n(c,h)/2,v=h.x+n(h,c)/2,m=p.depth||1;return Bo(u,i?function(e){e.x*=r[0],e.y=e.depth*r[1],delete e._tree}:function(e){e.x=(e.x-d)/(v-d)*r[0],e.y=e.depth/m*r[1],delete e._tree}),o}var t=e.layout.hierarchy().sort(null).value(null),n=Ao,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},fo(s,t)},e.layout.pack=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a=r[0],f=r[1],l=i==null?Math.sqrt:typeof i=="function"?i:function(){return i};u.x=u.y=0,Bo(u,function(e){e.r=+l(e.value)}),Bo(u,Wo);if(n){var c=n*(i?1:Math.max(2*u.r/a,2*u.r/f))/2;Bo(u,function(e){e.r+=c}),Bo(u,Wo),Bo(u,function(e){e.r-=c})}return $o(u,a/2,f/2,i?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t=e.layout.hierarchy().sort(qo),n=0,r=[1,1],i;return s.size=function(e){return arguments.length?(r=e,s):r},s.radius=function(e){return arguments.length?(i=e==null||typeof e=="function"?e:+e,s):i},s.padding=function(e){return arguments.length?(n=+e,s):n},fo(s,t)},e.layout.cluster=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a,f=0;Bo(u,function(e){var t=e.children;t&&t.length?(e.x=Qo(t),e.y=Ko(t)):(e.x=a?f+=n(e,a):0,e.y=0,a=e)});var l=Go(u),c=Yo(u),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Bo(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),o}var t=e.layout.hierarchy().sort(null).value(null),n=Ao,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},fo(s,t)},e.layout.treemap=function(){function l(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function c(e){var t=e.children;if(t&&t.length){var n=s(e),r=[],i=t.slice(),o,u=Infinity,f,h=a==="slice"?n.dx:a==="dice"?n.dy:a==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;l(i,n.dx*n.dy/e.value),r.area=0;while((v=i.length)>0)r.push(o=i[v-1]),r.area+=o.area,a!=="squarify"||(f=p(r,h))<=u?(i.pop(),u=f):(r.area-=r.pop().area,d(r,h,n,!1),h=Math.min(n.dx,n.dy),r.length=r.area=0,u=Infinity);r.length&&(d(r,h,n,!0),r.length=r.area=0),t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=s(e),r=t.slice(),i,o=[];l(r,n.dx*n.dy/e.value),o.area=0;while(i=r.pop())o.push(i),o.area+=i.area,i.z!=null&&(d(o,i.z?n.dx:n.dy,n,!r.length),o.length=o.area=0);t.forEach(h)}}function p(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,u=e.length;while(++o<u){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*f/n,n/(t*s*f)):Infinity}function d(e,t,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=t?n(e.area/t):0,l;if(t==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=Math.min(r.x+r.dx-u,f?n(l.area/f):0);l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=Math.min(r.y+r.dy-a,f?n(l.area/f):0);l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function v(e){var n=u||t(e),i=n[0];return i.x=0,i.y=0,i.dx=r[0],i.dy=r[1],u&&t.revalue(i),l([i],i.dx*i.dy/i.value),(u?h:c)(i),o&&(u=n),n}var t=e.layout.hierarchy(),n=Math.round,r=[1,1],i=null,s=Zo,o=!1,u,a="squarify",f=.5*(1+Math.sqrt(5));return v.size=function(e){return arguments.length?(r=e,v):r},v.padding=function(e){function t(t){var n=e.call(v,t,t.depth);return n==null?Zo(t):eu(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return eu(t,e)}if(!arguments.length)return i;var r;return s=(i=e)==null?Zo:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n,v},v.round=function(e){return arguments.length?(n=e?Math.round:Number,v):n!=Number},v.sticky=function(e){return arguments.length?(o=e,u=null,v):o},v.ratio=function(e){return arguments.length?(f=e,v):f},v.mode=function(e){return arguments.length?(a=e+"",v):a},fo(v,t)},e.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t/e}}},e.scale={};var ou={floor:fn,ceil:fn};e.scale.linear=function(){return au([0,1],[0,1],xs,!1)},e.scale.log=function(){return vu(e.scale.linear().domain([0,1]),10,!0,[1,10])};var mu=e.format(".0e"),gu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};e.scale.pow=function(){return yu(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return wu([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(Eu)},e.scale.category20=function(){return e.scale.ordinal().range(Su)},e.scale.category20b=function(){return e.scale.ordinal().range(xu)},e.scale.category20c=function(){return e.scale.ordinal().range(Tu)};var Eu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Qt),Su=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Qt),xu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Qt),Tu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Qt);e.scale.quantile=function(){return Nu([],[])},e.scale.quantize=function(){return Cu(0,1,[0,1])},e.scale.threshold=function(){return ku([.5],[0,1])},e.scale.identity=function(){return Lu([0,1])},e.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+Au,u=r.apply(this,arguments)+Au,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<St?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=Ou?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=Mu,t=_u,n=Du,r=Pu;return i.innerRadius=function(t){return arguments.length?(e=an(t),i):e},i.outerRadius=function(e){return arguments.length?(t=an(e),i):t},i.startAngle=function(e){return arguments.length?(n=an(e),i):n},i.endAngle=function(e){return arguments.length?(r=an(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Au;return[Math.cos(s)*i,Math.sin(s)*i]},i};var Au=-St/2,Ou=2*St-1e-6;e.svg.line.radial=function(){var e=Pi(Hu);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ri.reverse=Ui,Ui.reverse=Ri,e.svg.area=function(){return Bu(fn)},e.svg.area.radial=function(){var e=Bu(Hu);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},e.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+Au,l=i.call(e,u,o)+Au;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>St)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=gi,t=yi,n=ju,r=Du,i=Pu;return s.radius=function(e){return arguments.length?(n=an(e),s):n},s.source=function(t){return arguments.length?(e=an(t),s):e},s.target=function(e){return arguments.length?(t=an(e),s):t},s.startAngle=function(e){return arguments.length?(r=an(e),s):r},s.endAngle=function(e){return arguments.length?(i=an(e),s):i},s},e.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=gi,t=yi,n=Fu;return r.source=function(t){return arguments.length?(e=an(t),r):e},r.target=function(e){return arguments.length?(t=an(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=Fu,r=t.projection;return t.projection=function(e){return arguments.length?r(Iu(n=e)):n},t},e.svg.symbol=function(){function n(n,r){return(zu.get(e.call(this,n,r))||Uu)(t.call(this,n,r))}var e=Ru,t=qu;return n.type=function(t){return arguments.length?(e=an(t),n):e},n.size=function(e){return arguments.length?(t=an(e),n):t},n};var zu=e.map({circle:Uu,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Xu)),n=t*Xu;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Wu),n=t*Wu/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Wu),n=t*Wu/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});e.svg.symbolTypes=zu.keys();var Wu=Math.sqrt(3),Xu=Math.tan(30*Nt),$u=[],Ju=0,Ku,Qu;$u.call=I.call,$u.empty=I.empty,$u.node=I.node,$u.size=I.size,e.transition=function(e){return arguments.length?Ku?e.transition():e:it.transition()},e.transition.prototype=$u,$u.select=function(e){var t=this.id,n=[],r,i,s;e=q(e);for(var o=-1,u=this.length;++o<u;){n.push(r=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(s=a[f])&&(i=e.call(s,s.__data__,f,o))?("__data__"in s&&(i.__data__=s.__data__),Zu(i,f,t,s.__transition__[t]),r.push(i)):r.push(null)}return Vu(n,t)},$u.selectAll=function(e){var t=this.id,n=[],r,i,s,o,u;e=R(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(s=l[c]){u=s.__transition__[t],i=e.call(s,s.__data__,c,a),n.push(r=[]);for(var p=-1,d=i.length;++p<d;)(o=i[p])&&Zu(o,p,t,u),r.push(o)}return Vu(n,t)},$u.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=Y(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);for(var r=this[s],u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return Vu(t,this.id)},$u.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):et(this,t==null?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},$u.attr=function(t,n){function s(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function u(e){return e==null?s:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function a(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r=t=="transform"?Qs:xs,i=e.ns.qualify(t);return Gu(this,"attr."+t,n,i.local?a:u)},$u.attrTween=function(t,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function s(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?s:i)},$u.style=function(e,t,n){function s(){this.style.removeProperty(e)}function o(t){return t==null?s:(t+="",function(){var i=r.getComputedStyle(this,null).getPropertyValue(e),s;return i!==t&&(s=xs(i,t),function(t){this.style.setProperty(e,s(t),n)})})}var i=arguments.length;if(i<3){if(typeof e!="string"){i<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Gu(this,"style."+e,t,o)},$u.styleTween=function(e,t,n){function i(i,s){var o=t.call(this,i,s,r.getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,i)},$u.text=function(e){return Gu(this,"text",e,Yu)},$u.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},$u.ease=function(t){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:(typeof t!="function"&&(t=e.ease.apply(e,arguments)),et(this,function(e){e.__transition__[n].ease=t}))},$u.delay=function(e){var t=this.id;return et(this,typeof e=="function"?function(n,r,i){n.__transition__[t].delay=e.call(n,n.__data__,r,i)|0}:(e|=0,function(n){n.__transition__[t].delay=e}))},$u.duration=function(e){var t=this.id;return et(this,typeof e=="function"?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i)|0)}:(e=Math.max(1,e|0),function(n){n.__transition__[t].duration=e}))},$u.each=function(t,n){var r=this.id;if(arguments.length<2){var i=Qu,s=Ku;Ku=r,et(this,function(e,n,i){Qu=e.__transition__[r],t.call(e,e.__data__,n,i)}),Qu=i,Ku=s}else et(this,function(i){var s=i.__transition__[r];(s.event||(s.event=e.dispatch("start","end"))).on(t,n)});return this},$u.transition=function(){var e=this.id,t=++Ju,n=[],r,i,s,o;for(var u=0,a=this.length;u<a;u++){n.push(r=[]);for(var i=this[u],f=0,l=i.length;f<l;f++){if(s=i[f])o=Object.create(s.__transition__[e]),o.delay+=o.duration,Zu(s,f,t,o);r.push(s)}}return Vu(n,t)},e.svg.axis=function(){function c(c){c.each(function(){var c=e.select(this),h=a==null?t.ticks?t.ticks.apply(t,u):t.domain():a,p=f==null?t.tickFormat?t.tickFormat.apply(t,u):String:f,d=ia(t,h,l),v=c.selectAll(".tick.minor").data(d,String),m=v.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),g=e.transition(v.exit()).style("opacity",1e-6).remove(),y=e.transition(v).style("opacity",1),b=c.selectAll(".tick.major").data(h,String),w=b.enter().insert("g",".domain").attr("class","tick major").style("opacity",1e-6),E=e.transition(b.exit()).style("opacity",1e-6).remove(),S=e.transition(b).style("opacity",1),x,T=nu(t),N=c.selectAll(".domain").data([0]),C=(N.enter().append("path").attr("class","domain"),e.transition(N)),k=t.copy(),L=this.__chart__||k;this.__chart__=k,w.append("line"),w.append("text");var A=w.select("line"),O=S.select("line"),M=b.select("text").text(p),_=w.select("text"),D=S.select("text");switch(n){case"bottom":x=na,m.attr("y2",i),y.attr("x2",0).attr("y2",i),A.attr("y2",r),_.attr("y",Math.max(r,0)+o),O.attr("x2",0).attr("y2",r),D.attr("x",0).attr("y",Math.max(r,0)+o),M.attr("dy",".71em").style("text-anchor","middle"),C.attr("d","M"+T[0]+","+s+"V0H"+T[1]+"V"+s);break;case"top":x=na,m.attr("y2",-i),y.attr("x2",0).attr("y2",-i),A.attr("y2",-r),_.attr("y",-(Math.max(r,0)+o)),O.attr("x2",0).attr("y2",-r),D.attr("x",0).attr("y",-(Math.max(r,0)+o)),M.attr("dy","0em").style("text-anchor","middle"),C.attr("d","M"+T[0]+","+ -s+"V0H"+T[1]+"V"+ -s);break;case"left":x=ra,m.attr("x2",-i),y.attr("x2",-i).attr("y2",0),A.attr("x2",-r),_.attr("x",-(Math.max(r,0)+o)),O.attr("x2",-r).attr("y2",0),D.attr("x",-(Math.max(r,0)+o)).attr("y",0),M.attr("dy",".32em").style("text-anchor","end"),C.attr("d","M"+ -s+","+T[0]+"H0V"+T[1]+"H"+ -s);break;case"right":x=ra,m.attr("x2",i),y.attr("x2",i).attr("y2",0),A.attr("x2",r),_.attr("x",Math.max(r,0)+o),O.attr("x2",r).attr("y2",0),D.attr("x",Math.max(r,0)+o).attr("y",0),M.attr("dy",".32em").style("text-anchor","start"),C.attr("d","M"+s+","+T[0]+"H0V"+T[1]+"H"+s)}if(t.rangeBand){var P=k.rangeBand()/2,H=function(e){return k(e)+P};w.call(x,H),S.call(x,H)}else w.call(x,L),S.call(x,k),E.call(x,k),m.call(x,L),y.call(x,k),g.call(x,k)})}var t=e.scale.linear(),n=ea,r=6,i=6,s=6,o=3,u=[10],a=null,f,l=0;return c.scale=function(e){return arguments.length?(t=e,c):t},c.orient=function(e){return arguments.length?(n=e in ta?e+"":ea,c):n},c.ticks=function(){return arguments.length?(u=arguments,c):u},c.tickValues=function(e){return arguments.length?(a=e,c):a},c.tickFormat=function(e){return arguments.length?(f=e,c):f},c.tickSize=function(e,t){if(!arguments.length)return r;var n=arguments.length-1;return r=+e,i=n>1?+t:r,s=n>0?+arguments[n]:r,c},c.tickPadding=function(e){return arguments.length?(o=+e,c):o},c.tickSubdivide=function(e){return arguments.length?(l=+e,c):l},c};var ea="bottom",ta={top:1,right:1,bottom:1,left:1};e.svg.brush=function(){function f(t){t.each(function(){var t=e.select(this),r=t.selectAll(".background").data([0]),o=t.selectAll(".extent").data([0]),u=t.selectAll(".resize").data(s,String),a;t.style("pointer-events","all").on("mousedown.brush",p).on("touchstart.brush",p),r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.enter().append("rect").attr("class","extent").style("cursor","move"),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return sa[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",f.empty()?"none":null),u.exit().remove(),n&&(a=nu(n),r.attr("x",a[0]).attr("width",a[1]-a[0]),c(t)),i&&(a=nu(i),r.attr("y",a[0]).attr("height",a[1]-a[0]),h(t)),l(t)})}function l(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+o[+/e$/.test(e)][0]+","+o[+/^s/.test(e)][1]+")"})}function c(e){e.select(".extent").attr("x",o[0][0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1][0]-o[0][0])}function h(e){e.select(".extent").attr("y",o[0][1]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",o[1][1]-o[0][1])}function p(){function k(){var t=e.event.changedTouches;return t?e.touches(s,t)[0]:e.mouse(s)}function L(){e.event.keyCode==32&&(b||(E=null,S[0]-=o[1][0],S[1]-=o[1][1],b=2),A())}function O(){e.event.keyCode==32&&b==2&&(S[0]+=o[1][0],S[1]+=o[1][1],b=0,A())}function M(){var t=k(),r=!1;x&&(t[0]+=x[0],t[1]+=x[1]),b||(e.event.altKey?(E||(E=[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]),S[0]=o[+(t[0]<E[0])][0],S[1]=o[+(t[1]<E[1])][1]):E=null),g&&_(t,n,0)&&(c(v),r=!0),y&&_(t,i,1)&&(h(v),r=!0),r&&(l(v),d({type:"brush",mode:b?"move":"resize"}))}function _(e,t,n){var r=nu(t),i=r[0],s=r[1],f=S[n],l=o[1][n]-o[0][n],c,h;b&&(i-=f,s-=l+f),c=u[n]?Math.max(i,Math.min(s,e[n])):e[n],b?h=(c+=f)+l:(E&&(f=Math.max(i,Math.min(s,2*E[n]-c))),f<c?(h=c,c=f):h=f);if(o[0][n]!==c||o[1][n]!==h)return a=null,o[0][n]=c,o[1][n]=h,!0}function D(){M(),v.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),e.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w(),d({type:"brushend"})}var s=this,p=e.select(e.event.target),d=t.of(s,arguments),v=e.select(s),m=p.datum(),g=!/^(n|s)$/.test(m)&&n,y=!/^(e|w)$/.test(m)&&i,b=p.classed("extent"),w=ct(),E,S=k(),x,T=e.select(r).on("keydown.brush",L).on("keyup.brush",O);e.event.changedTouches?T.on("touchmove.brush",M).on("touchend.brush",D):T.on("mousemove.brush",M).on("mouseup.brush",D);if(b)S[0]=o[0][0]-S[0],S[1]=o[0][1]-S[1];else if(m){var N=+/w$/.test(m),C=+/^n/.test(m);x=[o[1-N][0]-S[0],o[1-C][1]-S[1]],S[0]=o[N][0],S[1]=o[C][1]}else e.event.altKey&&(E=S.slice());v.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",p.style("cursor")),d({type:"brushstart"}),M()}var t=M(f,"brushstart","brush","brushend"),n=null,i=null,s=oa[0],o=[[0,0],[0,0]],u=[!0,!0],a;return f.x=function(e){return arguments.length?(n=e,s=oa[!n<<1|!i],f):n},f.y=function(e){return arguments.length?(i=e,s=oa[!n<<1|!i],f):i},f.clamp=function(e){if(!arguments.length)return n&&i?u:n||i?u[+!n]:null;if(n&&i)u=[!!e[0],!!e[1]];else if(n||i)u[+!n]=!!e;return f},f.extent=function(e){var t,r,s,u,l;return arguments.length?(a=[[0,0],[0,0]],n&&(t=e[0],r=e[1],i&&(t=t[0],r=r[0]),a[0][0]=t,a[1][0]=r,n.invert&&(t=n(t),r=n(r)),r<t&&(l=t,t=r,r=l),o[0][0]=t|0,o[1][0]=r|0),i&&(s=e[0],u=e[1],n&&(s=s[1],u=u[1]),a[0][1]=s,a[1][1]=u,i.invert&&(s=i(s),u=i(u)),u<s&&(l=s,s=u,u=l),o[0][1]=s|0,o[1][1]=u|0),f):(e=a||o,n&&(t=e[0][0],r=e[1][0],a||(t=o[0][0],r=o[1][0],n.invert&&(t=n.invert(t),r=n.invert(r)),r<t&&(l=t,t=r,r=l))),i&&(s=e[0][1],u=e[1][1],a||(s=o[0][1],u=o[1][1],i.invert&&(s=i.invert(s),u=i.invert(u)),u<s&&(l=s,s=u,u=l))),n&&i?[[t,s],[r,u]]:n?[t,r]:i&&[s,u])},f.clear=function(){return a=null,o[0][0]=o[0][1]=o[1][0]=o[1][1]=0,f},f.empty=function(){return n&&o[0][0]===o[1][0]||i&&o[0][1]===o[1][1]},e.rebind(f,t,"on")};var sa={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},oa=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.time={};var ua=Date,aa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];fa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){la.setUTCDate.apply(this._,arguments)},setDay:function(){la.setUTCDay.apply(this._,arguments)},setFullYear:function(){la.setUTCFullYear.apply(this._,arguments)},setHours:function(){la.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){la.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){la.setUTCMinutes.apply(this._,arguments)},setMonth:function(){la.setUTCMonth.apply(this._,arguments)},setSeconds:function(){la.setUTCSeconds.apply(this._,arguments)},setTime:function(){la.setTime.apply(this._,arguments)}};var la=Date.prototype,ca="%a %b %e %X %Y",ha="%m/%d/%Y",pa="%H:%M:%S",da=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],va=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ma=["January","February","March","April","May","June","July","August","September","October","November","December"],ga=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.time.year=ya(function(t){return t=e.time.day(t),t.setMonth(0,1),t},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),e.time.years=e.time.year.range,e.time.years.utc=e.time.year.utc.range,e.time.day=ya(function(e){var t=new ua(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),e.time.days=e.time.day.range,e.time.days.utc=e.time.day.utc.range,e.time.dayOfYear=function(t){var n=e.time.year(t);return Math.floor((t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/864e5)},aa.forEach(function(t,n){t=t.toLowerCase(),n=7-n;var r=e.time[t]=ya(function(t){return(t=e.time.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(t){var r=e.time.year(t).getDay();return Math.floor((e.time.dayOfYear(t)+(r+n)%7)/7)-(r!==n)});e.time[t+"s"]=r.range,e.time[t+"s"].utc=r.utc.range,e.time[t+"OfYear"]=function(t){var r=e.time.year(t).getDay();return Math.floor((e.time.dayOfYear(t)+(r+n)%7)/7)}}),e.time.week=e.time.sunday,e.time.weeks=e.time.sunday.range,e.time.weeks.utc=e.time.sunday.utc.range,e.time.weekOfYear=e.time.sundayOfYear,e.time.format=function(e){function n(n){var r=[],i=-1,s=0,o,u,a;while(++i<t)if(e.charCodeAt(i)===37){r.push(e.substring(s,i)),(u=Da[o=e.charAt(++i)])!=null&&(o=e.charAt(++i));if(a=Pa[o])o=a(n,u==null?o==="e"?" ":"0":u);r.push(o),s=i+1}return r.push(e.substring(s,i)),r.join("")}var t=e.length;return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=wa(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+n.p*12);var i=new ua;return"j"in n?i.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(i.getDay()+5)%7:n.w+n.U*7-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H,n.M,n.S,n.L),i},n.toString=function(){return e},n};var Ta=Ea(da),Na=Sa(da),Ca=Ea(va),ka=Sa(va),La=Ea(ma),Aa=Sa(ma),Oa=Ea(ga),Ma=Sa(ga),_a=/^%/,Da={"-":"",_:" ",0:"0"},Pa={a:function(e){return va[e.getDay()]},A:function(e){return da[e.getDay()]},b:function(e){return ga[e.getMonth()]},B:function(e){return ma[e.getMonth()]},c:e.time.format(ca),d:function(e,t){return xa(e.getDate(),t,2)},e:function(e,t){return xa(e.getDate(),t,2)},H:function(e,t){return xa(e.getHours(),t,2)},I:function(e,t){return xa(e.getHours()%12||12,t,2)},j:function(t,n){return xa(1+e.time.dayOfYear(t),n,3)},L:function(e,t){return xa(e.getMilliseconds(),t,3)},m:function(e,t){return xa(e.getMonth()+1,t,2)},M:function(e,t){return xa(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return xa(e.getSeconds(),t,2)},U:function(t,n){return xa(e.time.sundayOfYear(t),n,2)},w:function(e){return e.getDay()},W:function(t,n){return xa(e.time.mondayOfYear(t),n,2)},x:e.time.format(ha),X:e.time.format(pa),y:function(e,t){return xa(e.getFullYear()%100,t,2)},Y:function(e,t){return xa(e.getFullYear()%1e4,t,4)},Z:of,"%":function(){return"%"}},Ha={a:Ba,A:ja,b:Ra,B:Ua,c:za,d:Qa,e:Qa,H:Ya,I:Ya,j:Ga,L:tf,m:Ka,M:Za,p:rf,S:ef,U:Ia,w:Fa,W:qa,x:Wa,X:Xa,y:$a,Y:Va,"%":uf},nf=/^\s*\d+/,sf=e.map({am:0,pm:1});e.time.format.utc=function(t){function r(e){try{ua=fa;var t=new ua;return t._=e,n(t)}finally{ua=Date}}var n=e.time.format(t);return r.parse=function(e){try{ua=fa;var t=n.parse(e);return t&&t._}finally{ua=Date}},r.toString=n.toString,r};var af=e.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");e.time.format.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?ff:af,ff.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ff.toString=af.toString,e.time.second=ya(function(e){return new ua(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()}),e.time.seconds=e.time.second.range,e.time.seconds.utc=e.time.second.utc.range,e.time.minute=ya(function(e){return new ua(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()}),e.time.minutes=e.time.minute.range,e.time.minutes.utc=e.time.minute.utc.range,e.time.hour=ya(function(e){var t=e.getTimezoneOffset()/60;return new ua((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()}),e.time.hours=e.time.hour.range,e.time.hours.utc=e.time.hour.utc.range,e.time.month=ya(function(t){return t=e.time.day(t),t.setDate(1),t},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),e.time.months=e.time.month.range,e.time.months.utc=e.time.month.utc.range;var vf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],mf=[[e.time.second,1],[e.time.second,5],[e.time.second,15],[e.time.second,30],[e.time.minute,1],[e.time.minute,5],[e.time.minute,15],[e.time.minute,30],[e.time.hour,1],[e.time.hour,3],[e.time.hour,6],[e.time.hour,12],[e.time.day,1],[e.time.day,2],[e.time.week,1],[e.time.month,1],[e.time.month,3],[e.time.year,1]],gf=[[e.time.format("%Y"),yr],[e.time.format("%B"),function(e){return e.getMonth()}],[e.time.format("%b %d"),function(e){return e.getDate()!=1}],[e.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[e.time.format("%I %p"),function(e){return e.getHours()}],[e.time.format("%I:%M"),function(e){return e.getMinutes()}],[e.time.format(":%S"),function(e){return e.getSeconds()}],[e.time.format(".%L"),function(e){return e.getMilliseconds()}]],yf=e.scale.linear(),bf=hf(gf);mf.year=function(e,t){return yf.domain(e.map(df)).ticks(t).map(pf)},e.time.scale=function(){return lf(e.scale.linear(),mf,bf)};var wf=mf.map(function(e){return[e[0].utc,e[1]]}),Ef=[[e.time.format.utc("%Y"),yr],[e.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[e.time.format.utc("%b %d"),function(e){return e.getUTCDate()!=1}],[e.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[e.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[e.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[e.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[e.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],Sf=hf(Ef);return wf.year=function(e,t){return yf.domain(e.map(Tf)).ticks(t).map(xf)},e.time.scale.utc=function(){return lf(e.scale.linear(),wf,Sf)},e.text=ln(function(e){return e.responseText}),e.json=function(e,t){return cn(e,"application/json",Nf,t)},e.html=function(e,t){return cn(e,"text/html",Cf,t)},e.xml=ln(function(e){return e.responseXML}),e}(),define("d3",function(e){return function(){var t,n;return t||e.d3}}(this)),function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e=window.nv||{};e.version="0.0.1a",e.dev=!0,window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.render=function(n){n=n||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<n&&(r=e.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),e.graphs.push(t);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),function(){var t=window.nv.tooltip={};t.show=function(t,n,r,i,s,o){var u=document.createElement("div");u.className="nvtooltip "+(o?o:"xy-tooltip"),r=r||"s",i=i||20;var a=s;if(!s||s.tagName.match(/g|svg/i))a=document.getElementsByTagName("body")[0];u.innerHTML=n,u.style.left=0,u.style.top=0,u.style.opacity=0,a.appendChild(u);var f=parseInt(u.offsetHeight),l=parseInt(u.offsetWidth),c=e.utils.windowSize().width,h=e.utils.windowSize().height,p=window.scrollY,d=window.scrollX,v,m;h=window.innerWidth>=document.body.scrollWidth?h:h-16,c=window.innerHeight>=document.body.scrollHeight?c:c-16;var g=function(e){var t=m;do isNaN(e.offsetTop)||(t+=e.offsetTop);while(e=e.offsetParent);return t},y=function(e){var t=v;do isNaN(e.offsetLeft)||(t+=e.offsetLeft);while(e=e.offsetParent);return t};switch(r){case"e":v=t[0]-l-i,m=t[1]-f/2;var b=y(u),w=g(u);b<d&&(v=t[0]+i>d?t[0]+i:d-b+v),w<p&&(m=p-w+m),w+f>p+h&&(m=p+h-w+m-f);break;case"w":v=t[0]+i,m=t[1]-f/2,b+l>c&&(v=t[0]-l-i),w<p&&(m=p+5),w+f>p+h&&(m=p-f-5);break;case"n":v=t[0]-l/2-5,m=t[1]+i;var b=y(u),w=g(u);b<d&&(v=d+5),b+l>c&&(v=v-l/2+5),w+f>p+h&&(m=p+h-w+m-f);break;case"s":v=t[0]-l/2,m=t[1]-f-i;var b=y(u),w=g(u);b<d&&(v=d+5),b+l>c&&(v=v-l/2+5),p>w&&(m=p)}return u.style.left=v+"px",u.style.top=m+"px",u.style.opacity=1,u.style.position="absolute",u.style.pointerEvents="none",u},t.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){var t=window.onresize;window.onresize=function(n){typeof t=="function"&&t(n),e(n)}},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return r||(r=n.length),typeof e[o]!="undefined"?typeof e[o]=="function"?e[o]():e[o]:n[--r]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.calcApproxTextWidth=function(e){if(e instanceof d3.selection){var t=parseInt(e.style("font-size").replace("px","")),n=e.text().length;return n*t*.5}return 0},e.models.axis=function(){function d(r){return r.each(function(r){var d=d3.select(this),v=d.selectAll("g.nv-wrap.nv-axis").data([r]),m=v.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),g=m.append("g"),y=v.select("g");h!==null?e.ticks(h):(e.orient()=="top"||e.orient()=="bottom")&&e.ticks(Math.abs(i.range()[1]-i.range()[0])/100),d3.transition(y).call(e),p=p||e.scale();var b=e.tickFormat();b==null&&(b=p.tickFormat());var w=y.selectAll("text.nv-axislabel").data([s||null]);w.exit().remove();switch(e.orient()){case"top":w.enter().append("text").attr("class","nv-axislabel");var E=i.range().length==2?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]);w.attr("text-anchor","middle").attr("y",0).attr("x",E/2);if(o){var S=v.selectAll("g.nv-axisMaxMin").data(i.domain());S.enter().append("g").attr("class","nv-axisMaxMin").append("text"),S.exit().remove(),S.attr("transform",function(e,t){return"translate("+i(e)+",0)"}).select("text").attr("dy","0em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate("+i.range()[t]+",0)"})}break;case"bottom":var x=36,T=30,N=y.selectAll("g").select("text");if(a%360){N.each(function(e,t){var n=this.getBBox().width;n>T&&(T=n)});var C=Math.abs(Math.sin(a*Math.PI/180)),x=(C?C*T:T)+30;N.attr("transform",function(e,t,n){return"rotate("+a+" 0,0)"}).attr("text-anchor",a%360>0?"start":"end")}w.enter().append("text").attr("class","nv-axislabel");var E=i.range().length==2?i.range()[1]:i.range()[i.range().length-1]+(i.range()[1]-i.range()[0]);w.attr("text-anchor","middle").attr("y",x).attr("x",E/2);if(o){var S=v.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]]);S.enter().append("g").attr("class","nv-axisMaxMin").append("text"),S.exit().remove(),S.attr("transform",function(e,t){return"translate("+(i(e)+(c?i.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(e,t,n){return"rotate("+a+" 0,0)"}).attr("text-anchor",a?a%360>0?"start":"end":"middle").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate("+(i(e)+(c?i.rangeBand()/2:0))+",0)"})}l&&N.attr("transform",function(e,t){return"translate(0,"+(t%2==0?"0":"12")+")"});break;case"right":w.enter().append("text").attr("class","nv-axislabel"),w.attr("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?-Math.max(t.right,n)+12:-10).attr("x",f?i.range()[0]/2:e.tickPadding());if(o){var S=v.selectAll("g.nv-axisMaxMin").data(i.domain());S.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(e,t){return"translate(0,"+i(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).attr("text-anchor","start").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate(0,"+i.range()[t]+")"}).select("text").style("opacity",1)}break;case"left":w.enter().append("text").attr("class","nv-axislabel"),w.attr("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?-Math.max(t.left,n)+12:-10).attr("x",f?-i.range()[0]/2:-e.tickPadding());if(o){var S=v.selectAll("g.nv-axisMaxMin").data(i.domain());S.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(e,t){return"translate(0,"+p(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(e,t){var n=b(e);return(""+n).match("NaN")?"":n}),d3.transition(S).attr("transform",function(e,t){return"translate(0,"+i.range()[t]+")"}).select("text").style("opacity",1)}}w.text(function(e){return e}),o&&(e.orient()==="left"||e.orient()==="right")&&(y.selectAll("g").each(function(e,t){d3.select(this).select("text").attr("opacity",1);if(i(e)<i.range()[1]+10||i(e)>i.range()[0]-10)(e>1e-10||e<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),i.domain()[0]==i.domain()[1]&&i.domain()[0]==0&&v.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(o&&(e.orient()==="top"||e.orient()==="bottom")){var k=[];v.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?k.push(i(e)-this.getBBox().width-4):k.push(i(e)+this.getBBox().width+4)}catch(n){t?k.push(i(e)-4):k.push(i(e)+4)}}),y.selectAll("g").each(function(e,t){if(i(e)<k[0]||i(e)>k[1])e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}u&&y.selectAll(".tick").filter(function(e){return!parseFloat(Math.round(e.__data__*1e5)/1e6)&&e.__data__!==undefined}).classed("zero",!0),p=i.copy()}),d}var e=d3.svg.axis(),t={top:0,right:0,bottom:0,left:0},n=75,r=60,i=d3.scale.linear(),s=null,o=!0,u=!0,a=0,f=!0,l=!1,c=!1,h=null;e.scale(i).orient("bottom").tickFormat(function(e){return e});var p;return d.axis=e,d3.rebind(d,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(d,i,"domain","range","rangeBand","rangeBands"),d.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,d):t},d.width=function(e){return arguments.length?(n=e,d):n},d.ticks=function(e){return arguments.length?(h=e,d):h},d.height=function(e){return arguments.length?(r=e,d):r},d.axisLabel=function(e){return arguments.length?(s=e,d):s},d.showMaxMin=function(e){return arguments.length?(o=e,d):o},d.highlightZero=function(e){return arguments.length?(u=e,d):u},d.scale=function(t){return arguments.length?(i=t,e.scale(i),c=typeof i.rangeBands=="function",d3.rebind(d,i,"domain","range","rangeBand","rangeBands"),d):i},d.rotateYLabel=function(e){return arguments.length?(f=e,d):f},d.rotateLabels=function(e){return arguments.length?(a=e,d):a},d.staggerLabels=function(e){return arguments.length?(l=e,d):l},d},e.models.bullet=function(){function p(e){return e.each(function(e,n){var l=a-t.left-t.right,p=f-t.top-t.bottom,d=d3.select(this),v=i.call(this,e,n).slice().sort(d3.descending),m=s.call(this,e,n).slice().sort(d3.descending),g=o.call(this,e,n).slice().sort(d3.descending),y=d3.scale.linear().domain(d3.extent(d3.merge([u,v]))).range(r?[l,0]:[0,l]),b=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(y.range());this.__chart__=y;var w=d3.min(v),E=d3.max(v),S=v[1],x=d.selectAll("g.nv-wrap.nv-bullet").data([e]),T=x.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),N=T.append("g"),C=x.select("g");N.append("rect").attr("class","nv-range nv-rangeMax"),N.append("rect").attr("class","nv-range nv-rangeAvg"),N.append("rect").attr("class","nv-range nv-rangeMin"),N.append("rect").attr("class","nv-measure"),N.append("path").attr("class","nv-markerTriangle"),x.attr("transform","translate("+t.left+","+t.top+")");var k=function(e){return Math.abs(b(e)-b(0))},L=function(e){return Math.abs(y(e)-y(0))},A=function(e){return e<0?b(e):b(0)},O=function(e){return e<0?y(e):y(0)};C.select("rect.nv-rangeMax").attr("height",p).attr("width",L(E>0?E:w)).attr("x",O(E>0?E:w)).datum(E>0?E:w),C.select("rect.nv-rangeAvg").attr("height",p).attr("width",L(S)).attr("x",O(S)).datum(S),C.select("rect.nv-rangeMin").attr("height",p).attr("width",L(E)).attr("x",O(E)).attr("width",L(E>0?w:E)).attr("x",O(E>0?w:E)).datum(E>0?w:E),C.select("rect.nv-measure").style("fill",c).attr("height",p/3).attr("y",p/3).attr("width",g<0?y(0)-y(g[0]):y(g[0])-y(0)).attr("x",O(g)).on("mouseover",function(){h.elementMouseover({value:g[0],label:"Current",pos:[y(g[0]),p/2]})}).on("mouseout",function(){h.elementMouseout({value:g[0],label:"Current"})});var M=p/6;m[0]?C.selectAll("path.nv-markerTriangle").attr("transform",function(e){return"translate("+y(m[0])+","+p/2+")"}).attr("d","M0,"+M+"L"+M+","+ -M+" "+ -M+","+ -M+"Z").on("mouseover",function(){h.elementMouseover({value:m[0],label:"Previous",pos:[y(m[0]),p/2]})}).on("mouseout",function(){h.elementMouseout({value:m[0],label:"Previous"})}):C.selectAll("path.nv-markerTriangle").remove(),x.selectAll(".nv-range").on("mouseover",function(e,t){var n=t?t==1?"Mean":"Minimum":"Maximum";h.elementMouseover({value:e,label:n,pos:[y(e),p/2]})}).on("mouseout",function(e,t){var n=t?t==1?"Mean":"Minimum":"Maximum";h.elementMouseout({value:e,label:n})})}),p}var t={top:0,right:0,bottom:0,left:0},n="left",r=!1,i=function(e){return e.ranges},s=function(e){return e.markers},o=function(e){return e.measures},u=[0],a=380,f=30,l=null,c=e.utils.getColor(["#1f77b4"]),h=d3.dispatch("elementMouseover","elementMouseout");return p.dispatch=h,p.orient=function(e){return arguments.length?(n=e,r=n=="right"||n=="bottom",p):n},p.ranges=function(e){return arguments.length?(i=e,p):i},p.markers=function(e){return arguments.length?(s=e,p):s},p.measures=function(e){return arguments.length?(o=e,p):o},p.forceX=function(e){return arguments.length?(u=e,p):u},p.width=function(e){return arguments.length?(a=e,p):a},p.height=function(e){return arguments.length?(f=e,p):f},p.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,p):t},p.tickFormat=function(e){return arguments.length?(l=e,p):l},p.color=function(t){return arguments.length?(c=e.utils.getColor(t),p):c},p},e.models.bulletChart=function(){function m(e){return e.each(function(n,h){var g=d3.select(this),y=(a||parseInt(g.style("width"))||960)-i.left-i.right,b=f-i.top-i.bottom,w=this;m.update=function(){m(e)},m.container=this;if(!n||!s.call(this,n,h)){var E=g.selectAll(".nv-noData").data([p]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",i.left+y/2).attr("y",18+i.top+b/2).text(function(e){return e}),m}g.selectAll(".nv-noData").remove();var S=s.call(this,n,h).slice().sort(d3.descending),x=o.call(this,n,h).slice().sort(d3.descending),T=u.call(this,n,h).slice().sort(d3.descending),N=g.selectAll("g.nv-wrap.nv-bulletChart").data([n]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),k=C.append("g"),L=N.select("g");k.append("g").attr("class","nv-bulletWrap"),k.append("g").attr("class","nv-titles"),N.attr("transform","translate("+i.left+","+i.top+")");var A=d3.scale.linear().domain([0,Math.max(S[0],x[0],T[0])]).range(r?[y,0]:[0,y]),O=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(A.range());this.__chart__=A;var M=function(e){return Math.abs(O(e)-O(0))},_=function(e){return Math.abs(A(e)-A(0))},D=k.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(f-i.top-i.bottom)/2+")");D.append("text").attr("class","nv-title").text(function(e){return e.title}),D.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(e){return e.subtitle}),t.width(y).height(b);var P=L.select(".nv-bulletWrap");d3.transition(P).call(t);var H=l||A.tickFormat(y/100),B=L.selectAll("g.nv-tick").data(A.ticks(y/50),function(e){return this.textContent||H(e)}),j=B.enter().append("g").attr("class","nv-tick").attr("transform",function(e){return"translate("+O(e)+",0)"}).style("opacity",1e-6);j.append("line").attr("y1",b).attr("y2",b*7/6),j.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",b*7/6).text(H);var F=d3.transition(B).attr("transform",function(e){return"translate("+A(e)+",0)"}).style("opacity",1);F.select("line").attr("y1",b).attr("y2",b*7/6),F.select("text").attr("y",b*7/6),d3.transition(B.exit()).attr("transform",function(e){return"translate("+A(e)+",0)"}).style("opacity",1e-6).remove(),d.on("tooltipShow",function(e){e.key=n.title,c&&v(e,w.parentNode)})}),d3.timer.flush(),m}var t=e.models.bullet(),n="left",r=!1,i={top:5,right:40,bottom:20,left:120},s=function(e){return e.ranges},o=function(e){return e.markers},u=function(e){return e.measures},a=null,f=55,l=null,c=!0,h=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},p="No Data Available.",d=d3.dispatch("tooltipShow","tooltipHide"),v=function(t,n){var r=t.pos[0]+(n.offsetLeft||0)+i.left,s=t.pos[1]+(n.offsetTop||0)+i.top,o=h(t.key,t.label,t.value,t,m);e.tooltip.show([r,s],o,t.value<0?"e":"w",null,n)};return t.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),d.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),m.dispatch=d,m.bullet=t,d3.rebind(m,t,"color"),m.orient=function(e){return arguments.length?(n=e,r=n=="right"||n=="bottom",m):n},m.ranges=function(e){return arguments.length?(s=e,m):s},m.markers=function(e){return arguments.length?(o=e,m):o},m.measures=function(e){return arguments.length?(u=e,m):u},m.width=function(e){return arguments.length?(a=e,m):a},m.height=function(e){return arguments.length?(f=e,m):f},m.margin=function(e){return arguments.length?(i.top=typeof e.top!="undefined"?e.top:i.top,i.right=typeof e.right!="undefined"?e.right:i.right,i.bottom=typeof e.bottom!="undefined"?e.bottom:i.bottom,i.left=typeof e.left!="undefined"?e.left:i.left,m):i},m.tickFormat=function(e){return arguments.length?(l=e,m):l},m.tooltips=function(e){return arguments.length?(c=e,m):c},m.tooltipContent=function(e){return arguments.length?(h=e,m):h},m.noData=function(e){return arguments.length?(p=e,m):p},m},e.models.cumulativeLineChart=function(){function C(e){return e.each(function(e){function D(e,t){d3.select(C.container).style("cursor","ew-resize")}function P(e,t){T.x=d3.event.x,T.i=Math.round(x.invert(T.x)),J()}function H(e,t){d3.select(C.container).style("cursor","auto"),y.index=T.i,S.stateChange(y)}function J(){$.data([T]),d.call(C)}var d=d3.select(this).classed("nv-chart-"+g,!0),L=this,A=(a||parseInt(d.style("width"))||960)-o.left-o.right,O=(f||parseInt(d.style("height"))||400)-o.top-o.bottom;C.update=function(){d.transition().call(C)},C.container=this,y.disabled=e.map(function(e){return!!e.disabled});if(!b){var M;b={};for(M in y)y[M]instanceof Array?b[M]=y[M].slice(0):b[M]=y[M]}var _=d3.behavior.drag().on("dragstart",D).on("drag",P).on("dragend",H);if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var B=d.selectAll(".nv-noData").data([w]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",o.left+A/2).attr("y",o.top+O/2).text(function(e){return e}),C}d.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();if(!p){var j=e.filter(function(e){return!e.disabled}).map(function(e,n){var r=d3.extent(e.values,t.y());return r[0]<-0.95&&(r[0]=-0.95),[(r[0]-r[1])/(1+r[1]),(r[1]-r[0])/(1+r[0])]}),F=[d3.min(j,function(e){return e[0]}),d3.max(j,function(e){return e[1]})];t.yDomain(F)}else t.yDomain(null);x.domain([0,e[0].values.length-1]).range([0,A]).clamp(!0);var e=k(T.i,e),I=d.selectAll("g.nv-wrap.nv-cumulativeLine").data([e]),q=I.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),R=I.select("g");q.append("g").attr("class","nv-x nv-axis"),q.append("g").attr("class","nv-y nv-axis"),q.append("g").attr("class","nv-background"),q.append("g").attr("class","nv-linesWrap"),q.append("g").attr("class","nv-avgLinesWrap"),q.append("g").attr("class","nv-legendWrap"),q.append("g").attr("class","nv-controlsWrap"),l&&(i.width(A),R.select(".nv-legendWrap").datum(e).call(i),o.top!=i.height()&&(o.top=i.height(),O=(f||parseInt(d.style("height"))||400)-o.top-o.bottom),R.select(".nv-legendWrap").attr("transform","translate(0,"+ -o.top+")"));if(h){var U=[{key:"Re-scale y-axis",disabled:!p}];s.width(140).color(["#444","#444","#444"]),R.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+ -o.top+")").call(s)}I.attr("transform","translate("+o.left+","+o.top+")");var z=e.filter(function(e){return e.tempDisabled});I.select(".tempDisabled").remove(),z.length&&I.append("text").attr("class","tempDisabled").attr("x",A/2).attr("y","-.71em").style("text-anchor","end").text(z.map(function(e){return e.key}).join(", ")+" values cannot be calculated for this time period."),q.select(".nv-background").append("rect"),R.select(".nv-background rect").attr("width",A).attr("height",O),t.y(function(e){return e.display.y}).width(A).height(O).color(e.map(function(e,t){return e.color||u(e,t)}).filter(function(t,n){return!e[n].disabled&&!e[n].tempDisabled}));var W=R.select(".nv-linesWrap").datum(e.filter(function(e){return!e.disabled&&!e.tempDisabled}));W.call(t),e.forEach(function(e,t){e.seriesIndex=t});var X=e.filter(function(e){return!e.disabled&&!!E(e)}),V=R.select(".nv-avgLinesWrap").selectAll("line").data(X,function(e){return e.key});V.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(e,n){return t.color()(e,e.seriesIndex)}).attr("x1",0).attr("x2",A).attr("y1",function(e){return m(E(e))}).attr("y2",function(e){return m(E(e))}),V.attr("x1",0).attr("x2",A).attr("y1",function(e){return m(E(e))}).attr("y2",function(e){return m(E(e))}),V.exit().remove();var $=W.selectAll(".nv-indexLine").data([T]);$.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).call(_),$.attr("transform",function(e){return"translate("+x(e.i)+",0)"}).attr("height",O),n.scale(v).ticks(Math.min(e[0].values.length,A/70)).tickSize(-O,0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+m.range()[0]+")"),d3.transition(R.select(".nv-x.nv-axis")).call(n),r.scale(m).ticks(O/36).tickSize(-A,0),d3.transition(R.select(".nv-y.nv-axis")).call(r),R.select(".nv-background rect").on("click",function(){T.x=d3.mouse(this)[0],T.i=Math.round(x.invert(T.x)),y.index=T.i,S.stateChange(y),J()}),t.dispatch.on("elementClick",function(e){T.i=e.pointIndex,T.x=x(T.i),y.index=T.i,S.stateChange(y),J()}),s.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,p=!e.disabled,y.rescaleY=p,S.stateChange(y),C.update()}),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,I.selectAll(".nv-series").classed("disabled",!1),e}),y.disabled=e.map(function(e){return!!e.disabled}),S.stateChange(y),C.update()}),i.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,y.disabled=e.map(function(e){return!!e.disabled}),S.stateChange(y),C.update()}),S.on("tooltipShow",function(e){c&&N(e,L.parentNode)}),S.on("changeState",function(t){typeof t.disabled!="undefined"&&(e.forEach(function(e,n){e.disabled=t.disabled[n]}),y.disabled=t.disabled),typeof t.index!="undefined"&&(T.i=t.index,T.x=x(T.i),y.index=t.index,$.data([T])),typeof t.rescaleY!="undefined"&&(p=t.rescaleY),C.update()})}),C}function k(e,n){return n.map(function(n,r){if(!n.values)return n;var i=t.y()(n.values[e],e);return i<-0.95?(n.tempDisabled=!0,n):(n.tempDisabled=!1,n.values=n.values.map(function(e,n){return e.display={y:(t.y()(e,n)-i)/(1+i)},e}),n)})}var t=e.models.line(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:30,bottom:50,left:60},u=e.utils.defaultColor(),a=null,f=null,l=!0,c=!0,h=!0,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},v,m,g=t.id(),y={index:0,rescaleY:p},b=null,w="No Data Available.",E=function(e){return e.average},S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");n.orient("bottom").tickPadding(7),r.orient("left");var x=d3.scale.linear(),T={i:0,x:0},N=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=d(i.series.key,a,f,i,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],S.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),S.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),C.dispatch=S,C.lines=t,C.legend=i,C.xAxis=n,C.yAxis=r,d3.rebind(C,t,"defined","isArea","x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,C):o},C.width=function(e){return arguments.length?(a=e,C):a},C.height=function(e){return arguments.length?(f=e,C):f},C.color=function(t){return arguments.length?(u=e.utils.getColor(t),i.color(u),C):u},C.rescaleY=function(e){return arguments.length?(p=e,p):p},C.showControls=function(e){return arguments.length?(h=e,C):h},C.showLegend=function(e){return arguments.length?(l=e,C):l},C.tooltips=function(e){return arguments.length?(c=e,C):c},C.tooltipContent=function(e){return arguments.length?(d=e,C):d},C.state=function(e){return arguments.length?(y=e,C):y},C.defaultState=function(e){return arguments.length?(b=e,C):b},C.noData=function(e){return arguments.length?(w=e,C):w},C.average=function(e){return arguments.length?(E=e,C):E},C},e.models.discreteBar=function(){function b(e){return e.each(function(e){var i=n-t.left-t.right,b=r-t.top-t.bottom,w=d3.select(this);e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var E=p&&d?[]:e.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});s.domain(p||d3.merge(E).map(function(e){return e.x})).rangeBands([0,i],.1),o.domain(d||d3.extent(d3.merge(E).map(function(e){return e.y}).concat(f))),c?o.range([b-(o.domain()[0]<0?12:0),o.domain()[1]>0?12:0]):o.range([b,0]),g=g||s,y=y||o.copy().range([o(0),o(0)]);var S=w.selectAll("g.nv-wrap.nv-discretebar").data([e]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),N=T.append("g"),C=S.select("g");N.append("g").attr("class","nv-groups"),S.attr("transform","translate("+t.left+","+t.top+")");var k=S.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});k.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(k.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),k.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),d3.transition(k).style("stroke-opacity",1).style("fill-opacity",.75);var L=k.selectAll("g.nv-bar").data(function(e){return e.values});L.exit().remove();var A=L.enter().append("g").attr("transform",function(e,t,n){return"translate("+(s(u(e,t))+s.rangeBand()*.05)+", "+o(0)+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),v.elementMouseover({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(t.series+.5)/e.length,o(a(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),v.elementMouseout({value:a(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){v.elementClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(t.series+.5)/e.length,o(a(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){v.elementDblClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(t.series+.5)/e.length,o(a(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()});A.append("rect").attr("height",0).attr("width",s.rangeBand()*.9/e.length),c?(A.append("text").attr("text-anchor","middle"),L.select("text").attr("x",s.rangeBand()*.9/2).attr("y",function(e,t){return a(e,t)<0?o(a(e,t))-o(0)+12:-4}).text(function(e,t){return h(a(e,t))})):L.selectAll("text").remove(),L.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||l(e,t)}).style("stroke",function(e,t){return e.color||l(e,t)}).select("rect").attr("class",m).attr("width",s.rangeBand()*.9/e.length),d3.transition(L).attr("transform",function(e,t){var n=s(u(e,t))+s.rangeBand()*.05,r=a(e,t)<0?o(0):o(0)-o(a(e,t))<1?o(0)-1:o(a(e,t));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(e,t){return Math.max(Math.abs(o(a(e,t))-o(0))||1)}),g=s.copy(),y=o.copy()}),b}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=e.utils.defaultColor(),c=!1,h=d3.format(",.2f"),p,d,v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),m="discreteBar",g,y;return b.dispatch=v,b.x=function(e){return arguments.length?(u=e,b):u},b.y=function(e){return arguments.length?(a=e,b):a},b.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.xScale=function(e){return arguments.length?(s=e,b):s},b.yScale=function(e){return arguments.length?(o=e,b):o},b.xDomain=function(e){return arguments.length?(p=e,b):p},b.yDomain=function(e){return arguments.length?(d=e,b):d},b.forceY=function(e){return arguments.length?(f=e,b):f},b.color=function(t){return arguments.length?(l=e.utils.getColor(t),b):l},b.id=function(e){return arguments.length?(i=e,b):i},b.showValues=function(e){return arguments.length?(c=e,b):c},b.valueFormat=function(e){return arguments.length?(h=e,b):h},b.rectClass=function(e){return arguments.length?(m=e,b):m},b},e.models.discreteBarChart=function(){function m(e){return e.each(function(e){var u=d3.select(this),l=this,g=(s||parseInt(u.style("width"))||960)-i.left-i.right,b=(o||parseInt(u.style("height"))||400)-i.top-i.bottom;m.update=function(){d.beforeUpdate(),u.transition().call(m)},m.container=this;if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var w=u.selectAll(".nv-noData").data([p]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",i.left+g/2).attr("y",i.top+b/2).text(function(e){return e}),m}u.selectAll(".nv-noData").remove(),c=t.xScale(),h=t.yScale();var E=u.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([e]),S=E.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),T=S.append("defs"),N=E.select("g");S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis"),S.append("g").attr("class","nv-barsWrap"),N.attr("transform","translate("+i.left+","+i.top+")"),t.width(g).height(b);var C=N.select(".nv-barsWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(C).call(t),T.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect"),N.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",c.rangeBand()*(a?2:1)).attr("height",16).attr("x",-c.rangeBand()/(a?1:2)),n.scale(c).ticks(g/100).tickSize(-b,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+(h.range()[0]+(t.showValues()&&h.domain()[0]<0?16:0))+")"),N.select(".nv-x.nv-axis").transition().duration(0).call(n);var k=N.select(".nv-x.nv-axis").selectAll("g");a&&k.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),r.scale(h).ticks(b/36).tickSize(-g,0),d3.transition(N.select(".nv-y.nv-axis")).call(r),d.on("tooltipShow",function(e){f&&v(e,l.parentNode)})}),m}var t=e.models.discreteBar(),n=e.models.axis(),r=e.models.axis(),i={top:15,right:10,bottom:50,left:60},s=null,o=null,u=e.utils.getColor(),a=!1,f=!0,l=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},c,h,p="No Data Available.",d=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate");n.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("left").tickFormat(d3.format(",.1f"));var v=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),c=l(i.series.key,a,f,i,m);e.tooltip.show([o,u],c,i.value<0?"n":"s",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+i.left,e.pos[1]+i.top],d.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),d.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),m.dispatch=d,m.discretebar=t,m.xAxis=n,m.yAxis=r,d3.rebind(m,t,"x","y","xDomain","yDomain","forceX","forceY","id","showValues","valueFormat"),m.margin=function(e){return arguments.length?(i.top=typeof e.top!="undefined"?e.top:i.top,i.right=typeof e.right!="undefined"?e.right:i.right,i.bottom=typeof e.bottom!="undefined"?e.bottom:i.bottom,i.left=typeof e.left!="undefined"?e.left:i.left,m):i},m.width=function(e){return arguments.length?(s=e,m):s},m.height=function(e){return arguments.length?(o=e,m):o},m.color=function(n){return arguments.length?(u=e.utils.getColor(n),t.color(u),m):u},m.staggerLabels=function(e){return arguments.length?(a=e,m):a},m.tooltips=function(e){return arguments.length?(f=e,m):f},m.tooltipContent=function(e){return arguments.length?(l=e,m):l},m.noData=function(e){return arguments.length?(p=e,m):p},m},e.models.distribution=function(){function l(e){return e.each(function(e){var a=n-(i==="x"?t.left+t.right:t.top+t.bottom),l=i=="x"?"y":"x",c=d3.select(this);f=f||u;var h=c.selectAll("g.nv-distribution").data([e]),p=h.enter().append("g").attr("class","nvd3 nv-distribution"),d=p.append("g"),v=h.select("g");h.attr("transform","translate("+t.left+","+t.top+")");var m=v.selectAll("g.nv-dist").data(function(e){return e},function(e){return e.key});m.enter().append("g"),m.attr("class",function(e,t){return"nv-dist nv-series-"+t}).style("stroke",function(e,t){return o(e,t)});var g=m.selectAll("line.nv-dist"+i).data(function(e){return e.values});g.enter().append("line").attr(i+"1",function(e,t){return f(s(e,t))}).attr(i+"2",function(e,t){return f(s(e,t))}),d3.transition(m.exit().selectAll("line.nv-dist"+i)).attr(i+"1",function(e,t){return u(s(e,t))}).attr(i+"2",function(e,t){return u(s(e,t))}).style("stroke-opacity",0).remove(),g.attr("class",function(e,t){return"nv-dist"+i+" nv-dist"+i+"-"+t}).attr(l+"1",0).attr(l+"2",r),d3.transition(g).attr(i+"1",function(e,t){return u(s(e,t))}).attr(i+"2",function(e,t){return u(s(e,t))}),f=u.copy()}),l}var t={top:0,right:0,bottom:0,left:0},n=400,r=8,i="x",s=function(e){return e[i]},o=e.utils.defaultColor(),u=d3.scale.linear(),a,f;return l.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,l):t},l.width=function(e){return arguments.length?(n=e,l):n},l.axis=function(e){return arguments.length?(i=e,l):i},l.size=function(e){return arguments.length?(r=e,l):r},l.getData=function(e){return arguments.length?(s=d3.functor(e),l):s},l.scale=function(e){return arguments.length?(u=e,l):u},l.color=function(t){return arguments.length?(o=e.utils.getColor(t),l):o},l},e.models.historicalBar=function(){function g(e){return e.each(function(e){var g=n-t.left-t.right,b=r-t.top-t.bottom,w=d3.select(this);s.domain(d||d3.extent(e[0].values.map(u).concat(f))),c?s.range([g*.5/e[0].values.length,g*(e[0].values.length-.5)/e[0].values.length]):s.range([0,g]),o.domain(v||d3.extent(e[0].values.map(a).concat(l))).range([b,0]);if(s.domain()[0]===s.domain()[1]||o.domain()[0]===o.domain()[1])singlePoint=!0;s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1]));var E=w.selectAll("g.nv-wrap.nv-bar").data([e[0].values]),S=E.enter().append("g").attr("class","nvd3 nv-wrap nv-bar"),T=S.append("defs"),N=S.append("g"),C=E.select("g");N.append("g").attr("class","nv-bars"),E.attr("transform","translate("+t.left+","+t.top+")"),w.on("click",function(e,t){m.chartClick({data:e,index:t,pos:d3.event,id:i})}),T.append("clipPath").attr("id","nv-chart-clip-path-"+i).append("rect"),E.select("#nv-chart-clip-path-"+i+" rect").attr("width",g).attr("height",b),C.attr("clip-path",h?"url(#nv-chart-clip-path-"+i+")":"");var k=E.select(".nv-bars").selectAll(".nv-bar").data(function(e){return e});k.exit().remove();var L=k.enter().append("rect").attr("x",0).attr("y",function(e,t){return o(Math.max(0,a(e,t)))}).attr("height",function(e,t){return Math.abs(o(a(e,t))-o(0))}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),m.elementMouseover({point:t,series:e[0],pos:[s(u(t,n)),o(a(t,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),m.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(e,t){m.elementClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()}).on("dblclick",function(e,t){m.elementDblClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()});k.attr("fill",function(e,t){return p(e,t)}).attr("class",function(e,t,n){return(a(e,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+t}).attr("transform",function(t,n){return"translate("+(s(u(t,n))-g/e[0].values.length*.45)+",0)"}).attr("width",g/e[0].values.length*.9),d3.transition(k).attr("y",function(e,t){return a(e,t)<0?o(0):o(0)-o(a(e,t))<1?o(0)-1:o(a(e,t))}).attr("height",function(e,t){return Math.max(Math.abs(o(a(e,t))-o(0)),1)})}),g}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[],l=[0],c=!1,h=!0,p=e.utils.defaultColor(),d,v,m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return g.dispatch=m,g.x=function(e){return arguments.length?(u=e,g):u},g.y=function(e){return arguments.length?(a=e,g):a},g.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,g):t},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.xScale=function(e){return arguments.length?(s=e,g):s},g.yScale=function(e){return arguments.length?(o=e,g):o},g.xDomain=function(e){return arguments.length?(d=e,g):d},g.yDomain=function(e){return arguments.length?(v=e,g):v},g.forceX=function(e){return arguments.length?(f=e,g):f},g.forceY=function(e){return arguments.length?(l=e,g):l},g.padData=function(e){return arguments.length?(c=e,g):c},g.clipEdge=function(e){return arguments.length?(h=e,g):h},g.color=function(t){return arguments.length?(p=e.utils.getColor(t),g):p},g.id=function(e){return arguments.length?(i=e,g):i},g},e.models.historicalBarChart=function(){function S(e){return e.each(function(d){var T=d3.select(this),N=this,C=(u||parseInt(T.style("width"))||960)-s.left-s.right,k=(a||parseInt(T.style("height"))||400)-s.top-s.bottom;S.update=function(){S(e)},S.container=this,g.disabled=d.map(function(e){return!!e.disabled});if(!y){var L;y={};for(L in g)g[L]instanceof Array?y[L]=g[L].slice(0):y[L]=g[L]}if(!d||!d.length||!d.filter(function(e){return e.values.length}).length){var A=T.selectAll(".nv-noData").data([b]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",s.left+C/2).attr("y",s.top+k/2).text(function(e){return e}),S}T.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();var O=T.selectAll("g.nv-wrap.nv-lineChart").data([d]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),_=O.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-barsWrap"),M.append("g").attr("class","nv-legendWrap"),f&&(i.width(C),_.select(".nv-legendWrap").datum(d).call(i),s.top!=i.height()&&(s.top=i.height(),k=(a||parseInt(T.style("height"))||400)-s.top-s.bottom),O.select(".nv-legendWrap").attr("transform","translate(0,"+ -s.top+")")),O.attr("transform","translate("+s.left+","+s.top+")"),h&&_.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)"),t.width(C).height(k).color(d.map(function(e,t){return e.color||o(e,t)}).filter(function(e,t){return!d[t].disabled}));var D=_.select(".nv-barsWrap").datum(d.filter(function(e){return!e.disabled}));d3.transition(D).call(t),l&&(n.scale(v).tickSize(-k,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+m.range()[0]+")"),_.select(".nv-x.nv-axis").transition().call(n)),c&&(r.scale(m).ticks(k/36).tickSize(-C,0),_.select(".nv-y.nv-axis").transition().duration(0).call(r)),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,d.filter(function(e){return!e.disabled}).length||d.map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),g.disabled=d.map(function(e){return!!e.disabled}),w.stateChange(g),e.transition().call(S)}),i.dispatch.on("legendDblclick",function(e){d.forEach(function(e){e.disabled=!0}),e.disabled=!1,g.disabled=d.map(function(e){return!!e.disabled}),w.stateChange(g),S.update()}),w.on("tooltipShow",function(e){p&&E(e,N.parentNode)}),w.on("changeState",function(t){typeof t.disabled!="undefined"&&(d.forEach(function(e,n){e.disabled=t.disabled[n]}),g.disabled=t.disabled),e.call(S)})}),S}var t=e.models.historicalBar(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s={top:30,right:90,bottom:50,left:90},o=e.utils.defaultColor(),u=null,a=null,f=!1,l=!0,c=!0,h=!1,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},v,m,g={},y=null,b="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");n.orient("bottom").tickPadding(7),r.orient(h?"right":"left");var E=function(i,s){if(s){var o=d3.select(s).select("svg"),u=o.node()?o.attr("viewBox"):null;if(u){u=u.split(" ");var a=parseInt(o.style("width"))/u[2];i.pos[0]=i.pos[0]*a,i.pos[1]=i.pos[1]*a}}var f=i.pos[0]+(s.offsetLeft||0),l=i.pos[1]+(s.offsetTop||0),c=n.tickFormat()(t.x()(i.point,i.pointIndex)),h=r.tickFormat()(t.y()(i.point,i.pointIndex)),p=d(i.series.key,c,h,i,S);e.tooltip.show([f,l],p,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+s.left,e.pos[1]+s.top],w.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){w.tooltipHide(e)}),w.on("tooltipHide",function(){p&&e.tooltip.cleanup()}),S.dispatch=w,S.bars=t,S.legend=i,S.xAxis=n,S.yAxis=r,d3.rebind(S,t,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate"),S.margin=function(e){return arguments.length?(s.top=typeof e.top!="undefined"?e.top:s.top,s.right=typeof e.right!="undefined"?e.right:s.right,s.bottom=typeof e.bottom!="undefined"?e.bottom:s.bottom,s.left=typeof e.left!="undefined"?e.left:s.left,S):s},S.width=function(e){return arguments.length?(u=e,S):u},S.height=function(e){return arguments.length?(a=e,S):a},S.color=function(t){return arguments.length?(o=e.utils.getColor(t),i.color(o),S):o},S.showLegend=function(e){return arguments.length?(f=e,S):f},S.showXAxis=function(e){return arguments.length?(l=e,S):l},S.showYAxis=function(e){return arguments.length?(c=e,S):c},S.rightAlignYAxis=function(e){return arguments.length?(h=e,r.orient(e?"right":"left"),S):h},S.tooltips=function(e){return arguments.length?(p=e,S):p},S.tooltipContent=function(e){return arguments.length?(d=e,S):d},S.state=function(e){return arguments.length?(g=e,S):g},S.defaultState=function(e){return arguments.length?(y=e,S):y},S.noData=function(e){return arguments.length?(b=e,S):b},S},e.models.indentedTree=function(){function m(e){return e.each(function(e){function C(e,t,n){d3.event.stopPropagation();if(d3.event.shiftKey&&!n)return d3.event.shiftKey=!1,e.values&&e.values.forEach(function(e){(e.values||e._values)&&C(e,0,!0)}),!0;if(!A(e))return!0;e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),m.update()}function k(e){return e._values&&e._values.length?h:e.values&&e.values.length?p:""}function L(e){return e._values&&e._values.length}function A(e){var t=e.values||e._values;return t&&t.length}var t=1,n=d3.select(this),i=d3.layout.tree().children(function(e){return e.values}).size([r,f]);m.update=function(){n.transition().duration(600).call(m)},e[0]||(e[0]={key:a});var s=i.nodes(e[0]),g=d3.select(this).selectAll("div").data([[s]]),y=g.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),b=y.append("table"),w=g.select("table").attr("width","100%").attr("class",c);if(o){var E=b.append("thead"),S=E.append("tr");l.forEach(function(e){S.append("th").attr("width",e.width?e.width:"10%").style("text-align",e.type=="numeric"?"right":"left").append("span").text(e.label)})}var x=w.selectAll("tbody").data(function(e){return e});x.enter().append("tbody"),t=d3.max(s,function(e){return e.depth}),i.size([r,t*f]);var T=x.selectAll("tr").data(function(e){return e.filter(function(e){return u&&!e.children?u(e):!0})},function(e,t){return e.id||e.id||++v});T.exit().remove(),T.select("img.nv-treeicon").attr("src",k).classed("folded",L);var N=T.enter().append("tr");l.forEach(function(e,t){var n=N.append("td").style("padding-left",function(e){return(t?0:e.depth*f+12+(k(e)?0:16))+"px"},"important").style("text-align",e.type=="numeric"?"right":"left");t==0&&n.append("img").classed("nv-treeicon",!0).classed("nv-folded",L).attr("src",k).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(e){return k(e)?"inline-block":"none"}).on("click",C),n.append("span").attr("class",d3.functor(e.classes)).text(function(t){return e.format?e.format(t):t[e.key]||"-"}),e.showCount&&(n.append("span").attr("class","nv-childrenCount"),T.selectAll("span.nv-childrenCount").text(function(e){return e.values&&e.values.length||e._values&&e._values.length?"("+(e.values&&e.values.filter(function(e){return u?u(e):!0}).length||e._values&&e._values.filter(function(e){return u?u(e):!0}).length||0)+")":""})),e.click&&n.select("span").on("click",e.click)}),T.order().on("click",function(e){d.elementClick({row:this,data:e,pos:[e.x,e.y]})}).on("dblclick",function(e){d.elementDblclick({row:this,data:e,pos:[e.x,e.y]})}).on("mouseover",function(e){d.elementMouseover({row:this,data:e,pos:[e.x,e.y]})}).on("mouseout",function(e){d.elementMouseout({row:this,data:e,pos:[e.x,e.y]})})}),m}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e4),o=!0,u=!1,a="No Data Available.",f=20,l=[{key:"key",label:"Name",type:"text"}],c=null,h="images/grey-plus.png",p="images/grey-minus.png",d=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),v=0;return m.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,m):t},m.width=function(e){return arguments.length?(n=e,m):n},m.height=function(e){return arguments.length?(r=e,m):r},m.color=function(t){return arguments.length?(i=e.utils.getColor(t),scatter.color(i),m):i},m.id=function(e){return arguments.length?(s=e,m):s},m.header=function(e){return arguments.length?(o=e,m):o},m.noData=function(e){return arguments.length?(a=e,m):a},m.filterZero=function(e){return arguments.length?(u=e,m):u},m.columns=function(e){return arguments.length?(l=e,m):l},m.tableClass=function(e){return arguments.length?(c=e,m):c},m.iconOpen=function(e){return arguments.length?(h=e,m):h},m.iconClose=function(e){return arguments.length?(p=e,m):p},m},e.models.legend=function(){function a(f){return f.each(function(a){var f=n-t.left-t.right,l=d3.select(this),c=l.selectAll("g.nv-legend").data([a]),h=c.enter().append("g").attr("class","nvd3 nv-legend").append("g"),p=c.select("g");c.attr("transform","translate("+t.left+","+t.top+")");var d=p.selectAll(".nv-series").data(function(e){return e}),v=d.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){u.legendMouseover(e,t)}).on("mouseout",function(e,t){u.legendMouseout(e,t)}).on("click",function(e,t){u.legendClick(e,t)}).on("dblclick",function(e,t){u.legendDblclick(e,t)});v.append("circle").style("stroke-width",2).attr("r",5),v.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),d.classed("disabled",function(e){return e.disabled}),d.exit().remove(),d.select("circle").style("fill",function(e,t){return e.color||s(e,t)}).style("stroke",function(e,t){return e.color||s(e,t)}),d.select("text").text(i);if(o){var m=[];d.each(function(t,n){var r=d3.select(this).select("text"),i=r.node().getComputedTextLength()||e.utils.calcApproxTextWidth(r);m.push(i+28)});var g=0,y=0,b=[];while(y<f&&g<m.length)b[g]=m[g],y+=m[g++];while(y>f&&g>1){b=[],g--;for(k=0;k<m.length;k++)m[k]>(b[k%g]||0)&&(b[k%g]=m[k]);y=b.reduce(function(e,t,n,r){return e+t})}var w=[];for(var E=0,S=0;E<g;E++)w[E]=S,S+=b[E];d.attr("transform",function(e,t){return"translate("+w[t%g]+","+(5+Math.floor(t/g)*20)+")"}),p.attr("transform","translate("+(n-t.right-y)+","+t.top+")"),r=t.top+t.bottom+Math.ceil(m.length/g)*20}else{var x=5,T=5,N=0,C;d.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return C=T,n<t.left+t.right+C+i&&(T=C=5,x+=20),T+=i,T>N&&(N=T),"translate("+C+","+x+")"}),p.attr("transform","translate("+(n-t.right-N)+","+t.top+")"),r=t.top+t.bottom+x+15}}),a}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=e.utils.defaultColor(),o=!0,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");return a.dispatch=u,a.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,a):t},a.width=function(e){return arguments.length?(n=e,a):n},a.height=function(e){return arguments.length?(r=e,a):r},a.key=function(e){return arguments.length?(i=e,a):i},a.color=function(t){return arguments.length?(s=e.utils.getColor(t),a):s},a.align=function(e){return arguments.length?(o=e,a):o},a},e.models.line=function(){function m(e){return e.each(function(e){var m=r-n.left-n.right,g=i-n.top-n.bottom,b=d3.select(this);c=t.xScale(),h=t.yScale(),d=d||c,v=v||h;var w=b.selectAll("g.nv-wrap.nv-line").data([e]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),S=E.append("defs"),T=E.append("g"),N=w.select("g");T.append("g").attr("class","nv-groups"),T.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+n.left+","+n.top+")"),t.width(m).height(g);var C=w.select(".nv-scatterWrap");d3.transition(C).call(t),S.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect"),w.select("#nv-edge-clip-"+t.id()+" rect").attr("width",m).attr("height",g),N.attr("clip-path",l?"url(#nv-edge-clip-"+t.id()+")":""),C.attr("clip-path",l?"url(#nv-edge-clip-"+t.id()+")":"");var k=w.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});k.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(k.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),k.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return s(e,t)}).style("stroke",function(e,t){return s(e,t)}),d3.transition(k).style("stroke-opacity",1).style("fill-opacity",.5);var L=k.selectAll("path.nv-area").data(function(e){return f(e)?[e]:[]});L.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return d(o(e,t))}).y0(function(e,t){return v(u(e,t))}).y1(function(e,t){return v(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])}),d3.transition(k.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y0(function(e,t){return h(u(e,t))}).y1(function(e,t){return h(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])}),d3.transition(L).attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y0(function(e,t){return h(u(e,t))}).y1(function(e,t){return h(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])});var A=k.selectAll("path.nv-line").data(function(e){return[e.values]});A.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return d(o(e,t))}).y(function(e,t){return v(u(e,t))})),d3.transition(k.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y(function(e,t){return h(u(e,t))})),d3.transition(A).attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y(function(e,t){return h(u(e,t))})),d=c.copy(),v=h.copy()}),m}var t=e.models.scatter(),n={top:0,right:0,bottom:0,left:0},r=960,i=500,s=e.utils.defaultColor(),o=function(e){return e.x},u=function(e){return e.y},a=function(e,t){return!isNaN(u(e,t))&&u(e,t)!==null},f=function(e){return e.area},l=!1,c,h,p="linear";t.size(16).sizeDomain([16,256]);var d,v;return m.dispatch=t.dispatch,m.scatter=t,d3.rebind(m,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius","padData"),m.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,m):n},m.width=function(e){return arguments.length?(r=e,m):r},m.height=function(e){return arguments.length?(i=e,m):i},m.x=function(e){return arguments.length?(o=e,t.x(e),m):o},m.y=function(e){return arguments.length?(u=e,t.y(e),m):u},m.clipEdge=function(e){return arguments.length?(l=e,m):l},m.color=function(n){return arguments.length?(s=e.utils.getColor(n),t.color(s),m):s},m.interpolate=function(e){return arguments.length?(p=e,m):p},m.defined=function(e){return arguments.length?(a=e,m):a},m.isArea=function(e){return arguments.length?(f=d3.functor(e),m):f},m},e.models.lineChart=function(){function S(e){return e.each(function(e){var d=d3.select(this),T=this,N=(u||parseInt(d.style("width"))||960)-s.left-s.right,C=(a||parseInt(d.style("height"))||400)-s.top-s.bottom;S.update=function(){d.transition().call(S)},S.container=this,g.disabled=e.map(function(e){return!!e.disabled});if(!y){var k;y={};for(k in g)g[k]instanceof Array?y[k]=g[k].slice(0):y[k]=g[k]}if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var L=d.selectAll(".nv-noData").data([b]);return L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",s.left+N/2).attr("y",s.top+C/2).text(function(e){return e}),S}d.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();var A=d.selectAll("g.nv-wrap.nv-lineChart").data([e]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),M=A.select("g");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-linesWrap"),O.append("g").attr("class","nv-legendWrap"),f&&(i.width(N),M.select(".nv-legendWrap").datum(e).call(i),s.top!=i.height()&&(s.top=i.height(),C=(a||parseInt(d.style("height"))||400)-s.top-s.bottom),A.select(".nv-legendWrap").attr("transform","translate(0,"+ -s.top+")")),A.attr("transform","translate("+s.left+","+s.top+")"),h&&M.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),t.width(N).height(C).color(e.map(function(e,t){return e.color||o(e,t)}).filter(function(t,n){return!e[n].disabled}));var _=M.select(".nv-linesWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(_).call(t),l&&(n.scale(v).ticks(N/100).tickSize(-C,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+m.range()[0]+")"),d3.transition(M.select(".nv-x.nv-axis")).call(n)),c&&(r.scale(m).ticks(C/36).tickSize(-N,0),d3.transition(M.select(".nv-y.nv-axis")).call(r)),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,A.selectAll(".nv-series").classed("disabled",!1),e}),g.disabled=e.map(function(e){return!!e.disabled}),w.stateChange(g),S.update()}),i.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,g.disabled=e.map(function(e){return!!e.disabled}),w.stateChange(g),S.update()}),w.on("tooltipShow",function(e){p&&E(e,T.parentNode)}),w.on("changeState",function(t){typeof t.disabled!="undefined"&&(e.forEach(function(e,n){e.disabled=t.disabled[n]}),g.disabled=t.disabled),S.update()})}),S}var t=e.models.line(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s={top:30,right:20,bottom:50,left:60},o=e.utils.defaultColor(),u=null,a=null,f=!0,l=!0,c=!0,h=!1,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},v,m,g={},y=null,b="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");n.orient("bottom").tickPadding(7),r.orient(h?"right":"left");var E=function(i,s){if(s){var o=d3.select(s).select("svg"),u=o.node()?o.attr("viewBox"):null;if(u){u=u.split(" ");var a=parseInt(o.style("width"))/u[2];i.pos[0]=i.pos[0]*a,i.pos[1]=i.pos[1]*a}}var f=i.pos[0]+(s.offsetLeft||0),l=i.pos[1]+(s.offsetTop||0),c=n.tickFormat()(t.x()(i.point,i.pointIndex)),h=r.tickFormat()(t.y()(i.point,i.pointIndex)),p=d(i.series.key,c,h,i,S);e.tooltip.show([f,l],p,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+s.left,e.pos[1]+s.top],w.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){w.tooltipHide(e)}),w.on("tooltipHide",function(){p&&e.tooltip.cleanup()}),S.dispatch=w,S.lines=t,S.legend=i,S.xAxis=n,S.yAxis=r,d3.rebind(S,t,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate"),S.margin=function(e){return arguments.length?(s.top=typeof e.top!="undefined"?e.top:s.top,s.right=typeof e.right!="undefined"?e.right:s.right,s.bottom=typeof e.bottom!="undefined"?e.bottom:s.bottom,s.left=typeof e.left!="undefined"?e.left:s.left,S):s},S.width=function(e){return arguments.length?(u=e,S):u},S.height=function(e){return arguments.length?(a=e,S):a},S.color=function(t){return arguments.length?(o=e.utils.getColor(t),i.color(o),S):o},S.showLegend=function(e){return arguments.length?(f=e,S):f},S.showXAxis=function(e){return arguments.length?(l=e,S):l},S.showYAxis=function(e){return arguments.length?(c=e,S):c},S.rightAlignYAxis=function(e){return arguments.length?(h=e,r.orient(e?"right":"left"),S):h},S.tooltips=function(e){return arguments.length?(p=e,S):p},S.tooltipContent=function(e){return arguments.length?(d=e,S):d},S.state=function(e){return arguments.length?(g=e,S):g},S.defaultState=function(e){return arguments.length?(y=e,S):y},S.noData=function(e){return arguments.length?(b=e,S):b},S},e.models.linePlusBarChart=function(){function T(e){return e.each(function(e){var l=d3.select(this),c=this,v=(a||parseInt(l.style("width"))||960)-u.left-u.right,N=(f||parseInt(l.style("height"))||400)-u.top-u.bottom;T.update=function(){l.transition().call(T)},b.disabled=e.map(function(e){return!!e.disabled});if(!w){var C;w={};for(C in b)b[C]instanceof Array?w[C]=b[C].slice(0):w[C]=b[C]}if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var k=l.selectAll(".nv-noData").data([E]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",u.left+v/2).attr("y",u.top+N/2).text(function(e){return e}),T}l.selectAll(".nv-noData").remove();var L=e.filter(function(e){return!e.disabled&&e.bar}),A=e.filter(function(e){return!e.bar});m=A.filter(function(e){return!e.disabled}).length&&A.filter(function(e){return!e.disabled})[0].values.length?t.xScale():n.xScale(),g=n.yScale(),y=t.yScale();var O=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([e]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),_=O.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y1 nv-axis"),M.append("g").attr("class","nv-y2 nv-axis"),M.append("g").attr("class","nv-barsWrap"),M.append("g").attr("class","nv-linesWrap"),M.append("g").attr("class","nv-legendWrap"),p&&(o.width(v/2),_.select(".nv-legendWrap").datum(e.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?" (left axis)":" (right axis)"),e})).call(o),u.top!=o.height()&&(u.top=o.height(),N=(f||parseInt(l.style("height"))||400)-u.top-u.bottom),_.select(".nv-legendWrap").attr("transform","translate("+v/2+","+ -u.top+")")),O.attr("transform","translate("+u.left+","+u.top+")"),t.width(v).height(N).color(e.map(function(e,t){return e.color||h(e,t)}).filter(function(t,n){return!e[n].disabled&&!e[n].bar})),n.width(v).height(N).color(e.map(function(e,t){return e.color||h(e,t)}).filter(function(t,n){return!e[n].disabled&&e[n].bar}));var D=_.select(".nv-barsWrap").datum(L.length?L:[{values:[]}]),P=_.select(".nv-linesWrap").datum(A[0]&&!A[0].disabled?A:[{values:[]}]);d3.transition(D).call(n),d3.transition(P).call(t),r.scale(m).ticks(v/100).tickSize(-N,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),d3.transition(_.select(".nv-x.nv-axis")).call(r),i.scale(g).ticks(N/36).tickSize(-v,0),d3.transition(_.select(".nv-y1.nv-axis")).style("opacity",L.length?1:0).call(i),s.scale(y).ticks(N/36).tickSize(L.length?0:-v,0),_.select(".nv-y2.nv-axis").style("opacity",A.length?1:0).attr("transform","translate("+v+",0)"),d3.transition(_.select(".nv-y2.nv-axis")).call(s),o.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),b.disabled=e.map(function(e){return!!e.disabled}),S.stateChange(b),T.update()}),o.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,b.disabled=e.map(function(e){return!!e.disabled}),S.stateChange(b),T.update()}),S.on("tooltipShow",function(e){d&&x(e,c.parentNode)}),S.on("changeState",function(t){typeof t.disabled!="undefined"&&(e.forEach(function(e,n){e.disabled=t.disabled[n]}),b.disabled=t.disabled),T.update()})}),T}var t=e.models.line(),n=e.models.historicalBar(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.legend(),u={top:30,right:60,bottom:50,left:60},a=null,f=null,l=function(e){return e.x},c=function(e){return e.y},h=e.utils.defaultColor(),p=!0,d=!0,v=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},m,g,y,b={},w=null,E="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");n.padData(!0),t.clipEdge(!1).padData(!0),r.orient("bottom").tickPadding(7).highlightZero(!1),i.orient("left"),s.orient("right");var x=function(n,o){var u=n.pos[0]+(o.offsetLeft||0),a=n.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(n.point,n.pointIndex)),l=(n.series.bar?i:s).tickFormat()(t.y()(n.point,n.pointIndex)),c=v(n.series.key,f,l,n,T);e.tooltip.show([u,a],c,n.value<0?"n":"s",null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],S.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),n.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],S.tooltipShow(e)}),n.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),S.on("tooltipHide",function(){d&&e.tooltip.cleanup()}),T.dispatch=S,T.legend=o,T.lines=t,T.bars=n,T.xAxis=r,T.y1Axis=i,T.y2Axis=s,d3.rebind(T,t,"defined","size","clipVoronoi","interpolate"),T.x=function(e){return arguments.length?(l=e,t.x(e),n.x(e),T):l},T.y=function(e){return arguments.length?(c=e,t.y(e),n.y(e),T):c},T.margin=function(e){return arguments.length?(u.top=typeof e.top!="undefined"?e.top:u.top,u.right=typeof e.right!="undefined"?e.right:u.right,u.bottom=typeof e.bottom!="undefined"?e.bottom:u.bottom,u.left=typeof e.left!="undefined"?e.left:u.left,T):u},T.width=function(e){return arguments.length?(a=e,T):a},T.height=function(e){return arguments.length?(f=e,T):f},T.color=function(t){return arguments.length?(h=e.utils.getColor(t),o.color(h),T):h},T.showLegend=function(e){return arguments.length?(p=e,T):p},T.tooltips=function(e){return arguments.length?(d=e,T):d},T.tooltipContent=function(e){return arguments.length?(v=e,T):v},T.state=function(e){return arguments.length?(b=e,T):b},T.defaultState=function(e){return arguments.length?(w=e,T):w},T.noData=function(e){return arguments.length?(E=e,T):E},T},e.models.lineWithFocusChart=function(){function C(e){return e.each(function(e){function q(e){var t=+(e=="e"),n=t?1:-1,r=O/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function R(){a.empty()||a.extent(w),F.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function U(){w=a.empty()?null:a.extent(),extent=a.empty()?g.domain():a.extent(),T.brush({extent:extent,brush:a}),R();var n=P.select(".nv-focus .nv-linesWrap").datum(e.filter(function(e){return!e.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=extent[0]&&t.x()(e,n)<=extent[1]})}}));d3.transition(n).call(t),d3.transition(P.select(".nv-focus .nv-x.nv-axis")).call(r),d3.transition(P.select(".nv-focus .nv-y.nv-axis")).call(i)}var S=d3.select(this),k=this,L=(h||parseInt(S.style("width"))||960)-f.left-f.right,A=(p||parseInt(S.style("height"))||400)-f.top-f.bottom-d,O=d-l.top-l.bottom;C.update=function(){S.transition().call(C)},C.container=this;if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var M=S.selectAll(".nv-noData").data([x]);return M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",f.left+L/2).attr("y",f.top+A/2).text(function(e){return e}),C}S.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var _=S.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([e]),D=_.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),P=_.select("g");D.append("g").attr("class","nv-legendWrap");var H=D.append("g").attr("class","nv-focus");H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-linesWrap");var B=D.append("g").attr("class","nv-context");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap"),B.append("g").attr("class","nv-brushBackground"),B.append("g").attr("class","nv-x nv-brush"),b&&(u.width(L),P.select(".nv-legendWrap").datum(e).call(u),f.top!=u.height()&&(f.top=u.height(),A=(p||parseInt(S.style("height"))||400)-f.top-f.bottom-d),P.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),_.attr("transform","translate("+f.left+","+f.top+")"),t.width(L).height(A).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),n.defined(t.defined()).width(L).height(O).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),P.select(".nv-context").attr("transform","translate(0,"+(A+f.bottom+l.top)+")");var j=P.select(".nv-context .nv-linesWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(j).call(n),r.scale(v).ticks(L/100).tickSize(-A,0),i.scale(m).ticks(A/36).tickSize(-L,0),P.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+A+")"),a.x(g).on("brush",U),w&&a.extent(w);var F=P.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),I=F.enter().append("g");I.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",O),I.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",O),gBrush=P.select(".nv-x.nv-brush").call(a),gBrush.selectAll("rect").attr("height",O),gBrush.selectAll(".resize").append("path").attr("d",q),U(),s.scale(g).ticks(L/100).tickSize(-O,0),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(P.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(O/36).tickSize(-L,0),d3.transition(P.select(".nv-context .nv-y.nv-axis")).call(o),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,_.selectAll(".nv-series").classed("disabled",!1),e}),S.transition().call(C)}),T.on("tooltipShow",function(e){E&&N(e,k.parentNode)})}),C}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left");var N=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),C.dispatch=T,C.legend=u,C.lines=t,C.lines2=n,C.xAxis=r,C.yAxis=i,C.x2Axis=s,C.y2Axis=o,d3.rebind(C,t,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.x=function(e){return arguments.length?(t.x(e),n.x(e),C):t.x},C.y=function(e){return arguments.length?(t.y(e),n.y(e),C):t.y},C.margin=function(e){return arguments.length?(f.top=typeof e.top!="undefined"?e.top:f.top,f.right=typeof e.right!="undefined"?e.right:f.right,f.bottom=typeof e.bottom!="undefined"?e.bottom:f.bottom,f.left=typeof e.left!="undefined"?e.left:f.left,C):f},C.margin2=function(e){return arguments.length?(l=e,C):l},C.width=function(e){return arguments.length?(h=e,C):h},C.height=function(e){return arguments.length?(p=e,C):p},C.height2=function(e){return arguments.length?(d=e,C):d},C.color=function(t){return arguments.length?(c=e.utils.getColor(t),u.color(c),C):c},C.showLegend=function(e){return arguments.length?(b=e,C):b},C.tooltips=function(e){return arguments.length?(E=e,C):E},C.tooltipContent=function(e){return arguments.length?(S=e,C):S},C.interpolate=function(e){return arguments.length?(t.interpolate(e),n.interpolate(e),C):t.interpolate()},C.noData=function(e){return arguments.length?(x=e,C):x},C.xTickFormat=function(e){return arguments.length?(r.tickFormat(e),s.tickFormat(e),C):r.tickFormat()},C.yTickFormat=function(e){return arguments.length?(i.tickFormat(e),o.tickFormat(e),C):i.tickFormat()},C},e.models.linePlusBarWithFocusChart=function(){function H(e){return e.each(function(e){function tt(e){var t=+(e=="e"),n=t?1:-1,r=I/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function nt(){h.empty()||h.extent(x),Y.data([h.empty()?k.domain():x]).each(function(e,t){var n=k(e[0])-k.range()[0],r=k.range()[1]-k(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",k(e[1])).attr("width",r<0?0:r)})}function rt(){x=h.empty()?null:h.extent(),S=h.empty()?k.domain():h.extent(),D.brush({extent:S,brush:h}),nt(),r.width(j).height(F).color(e.map(function(e,t){return e.color||w(e,t)}).filter(function(t,n){return!e[n].disabled&&e[n].bar})),t.width(j).height(F).color(e.map(function(e,t){return e.color||w(e,t)}).filter(function(t,n){return!e[n].disabled&&!e[n].bar}));var n=$.select(".nv-focus .nv-barsWrap").datum(R.length?R.map(function(e,t){return{key:e.key,values:e.values.filter(function(e,t){return r.x()(e,t)>=S[0]&&r.x()(e,t)<=S[1]})}}):[{values:[]}]),i=$.select(".nv-focus .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U.map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=S[0]&&t.x()(e,n)<=S[1]})}}));R.length?C=r.xScale():C=t.xScale(),s.scale(C).ticks(j/100).tickSize(-F,0),s.domain([Math.ceil(S[0]),Math.floor(S[1])]),d3.transition($.select(".nv-x.nv-axis")).call(s),d3.transition(n).call(r),d3.transition(i).call(t),$.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+L.range()[0]+")"),u.scale(L).ticks(F/36).tickSize(-j,0),$.select(".nv-focus .nv-y1.nv-axis").style("opacity",R.length?1:0),a.scale(A).ticks(F/36).tickSize(R.length?0:-j,0),$.select(".nv-focus .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+C.range()[1]+",0)"),d3.transition($.select(".nv-focus .nv-y1.nv-axis")).call(u),d3.transition($.select(".nv-focus .nv-y2.nv-axis")).call(a)}var N=d3.select(this),B=this,j=(v||parseInt(N.style("width"))||960)-p.left-p.right,F=(m||parseInt(N.style("height"))||400)-p.top-p.bottom-g,I=g-d.top-d.bottom;H.update=function(){N.transition().call(H)},H.container=this;if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var q=N.selectAll(".nv-noData").data([_]);return q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),q.attr("x",p.left+j/2).attr("y",p.top+F/2).text(function(e){return e}),H}N.selectAll(".nv-noData").remove();var R=e.filter(function(e){return!e.disabled&&e.bar}),U=e.filter(function(e){return!e.bar});C=r.xScale(),k=o.scale(),L=r.yScale(),A=t.yScale(),O=i.yScale(),M=n.yScale();var z=e.filter(function(e){return!e.disabled&&e.bar}).map(function(e){return e.values.map(function(e,t){return{x:y(e,t),y:b(e,t)}})}),W=e.filter(function(e){return!e.disabled&&!e.bar}).map(function(e){return e.values.map(function(e,t){return{x:y(e,t),y:b(e,t)}})});C.range([0,j]),k.domain(d3.extent(d3.merge(z.concat(W)),function(e){return e.x})).range([0,j]);var X=N.selectAll("g.nv-wrap.nv-linePlusBar").data([e]),V=X.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),$=X.select("g");V.append("g").attr("class","nv-legendWrap");var J=V.append("g").attr("class","nv-focus");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap");var K=V.append("g").attr("class","nv-context");K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y1 nv-axis"),K.append("g").attr("class","nv-y2 nv-axis"),K.append("g").attr("class","nv-barsWrap"),K.append("g").attr("class","nv-linesWrap"),K.append("g").attr("class","nv-brushBackground"),K.append("g").attr("class","nv-x nv-brush"),E&&(c.width(j/2),$.select(".nv-legendWrap").datum(e.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?" (left axis)":" (right axis)"),e})).call(c),p.top!=c.height()&&(p.top=c.height(),F=(m||parseInt(N.style("height"))||400)-p.top-p.bottom-g),$.select(".nv-legendWrap").attr("transform","translate("+j/2+","+ -p.top+")")),X.attr("transform","translate("+p.left+","+p.top+")"),i.width(j).height(I).color(e.map(function(e,t){return e.color||w(e,t)}).filter(function(t,n){return!e[n].disabled&&e[n].bar})),n.width(j).height(I).color(e.map(function(e,t){return e.color||w(e,t)}).filter(function(t,n){return!e[n].disabled&&!e[n].bar}));var Q=$.select(".nv-context .nv-barsWrap").datum(R.length?R:[{values:[]}]),G=$.select(".nv-context .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U);$.select(".nv-context").attr("transform","translate(0,"+(F+p.bottom+d.top)+")"),d3.transition(Q).call(i),d3.transition(G).call(n),h.x(k).on("brush",rt),x&&h.extent(x);var Y=$.select(".nv-brushBackground").selectAll("g").data([x||h.extent()]),Z=Y.enter().append("g");Z.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",I),Z.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",I);var et=$.select(".nv-x.nv-brush").call(h);et.selectAll("rect").attr("height",I),et.selectAll(".resize").append("path").attr("d",tt),o.ticks(j/100).tickSize(-I,0),$.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")"),d3.transition($.select(".nv-context .nv-x.nv-axis")).call(o),f.scale(O).ticks(I/36).tickSize(-j,0),$.select(".nv-context .nv-y1.nv-axis").style("opacity",R.length?1:0).attr("transform","translate(0,"+k.range()[0]+")"),d3.transition($.select(".nv-context .nv-y1.nv-axis")).call(f),l.scale(M).ticks(I/36).tickSize(R.length?0:-j,0),$.select(".nv-context .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+k.range()[1]+",0)"),d3.transition($.select(".nv-context .nv-y2.nv-axis")).call(l),c.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,X.selectAll(".nv-series").classed("disabled",!1),e}),H.update()}),D.on("tooltipShow",function(e){T&&P(e,B.parentNode)}),rt()}),H}var t=e.models.line(),n=e.models.line(),r=e.models.historicalBar(),i=e.models.historicalBar(),s=e.models.axis(),o=e.models.axis(),u=e.models.axis(),a=e.models.axis(),f=e.models.axis(),l=e.models.axis(),c=e.models.legend(),h=d3.svg.brush(),p={top:30,right:30,bottom:30,left:60},d={top:0,right:30,bottom:20,left:60},v=null,m=null,g=100,y=function(e){return e.x},b=function(e){return e.y},w=e.utils.defaultColor(),E=!0,S,x=null,T=!0,N=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},C,k,L,A,O,M,_="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),s.orient("bottom").tickPadding(5),u.orient("left"),a.orient("right"),o.orient("bottom").tickPadding(5),f.orient("left"),l.orient("right");var P=function(n,r){S&&(n.pointIndex+=Math.ceil(S[0]));var i=n.pos[0]+(r.offsetLeft||0),o=n.pos[1]+(r.offsetTop||0),f=s.tickFormat()(t.x()(n.point,n.pointIndex)),l=(n.series.bar?u:a).tickFormat()(t.y()(n.point,n.pointIndex)),c=N(n.series.key,f,l,n,H);e.tooltip.show([i,o],c,n.value<0?"n":"s",null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+p.left,e.pos[1]+p.top],D.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){D.tooltipHide(e)}),r.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+p.left,e.pos[1]+p.top],D.tooltipShow(e)}),r.dispatch.on("elementMouseout.tooltip",function(e){D.tooltipHide(e)}),D.on("tooltipHide",function(){T&&e.tooltip.cleanup()}),H.dispatch=D,H.legend=c,H.lines=t,H.lines2=n,H.bars=r,H.bars2=i,H.xAxis=s,H.x2Axis=o,H.y1Axis=u,H.y2Axis=a,H.y3Axis=f,H.y4Axis=l,d3.rebind(H,t,"defined","size","clipVoronoi","interpolate"),H.x=function(e){return arguments.length?(y=e,t.x(e),r.x(e),H):y},H.y=function(e){return arguments.length?(b=e,t.y(e),r.y(e),H):b},H.margin=function(e){return arguments.length?(p.top=typeof e.top!="undefined"?e.top:p.top,p.right=typeof e.right!="undefined"?e.right:p.right,p.bottom=typeof e.bottom!="undefined"?e.bottom:p.bottom,p.left=typeof e.left!="undefined"?e.left:p.left,H):p},H.width=function(e){return arguments.length?(v=e,H):v},H.height=function(e){return arguments.length?(m=e,H):m},H.color=function(t){return arguments.length?(w=e.utils.getColor(t),c.color(w),H):w},H.showLegend=function(e){return arguments.length?(E=e,H):E},H.tooltips=function(e){return arguments.length?(T=e,H):T},H.tooltipContent=function(e){return arguments.length?(N=e,H):N},H.noData=function(e){return arguments.length?(_=e,H):_},H.brushExtent=function(e){return arguments.length?(x=e,H):x},H},e.models.multiBar=function(){function x(e){return e.each(function(e){var x=n-t.left-t.right,T=r-t.top-t.bottom,N=d3.select(this);p&&e.length&&(p=[{values:e[0].values.map(function(e){return{x:e.x,y:0,series:e.series,size:.01}})}]),c&&(e=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(!e.length&&p?p:e)),e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e}),c&&e[0].values.map(function(t,n){var r=0,i=0;e.map(function(e){var t=e.values[n];t.size=Math.abs(t.y),t.y<0?(t.y1=i,i-=t.size):(t.y1=t.size+r,r+=t.size)})});var C=y&&b?[]:e.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})});i.domain(d3.merge(C).map(function(e){return e.x})).rangeBands([0,x],.1),s.domain(b||d3.extent(d3.merge(C).map(function(e){return c?e.y>0?e.y1:e.y1+e.y:e.y}).concat(f))).range([T,0]);if(i.domain()[0]===i.domain()[1]||s.domain()[0]===s.domain()[1])singlePoint=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),E=E||i,S=S||s;var k=N.selectAll("g.nv-wrap.nv-multibar").data([e]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),A=L.append("defs"),O=L.append("g"),M=k.select("g");O.append("g").attr("class","nv-groups"),k.attr("transform","translate("+t.left+","+t.top+")"),A.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),k.select("#nv-edge-clip-"+o+" rect").attr("width",x).attr("height",T),M.attr("clip-path",l?"url(#nv-edge-clip-"+o+")":"");var _=k.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});_.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),_.exit().selectAll("rect.nv-bar").transition().delay(function(t,n){return n*m/e[0].values.length}).attr("y",function(e){return c?S(e.y0):S(0)}).attr("height",0).remove(),_.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return h(e,t)}).style("stroke",function(e,t){return h(e,t)}),d3.transition(_).style("stroke-opacity",1).style("fill-opacity",.75);var D=_.selectAll("rect.nv-bar").data(function(t){return p&&!e.length?p.values:t.values});D.exit().remove();var P=D.enter().append("rect").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,n,r){return c?0:r*i.rangeBand()/e.length}).attr("y",function(e){return S(c?e.y0:0)}).attr("height",0).attr("width",i.rangeBand()/(c?1:e.length));D.style("fill",function(e,t,n){return h(e,n,t)}).style("stroke",function(e,t,n){return h(e,n,t)}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),w.elementMouseover({value:a(t,n),point:t,series:e[t.series],pos:[i(u(t,n))+i.rangeBand()*(c?e.length/2:t.series+.5)/e.length,s(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),w.elementMouseout({value:a(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){w.elementClick({value:a(t,n),point:t,series:e[t.series],pos:[i(u(t,n))+i.rangeBand()*(c?e.length/2:t.series+.5)/e.length,s(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){w.elementDblClick({value:a(t,n),point:t,series:e[t.series],pos:[i(u(t,n))+i.rangeBand()*(c?e.length/2:t.series+.5)/e.length,s(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),D.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t){return"translate("+i(u(e,t))+",0)"}),d&&(v||(v=e.map(function(){return!0})),D.style("fill",function(e,t,n){return d3.rgb(d(e,t)).darker(v.map(function(e,t){return t}).filter(function(e,t){return!v[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(d(e,t)).darker(v.map(function(e,t){return t}).filter(function(e,t){return!v[t]})[n]).toString()})),c?D.transition().delay(function(t,n){return n*m/e[0].values.length}).attr("y",function(e,t){return s(c?e.y1:0)}).attr("height",function(e,t){return Math.max(Math.abs(s(e.y+(c?e.y0:0))-s(c?e.y0:0)),1)}).each("end",function(){d3.select(this).transition().duration(g).attr("x",function(t,n){return c?0:t.series*i.rangeBand()/e.length}).attr("width",i.rangeBand()/(c?1:e.length))}):d3.transition(D).duration(g).delay(function(t,n){return n*m/e[0].values.length}).attr("x",function(t,n){return t.series*i.rangeBand()/e.length}).attr("width",i.rangeBand()/e.length).each("end",function(){d3.select(this).transition().duration(g).attr("y",function(e,t){return a(e,t)<0?s(0):s(0)-s(a(e,t))<1?s(0)-1:s(a(e,t))||0}).attr("height",function(e,t){return Math.max(Math.abs(s(a(e,t))-s(0)),1)||0})}),E=i.copy(),S=s.copy()}),x}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!0,c=!1,h=e.utils.defaultColor(),p=!1,d=null,v,m=1200,g=500,y,b,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),E,S;return x.dispatch=w,x.x=function(e){return arguments.length?(u=e,x):u},x.y=function(e){return arguments.length?(a=e,x):a},x.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,x):t},x.width=function(e){return arguments.length?(n=e,x):n},x.height=function(e){return arguments.length?(r=e,x):r},x.xScale=function(e){return arguments.length?(i=e,x):i},x.yScale=function(e){return arguments.length?(s=e,x):s},x.xDomain=function(e){return arguments.length?(y=e,x):y},x.yDomain=function(e){return arguments.length?(b=e,x):b},x.forceY=function(e){return arguments.length?(f=e,x):f},x.stacked=function(e){return arguments.length?(c=e,x):c},x.clipEdge=function(e){return arguments.length?(l=e,x):l},x.color=function(t){return arguments.length?(h=e.utils.getColor(t),x):h},x.barColor=function(t){return arguments.length?(d=e.utils.getColor(t),x):d},x.disabled=function(e){return arguments.length?(v=e,x):v},x.id=function(e){return arguments.length?(o=e,x):o},x.hideable=function(e){return arguments.length?(p=e,x):p},x.delay=function(e){return arguments.length?(m=e,x):m},x.drawTime=function(e){return arguments.length?(g=e,x):g},x},e.models.multiBarChart=function(){function N(e){return e.each(function(e){var m=d3.select(this),C=this,k=(u||parseInt(m.style("width"))||960)-o.left-o.right,L=(a||parseInt(m.style("height"))||400)-o.top-o.bottom;N.update=function(){m.transition().call(N)},N.container=this,b.disabled=e.map(function(e){return!!e.disabled});if(!w){var A;w={};for(A in b)b[A]instanceof Array?w[A]=b[A].slice(0):w[A]=b[A]}if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var O=m.selectAll(".nv-noData").data([E]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",o.left+k/2).attr("y",o.top+L/2).text(function(e){return e}),N}m.selectAll(".nv-noData").remove(),g=t.xScale(),y=t.yScale();var M=m.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([e]),_=M.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),D=M.select("g");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis"),_.append("g").attr("class","nv-barsWrap"),_.append("g").attr("class","nv-legendWrap"),_.append("g").attr("class","nv-controlsWrap"),c&&(i.width(k-x()),t.barColor()&&e.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),D.select(".nv-legendWrap").datum(e).call(i),o.top!=i.height()&&(o.top=i.height(),L=(a||parseInt(m.style("height"))||400)-o.top-o.bottom),D.select(".nv-legendWrap").attr("transform","translate("+x()+","+ -o.top+")"));if(l){var P=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];s.width(x()).color(["#444","#444","#444"]),D.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+ -o.top+")").call(s)}M.attr("transform","translate("+o.left+","+o.top+")"),t.disabled(e.map(function(e){return e.disabled})).width(k).height(L).color(e.map(function(e,t){return e.color||f(e,t)}).filter(function(t,n){return!e[n].disabled}));var H=D.select(".nv-barsWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(H).call(t),n.scale(g).ticks(k/100).tickSize(-L,0),D.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(D.select(".nv-x.nv-axis")).call(n);var B=D.select(".nv-x.nv-axis > g").selectAll("g");B.selectAll("line, text").style("opacity",1);if(p){var j=function(e,t){return"translate("+e+","+t+")"},F=5,I=17;B.selectAll("text").attr("transform",function(e,t,n){return j(0,n%2==0?F:I)});var q=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;D.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(e,t){return j(0,t===0||q%2!==0?I:F)})}h&&B.filter(function(t,n){return n%Math.ceil(e[0].values.length/(k/100))!==0}).selectAll("text, line").style("opacity",0),d&&B.selectAll("text").attr("transform","rotate("+d+" 0,0)").attr("text-anchor",d>0?"start":"end"),D.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1),r.scale(y).ticks(L/36).tickSize(-k,0),d3.transition(D.select(".nv-y.nv-axis")).call(r),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,M.selectAll(".nv-series").classed("disabled",!1),e}),b.disabled=e.map(function(e){return!!e.disabled}),S.stateChange(b),N.update()}),i.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,b.disabled=e.map(function(e){return!!e.disabled}),S.stateChange(b),N.update()}),s.dispatch.on("legendClick",function(e,n){if(!e.disabled)return;P=P.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}b.stacked=t.stacked(),S.stateChange(b),N.update()}),S.on("tooltipShow",function(e){v&&T(e,C.parentNode)}),S.on("changeState",function(n){typeof n.disabled!="undefined"&&(e.forEach(function(e,t){e.disabled=n.disabled[t]}),b.disabled=n.disabled),typeof n.stacked!="undefined"&&(t.stacked(n.stacked),b.stacked=n.stacked),N.update()})}),N}var t=e.models.multiBar(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c=!0,h=!0,p=!1,d=0,v=!0,m=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},g,y,b={stacked:!1},w=null,E="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),x=function(){return l?180:0};t.stacked(!1),n.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("left").tickFormat(d3.format(",.1f"));var T=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=m(i.series.key,a,f,i,N);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],S.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),S.on("tooltipHide",function(){v&&e.tooltip.cleanup()}),N.dispatch=S,N.multibar=t,N.legend=i,N.xAxis=n,N.yAxis=r,d3.rebind(N,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","barColor"),N.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,N):o},N.width=function(e){return arguments.length?(u=e,N):u},N.height=function(e){return arguments.length?(a=e,N):a},N.color=function(t){return arguments.length?(f=e.utils.getColor(t),i.color(f),N):f},N.showControls=function(e){return arguments.length?(l=e,N):l},N.showLegend=function(e){return arguments.length?(c=e,N):c},N.reduceXTicks=function(e){return arguments.length?(h=e,N):h},N.rotateLabels=function(e){return arguments.length?(d=e,N):d},N.staggerLabels=function(e){return arguments.length?(p=e,N):p},N.tooltip=function(e){return arguments.length?(m=e,N):m},N.tooltips=function(e){return arguments.length?(v=e,N):v},N.tooltipContent=function(e){return arguments.length?(m=e,N):m},N.state=function(e){return arguments.length?(b=e,N):b},N.defaultState=function(e){return arguments.length?(w=e,N):w},N.noData=function(e){return arguments.length?(E=e,N):E},N},e.models.multiBarHorizontal=function(){function x(e){return e.each(function(e){var i=n-t.left-t.right,g=r-t.top-t.bottom,x=d3.select(this);p&&(e=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(e)),e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e}),p&&e[0].values.map(function(t,n){var r=0,i=0;e.map(function(e){var t=e.values[n];t.size=Math.abs(t.y),t.y<0?(t.y1=i-t.size,i-=t.size):(t.y1=r,r+=t.size)})});var T=y&&b?[]:e.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})});s.domain(y||d3.merge(T).map(function(e){return e.x})).rangeBands([0,g],.1),o.domain(b||d3.extent(d3.merge(T).map(function(e){return p?e.y>0?e.y1+e.y:e.y1:e.y}).concat(f))),d&&!p?o.range([o.domain()[0]<0?v:0,i-(o.domain()[1]>0?v:0)]):o.range([0,i]),E=E||s,S=S||d3.scale.linear().domain(o.domain()).range([o(0),o(0)]);var N=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),k=C.append("defs"),L=C.append("g"),A=N.select("g");L.append("g").attr("class","nv-groups"),N.attr("transform","translate("+t.left+","+t.top+")");var O=N.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(O.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return l(e,t)}).style("stroke",function(e,t){return l(e,t)}),d3.transition(O).style("stroke-opacity",1).style("fill-opacity",.75);var M=O.selectAll("g.nv-bar").data(function(e){return e.values});M.exit().remove();var _=M.enter().append("g").attr("transform",function(t,n,r){return"translate("+S(p?t.y0:0)+","+(p?0:r*s.rangeBand()/e.length+s(u(t,n)))+")"});_.append("rect").attr("width",0).attr("height",s.rangeBand()/(p?1:e.length)),M.on("mouseover",function(t,n){d3.select(this).classed("hover",!0),w.elementMouseover({value:a(t,n),point:t,series:e[t.series],pos:[o(a(t,n)+(p?t.y0:0)),s(u(t,n))+s.rangeBand()*(p?e.length/2:t.series+.5)/e.length],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),w.elementMouseout({value:a(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){w.elementClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(p?e.length/2:t.series+.5)/e.length,o(a(t,n)+(p?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){w.elementDblClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(p?e.length/2:t.series+.5)/e.length,o(a(t,n)+(p?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),_.append("text"),d&&!p?(M.select("text").attr("text-anchor",function(e,t){return a(e,t)<0?"end":"start"}).attr("y",s.rangeBand()/(e.length*2)).attr("dy",".32em").text(function(e,t){return m(a(e,t))}),d3.transition(M).select("text").attr("x",function(e,t){return a(e,t)<0?-4:o(a(e,t))-o(0)+4})):M.selectAll("text").text(""),M.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}),c&&(h||(h=e.map(function(){return!0})),M.style("fill",function(e,t,n){return d3.rgb(c(e,t)).darker(h.map(function(e,t){return t}).filter(function(e,t){return!h[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(c(e,t)).darker(h.map(function(e,t){return t}).filter(function(e,t){return!h[t]})[n]).toString()})),p?d3.transition(M).attr("transform",function(e,t){return"translate("+o(e.y1)+","+s(u(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(o(a(e,t)+e.y0)-o(e.y0))}).attr("height",s.rangeBand()):d3.transition(M).attr("transform",function(t,n){return"translate("+(a(t,n)<0?o(a(t,n)):o(0))+","+(t.series*s.rangeBand()/e.length+s(u(t,n)))+")"}).select("rect").attr("height",s.rangeBand()/e.length).attr("width",function(e,t){return Math.max(Math.abs(o(a(e,t))-o(0)),1)}),E=s.copy(),S=o.copy()}),x}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=e.utils.defaultColor(),c=null,h,p=!1,d=!1,v=60,m=d3.format(",.2f"),g=1200,y,b,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),E,S;return x.dispatch=w,x.x=function(e){return arguments.length?(u=e,x):u},x.y=function(e){return arguments.length?(a=e,x):a},x.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,x):t},x.width=function(e){return arguments.length?(n=e,x):n},x.height=function(e){return arguments.length?(r=e,x):r},x.xScale=function(e){return arguments.length?(s=e,x):s},x.yScale=function(e){return arguments.length?(o=e,x):o},x.xDomain=function(e){return arguments.length?(y=e,x):y},x.yDomain=function(e){return arguments.length?(b=e,x):b},x.forceY=function(e){return arguments.length?(f=e,x):f},x.stacked=function(e){return arguments.length?(p=e,x):p},x.color=function(t){return arguments.length?(l=e.utils.getColor(t),x):l},x.barColor=function(t){return arguments.length?(c=e.utils.getColor(t),x):c},x.disabled=function(e){return arguments.length?(h=e,x):h},x.id=function(e){return arguments.length?(i=e,x):i},x.delay=function(e){return arguments.length?(g=e,x):g},x.showValues=function(e){return arguments.length?(d=e,x):d},x.valueFormat=function(e){return arguments.length?(m=e,x):m},x.valuePadding=function(e){return arguments.length?(v=e,x):v},x},e.models.multiBarHorizontalChart=function(){function x(e){return e.each(function(h){var d=d3.select(this),T=this,N=(u||parseInt(d.style("width"))||960)-o.left-o.right,C=(a||parseInt(d.style("height"))||400)-o.top-o.bottom;x.update=function(){d.transition().call(x)},x.container=this,g.disabled=h.map(function(e){return!!e.disabled});if(!y){var k;y={};for(k in g)g[k]instanceof Array?y[k]=g[k].slice(0):y[k]=g[k]}if(!h||!h.length||!h.filter(function(e){return e.values.length}).length){var L=d.selectAll(".nv-noData").data([b]);return L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",o.left+N/2).attr("y",o.top+C/2).text(function(e){return e}),x}d.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();var A=d.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([h]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),M=A.select("g");O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-controlsWrap"),c&&(i.width(N-E()),t.barColor()&&h.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),M.select(".nv-legendWrap").datum(h).call(i),o.top!=i.height()&&(o.top=i.height(),C=(a||parseInt(d.style("height"))||400)-o.top-o.bottom),M.select(".nv-legendWrap").attr("transform","translate("+E()+","+ -o.top+")"));if(l){var _=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];s.width(E()).color(["#444","#444","#444"]),M.select(".nv-controlsWrap").datum(_).attr("transform","translate(0,"+ -o.top+")").call(s)}A.attr("transform","translate("+o.left+","+o.top+")"),t.disabled(h.map(function(e){return e.disabled})).width(N).height(C).color(h.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!h[t].disabled}));var D=M.select(".nv-barsWrap").datum(h.filter(function(e){return!e.disabled}));d3.transition(D).call(t),n.scale(v).ticks(C/24).tickSize(-N,0),d3.transition(M.select(".nv-x.nv-axis")).call(n);var P=M.select(".nv-x.nv-axis").selectAll("g");P.selectAll("line, text").style("opacity",1),r.scale(m).ticks(N/100).tickSize(-C,0),M.select(".nv-y.nv-axis").attr("transform","translate(0,"+C+")"),d3.transition(M.select(".nv-y.nv-axis")).call(r),i.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,h.filter(function(e){return!e.disabled}).length||h.map(function(e){return e.disabled=!1,A.selectAll(".nv-series").classed("disabled",!1),e}),g.disabled=h.map(function(e){return!!e.disabled}),w.stateChange(g),x.update()}),i.dispatch.on("legendDblclick",function(e){h.forEach(function(e){e.disabled=!0}),e.disabled=!1,g.disabled=h.map(function(e){return!!e.disabled}),w.stateChange(g),x.update()}),s.dispatch.on("legendClick",function(e,n){if(!e.disabled)return;_=_.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}g.stacked=t.stacked(),w.stateChange(g),x.update()}),w.on("tooltipShow",function(e){p&&S(e,T.parentNode)}),w.on("changeState",function(n){typeof n.disabled!="undefined"&&(h.forEach(function(e,t){e.disabled=n.disabled[t]}),g.disabled=n.disabled),typeof n.stacked!="undefined"&&(t.stacked(n.stacked),g.stacked=n.stacked),e.call(x)})}),x}var t=e.models.multiBarHorizontal(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend().height(30),s=e.models.legend().height(30),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c=!0,h=!1,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},v,m,g={stacked:h},y=null,b="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=function(){return l?180:0};t.stacked(h),n.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("bottom").tickFormat(d3.format(",.1f"));var S=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=d(i.series.key,a,f,i,x);e.tooltip.show([o,u],l,i.value<0?"e":"w",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],w.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){w.tooltipHide(e)}),w.on("tooltipHide",function(){p&&e.tooltip.cleanup()}),x.dispatch=w,x.multibar=t,x.legend=i,x.xAxis=n,x.yAxis=r,d3.rebind(x,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","showValues","valueFormat","stacked","barColor"),x.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,x):o},x.width=function(e){return arguments.length?(u=e,x):u},x.height=function(e){return arguments.length?(a=e,x):a},x.color=function(t){return arguments.length?(f=e.utils.getColor(t),i.color(f),x):f},x.showControls=function(e){return arguments.length?(l=e,x):l},x.showLegend=function(e){return arguments.length?(c=e,x):c},x.tooltip=function(e){return arguments.length?(d=e,x):d},x.tooltips=function(e){return arguments.length?(p=e,x):p},x.tooltipContent=function(e){return arguments.length?(d=e,x):d},x.state=function(e){return arguments.length?(g=e,x):g},x.defaultState=function(e){return arguments.length?(y=e,x):y},x.noData=function(e){return arguments.length?(b=e,x):b},x},e.models.multiChart=function(){function T(e){return e.each(function(e){var u=d3.select(this),f=this;T.update=function(){u.transition().call(T)},T.container=this;var N=(r||parseInt(u.style("width"))||960)-t.left-t.right,C=(i||parseInt(u.style("height"))||400)-t.top-t.bottom,k=e.filter(function(e){return!e.disabled&&e.type=="line"&&e.yAxis==1}),L=e.filter(function(e){return!e.disabled&&e.type=="line"&&e.yAxis==2}),A=e.filter(function(e){return!e.disabled&&e.type=="bar"&&e.yAxis==1}),O=e.filter(function(e){return!e.disabled&&e.type=="bar"&&e.yAxis==2}),M=e.filter(function(e){return!e.disabled&&e.type=="area"&&e.yAxis==1}),_=e.filter(function(e){return!e.disabled&&e.type=="area"&&e.yAxis==2}),D=e.filter(function(e){return!e.disabled&&e.yAxis==1}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})}),P=e.filter(function(e){return!e.disabled&&e.yAxis==2}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})});a.domain(d3.extent(d3.merge(D.concat(P)),function(e){return e.x})).range([0,N]);var H=u.selectAll("g.wrap.multiChart").data([e]),B=H.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");B.append("g").attr("class","x axis"),B.append("g").attr("class","y1 axis"),B.append("g").attr("class","y2 axis"),B.append("g").attr("class","lines1Wrap"),B.append("g").attr("class","lines2Wrap"),B.append("g").attr("class","bars1Wrap"),B.append("g").attr("class","bars2Wrap"),B.append("g").attr("class","stack1Wrap"),B.append("g").attr("class","stack2Wrap"),B.append("g").attr("class","legendWrap");var j=H.select("g");s&&(E.width(N/2),j.select(".legendWrap").datum(e.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.yAxis==1?"":" (right axis)"),e})).call(E),t.top!=E.height()&&(t.top=E.height(),C=(i||parseInt(u.style("height"))||400)-t.top-t.bottom),j.select(".legendWrap").attr("transform","translate("+N/2+","+ -t.top+")")),h.width(N).height(C).interpolate("monotone").color(e.map(function(e,t){return e.color||n[t%n.length]}).filter(function(t,n){return!e[n].disabled&&e[n].yAxis==1&&e[n].type=="line"})),p.width(N).height(C).interpolate("monotone").color(e.map(function(e,t){return e.color||n[t%n.length]}).filter(function(t,n){return!e[n].disabled&&e[n].yAxis==2&&e[n].type=="line"})),d.width(N).height(C).color(e.map(function(e,t){return e.color||n[t%n.length]}).filter(function(t,n){return!e[n].disabled&&e[n].yAxis==1&&e[n].type=="bar"})),v.width(N).height(C).color(e.map(function(e,t){return e.color||n[t%n.length]}).filter(function(t,n){return!e[n].disabled&&e[n].yAxis==2&&e[n].type=="bar"})),m.width(N).height(C).color(e.map(function(e,t){return e.color||n[t%n.length]}).filter(function(t,n){return!e[n].disabled&&e[n].yAxis==1&&e[n].type=="area"})),g.width(N).height(C).color(e.map(function(e,t){return e.color||n[t%n.length]}).filter(function(t,n){return!e[n].disabled&&e[n].yAxis==2&&e[n].type=="area"})),j.attr("transform","translate("+t.left+","+t.top+")");var F=j.select(".lines1Wrap").datum(k),I=j.select(".bars1Wrap").datum(A),q=j.select(".stack1Wrap").datum(M),R=j.select(".lines2Wrap").datum(L),U=j.select(".bars2Wrap").datum(O),z=j.select(".stack2Wrap").datum(_),W=M.length?M.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[],X=_.length?_.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[];l.domain(d3.extent(d3.merge(D).concat(W),function(e){return e.y})).range([0,C]),c.domain(d3.extent(d3.merge(P).concat(X),function(e){return e.y})).range([0,C]),h.yDomain(l.domain()),d.yDomain(l.domain()),m.yDomain(l.domain()),p.yDomain(c.domain()),v.yDomain(c.domain()),g.yDomain(c.domain()),M.length&&d3.transition(q).call(m),_.length&&d3.transition(z).call(g),A.length&&d3.transition(I).call(d),O.length&&d3.transition(U).call(v),k.length&&d3.transition(F).call(h),L.length&&d3.transition(R).call(p),y.ticks(N/100).tickSize(-C,0),j.select(".x.axis").attr("transform","translate(0,"+C+")"),d3.transition(j.select(".x.axis")).call(y),b.ticks(C/36).tickSize(-N,0),d3.transition(j.select(".y1.axis")).call(b),w.ticks(C/36).tickSize(-N,0),d3.transition(j.select(".y2.axis")).call(w),j.select(".y2.axis").style("opacity",P.length?1:0).attr("transform","translate("+a.range()[1]+",0)"),E.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,H.selectAll(".series").classed("disabled",!1),e}),T.update()}),S.on("tooltipShow",function(e){o&&x(e,f.parentNode)})}),T}var t={top:30,right:20,bottom:50,left:60},n=d3.scale.category20().range(),r=null,i=null,s=!0,o=!0,u=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},a,f,a=d3.scale.linear(),l=d3.scale.linear(),c=d3.scale.linear(),h=e.models.line().yScale(l),p=e.models.line().yScale(c),d=e.models.multiBar().stacked(!1).yScale(l),v=e.models.multiBar().stacked(!1).yScale(c),m=e.models.stackedArea().yScale(l),g=e.models.stackedArea().yScale(c),y=e.models.axis().scale(a).orient("bottom").tickPadding(5),b=e.models.axis().scale(l).orient("left"),w=e.models.axis().scale(c).orient("right"),E=e.models.legend().height(30),S=d3.dispatch("tooltipShow","tooltipHide"),x=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=y.tickFormat()(h.x()(t.point,t.pointIndex)),o=(t.series.yAxis==2?w:b).tickFormat()(h.y()(t.point,t.pointIndex)),a=u(t.series.key,s,o,t,T);e.tooltip.show([r,i],a,undefined,undefined,n.offsetParent)};return h.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),h.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),d.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),m.dispatch.on("tooltipShow",function(e){if(!Math.round(m.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),m.dispatch.on("tooltipHide",function(e){S.tooltipHide(e)}),g.dispatch.on("tooltipShow",function(e){if(!Math.round(g.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),g.dispatch.on("tooltipHide",function(e){S.tooltipHide(e)}),h.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),h.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),S.on("tooltipHide",function(){o&&e.tooltip.cleanup()}),T.dispatch=S,T.lines1=h,T.lines2=p,T.bars1=d,T.bars2=v,T.stack1=m,T.stack2=g,T.xAxis=y,T.yAxis1=b,T.yAxis2=w,T.x=function(e){return arguments.length?(getX=e,h.x(e),d.x(e),T):getX},T.y=function(e){return arguments.length?(getY=e,h.y(e),d.y(e),T):getY},T.margin=function(e){return arguments.length?(t=e,T):t},T.width=function(e){return arguments.length?(r=e,T):r},T.height=function(e){return arguments.length?(i=e,T):i},T.color=function(e){return arguments.length?(n=e,E.color(e),T):n},T.showLegend=function(e){return arguments.length?(s=e,T):s},T.tooltips=function(e){return arguments.length?(o=e,T):o},T.tooltipContent=function(e){return arguments.length?(u=e,T):u},T},e.models.ohlcBar=function(){function E(e){return e.each(function(e){var g=n-t.left-t.right,E=r-t.top-t.bottom,S=d3.select(this);s.domain(y||d3.extent(e[0].values.map(u).concat(p))),v?s.range([g*.5/e[0].values.length,g*(e[0].values.length-.5)/e[0].values.length]):s.range([0,g]),o.domain(b||[d3.min(e[0].values.map(h).concat(d)),d3.max(e[0].values.map(c).concat(d))]).range([E,0]);if(s.domain()[0]===s.domain()[1]||o.domain()[0]===o.domain()[1])singlePoint=!0;s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1]));var T=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),C=N.append("defs"),k=N.append("g"),L=T.select("g");k.append("g").attr("class","nv-ticks"),T.attr("transform","translate("+t.left+","+t.top+")"),S.on("click",function(e,t){w.chartClick({data:e,index:t,pos:d3.event,id:i})}),C.append("clipPath").attr("id","nv-chart-clip-path-"+i).append("rect"),T.select("#nv-chart-clip-path-"+i+" rect").attr("width",g).attr("height",E),L.attr("clip-path",m?"url(#nv-chart-clip-path-"+i+")":"");var A=T.select(".nv-ticks").selectAll(".nv-tick").data(function(e){return e});A.exit().remove();var O=A.enter().append("path").attr("class",function(e,t,n){return(f(e,t)>l(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}).attr("d",function(t,n){var r=g/e[0].values.length*.9;return"m0,0l0,"+(o(f(t,n))-o(c(t,n)))+"l"+ -r/2+",0l"+r/2+",0l0,"+(o(h(t,n))-o(f(t,n)))+"l0,"+(o(l(t,n))-o(h(t,n)))+"l"+r/2+",0l"+ -r/2+",0z"}).attr("transform",function(e,t){return"translate("+s(u(e,t))+","+o(c(e,t))+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),w.elementMouseover({point:t,series:e[0],pos:[s(u(t,n)),o(a(t,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),w.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(e,t){w.elementClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()}).on("dblclick",function(e,t){w.elementDblClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()});A.attr("class",function(e,t,n){return(f(e,t)>l(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}),d3.transition(A).attr("transform",function(e,t){return"translate("+s(u(e,t))+","+o(c(e,t))+")"}).attr("d",function(t,n){var r=g/e[0].values.length*.9;return"m0,0l0,"+(o(f(t,n))-o(c(t,n)))+"l"+ -r/2+",0l"+r/2+",0l0,"+(o(h(t,n))-o(f(t,n)))+"l0,"+(o(l(t,n))-o(h(t,n)))+"l"+r/2+",0l"+ -r/2+",0z"})}),E}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=function(e){return e.open},l=function(e){return e.close},c=function(e){return e.high},h=function(e){return e.low},p=[],d=[],v=!1,m=!0,g=e.utils.defaultColor(),y,b,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return E.dispatch=w,E.x=function(e){return arguments.length?(u=e,E):u},E.y=function(e){return arguments.length?(a=e,E):a},E.open=function(e){return arguments.length?(f=e,E):f},E.close=function(e){return arguments.length?(l=e,E):l},E.high=function(e){return arguments.length?(c=e,E):c},E.low=function(e){return arguments.length?(h=e,E):h},E.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.xScale=function(e){return arguments.length?(s=e,E):s},E.yScale=function(e){return arguments.length?(o=e,E):o},E.xDomain=function(e){return arguments.length?(y=e,E):y},E.yDomain=function(e){return arguments.length?(b=e,E):b},E.forceX=function(e){return arguments.length?(p=e,E):p},E.forceY=function(e){return arguments.length?(d=e,E):d},E.padData=function(e){return arguments.length?(v=e,E):v},E.clipEdge=function(e){return arguments.length?(m=e,E):m},E.color=function(t){return arguments.length?(g=e.utils.getColor(t),E):g},E.id=function(e){return arguments.length?(i=e,E):i},E},e.models.pie=function(){function E(e){return e.each(function(e){function P(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function H(e){e.endAngle=isNaN(e.endAngle)?0:e.endAngle,e.startAngle=isNaN(e.startAngle)?0:e.startAngle,v||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return L(t(e))}}function B(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return L(t(e))}}var u=n-t.left-t.right,l=r-t.top-t.bottom,E=Math.min(u,l)/2,S=E-E/5,x=d3.select(this),T=x.selectAll(".nv-wrap.nv-pie").data([i(e[0])]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a),C=N.append("g"),k=T.select("g");C.append("g").attr("class","nv-pie"),T.attr("transform","translate("+t.left+","+t.top+")"),k.select(".nv-pie").attr("transform","translate("+u/2+","+l/2+")"),x.on("click",function(e,t){w.chartClick({data:e,index:t,pos:d3.event,id:a})});var L=d3.svg.arc().outerRadius(S);g&&L.startAngle(g),y&&L.endAngle(y),v&&L.innerRadius(E*b);var A=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),O=T.select(".nv-pie").selectAll(".nv-slice").data(A);O.exit().remove();var M=O.enter().append("g").attr("class","nv-slice").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),w.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),w.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:a})}).on("click",function(e,t){w.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){w.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()});O.attr("fill",function(e,t){return f(e,t)}).attr("stroke",function(e,t){return f(e,t)});var _=M.append("path").each(function(e){this._current=e});d3.transition(O.select("path")).attr("d",L).attrTween("d",H);if(c){var D=d3.svg.arc().innerRadius(0);h&&(D=L),p&&(D=d3.svg.arc().outerRadius(L.outerRadius())),M.append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){if(m){e.outerRadius=S+10,e.innerRadius=S+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+D.centroid(e)+") rotate("+t+")"}return e.outerRadius=E+10,e.innerRadius=E+15,"translate("+D.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",m?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}),O.select(".nv-label").transition().attr("transform",function(e){if(m){e.outerRadius=S+10,e.innerRadius=S+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+D.centroid(e)+") rotate("+t+")"}return e.outerRadius=E+10,e.innerRadius=E+15,"translate("+D.centroid(e)+")"}),O.each(function(e,t){var n=d3.select(this);n.select(".nv-label text").style("text-anchor",m?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI);return e.value&&n>d?s(e.data):""});var r=n.select("text").node().getBBox();n.select(".nv-label rect").attr("width",r.width+10).attr("height",r.height+10).attr("transform",function(){return"translate("+[r.x-5,r.y-5]+")"})})}}),E}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e.values},s=function(e){return e.x},o=function(e){return e.y},u=function(e){return e.description},a=Math.floor(Math.random()*1e4),f=e.utils.defaultColor(),l=d3.format(",.2f"),c=!0,h=!0,p=!1,d=.02,v=!1,m=!1,g=!1,y=!1,b=.5,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return E.dispatch=w,E.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.values=function(e){return arguments.length?(i=e,E):i},E.x=function(e){return arguments.length?(s=e,E):s},E.y=function(e){return arguments.length?(o=d3.functor(e),E):o},E.description=function(e){return arguments.length?(u=e,E):u},E.showLabels=function(e){return arguments.length?(c=e,E):c},E.labelSunbeamLayout=function(e){return arguments.length?(m=e,E):m},E.donutLabelsOutside=function(e){return arguments.length?(p=e,E):p},E.pieLabelsOutside=function(e){return arguments.length?(h=e,E):h},E.donut=function(e){return arguments.length?(v=e,E):v},E.donutRatio=function(e){return arguments.length?(b=e,E):b},E.startAngle=function(e){return arguments.length?(g=e,E):g},E.endAngle=function(e){return arguments.length?(y=e,E):y},E.id=function(e){return arguments.length?(a=e,E):a},E.color=function(t){return arguments.length?(f=e.utils.getColor(t),E):f},E.valueFormat=function(e){return arguments.length?(l=e,E):l},E.labelThreshold=function(e){return arguments.length?(d=e,E):d},E},e.models.pieChart=function(){function v(e){return e.each(function(e){var u=d3.select(this),a=this,f=(i||parseInt(u.style("width"))||960)-r.left-r.right,d=(s||parseInt(u.style("height"))||400)-r.top-r.bottom;v.update=function(){u.transition().call(v)},v.container=this,l.disabled=e[0].map(function(e){return!!e.disabled});if(!c){var m;c={};for(m in l)l[m]instanceof Array?c[m]=l[m].slice(0):c[m]=l[m]}if(!e[0]||!e[0].length){var g=u.selectAll(".nv-noData").data([h]);return g.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),g.attr("x",r.left+f/2).attr("y",r.top+d/2).text(function(e){return e}),v}u.selectAll(".nv-noData").remove();var y=u.selectAll("g.nv-wrap.nv-pieChart").data([e]),b=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),w=y.select("g");b.append("g").attr("class","nv-pieWrap"),b.append("g").attr("class","nv-legendWrap"),o&&(n.width(f).key(t.x()),y.select(".nv-legendWrap").datum(t.values()(e[0])).call(n),r.top!=n.height()&&(r.top=n.height(),d=(s||parseInt(u.style("height"))||400)-r.top-r.bottom),y.select(".nv-legendWrap").attr("transform","translate(0,"+ -r.top+")")),y.attr("transform","translate("+r.left+","+r.top+")"),t.width(f).height(d);var E=w.select(".nv-pieWrap").datum(e);d3.transition(E).call(t),n.dispatch.on("legendClick",function(n,r,i){n.disabled=!n.disabled,t.values()(e[0]).filter(function(e){return!e.disabled}).length||t.values()(e[0]).map(function(e){return e.disabled=!1,y.selectAll(".nv-series").classed("disabled",!1),e}),l.disabled=e[0].map(function(e){return!!e.disabled}),p.stateChange(l),v.update()}),t.dispatch.on("elementMouseout.tooltip",function(e){p.tooltipHide(e)}),p.on("changeState",function(t){typeof t.disabled!="undefined"&&(e[0].forEach(function(e,n){e.disabled=t.disabled[n]}),l.disabled=t.disabled),v.update()})}),v}var t=e.models.pie(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u=e.utils.defaultColor(),a=!0,f=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},l={},c=null,h="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),d=function(n,r){var i=t.description()(n.point)||t.x()(n.point),s=n.pos[0]+(r&&r.offsetLeft||0),o=n.pos[1]+(r&&r.offsetTop||0),u=t.valueFormat()(t.y()(n.point)),a=f(i,u,n,v);e.tooltip.show([s,o],a,n.value<0?"n":"s",null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],p.tooltipShow(e)}),p.on("tooltipShow",function(e){a&&d(e)}),p.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),v.legend=n,v.dispatch=p,v.pie=t,d3.rebind(v,t,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","donut","donutRatio","labelThreshold"),v.margin=function(e){return arguments.length?(r.top=typeof e.top!="undefined"?e.top:r.top,r.right=typeof e.right!="undefined"?e.right:r.right,r.bottom=typeof e.bottom!="undefined"?e.bottom:r.bottom,r.left=typeof e.left!="undefined"?e.left:r.left,v):r},v.width=function(e){return arguments.length?(i=e,v):i},v.height=function(e){return arguments.length?(s=e,v):s},v.color=function(r){return arguments.length?(u=e.utils.getColor(r),n.color(u),t.color(u),v):u},v.showLegend=function(e){return arguments.length?(o=e,v):o},v.tooltips=function(e){return arguments.length?(a=e,v):a},v.tooltipContent=function(e){return arguments.length?(f=e,v):f},v.state=function(e){return arguments.length?(l=e,v):l},v.defaultState=function(e){return arguments.length?(c=e,v):c},v.noData=function(e){return arguments.length?(h=e,v):h},v},e.models.scatter=function(){function j(e){return e.each(function(e){function $(){if(!g)return!1;var i,a=d3.merge(e.map(function(e,t){return e.values.map(function(e,n){var r=f(e,n)+Math.random()*1e-7,i=l(e,n)+Math.random()*1e-7;return[o(r),u(i),t,n,e]}).filter(function(e,t){return b(e[4],t)})}));if(M===!0){if(x){var c=R.select("defs").selectAll(".nv-point-clips").data([s]).enter();c.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+s);var h=R.select("#nv-points-clip-"+s).selectAll("circle").data(a);h.enter().append("circle").attr("r",T),h.exit().remove(),h.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),R.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+s+")")}a.length&&(a.push([o.range()[0]-20,u.range()[0]-20,null,null]),a.push([o.range()[1]+20,u.range()[1]+20,null,null]),a.push([o.range()[0]-20,u.range()[0]+20,null,null]),a.push([o.range()[1]+20,u.range()[1]-20,null,null]));var p=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]),d=d3.geom.voronoi(a).map(function(e,t){return{data:p.clip(e),series:a[t][2],point:a[t][3]}}),v=R.select(".nv-point-paths").selectAll("path").data(d);v.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),v.exit().remove(),v.attr("d",function(e){return e.data.length===0?"M 0 0":"M"+e.data.join("L")+"Z"}),v.on("click",function(n){if(B)return 0;var r=e[n.series],i=r.values[n.point];O.elementClick({point:i,series:r,pos:[o(f(i,n.point))+t.left,u(l(i,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})}).on("mouseover",function(n){if(B)return 0;var r=e[n.series],i=r.values[n.point];O.elementMouseover({point:i,series:r,pos:[o(f(i,n.point))+t.left,u(l(i,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})}).on("mouseout",function(t,n){if(B)return 0;var r=e[t.series],i=r.values[t.point];O.elementMouseout({point:i,series:r,seriesIndex:t.series,pointIndex:t.point})})}else R.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(n,r){if(B||!e[n.series])return 0;var i=e[n.series],s=i.values[r];O.elementClick({point:s,series:i,pos:[o(f(s,r))+t.left,u(l(s,r))+t.top],seriesIndex:n.series,pointIndex:r})}).on("mouseover",function(n,r){if(B||!e[n.series])return 0;var i=e[n.series],s=i.values[r];O.elementMouseover({point:s,series:i,pos:[o(f(s,r))+t.left,u(l(s,r))+t.top],seriesIndex:n.series,pointIndex:r})}).on("mouseout",function(t,n){if(B||!e[t.series])return 0;var r=e[t.series],i=r.values[n];O.elementMouseout({point:i,series:r,seriesIndex:t.series,pointIndex:n})});B=!1}var j=n-t.left-t.right,F=r-t.top-t.bottom,I=d3.select(this);e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var q=N&&C&&k?[]:d3.merge(e.map(function(e){return e.values.map(function(e,t){return{x:f(e,t),y:l(e,t),size:c(e,t)}})}));o.domain(N||d3.extent(q.map(function(e){return e.x}).concat(d))),w&&e[0]?o.range([(j*E+j)/(2*e[0].values.length),j-j*(1+E)/(2*e[0].values.length)]):o.range([0,j]),u.domain(C||d3.extent(q.map(function(e){return e.y}).concat(v))).range([F,0]),a.domain(k||d3.extent(q.map(function(e){return e.size}).concat(m))).range(L||[16,256]);if(o.domain()[0]===o.domain()[1]||u.domain()[0]===u.domain()[1])A=!0;o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]-o.domain()[0]*.01,o.domain()[1]+o.domain()[1]*.01]):o.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]+u.domain()[0]*.01,u.domain()[1]-u.domain()[1]*.01]):u.domain([-1,1])),isNaN(o.domain()[0])&&o.domain([-1,1]),isNaN(u.domain()[0])&&u.domain([-1,1]),_=_||o,D=D||u,P=P||a;var R=I.selectAll("g.nv-wrap.nv-scatter").data([e]),U=R.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+s+(A?" nv-single-point":"")),W=U.append("defs"),X=U.append("g"),V=R.select("g");X.append("g").attr("class","nv-groups"),X.append("g").attr("class","nv-point-paths"),R.attr("transform","translate("+t.left+","+t.top+")"),W.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),R.select("#nv-edge-clip-"+s+" rect").attr("width",j).attr("height",F),V.attr("clip-path",S?"url(#nv-edge-clip-"+s+")":""),B=!0;var J=R.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});J.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(J.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),J.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),d3.transition(J).style("fill",function(e,t){return i(e,t)}).style("stroke",function(e,t){return i(e,t)}).style("stroke-opacity",1).style("fill-opacity",.5);if(p){var K=J.selectAll("circle.nv-point").data(function(e){return e.values},y);K.enter().append("circle").attr("cx",function(e,t){return _(f(e,t))}).attr("cy",function(e,t){return D(l(e,t))}).attr("r",function(e,t){return Math.sqrt(a(c(e,t))/Math.PI)}),K.exit().remove(),J.exit().selectAll("path.nv-point").transition().attr("cx",function(e,t){return o(f(e,t))}).attr("cy",function(e,t){return u(l(e,t))}).remove(),K.each(function(e,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0)}),K.transition().attr("cx",function(e,t){return o(f(e,t))}).attr("cy",function(e,t){return u(l(e,t))}).attr("r",function(e,t){return Math.sqrt(a(c(e,t))/Math.PI)})}else{var K=J.selectAll("path.nv-point").data(function(e){return e.values});K.enter().append("path").attr("transform",function(e,t){return"translate("+_(f(e,t))+","+D(l(e,t))+")"}).attr("d",d3.svg.symbol().type(h).size(function(e,t){return a(c(e,t))})),K.exit().remove(),d3.transition(J.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).remove(),K.each(function(e,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0)}),K.transition().attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).attr("d",d3.svg.symbol().type(h).size(function(e,t){return a(c(e,t))}))}clearTimeout(H),H=setTimeout($,300),_=o.copy(),D=u.copy(),P=a.copy()}),j}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e5),o=d3.scale.linear(),u=d3.scale.linear(),a=d3.scale.linear(),f=function(e){return e.x},l=function(e){return e.y},c=function(e){return e.size||1},h=function(e){return e.shape||"circle"},p=!0,d=[],v=[],m=[],g=!0,y=null,b=function(e){return!e.notActive},w=!1,E=.1,S=!1,x=!0,T=function(){return 25},N=null,C=null,k=null,L=null,A=!1,O=d3.dispatch("elementClick","elementMouseover","elementMouseout"),M=!0,_,D,P,H,B=!1;return O.on("elementMouseover.point",function(e){g&&d3.select(".nv-chart-"+s+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),O.on("elementMouseout.point",function(e){g&&d3.select(".nv-chart-"+s+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),j.dispatch=O,j.x=function(e){return arguments.length?(f=d3.functor(e),j):f},j.y=function(e){return arguments.length?(l=d3.functor(e),j):l},j.size=function(e){return arguments.length?(c=d3.functor(e),j):c},j.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,j):t},j.width=function(e){return arguments.length?(n=e,j):n},j.height=function(e){return arguments.length?(r=e,j):r},j.xScale=function(e){return arguments.length?(o=e,j):o},j.yScale=function(e){return arguments.length?(u=e,j):u},j.zScale=function(e){return arguments.length?(a=e,j):a},j.xDomain=function(e){return arguments.length?(N=e,j):N},j.yDomain=function(e){return arguments.length?(C=e,j):C},j.sizeDomain=function(e){return arguments.length?(k=e,j):k},j.sizeRange=function(e){return arguments.length?(L=e,j):L},j.forceX=function(e){return arguments.length?(d=e,j):d},j.forceY=function(e){return arguments.length?(v=e,j):v},j.forceSize=function(e){return arguments.length?(m=e,j):m},j.interactive=function(e){return arguments.length?(g=e,j):g},j.pointKey=function(e){return arguments.length?(y=e,j):y},j.pointActive=function(e){return arguments.length?(b=e,j):b},j.padData=function(e){return arguments.length?(w=e,j):w},j.padDataOuter=function(e){return arguments.length?(E=e,j):E},j.clipEdge=function(e){return arguments.length?(S=e,j):S},j.clipVoronoi=function(e){return arguments.length?(x=e,j):x},j.useVoronoi=function(e){return arguments.length?(M=e,M===!1&&(x=!1),j):M},j.clipRadius=function(e){return arguments.length?(T=e,j):T},j.color=function(t){return arguments.length?(i=e.utils.getColor(t),j):i},j.shape=function(e){return arguments.length?(h=e,j):h},j.onlyCircles=function(e){return arguments.length?(p=e,j):p},j.id=function(e){return arguments.length?(s=e,j):s},j.singlePoint=function(e){return arguments.length?(A=e,j):A},j},e.models.scatterChart=function(){function P(e){return e.each(function(e){function W(){if(E)return R.select(".nv-point-paths").style("pointer-events","all"),!1;R.select(".nv-point-paths").style("pointer-events","none");var i=d3.mouse(this);h.distortion(w).focus(i[0]),p.distortion(w).focus(i[1]),R.select(".nv-scatterWrap").call(t),R.select(".nv-x.nv-axis").call(n),R.select(".nv-y.nv-axis").call(r),R.select(".nv-distributionX").datum(e.filter(function(e){return!e.disabled})).call(o),R.select(".nv-distributionY").datum(e.filter(function(e){return!e.disabled})).call(u)}var x=d3.select(this),T=this,N=(f||parseInt(x.style("width"))||960)-a.left-a.right,H=(l||parseInt(x.style("height"))||400)-a.top-a.bottom;P.update=function(){x.transition().call(P)},C.disabled=e.map(function(e){return!!e.disabled});if(!k){var B;k={};for(B in C)C[B]instanceof Array?k[B]=C[B].slice(0):k[B]=C[B]}if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var j=x.selectAll(".nv-noData").data([A]);return j.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),j.attr("x",a.left+N/2).attr("y",a.top+H/2).text(function(e){return e}),P}x.selectAll(".nv-noData").remove(),O=O||h,M=M||p;var F=x.selectAll("g.nv-wrap.nv-scatterChart").data([e]),I=F.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()),q=I.append("g"),R=F.select("g");q.append("rect").attr("class","nvd3 nv-background"),q.append("g").attr("class","nv-x nv-axis"),q.append("g").attr("class","nv-y nv-axis"),q.append("g").attr("class","nv-scatterWrap"),q.append("g").attr("class","nv-distWrap"),q.append("g").attr("class","nv-legendWrap"),q.append("g").attr("class","nv-controlsWrap"),y&&(i.width(N/2),F.select(".nv-legendWrap").datum(e).call(i),a.top!=i.height()&&(a.top=i.height(),H=(l||parseInt(x.style("height"))||400)-a.top-a.bottom),F.select(".nv-legendWrap").attr("transform","translate("+N/2+","+ -a.top+")")),b&&(s.width(180).color(["#444"]),R.select(".nv-controlsWrap").datum(D).attr("transform","translate(0,"+ -a.top+")").call(s)),F.attr("transform","translate("+a.left+","+a.top+")"),t.width(N).height(H).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})).xDomain(null).yDomain(null),F.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled})).call(t);if(d){var U=h.domain()[1]-h.domain()[0];t.xDomain([h.domain()[0]-d*U,h.domain()[1]+d*U])}if(v){var z=p.domain()[1]-p.domain()[0];t.yDomain([p.domain()[0]-v*z,p.domain()[1]+v*z])}F.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled})).call(t),n.scale(h).ticks(n.ticks()&&n.ticks().length?n.ticks():N/100).tickSize(-H,0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(n),r.scale(p).ticks(r.ticks()&&r.ticks().length?r.ticks():H/36).tickSize(-N,0),R.select(".nv-y.nv-axis").call(r),m&&(o.getData(t.x()).scale(h).width(N).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),q.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),R.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(e.filter(function(e){return!e.disabled})).call(o)),g&&(u.getData(t.y()).scale(p).width(H).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),q.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),R.select(".nv-distributionY").attr("transform","translate(-"+u.size()+",0)").datum(e.filter(function(e){return!e.disabled})).call(u)),d3.fisheye&&(R.select(".nv-background").attr("width",N).attr("height",H),R.select(".nv-background").on("mousemove",W),R.select(".nv-background").on("click",function(){E=!E}),t.dispatch.on("elementClick.freezeFisheye",function(){E=!E})),s.dispatch.on("legendClick",function(e,i){e.disabled=!e.disabled,w=e.disabled?0:2.5,R.select(".nv-background").style("pointer-events",e.disabled?"none":"all"),R.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none"),e.disabled?(h.distortion(w).focus(0),p.distortion(w).focus(0),R.select(".nv-scatterWrap").call(t),R.select(".nv-x.nv-axis").call(n),R.select(".nv-y.nv-axis").call(r)):E=!1,P.update()}),i.dispatch.on("legendClick",function(t,n,r){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,F.selectAll(".nv-series").classed("disabled",!1),e}),C.disabled=e.map(function(e){return!!e.disabled}),L.stateChange(C),P.update()}),i.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,C.disabled=e.map(function(e){return!!e.disabled}),L.stateChange(C),P.update()}),t.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",function(t,n){return e.pos[1]-H}),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+o.size()),e.pos=[e.pos[0]+a.left,e.pos[1]+a.top],L.tooltipShow(e)}),L.on("tooltipShow",function(e){S&&_(e,T.parentNode)}),L.on("changeState",function(t){typeof t.disabled!="undefined"&&(e.forEach(function(e,n){e.disabled=t.disabled[n]}),C.disabled=t.disabled),P.update()}),O=h.copy(),M=p.copy()}),P}var t=e.models.scatter(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o=e.models.distribution(),u=e.models.distribution(),a={top:30,right:20,bottom:50,left:75},f=null,l=null,c=e.utils.defaultColor(),h=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.yScale(),d=0,v=0,m=!1,g=!1,y=!0,b=!!d3.fisheye,w=0,E=!1,S=!0,x=function(e,t,n){return"<strong>"+t+"</strong>"},T=function(e,t,n){return"<strong>"+n+"</strong>"},N=null,C={},k=null,L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),A="No Data Available.";t.xScale(h).yScale(p),n.orient("bottom").tickPadding(10),r.orient("left").tickPadding(10),o.axis("x"),u.axis("y");var O,M,_=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),f=i.pos[0]+(s.offsetLeft||0),l=p.range()[0]+a.top+(s.offsetTop||0),c=h.range()[0]+a.left+(s.offsetLeft||0),d=i.pos[1]+(s.offsetTop||0),v=n.tickFormat()(t.x()(i.point,i.pointIndex)),m=r.tickFormat()(t.y()(i.point,i.pointIndex));x!=null&&e.tooltip.show([f,l],x(i.series.key,v,m,i,P),"n",1,s,"x-nvtooltip"),T!=null&&e.tooltip.show([c,d],T(i.series.key,v,m,i,P),"e",1,s,"y-nvtooltip"),N!=null&&e.tooltip.show([o,u],N(i.series.key,v,m,i,P),i.value<0?"n":"s",null,s)},D=[{key:"Magnify",disabled:!0}];return t.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",u.size())}),L.on("tooltipHide",function(){S&&e.tooltip.cleanup()}),P.dispatch=L,P.scatter=t,P.legend=i,P.controls=s,P.xAxis=n,P.yAxis=r,P.distX=o,P.distY=u,d3.rebind(P,t,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),P.margin=function(e){return arguments.length?(a.top=typeof e.top!="undefined"?e.top:a.top,a.right=typeof e.right!="undefined"?e.right:a.right,a.bottom=typeof e.bottom!="undefined"?e.bottom:a.bottom,a.left=typeof e.left!="undefined"?e.left:a.left,P):a},P.width=function(e){return arguments.length?(f=e,P):f},P.height=function(e){return arguments.length?(l=e,P):l},P.color=function(t){return arguments.length?(c=e.utils.getColor(t),i.color(c),o.color(c),u.color(c),P):c},P.showDistX=function(e){return arguments.length?(m=e,P):m},P.showDistY=function(e){return arguments.length?(g=e,P):g},P.showControls=function(e){return arguments.length?(b=e,P):b},P.showLegend=function(e){return arguments.length?(y=e,P):y},P.fisheye=function(e){return arguments.length?(w=e,P):w},P.xPadding=function(e){return arguments.length?(d=e,P):d},P.yPadding=function(e){return arguments.length?(v=e,P):v},P.tooltips=function(e){return arguments.length?(S=e,P):S},P.tooltipContent=function(e){return arguments.length?(N=e,P):N},P.tooltipXContent=function(e){return arguments.length?(x=e,P):x},P.tooltipYContent=function(e){return arguments.length?(T=e,P):T},P.state=function(e){return arguments.length?(C=e,P):C},P.defaultState=function(e){return arguments.length?(k=e,P):k},P.noData=function(e){return arguments.length?(A=e,P):A},P},e.models.scatterPlusLineChart=function(){function _(e){return e.each(function(e){function U(){if(b)return I.select(".nv-point-paths").style("pointer-events","all"),!1;I.select(".nv-point-paths").style("pointer-events","none");var i=d3.mouse(this);h.distortion(y).focus(i[0]),p.distortion(y).focus(i[1]),I.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled})).call(t),I.select(".nv-x.nv-axis").call(n),I.select(".nv-y.nv-axis").call(r),I.select(".nv-distributionX").datum(e.filter(function(e){return!e.disabled})).call(o),I.select(".nv-distributionY").datum(e.filter(function(e){return!e.disabled})).call(u)}var E=d3.select(this),S=this,x=(f||parseInt(E.style("width"))||960)-a.left-a.right,D=(l||parseInt(E.style("height"))||400)-a.top-a.bottom;_.update=function(){E.transition().call(_)},_.container=this,T.disabled=e.map(function(e){return!!e.disabled});if(!N){var P;N={};for(P in T)T[P]instanceof Array?N[P]=T[P].slice(0):N[P]=T[P]}if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var H=E.selectAll(".nv-noData").data([k]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",a.left+x/2).attr("y",a.top+D/2).text(function(e){return e}),_}E.selectAll(".nv-noData").remove(),h=t.xScale(),p=t.yScale(),L=L||h,A=A||p;var B=E.selectAll("g.nv-wrap.nv-scatterChart").data([e]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()),F=j.append("g"),I=B.select("g");F.append("rect").attr("class","nvd3 nv-background"),F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-scatterWrap"),F.append("g").attr("class","nv-regressionLinesWrap"),F.append("g").attr("class","nv-distWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),B.attr("transform","translate("+a.left+","+a.top+")"),m&&(i.width(x/2),B.select(".nv-legendWrap").datum(e).call(i),a.top!=i.height()&&(a.top=i.height(),D=(l||parseInt(E.style("height"))||400)-a.top-a.bottom),B.select(".nv-legendWrap").attr("transform","translate("+x/2+","+ -a.top+")")),g&&(s.width(180).color(["#444"]),I.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+ -a.top+")").call(s)),t.width(x).height(D).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),B.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled})).call(t),B.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+t.id()+")");var q=B.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(e){return e}),R=q.enter().append("g").attr("class","nv-regLines").append("line").attr("class","nv-regLine").style("stroke-opacity",0);q.selectAll(".nv-regLines line").attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",function(e,t){return p(h.domain()[0]*e.slope+e.intercept)}).attr("y2",function(e,t){return p(h.domain()[1]*e.slope+e.intercept)}).style("stroke",function(e,t,n){return c(e,n)}).style("stroke-opacity",function(e,t){return e.disabled||typeof e.slope=="undefined"||typeof e.intercept=="undefined"?0:1}),n.scale(h).ticks(n.ticks()?n.ticks():x/100).tickSize(-D,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(n),r.scale(p).ticks(r.ticks()?r.ticks():D/36).tickSize(-x,0),I.select(".nv-y.nv-axis").call(r),d&&(o.getData(t.x()).scale(h).width(x).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),F.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),I.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(e.filter(function(e){return!e.disabled})).call(o)),v&&(u.getData(t.y()).scale(p).width(D).color(e.map(function(e,t){return e.color||c(e,t)}).filter(function(t,n){return!e[n].disabled})),F.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),I.select(".nv-distributionY").attr("transform","translate(-"+u.size()+",0)").datum(e.filter(function(e){return!e.disabled})).call(u)),d3.fisheye&&(I.select(".nv-background").attr("width",x).attr("height",D),I.select(".nv-background").on("mousemove",U),I.select(".nv-background").on("click",function(){b=!b}),t.dispatch.on("elementClick.freezeFisheye",function(){b=!b})),s.dispatch.on("legendClick",function(e,i){e.disabled=!e.disabled,y=e.disabled?0:2.5,I.select(".nv-background").style("pointer-events",e.disabled?"none":"all"),I.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none"),e.disabled?(h.distortion(y).focus(0),p.distortion(y).focus(0),I.select(".nv-scatterWrap").call(t),I.select(".nv-x.nv-axis").call(n),I.select(".nv-y.nv-axis").call(r)):b=!1,_.update()}),i.dispatch.on("legendClick",function(t,n,r){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,B.selectAll(".nv-series").classed("disabled",!1),e}),T.disabled=e.map(function(e){return!!e.disabled}),C.stateChange(T),_.update()}),i.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,T.disabled=e.map(function(e){return!!e.disabled}),C.stateChange(T),_.update()}),t.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.pos[1]-D),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+o.size()),e.pos=[e.pos[0]+a.left,e.pos[1]+a.top],C.tooltipShow(e)}),C.on("tooltipShow",function(e){w&&O(e,S.parentNode)}),C.on("changeState",function(t){typeof t.disabled!="undefined"&&(e.forEach(function(e,n){e.disabled=t.disabled[n]}),T.disabled=t.disabled),_.update()}),L=h.copy(),A=p.copy()}),_}var t=e.models.scatter(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o=e.models.distribution(),u=e.models.distribution(),a={top:30,right:20,bottom:50,left:75},f=null,l=null,c=e.utils.defaultColor(),h=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.yScale(),d=!1,v=!1,m=!0,g=!!d3.fisheye,y=0,b=!1,w=!0,E=function(e,t,n){return"<strong>"+t+"</strong>"},S=function(e,t,n){return"<strong>"+n+"</strong>"},x=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+r+"</p>"},T={},N=null,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k="No Data Available.";t.xScale(h).yScale(p),n.orient("bottom").tickPadding(10),r.orient("left").tickPadding(10),o.axis("x"),u.axis("y");var L,A,O=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),f=i.pos[0]+(s.offsetLeft||0),l=p.range()[0]+a.top+(s.offsetTop||0),c=h.range()[0]+a.left+(s.offsetLeft||0),d=i.pos[1]+(s.offsetTop||0),v=n.tickFormat()(t.x()(i.point,i.pointIndex)),m=r.tickFormat()(t.y()(i.point,i.pointIndex));E!=null&&e.tooltip.show([f,l],E(i.series.key,v,m,i,_),"n",1,s,"x-nvtooltip"),S!=null&&e.tooltip.show([c,d],S(i.series.key,v,m,i,_),"e",1,s,"y-nvtooltip"),x!=null&&e.tooltip.show([o,u],x(i.series.key,v,m,i.point.tooltip,i,_),i.value<0?"n":"s",null,s)},M=[{key:"Magnify",disabled:!0}];return t.dispatch.on("elementMouseout.tooltip",function(e){C.tooltipHide(e),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",u.size())}),C.on("tooltipHide",function(){w&&e.tooltip.cleanup()}),_.dispatch=C,_.scatter=t,_.legend=i,_.controls=s,_.xAxis=n,_.yAxis=r,_.distX=o,_.distY=u,d3.rebind(_,t,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),_.margin=function(e){return arguments.length?(a.top=typeof e.top!="undefined"?e.top:a.top,a.right=typeof e.right!="undefined"?e.right:a.right,a.bottom=typeof e.bottom!="undefined"?e.bottom:a.bottom,a.left=typeof e.left!="undefined"?e.left:a.left,_):a},_.width=function(e){return arguments.length?(f=e,_):f},_.height=function(e){return arguments.length?(l=e,_):l},_.color=function(t){return arguments.length?(c=e.utils.getColor(t),i.color(c),o.color(c),u.color(c),_):c},_.showDistX=function(e){return arguments.length?(d=e,_):d},_.showDistY=function(e){return arguments.length?(v=e,_):v},_.showControls=function(e){return arguments.length?(g=e,_):g},_.showLegend=function(e){return arguments.length?(m=e,_):m},_.fisheye=function(e){return arguments.length?(y=e,_):y},_.tooltips=function(e){return arguments.length?(w=e,_):w},_.tooltipContent=function(e){return arguments.length?(x=e,_):x},_.tooltipXContent=function(e){return arguments.length?(E=e,_):E},_.tooltipYContent=function(e){return arguments.length?(S=e,_):S},_.state=function(e){return arguments.length?(T=e,_):T},_.defaultState=function(e){return arguments.length?(N=e,_):N},_.noData=function(e){return arguments.length?(k=e,_):k},_},e.models.sparkline=function(){function h(e){return e.each(function(e){var i=n-t.left-t.right,h=r-t.top-t.bottom,p=d3.select(this);s.domain(l||d3.extent(e,u)).range([0,i]),o.domain(c||d3.extent(e,a)).range([h,0]);var d=p.selectAll("g.nv-wrap.nv-sparkline").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var b=d.selectAll("path").data(function(e){return[e]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var w=d.selectAll("circle.nv-point").data(function(e){function n(t){if(t!=-1){var n=e[t];return n.pointIndex=t,n}return null}var t=e.map(function(e,t){return a(e,t)}),r=n(t.lastIndexOf(o.domain()[1])),i=n(t.indexOf(o.domain()[0])),s=n(t.length-1);return[i,r,s].filter(function(e){return e!=null})});w.enter().append("circle"),w.exit().remove(),w.attr("cx",function(e,t){return s(u(e,e.pointIndex))}).attr("cy",function(e,t){return o(a(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return u(e,e.pointIndex)==s.domain()[1]?"nv-point nv-currentValue":a(e,e.pointIndex)==o.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),h}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c;return h.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,h):t},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.x=function(e){return arguments.length?(u=d3.functor(e),h):u},h.y=function(e){return arguments.length?(a=d3.functor(e),h):a},h.xScale=function(e){return arguments.length?(s=e,h):s},h.yScale=function(e){return arguments.length?(o=e,h):o},h.xDomain=function(e){return arguments.length?(l=e,h):l},h.yDomain=function(e){return arguments.length?(c=e,h):c},h.animate=function(e){return arguments.length?(i=e,h):i},h.color=function(t){return arguments.length?(f=e.utils.getColor(t),h):f},h},e.models.sparklinePlus=function(){function v(e){return e.each(function(c){function O(){if(a)return;var e=C.selectAll(".nv-hoverValue").data(u),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+s(t.x()(c[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!u.length)return;r.append("line").attr("x1",0).attr("y1",-n.top).attr("x2",0).attr("y2",b),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-n.top).attr("text-anchor","end").attr("dy",".9em"),C.select(".nv-hoverValue .nv-xValue").text(f(t.x()(c[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-n.top).attr("text-anchor","start").attr("dy",".9em"),C.select(".nv-hoverValue .nv-yValue").text(l(t.y()(c[u[0]],u[0])))}function M(){function r(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(a)return;var e=d3.mouse(this)[0]-n.left;u=[r(c,Math.round(s.invert(e)))],O()}var m=d3.select(this),g=(r||parseInt(m.style("width"))||960)-n.left-n.right,b=(i||parseInt(m.style("height"))||400)-n.top-n.bottom;v.update=function(){v(e)},v.container=this;if(!c||!c.length){var w=m.selectAll(".nv-noData").data([d]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",n.left+g/2).attr("y",n.top+b/2).text(function(e){return e}),v}m.selectAll(".nv-noData").remove();var E=t.y()(c[c.length-1],c.length-1);s=t.xScale(),o=t.yScale();var S=m.selectAll("g.nv-wrap.nv-sparklineplus").data([c]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),N=T.append("g"),C=S.select("g");N.append("g").attr("class","nv-sparklineWrap"),N.append("g").attr("class","nv-valueWrap"),N.append("g").attr("class","nv-hoverArea"),S.attr("transform","translate("+n.left+","+n.top+")");var k=C.select(".nv-sparklineWrap");t.width(g).height(b),k.call(t);var L=C.select(".nv-valueWrap"),A=L.selectAll(".nv-currentValue").data([E]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),A.attr("x",g+(p?n.right:0)).attr("y",h?function(e){return o(e)}:0).style("fill",t.color()(c[c.length-1],c.length-1)).text(l(E)),N.select(".nv-hoverArea").append("rect").on("mousemove",M).on("click",function(){a=!a}).on("mouseout",function(){u=[],O()}),C.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -n.left+","+ -n.top+")"}).attr("width",g+n.left+n.right).attr("height",b+n.top)}),v}var t=e.models.sparkline(),n={top:15,right:100,bottom:10,left:50},r=null,i=null,s,o,u=[],a=!1,f=d3.format(",r"),l=d3.format(",.2f"),c=!0,h=!0,p=!1,d="No Data Available.";return v.sparkline=t,d3.rebind(v,t,"x","y","xScale","yScale","color"),v.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,v):n},v.width=function(e){return arguments.length?(r=e,v):r},v.height=function(e){return arguments.length?(i=e,v):i},v.xTickFormat=function(e){return arguments.length?(f=e,v):f},v.yTickFormat=function(e){return arguments.length?(l=e,v):l},v.showValue=function(e){return arguments.length?(c=e,v):c},v.alignValue=function(e){return arguments.length?(h=e,v):h},v.rightAlignValue=function(e){return arguments.length?(p=e,v):p},v.noData=function(e){return arguments.length?(d=e,v):d},v},e.models.stackedArea=function(){function g(e){return e.each(function(e){var a=n-t.left-t.right,g=r-t.top-t.bottom,b=d3.select(this);p=v.xScale(),d=v.yScale(),e=e.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:u(t,n),t}),e}),e=d3.layout.stack().order(l).offset(f).values(function(e){return e.values}).x(o).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(e);var w=b.selectAll("g.nv-wrap.nv-stackedarea").data([e]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),S=E.append("defs"),T=E.append("g"),N=w.select("g");T.append("g").attr("class","nv-areaWrap"),T.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+t.left+","+t.top+")"),v.width(a).height(g).x(o).y(function(e){return e.display.y+e.display.y0}).forceY([0]).color(e.map(function(e,t){return e.color||i(e,t)}).filter(function(t,n){return!e[n].disabled}));var C=N.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled}));C.call(v),S.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),w.select("#nv-edge-clip-"+s+" rect").attr("width",a).attr("height",g),N.attr("clip-path",h?"url(#nv-edge-clip-"+s+")":"");var k=d3.svg.area().x(function(e,t){return p(o(e,t))}).y0(function(e){return d(e.display.y0)}).y1(function(e){return d(e.display.y+e.display.y0)}).interpolate(c),L=d3.svg.area().x(function(e,t){return p(o(e,t))}).y0(function(e){return d(e.display.y0)}).y1(function(e){return d(e.display.y0)}),A=N.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});A.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),m.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),A.exit().attr("d",function(e,t){return L(e.values,t)}).remove(),A.style("fill",function(e,t){return e.color||i(e,t)}).style("stroke",function(e,t){return e.color||i(e,t)}),A.attr("d",function(e,t){return k(e.values,t)}),v.dispatch.on("elementMouseover.area",function(e){N.select(".nv-chart-"+s+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(e){N.select(".nv-chart-"+s+" .nv-area-"+e.seriesIndex).classed("hover",!1)})}),g}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e5),o=function(e){return e.x},u=function(e){return e.y},a="stack",f="zero",l="default",c="linear",h=!1,p,d,v=e.models.scatter(),m=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return v.size(2.2).sizeDomain([2.2,2.2]),v.dispatch.on("elementClick.area",function(e){m.areaClick(e)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],m.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){m.tooltipHide(e)}),g.dispatch=m,g.scatter=v,d3.rebind(g,v,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),g.x=function(e){return arguments.length?(o=d3.functor(e),g):o},g.y=function(e){return arguments.length?(u=d3.functor(e),g):u},g.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,g):t},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.clipEdge=function(e){return arguments.length?(h=e,g):h},g.color=function(t){return arguments.length?(i=e.utils.getColor(t),g):i},g.offset=function(e){return arguments.length?(f=e,g):f},g.order=function(e){return arguments.length?(l=e,g):l},g.style=function(e){if(!arguments.length)return a;a=e;switch(a){case"stack":g.offset("zero"),g.order("default");break;case"stream":g.offset("wiggle"),g.order("inside-out");break;case"stream-center":g.offset("silhouette"),g.order("inside-out");break;case"expand":g.offset("expand"),g.order("default")}return g},g.interpolate=function(e){return arguments.length?(c=e,c):c},g},e.models.stackedAreaChart=function(){function x(e){return e.each(function(e){var f=d3.select(this),p=this,T=(u||parseInt(f.style("width"))||960)-o.left-o.right,N=(a||parseInt(f.style("height"))||400)-o.top-o.bottom;x.update=function(){f.transition().call(x)},x.container=this,g.disabled=e.map(function(e){return!!e.disabled});if(!y){var C;y={};for(C in g)g[C]instanceof Array?y[C]=g[C].slice(0):y[C]=g[C]}if(!e||!e.length||!e.filter(function(e){return e.values.length}).length){var k=f.selectAll(".nv-noData").data([b]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",o.left+T/2).attr("y",o.top+N/2).text(function(e){return e}),x}f.selectAll(".nv-noData").remove(),d=t.xScale(),v=t.yScale();var L=f.selectAll("g.nv-wrap.nv-stackedAreaChart").data([e]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),O=L.select("g");A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis"),A.append("g").attr("class","nv-stackedWrap"),A.append("g").attr("class","nv-legendWrap"),A.append("g").attr("class","nv-controlsWrap"),c&&(i.width(T-E),O.select(".nv-legendWrap").datum(e).call(i),o.top!=i.height()&&(o.top=i.height(),N=(a||parseInt(f.style("height"))||400)-o.top-o.bottom),O.select(".nv-legendWrap").attr("transform","translate("+E+","+ -o.top+")"));if(l){var M=[{key:"Stacked",disabled:t.offset()!="zero"},{key:"Stream",disabled:t.offset()!="wiggle"},{key:"Expanded",disabled:t.offset()!="expand"}];s.width(E).color(["#444","#444","#444"]),O.select(".nv-controlsWrap").datum(M).call(s),o.top!=Math.max(s.height(),i.height())&&(o.top=Math.max(s.height(),i.height()),N=(a||parseInt(f.style("height"))||400)-o.top-o.bottom),O.select(".nv-controlsWrap").attr("transform","translate(0,"+ -o.top+")")}L.attr("transform","translate("+o.left+","+o.top+")"),t.width(T).height(N);var _=O.select(".nv-stackedWrap").datum(e);_.call(t),n.scale(d).ticks(T/100).tickSize(-N,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+N+")"),O.select(".nv-x.nv-axis").transition().duration(0).call(n),r.scale(v).ticks(t.offset()=="wiggle"?0:N/36).tickSize(-T,0).setTickFormat(t.offset()=="expand"?d3.format("%"):m),O.select(".nv-y.nv-axis").transition().duration(0).call(r),t.dispatch.on("areaClick.toggle",function(t){e.filter(function(e){return!e.disabled}).length===1?e=e.map(function(e){return e.disabled=!1,e}):e=e.map(function(e,n){return e.disabled=n!=t.seriesIndex,e}),g.disabled=e.map(function(e){return!!e.disabled}),w.stateChange(g),x.update()}),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,e.filter(function(e){return!e.disabled}).length||e.map(function(e){return e.disabled=!1,e}),g.disabled=e.map(function(e){return!!e.disabled}),w.stateChange(g),x.update()}),i.dispatch.on("legendDblclick",function(t){e.forEach(function(e){e.disabled=!0}),t.disabled=!1,g.disabled=e.map(function(e){return!!e.disabled}),w.stateChange(g),x.update()}),s.dispatch.on("legendClick",function(e,n){if(!e.disabled)return;M=M.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Stacked":t.style("stack");break;case"Stream":t.style("stream");break;case"Expanded":t.style("expand")}g.style=t.style(),w.stateChange(g),x.update()}),w.on("tooltipShow",function(e){h&&S(e,p.parentNode)}),w.on("changeState",function(n){typeof n.disabled!="undefined"&&(e.forEach(function(e,t){e.disabled=n.disabled[t]}),g.disabled=n.disabled),typeof n.style!="undefined"&&t.style(n.style),x.update()})}),x}var t=e.models.stackedArea(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:25,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c=!0,h=!0,p=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},d,v,m=d3.format(",.2f"),g={style:t.style()},y=null,b="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=250;n.orient("bottom").tickPadding(7),r.orient("left"),t.scatter.pointActive(function(e){return!!Math.round(t.y()(e)*100)});var S=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=p(i.series.key,a,f,i,x);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)};return t.dispatch.on("tooltipShow",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],w.tooltipShow(e)}),t.dispatch.on("tooltipHide",function(e){w.tooltipHide(e)}),w.on("tooltipHide",function(){h&&e.tooltip.cleanup()}),x.dispatch=w,x.stacked=t,x.legend=i,x.controls=s,x.xAxis=n,x.yAxis=r,d3.rebind(x,t,"x","y","size","xScale","yScale","xDomain","yDomain","sizeDomain","interactive","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),x.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,x):o},x.width=function(e){return arguments.length?(u=e,x):getWidth},x.height=function(e){return arguments.length?(a=e,x):getHeight},x.color=function(n){return arguments.length?(f=e.utils.getColor(n),i.color(f),t.color(f),x):f},x.showControls=function(e){return arguments.length?(l=e,x):l},x.showLegend=function(e){return arguments.length?(c=e,x):c},x.tooltip=function(e){return arguments.length?(p=e,x):p},x.tooltips=function(e){return arguments.length?(h=e,x):h},x.tooltipContent=function(e){return arguments.length?(p=e,x):p},x.state=function(e){return arguments.length?(g=e,x):g},x.defaultState=function(e){return arguments.length?(y=e,x):y},x.noData=function(e){return arguments.length?(b=e,x):b},r.setTickFormat=r.tickFormat,r.tickFormat=function(e){return arguments.length?(m=e,r):m},x}}(),define("nvd3",["d3"],function(e){return function(){var t,n;return t||e.nv}}(this)),eval("define('Views/Palette.Rainbow',['require','underscore'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n\n	var colors = {\n		'turquoise': '#1abc9c',\n		'green-sea': '#16a085',\n		'emerald': '#2ecc71',\n		'nephritis': '#27ae60',\n		'peter-river': '#3498db',\n		'belize-hole': '#2980b9',\n		'amethyst': '#9b59b6',\n		'wisteria': '#8e44ad',\n		'wet-asphalt': '#34495e',\n		'midnight-blue': '#2c3e50',\n		'sun-flower': '#f1c40f',\n		'orange': '#f39c12',\n		'carrot': '#e67e22',\n		'pumpkin': '#d35400',\n		'alizarin': '#e74c3c',\n		'pomegranate': '#c0392b',\n		'clouds': '#ecf0f1',\n		'silver': '#bdc3c7',\n		'concrete': '#95a5a6',\n		'asbestos': '#7f8c8d'\n	};\n	var colorValues = _.values(colors);\n\n	var Rainbow = function () {\n		this.index = 0;\n		this.colors = _.clone(colorValues);\n	};\n	Rainbow.prototype = {\n		get: function () {\n			return this.colors[this.index++];\n		},\n		shuffle: function () {\n			this.colors = _.shuffle(this.colors);\n		},\n		reset: function () {\n			this.index = 0;\n		}\n	};\n	return Rainbow;\n});\n//# sourceURL=/Views/Palette.Rainbow.js"),eval("define('Views/Charts/ItemView.LoanCalculator',['require','jquery','underscore','backbone','marionette','templates','d3','nvd3','Views/Palette.Rainbow'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n	var d3ignore = require('d3');\n	var nvd3 = require('nvd3');\n\n	var Rainbow = require('Views/Palette.Rainbow');\n\n	var LoanCalculator = Backbone.Marionette.ItemView.extend({\n		template: Template.LoanCalculator,\n		events: {\n			// controls\n			'click .update': 'updateController'\n		},\n		initialize: function (options) {\n			this.palette = new Rainbow();\n			this.accounts = this.cache.get('accounts');\n		},\n		updateController: function (event) {\n			var until = null;\n			// until = Math.random(0, 200);\n\n			var data = this.accounts.projectAggregate(until);\n			this.update(data);\n		},\n		update: function (data) {\n			this.palette.reset();\n\n			_.each(data, function (row) {\n				row.color = this.palette.get();\n			}, this);\n\n			this.$chart\n				.datum(data)\n				.transition().duration(500).call(this.chart);\n		},\n		draw: function () {\n			var self = this;\n			var data = this.accounts.projection();\n\n			this.$chart = d3.select('#chart svg');\n\n			var chart = this.chart = nv.models.stackedAreaChart()\n				.x(function (d) {\n					return d[0];\n				})\n				.y(function (d) {\n					return d[1];\n				})\n				.clipEdge(true);\n\n			// this.chart.showLegend(false);\n			// this.chart.showControls(false);\n\n			chart.xAxis.tickFormat(function (d) {\n				return d3.time.format('%x')(new Date(d));\n			});\n\n			chart.yAxis.tickFormat(d3.format(',.2f'));\n\n			self.update(data);\n\n			nv.utils.windowResize(self.chart.update);\n\n			nv.addGraph(self.chart);\n		},\n		onShow: function () {\n			this.draw();\n		}\n	});\n	return LoanCalculator;\n});\n//# sourceURL=/Views/Charts/ItemView.LoanCalculator.js"),eval("define('Views/Section.Dashboard/ItemView.DashboardSidenav',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Sidenav = Backbone.Marionette.ItemView.extend({\n		template: Template.DashboardSidenav,\n		templateHelpers: function () {\n			return {\n				loans: this.accounts.getAllLoans()\n			};\n		},\n		initialize: function () {\n			this.accounts = this.cache.get('accounts');\n		}\n	});\n	return Sidenav;\n});\n//# sourceURL=/Views/Section.Dashboard/ItemView.DashboardSidenav.js"),eval("define('Views/Section.Dashboard/DashboardLoading/ItemView.DashboardLoading',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var DashboardLoading = Backbone.Marionette.ItemView.extend({\n		tagName: 'div',\n		className: 'tasks-loading',\n		template: Template.DashboardLoading\n	});\n	return DashboardLoading;\n});\n//# sourceURL=/Views/Section.Dashboard/DashboardLoading/ItemView.DashboardLoading.js"),eval("define('Views/Section.Dashboard/Layout.Dashboard',['require','jquery','underscore','backbone','marionette','templates','./ItemView.LoanSummary','../Charts/ItemView.LoanCalculator','./ItemView.DashboardSidenav','./DashboardLoading/ItemView.DashboardLoading'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var LoanSummary = require('./ItemView.LoanSummary');\n	var LoanCalculator = require('../Charts/ItemView.LoanCalculator');\n	var DashboardSidenav = require('./ItemView.DashboardSidenav');\n	var DashboardLoading = require('./DashboardLoading/ItemView.DashboardLoading');\n\n	var DashboardLayout = Backbone.Marionette.Layout.extend({\n		template: Template.Dashboard,\n		tagName: 'div',\n		className: 'dashboard',\n		regions: {\n			left: '#dash-left',\n			middle: '#dash-middle',\n			// right: '#dash-right'\n			info: '#info'\n		},\n		initialize: function (options) {\n			this.accounts = this.cache.get('accounts');\n		},\n		onShow: function () {\n			var self = this;\n			var accounts = this.accounts.deferred;\n\n			if (accounts.state() === 'pending') {\n				this.middle.show(new DashboardLoading());\n			}\n			$.when(accounts).then(function () {\n				self.left.show(new DashboardSidenav());\n				self.middle.show(new LoanCalculator());\n				self.info.show(new LoanSummary());\n			});\n		}\n	});\n	return DashboardLayout;\n});\n//# sourceURL=/Views/Section.Dashboard/Layout.Dashboard.js"),eval("define('Routes/Route.Dashboard',['require','Views/Section.Dashboard/Layout.Dashboard'],function (require) {\n	'use strict';\n\n	var Dashboard = require('Views/Section.Dashboard/Layout.Dashboard');\n\n	return {\n		resources: {\n			dashboard: {\n				constructor: Dashboard,\n				trigger: 'dashboard',\n				button: '#dashboard'\n			}\n		},\n		routes: {\n			'Dashboard': 'dashboard',\n			'Dashboard/:section': 'dashboardBySection'\n		},\n		controller: {\n			dashboard: function (page) {\n				this.trackPageView('dashboard');\n				this.triggerRoute('dashboard');\n			},\n			dashboardBySection: function (section) {\n				this.trackPageView('dashboard/' + section);\n				this.triggerRoute('dashboard', {\n					section: section\n				});\n			}\n		}\n	};\n});\n//# sourceURL=/Routes/Route.Dashboard.js"),eval("define('Views/Errors/ItemView.PathNotFound',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var PathNotFound404View = Backbone.Marionette.ItemView.extend({\n		tagName: 'div',\n		className: 'invalid-path',\n		template: Template.PathNotFound\n	});\n	return PathNotFound404View;\n});\n//# sourceURL=/Views/Errors/ItemView.PathNotFound.js"),eval("define('Views/Errors/ItemView.AjaxReadError',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var AjaxReadErrorView = Backbone.Marionette.ItemView.extend({\n		tagName: 'div',\n		className: 'invalid-path',\n		template: Template.AjaxReadError,\n		templateHelpers: function(){\n			return {\n				errors: App.Erroring.log\n			};\n		},\n		initialize: function(){\n			this.listenTo(App, 'error:ajaxReadFail:render', this.render);\n		}\n	});\n	return AjaxReadErrorView;\n});\n//# sourceURL=/Views/Errors/ItemView.AjaxReadError.js"),eval("define('Routes/Route.Errors',['require','Views/Errors/ItemView.PathNotFound','Views/Errors/ItemView.AjaxReadError'],function (require) {\n	'use strict';\n\n	var PathNotFound404View = require('Views/Errors/ItemView.PathNotFound');\n	var AjaxReadErrorView = require('Views/Errors/ItemView.AjaxReadError');\n\n	return {\n		resources: {\n			pageNotFound: {\n				constructor: PathNotFound404View,\n				trigger: 'pageNotFound',\n				button: null\n			},\n			ajaxReadFail: {\n				constructor: AjaxReadErrorView,\n				trigger: 'ajaxReadFail',\n				button: null\n			}\n		},\n		routes: {\n			'Error/404': 'pageNotFound',\n			'Error/Connecting': 'ajaxReadFail',\n			'*path': 'invalidRoute'\n		},\n		controller: {\n			pageNotFound: function () {\n				this.trackPageView('pageNotFound');\n				this.triggerRoute('pageNotFound');\n			},\n			ajaxReadFail: function () {\n				if(!App.Erroring.log.length){\n					return App.Router.navigate('', {\n						trigger: true\n					});\n				}\n				this.trackPageView('ajaxReadFail');\n				this.triggerRoute('ajaxReadFail');\n			},\n			invalidRoute: function () {\n				App.Router.navigate('Error/404', {\n					trigger: true\n				});\n			}\n		}\n	};\n});\n//# sourceURL=/Routes/Route.Errors.js"),eval('// Backbone.Syphon, v0.4.1\n// Copyright (c)2012 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n// http://github.com/derickbailey/backbone.syphon\n(function (root, factory) {\n    if (typeof define === \'function\' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(\'backbone.syphon\',[\'underscore\', "jquery", "backbone"], factory);\n    }\n}(this, function (_, jQuery, Backbone) {\n  Backbone.Syphon = (function(Backbone, $, _){\n    var Syphon = {};\n  \n    // Ignore Element Types\n    // --------------------\n  \n    // Tell Syphon to ignore all elements of these types. You can\n    // push new types to ignore directly in to this array.\n    Syphon.ignoredTypes = ["button", "submit", "reset", "fieldset"];\n  \n    // Syphon\n    // ------\n  \n    // Get a JSON object that represents\n    // all of the form inputs, in this view.\n    // Alternately, pass a form element directly\n    // in place of the view.\n    Syphon.serialize = function(view, options){\n      var data = {};\n  \n      // Build the configuration\n      var config = buildConfig(options);\n  \n      // Get all of the elements to process\n      var elements = getInputElements(view, config);\n  \n      // Process all of the elements\n      _.each(elements, function(el){\n        var $el = $(el);\n        var type = getElementType($el); \n  \n        // Get the key for the input\n        var keyExtractor = config.keyExtractors.get(type);\n        var key = keyExtractor($el);\n  \n        // Get the value for the input\n        var inputReader = config.inputReaders.get(type);\n        var value = inputReader($el);\n  \n        // Get the key assignment validator and make sure\n        // it\'s valid before assigning the value to the key\n        var validKeyAssignment = config.keyAssignmentValidators.get(type);\n        if (validKeyAssignment($el, key, value)){\n          var keychain = config.keySplitter(key);\n          data = assignKeyValue(data, keychain, value);\n        }\n      });\n  \n      // Done; send back the results.\n      return data;\n    };\n    \n    // Use the given JSON object to populate\n    // all of the form inputs, in this view.\n    // Alternately, pass a form element directly\n    // in place of the view.\n    Syphon.deserialize = function(view, data, options){\n      // Build the configuration\n      var config = buildConfig(options);\n  \n      // Get all of the elements to process\n      var elements = getInputElements(view, config);\n  \n      // Flatten the data structure that we are deserializing\n      var flattenedData = flattenData(config, data);\n  \n      // Process all of the elements\n      _.each(elements, function(el){\n        var $el = $(el);\n        var type = getElementType($el); \n  \n        // Get the key for the input\n        var keyExtractor = config.keyExtractors.get(type);\n        var key = keyExtractor($el);\n  \n        // Get the input writer and the value to write\n        var inputWriter = config.inputWriters.get(type);\n        var value = flattenedData[key];\n  \n        // Write the value to the input\n        inputWriter($el, value);\n      });\n    };\n  \n    // Helpers\n    // -------\n  \n    // Retrieve all of the form inputs\n    // from the form\n    var getInputElements = function(view, config){\n      var form = getForm(view);\n      var elements = form.elements;\n  \n      elements = _.reject(elements, function(el){\n        var reject;\n        var type = getElementType(el);\n        var extractor = config.keyExtractors.get(type);\n        var identifier = extractor($(el));\n       \n        var foundInIgnored = _.include(config.ignoredTypes, type);\n        var foundInInclude = _.include(config.include, identifier);\n        var foundInExclude = _.include(config.exclude, identifier);\n  \n        if (foundInInclude){\n          reject = false;\n        } else {\n          if (config.include){\n            reject = true;\n          } else {\n            reject = (foundInExclude || foundInIgnored);\n          }\n        }\n  \n        return reject;\n      });\n  \n      return elements;\n    };\n  \n    // Determine what type of element this is. It\n    // will either return the `type` attribute of\n    // an `<input>` element, or the `tagName` of\n    // the element when the element is not an `<input>`.\n    var getElementType = function(el){\n      var typeAttr;\n      var $el = $(el);\n      var tagName = $el[0].tagName;\n      var type = tagName;\n  \n      if (tagName.toLowerCase() === "input"){\n        typeAttr = $el.attr("type");\n        if (typeAttr){\n          type = typeAttr;\n        } else {\n          type = "text";\n        }\n      }\n      \n      // Always return the type as lowercase\n      // so it can be matched to lowercase\n      // type registrations.\n      return type.toLowerCase();\n    };\n    \n    // If a form element is given, just return it. \n    // Otherwise, get the form element from the view.\n    var getForm = function(viewOrForm){\n      if (_.isUndefined(viewOrForm.$el) && viewOrForm.tagName.toLowerCase() === \'form\'){\n        return viewOrForm;\n      } else {\n        return viewOrForm.$el.is("form") ? viewOrForm.el : viewOrForm.$("form")[0];\n      }\n    };\n  \n    // Build a configuration object and initialize\n    // default values.\n    var buildConfig = function(options){\n      var config = _.clone(options) || {};\n      \n      config.ignoredTypes = _.clone(Syphon.ignoredTypes);\n      config.inputReaders = config.inputReaders || Syphon.InputReaders;\n      config.inputWriters = config.inputWriters || Syphon.InputWriters;\n      config.keyExtractors = config.keyExtractors || Syphon.KeyExtractors;\n      config.keySplitter = config.keySplitter || Syphon.KeySplitter;\n      config.keyJoiner = config.keyJoiner || Syphon.KeyJoiner;\n      config.keyAssignmentValidators = config.keyAssignmentValidators || Syphon.KeyAssignmentValidators;\n      \n      return config;\n    };\n  \n    // Assigns `value` to a parsed JSON key. \n    //\n    // The first parameter is the object which will be\n    // modified to store the key/value pair.\n    //\n    // The second parameter accepts an array of keys as a \n    // string with an option array containing a \n    // single string as the last option.\n    //\n    // The third parameter is the value to be assigned.\n    //\n    // Examples:\n    //\n    // `["foo", "bar", "baz"] => {foo: {bar: {baz: "value"}}}`\n    // \n    // `["foo", "bar", ["baz"]] => {foo: {bar: {baz: ["value"]}}}`\n    // \n    // When the final value is an array with a string, the key\n    // becomes an array, and values are pushed in to the array,\n    // allowing multiple fields with the same name to be \n    // assigned to the array.\n    var assignKeyValue = function(obj, keychain, value) {\n      if (!keychain){ return obj; }\n  \n      var key = keychain.shift();\n  \n      // build the current object we need to store data\n      if (!obj[key]){\n        obj[key] = _.isArray(key) ? [] : {};\n      }\n  \n      // if it\'s the last key in the chain, assign the value directly\n      if (keychain.length === 0){\n        if (_.isArray(obj[key])){\n          obj[key].push(value);\n        } else {\n          obj[key] = value;\n        }\n      }\n  \n      // recursive parsing of the array, depth-first\n      if (keychain.length > 0){\n        assignKeyValue(obj[key], keychain, value);\n      }\n      \n      return obj;\n    };\n  \n    // Flatten the data structure in to nested strings, using the\n    // provided `KeyJoiner` function.\n    //\n    // Example:\n    //\n    // This input:\n    //\n    // ```js\n    // {\n    //   widget: "wombat",\n    //   foo: {\n    //     bar: "baz",\n    //     baz: {\n    //       quux: "qux"\n    //     },\n    //     quux: ["foo", "bar"]\n    //   }\n    // }\n    // ```\n    //\n    // With a KeyJoiner that uses [ ] square brackets, \n    // should produce this output:\n    //\n    // ```js\n    // {\n    //  "widget": "wombat",\n    //  "foo[bar]": "baz",\n    //  "foo[baz][quux]": "qux",\n    //  "foo[quux]": ["foo", "bar"]\n    // }\n    // ```\n    var flattenData = function(config, data, parentKey){\n      var flatData = {};\n  \n      _.each(data, function(value, keyName){\n        var hash = {};\n  \n        // If there is a parent key, join it with\n        // the current, child key.\n        if (parentKey){\n          keyName = config.keyJoiner(parentKey, keyName);\n        }\n  \n        if (_.isArray(value)){\n          keyName += "[]";\n          hash[keyName] = value;\n        } else if (_.isObject(value)){\n          hash = flattenData(config, value, keyName);\n        } else {\n          hash[keyName] = value;\n        }\n  \n        // Store the resulting key/value pairs in the\n        // final flattened data object\n        _.extend(flatData, hash);\n      });\n  \n      return flatData;\n    };\n  \n    return Syphon;\n  })(Backbone, jQuery, _);\n  \n  // Type Registry\n  // -------------\n  \n  // Type Registries allow you to register something to\n  // an input type, and retrieve either the item registered\n  // for a specific type or the default registration\n  Backbone.Syphon.TypeRegistry = function(){\n    this.registeredTypes = {};\n  };\n  \n  // Borrow Backbone\'s `extend` keyword for our TypeRegistry\n  Backbone.Syphon.TypeRegistry.extend = Backbone.Model.extend;\n  \n  _.extend(Backbone.Syphon.TypeRegistry.prototype, {\n  \n    // Get the registered item by type. If nothing is\n    // found for the specified type, the default is\n    // returned.\n    get: function(type){\n      var item = this.registeredTypes[type];\n  \n      if (!item){\n        item = this.registeredTypes["default"];\n      }\n  \n      return item;\n    },\n  \n    // Register a new item for a specified type\n    register: function(type, item){\n      this.registeredTypes[type] = item;\n    },\n  \n    // Register a default item to be used when no\n    // item for a specified type is found\n    registerDefault: function(item){\n      this.registeredTypes["default"] = item;\n    },\n  \n    // Remove an item from a given type registration\n    unregister: function(type){\n      if (this.registeredTypes[type]){\n        delete this.registeredTypes[type];\n      }\n    }\n  });\n  \n  \n  \n  \n  // Key Extractors\n  // --------------\n  \n  // Key extractors produce the "key" in `{key: "value"}`\n  // pairs, when serializing.\n  Backbone.Syphon.KeyExtractorSet = Backbone.Syphon.TypeRegistry.extend();\n  \n  // Built-in Key Extractors\n  Backbone.Syphon.KeyExtractors = new Backbone.Syphon.KeyExtractorSet();\n  \n  // The default key extractor, which uses the\n  // input element\'s "id" attribute\n  Backbone.Syphon.KeyExtractors.registerDefault(function($el){\n    return $el.prop("name");\n  });\n  \n  \n  // Input Readers\n  // -------------\n  \n  // Input Readers are used to extract the value from\n  // an input element, for the serialized object result\n  Backbone.Syphon.InputReaderSet = Backbone.Syphon.TypeRegistry.extend();\n  \n  // Built-in Input Readers\n  Backbone.Syphon.InputReaders = new Backbone.Syphon.InputReaderSet();\n  \n  // The default input reader, which uses an input\n  // element\'s "value"\n  Backbone.Syphon.InputReaders.registerDefault(function($el){\n    return $el.val();\n  });\n  \n  // Checkbox reader, returning a boolean value for\n  // whether or not the checkbox is checked.\n  Backbone.Syphon.InputReaders.register("checkbox", function($el){\n    var checked = $el.prop("checked");\n    return checked;\n  });\n  \n  \n  // Input Writers\n  // -------------\n  \n  // Input Writers are used to insert a value from an\n  // object into an input element.\n  Backbone.Syphon.InputWriterSet = Backbone.Syphon.TypeRegistry.extend();\n  \n  // Built-in Input Writers\n  Backbone.Syphon.InputWriters = new Backbone.Syphon.InputWriterSet();\n  \n  // The default input writer, which sets an input\n  // element\'s "value"\n  Backbone.Syphon.InputWriters.registerDefault(function($el, value){\n    $el.val(value);\n  });\n  \n  // Checkbox writer, set whether or not the checkbox is checked\n  // depending on the boolean value.\n  Backbone.Syphon.InputWriters.register("checkbox", function($el, value){\n    $el.prop("checked", value);\n  });\n  \n  // Radio button writer, set whether or not the radio button is\n  // checked.  The button should only be checked if it\'s value\n  // equals the given value.\n  Backbone.Syphon.InputWriters.register("radio", function($el, value){\n    $el.prop("checked", $el.val() === value);\n  });\n  \n  // Key Assignment Validators\n  // -------------------------\n  \n  // Key Assignment Validators are used to determine whether or not a\n  // key should be assigned to a value, after the key and value have been\n  // extracted from the element. This is the last opportunity to prevent\n  // bad data from getting serialized to your object.\n  \n  Backbone.Syphon.KeyAssignmentValidatorSet = Backbone.Syphon.TypeRegistry.extend();\n  \n  // Build-in Key Assignment Validators\n  Backbone.Syphon.KeyAssignmentValidators = new Backbone.Syphon.KeyAssignmentValidatorSet();\n  \n  // Everything is valid by default\n  Backbone.Syphon.KeyAssignmentValidators.registerDefault(function(){ return true; });\n  \n  // But only the "checked" radio button for a given\n  // radio button group is valid\n  Backbone.Syphon.KeyAssignmentValidators.register("radio", function($el, key, value){ \n    return $el.prop("checked");\n  });\n  \n  \n  // Backbone.Syphon.KeySplitter\n  // ---------------------------\n  \n  // This function is used to split DOM element keys in to an array\n  // of parts, which are then used to create a nested result structure.\n  // returning `["foo", "bar"]` results in `{foo: { bar: "value" }}`.\n  //\n  // Override this method to use a custom key splitter, such as:\n  // `<input name="foo.bar.baz">`, `return key.split(".")`\n  Backbone.Syphon.KeySplitter = function(key){\n    var matches = key.match(/[^\\[\\]]+/g);\n  \n    if (key.indexOf("[]") === key.length - 2){\n      lastKey = matches.pop();\n      matches.push([lastKey]);\n    }\n  \n    return matches;\n  }\n  \n  \n  // Backbone.Syphon.KeyJoiner\n  // -------------------------\n  \n  // Take two segments of a key and join them together, to create the\n  // de-normalized key name, when deserializing a data structure back\n  // in to a form.\n  //\n  // Example: \n  //\n  // With this data strucutre `{foo: { bar: {baz: "value", quux: "another"} } }`,\n  // the key joiner will be called with these parameters, and assuming the\n  // join happens with "[ ]" square brackets, the specified output:\n  // \n  // `KeyJoiner("foo", "bar")` //=> "foo[bar]"\n  // `KeyJoiner("foo[bar]", "baz")` //=> "foo[bar][baz]"\n  // `KeyJoiner("foo[bar]", "quux")` //=> "foo[bar][quux]"\n  \n  Backbone.Syphon.KeyJoiner = function(parentKey, childKey){\n    return parentKey + "[" + childKey + "]";\n  }\n  \n  \n  return Backbone.Syphon;\n}));\n//# sourceURL=/Users/dwarrowdelf/Sites/slp-frontend/public/components/backbone.syphon/lib/amd/backbone.syphon.js'),eval("define('Views/Login/ItemView.Login',['require','jquery','underscore','backbone','marionette','templates','backbone.syphon','ServerResources/Model.Auth'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Syphon = require('backbone.syphon');\n\n	var AuthModel = require('ServerResources/Model.Auth');\n\n	var Login = Backbone.Marionette.ItemView.extend({\n		template: Template.Login,\n		events: {\n			'click #login-btn': 'login',\n			'click a': 'surpress'\n		},\n		initialize: function () {\n			this.auth = this.cache.get('auth');\n		},\n		surpress: function(event){\n			event.stopPropagation();\n			event.preventDefault();\n		},\n		login: function (event) {\n			this.surpress(event);\n\n			var self = this;\n			this.auth.set(Backbone.Syphon.serialize(this));\n			this.auth.serverCreate({\n				error: function () {\n					self.$('.alert').removeClass('hidden');\n				},\n				success: function () {\n					self.auth.setSession();\n					App.Router.navigate('Dashboard', {\n						trigger: true\n					});\n				}\n			});\n		}\n	});\n	return Login;\n});\n//# sourceURL=/Views/Login/ItemView.Login.js"),eval("define('Routes/Route.Login',['require','Views/Login/ItemView.Login'],function (require) {\n	'use strict';\n\n	var Login = require('Views/Login/ItemView.Login');\n\n	return {\n		resources: {\n			login: {\n				constructor: Login,\n				trigger: 'login',\n				button: '#login'\n			}\n		},\n		routes: {\n			'Login': 'login'\n		},\n		controller: {\n			login: function (page) {\n				this.trackPageView('login');\n				this.triggerRoute('login');\n			}\n		}\n	};\n});\n//# sourceURL=/Routes/Route.Login.js"),eval("define('Views/Section.Marketing/ItemView.Marketing',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Marketing = Backbone.Marionette.ItemView.extend({\n		template: Template.Marketing,\n	});\n	return Marketing;\n});\n//# sourceURL=/Views/Section.Marketing/ItemView.Marketing.js"),eval("define('Routes/Route.marketing',['require','Views/Section.Marketing/ItemView.Marketing'],function (require) {\n	'use strict';\n\n	var Marketing = require('Views/Section.Marketing/ItemView.Marketing');\n\n	return {\n		resources: {\n			marketing: {\n				constructor: Marketing,\n				trigger: 'marketing',\n				button: '#marketing'\n			}\n		},\n		routes: {\n			'Marketing': 'marketing'\n		},\n		controller: {\n			marketing: function (page) {\n				this.trackPageView('marketing');\n				this.triggerRoute('marketing');\n			}\n		}\n	};\n});\n//# sourceURL=/Routes/Route.marketing.js"),function(e,t,n){t[e]=n()}("Base",this,function(){var e=function(){};return e.extend=function(t,n){var r=e.prototype.extend;e._prototyping=!0;var i=new this;r.call(i,t),i.base=function(){},delete e._prototyping;var s=i.constructor,o=i.constructor=function(){if(!e._prototyping)if(this._constructing||this.constructor===o)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(arguments[0]!==null)return(arguments[0].extend||r).call(arguments[0],i)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=i,o.toString=this.toString,o.valueOf=function(e){return e==="object"?o:s.valueOf()},r.call(o,n),typeof o.init=="function"&&o.init(),o},e.prototype={extend:function(t,n){if(arguments.length>1){var r=this[t];if(r&&typeof n=="function"&&(!r.valueOf||r.valueOf()!==n.valueOf())&&/\bbase\b/.test(n)){var i=n.valueOf();n=function(){var t=this.base||e.prototype.base;this.base=r;var n=i.apply(this,arguments);return this.base=t,n},n.valueOf=function(e){return e==="object"?n:i},n.toString=e.toString}this[t]=n}else if(t){var s=e.prototype.extend;!e._prototyping&&typeof this!="function"&&(s=this.extend||s);var o={toSource:null},u=["constructor","toString","valueOf"];for(var f=e._prototyping?0:1;f<u.length;f++){var l=u[f];t[l]!==o[l]&&s.call(this,l,t[l])}for(var c in t)o[c]||s.call(this,c,t[c])}return this}},e=e.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var r in e)this.prototype[r]===undefined&&t.call(n,e[r],r,e)},implement:function(){for(var e=0;e<arguments.length;e++)typeof arguments[e]=="function"?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),e}),typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){Validator={validate:function(e,t){return Validator._validate(e,t,{changing:!1})},checkPropertyChange:function(e,t,n){return Validator._validate(e,t,{changing:n||"property"})},_validate:function(e,t,n){function s(e,t,u,a){function c(e){i.push({property:u,message:e})}function p(e,t){if(e){if(!(typeof e!="string"||e=="any"||(e=="null"?t===null:typeof t==e)||t instanceof Array&&e=="array"||t instanceof Date&&e=="date"||e=="integer"&&t%1===0))return[{property:u,message:typeof t+" value found, but a "+e+" is required"}];if(e instanceof Array){var n=[];for(var r=0;r<e.length;r++)if(!(n=p(e[r],t)).length)break;if(n.length)return n}else if(typeof e=="object"){var o=i;i=[],s(t,e,u);var a=i;return i=o,a}}return[]}var l;u+=u?typeof a=="number"?"["+a+"]":typeof a=="undefined"?"":"."+a:a;if((typeof t!="object"||t instanceof Array)&&(u||typeof t!="function")&&(!t||!t.type))return typeof t=="function"?e instanceof t||c("is not an instance of the class/constructor "+t.name):t&&c("Invalid schema/property definition "+t),null;r&&t.readonly&&c("is a readonly field, it can not be changed"),t["extends"]&&s(e,t["extends"],u,a);if(e===undefined)t.required&&c("is missing and it is required");else{i=i.concat(p(t.type,e)),t.disallow&&!p(t.disallow,e).length&&c(" disallowed value was matched");if(e!==null){if(e instanceof Array){if(t.items){var v=t.items instanceof Array,m=t.items;for(a=0,l=e.length;a<l;a+=1)v&&(m=t.items[a]),n.coerce&&(e[a]=n.coerce(e[a],m)),i.concat(s(e[a],m,u,a))}t.minItems&&e.length<t.minItems&&c("There must be a minimum of "+t.minItems+" in the array"),t.maxItems&&e.length>t.maxItems&&c("There must be a maximum of "+t.maxItems+" in the array")}else(t.properties||t.additionalProperties)&&i.concat(o(e,t.properties,u,t.additionalProperties));t.pattern&&typeof e=="string"&&!e.match(t.pattern)&&c("does not match the regex pattern "+t.pattern),t.maxLength&&typeof e=="string"&&e.length>t.maxLength&&c("may only be "+t.maxLength+" characters long"),t.minLength&&typeof e=="string"&&e.length<t.minLength&&c("must be at least "+t.minLength+" characters long"),typeof t.minimum!==undefined&&typeof e==typeof t.minimum&&t.minimum>e&&c("must have a minimum value of "+t.minimum),typeof t.maximum!==undefined&&typeof e==typeof t.maximum&&t.maximum<e&&c("must have a maximum value of "+t.maximum);if(t["enum"]){var g=t["enum"];l=g.length;var y;for(var w=0;w<l;w++)if(g[w]===e){y=1;break}y||c("does not have a value in the enumeration "+g.join(", "))}typeof t.maxDecimal=="number"&&e.toString().match(new RegExp("\\.[0-9]{"+(t.maxDecimal+1)+",}"))&&c("may only have "+t.maxDecimal+" digits of decimal places")}}return null}function o(e,t,o,u){if(typeof t=="object"){(typeof e!="object"||e instanceof Array)&&i.push({property:o,message:"an object is required"});for(var a in t)if(t.hasOwnProperty(a)){var l=e[a];if(l===undefined&&n.existingOnly)continue;var c=t[a];l===undefined&&c["default"]&&(l=e[a]=c["default"]),n.coerce&&a in e&&(l=e[a]=n.coerce(l,c)),s(l,c,o,a)}}for(a in e){if(e.hasOwnProperty(a)&&(a.charAt(0)!="_"||a.charAt(1)!="_")&&t&&!t[a]&&u===!1){if(n.filter){delete e[a];continue}i.push({property:o,message:typeof l+"The property "+a+" is not defined in the schema and the schema does not allow additional properties"})}var p=t&&t[a]&&t[a].requires;p&&!(p in e)&&i.push({property:o,message:"the presence of the property "+a+" requires that "+p+" also be present"}),l=e[a],u&&(!t||typeof t!="object"||!(a in t))&&(n.coerce&&(l=e[a]=n.coerce(l,u)),s(l,u,o,a)),!r&&l&&l.$schema&&(i=i.concat(s(l,l.$schema,o,a)))}return i}n||(n={});var r=n.changing,i=[];return t&&s(e,t,"",r||""),!r&&e&&e.$schema&&s(e,e.$schema,"",""),{valid:!i.length,errors:i}},mustBeValid:function(e){if(!e.valid)throw new TypeError(e.errors.map(function(e){return"for property "+e.property+": "+e.message}).join(", \n"))}},String.type="string",Boolean.type="boolean",Number.type="number",Integer={type:"integer"},Object.type="object",Array.type="array",Date.type="date",e.validator=window.Validator=Validator}(jQuery),function(e,t){function h(t,n,r,i){var u={data:i||i===0||i===!1?i:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:w,nest:E,wrap:S,html:x,update:T};return t&&e.extend(u,t,{nodes:[],parent:n}),r&&(u.tmpl=r,u._ctnt=u._ctnt||u.tmpl(e,u),u.key=++f,(c.length?o:s)[f]=u),u}function p(t,n,i){var s,o=i?e.map(i,function(e){return typeof e=="string"?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+r+'="'+t.key+'" $2'):e:p(e,t,e._ctnt)}):t;return n?o:(o=o.join(""),o.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,r,i){s=e(r).get(),b(s),n&&(s=d(n).concat(s)),i&&(s=s.concat(d(i)))}),s?s:d(o))}function d(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function v(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,s,o,u){var a=e.tmpl.tag[r],f,l,c;if(!a)throw"Unknown template tag: "+r;return f=a._default||[],o&&!/\w$/.test(s)&&(s+=o,o=""),s?(s=g(s),u=u?","+g(u)+")":o?")":"",l=o?s.indexOf(".")>-1?s+g(o):"("+s+").call($item"+u:s,c=o?l:"(typeof("+s+")==='function'?("+s+").call($item):("+s+"))"):c=l=f.$1||"null",i=g(i),"');"+a[n?"close":"open"].split("$notnull_1").join(s?"typeof("+s+")!=='undefined' && ("+s+")!=null":"true").split("$1a").join(c).split("$1").join(l).split("$2").join(i||f.$2||"")+"__.push('"})+"');}return __;")}function m(t,n){t._wrap=p(t,!0,e.isArray(n)?n:[i.test(n)?n:e(n).html()]).join("")}function g(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function y(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function b(t){function v(t){function v(e){e+=n,p=a[e]=a[e]||h(p,s[p.parent.key+n]||p.parent)}var i,u=t,c,p,d;if(d=t.getAttribute(r)){while(u.parentNode&&(u=u.parentNode).nodeType===1&&!(i=u.getAttribute(r)));i!==d&&(u=u.parentNode?u.nodeType===11?0:u.getAttribute(r)||0:0,(p=s[d])||(p=o[d],p=h(p,s[u]||o[u]),p.key=++f,s[f]=p),l&&v(d)),t.removeAttribute(r)}else l&&(p=e.data(t,"tmplItem"))&&(v(p.key),s[p.key]=p,u=e.data(t.parentNode,"tmplItem"),u=u?u.key:0);if(p){c=p;while(c&&c.key!=u)c.nodes.push(t),c=c.parent;delete p._ctnt,delete p._wrap,e.data(t,"tmplItem",p)}}var n="_"+l,i,u,a={},c,p,d;for(c=0,p=t.length;c<p;c++){if((i=t[c]).nodeType!==1)continue;u=i.getElementsByTagName("*");for(d=u.length-1;d>=0;d--)v(u[d]);v(i)}}function w(e,t,n,r){if(!e)return c.pop();c.push({_:e,tmpl:t,item:this,data:n,options:r})}function E(t,n,r){return e.tmpl(e.template(t),n,r,this)}function S(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function x(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||y(e)})}function T(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var n=e.fn.domManip,r="_tmplitem",i=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,s={},o={},u,a={key:0,data:{}},f=0,l=0,c=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var i=[],o=e(r),a,f,c,h,p=this.length===1&&this[0].parentNode;u=s||{};if(p&&p.nodeType===11&&p.childNodes.length===1&&o.length===1)o[n](this[0]),i=this;else{for(f=0,c=o.length;f<c;f++)l=f,a=(f>0?this.clone(!0):this).get(),e(o[f])[n](a),i=i.concat(a);l=0,i=this.pushStack(i,t,o.selector)}return h=u,u=null,e.tmpl.complete(h),i}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,r,i,o){if(t[0]&&e.isArray(t[0])){var a=e.makeArray(arguments),f=t[0],c=f.length,h=0,p;while(h<c&&!(p=e.data(f[h++],"tmplItem")));p&&l&&(a[2]=function(t){e.tmpl.afterManip(this,t,i)}),n.apply(this,a)}else n.apply(this,arguments);return l=0,u||e.tmpl.complete(s),this}}),e.extend({tmpl:function(t,n,r,i){var u,f=!i;if(f)i=a,t=e.template[t]||e.template(null,t),o={};else if(!t)return t=i.tmpl,s[i.key]=i,i.nodes=[],i.wrapped&&m(i,i.wrapped),e(p(i,null,i.tmpl(e,i)));return t?(typeof n=="function"&&(n=n.call(i||{})),r&&r.wrapped&&m(r,r.wrapped),u=e.isArray(n)?e.map(n,function(e){return e?h(r,i,t,e):null}):[h(r,i,t,n)],f?e(p(i,null,u)):u):[]},tmplItem:function(t){var n;t instanceof e&&(t=t[0]);while(t&&t.nodeType===1&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode));return n||a},template:function(t,n){return n?(typeof n=="string"?n=v(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",v(n.innerHTML))),typeof t=="string"?e.template[t]=n:n):t?typeof t!="string"?e.template(null,t):e.template[t]||e.template(null,i.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(e){s={}},afterManip:function(n,r,i){var s=r.nodeType===11?e.makeArray(r.childNodes):r.nodeType===1?[r]:[];i.call(n,r),b(s),l++}})}(jQuery);var equiv=function(){var e,t=[],n=function(){function n(e,t){return e instanceof t.constructor||t instanceof e.constructor?t==e:t===e}return{string:n,"boolean":n,number:n,"null":n,"undefined":n,nan:function(e){return isNaN(e)},date:function(e,t){return hoozit(e)==="date"&&t.valueOf()===e.valueOf()},regexp:function(e,t){return hoozit(e)==="regexp"&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline},"function":function(){var e=t[t.length-1];return e!==Object&&typeof e!="undefined"},array:function(t,n){var r,i;if(hoozit(t)!=="array")return!1;i=n.length;if(i!==t.length)return!1;for(r=0;r<i;r++)if(!e(n[r],t[r]))return!1;return!0},object:function(n,r){var i,s=!0,o=[],u=[];if(r.constructor!==n.constructor)return!1;t.push(r.constructor);for(i in r)o.push(i),e(r[i],n[i])||(s=!1);t.pop();for(i in n)u.push(i);return s&&e(o.sort(),u.sort())}}}();return e=function(){var e=Array.prototype.slice.apply(arguments);return e.length<2?!0:function(e,t){return e===t?!0:e===null||t===null||typeof e=="undefined"||typeof t=="undefined"||hoozit(e)!==hoozit(t)?!1:bindCallbacks(e,n,[t,e])}(e[0],e[1])&&arguments.callee.apply(this,e.splice(1,e.length-1))},e}();(function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),typeof e[t]=="function"?"paste":"input"}var n=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),s=/android/i.test(r),o;e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(this.length===0||this.is(":hidden"))return;return typeof e=="number"?(t=typeof t=="number"?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var u,l,h,p,d,v;return!t&&this.length>0?(u=e(this[0]),u.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,h=[],p=v=t.length,d=null,e.each(t.split(""),function(e,t){t=="?"?(v--,p=e):l[t]?(h.push(new RegExp(l[t])),d===null&&(d=h.length-1)):h.push(null)}),this.trigger("unmask").each(function(){function w(e){while(++e<v&&!h[e]);return e}function E(e){while(--e>=0&&!h[e]);return e}function S(e,t){var n,i;if(e<0)return;for(n=e,i=w(t);n<v;n++)if(h[n]){if(!(i<v&&h[n].test(g[i])))break;g[n]=g[i],g[i]=r.placeholder,i=w(i)}k(),u.caret(Math.max(d,e))}function x(e){var t,n,i,s;for(t=e,n=r.placeholder;t<v;t++)if(h[t]){i=w(t),s=g[t],g[t]=n;if(!(i<v&&h[i].test(s)))break;n=s}}function T(e){var t=e.which,n,r,s;t===8||t===46||i&&t===127?(n=u.caret(),r=n.begin,s=n.end,s-r===0&&(r=t!==46?E(r):s=w(r-1),s=t===46?w(s):s),C(r,s),S(r,s-1),e.preventDefault()):t==27&&(u.val(y),u.caret(0,L()),e.preventDefault())}function N(t){var n=t.which,i=u.caret(),o,f,l;if(t.ctrlKey||t.altKey||t.metaKey||n<32)return;n&&(i.end-i.begin!==0&&(C(i.begin,i.end),S(i.begin,i.end-1)),o=w(i.begin-1),o<v&&(f=String.fromCharCode(n),h[o].test(f)&&(x(o),g[o]=f,k(),l=w(o),s?setTimeout(e.proxy(e.fn.caret,u,l),0):u.caret(l),r.completed&&l>=v&&r.completed.call(u))),t.preventDefault())}function C(e,t){var n;for(n=e;n<t&&n<v;n++)h[n]&&(g[n]=r.placeholder)}function k(){u.val(g.join(""))}function L(e){var t=u.val(),n=-1,i,s;for(i=0,pos=0;i<v;i++)if(h[i]){g[i]=r.placeholder;while(pos++<t.length){s=t.charAt(pos-1);if(h[i].test(s)){g[i]=s,n=i;break}}if(pos>t.length)break}else g[i]===t.charAt(pos)&&i!==p&&(pos++,n=i);return e?k():n+1<p?(u.val(""),C(0,v)):(k(),u.val(u.val().substring(0,n+1))),p?i:d}var u=e(this),g=e.map(t.split(""),function(e,t){if(e!="?")return l[e]?r.placeholder:e}),y=u.val();u.data(e.mask.dataName,function(){return e.map(g,function(e,t){return h[t]&&e!=r.placeholder?e:null}).join("")}),u.attr("readonly")||u.one("unmask",function(){u.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(o);var e,n;y=u.val(),y===""?(C(0,v),k(),e=0):e=L(),o=setTimeout(function(){k(),e==t.length?u.caret(0,e):u.caret(e)},10)}).bind("blur.mask",function(){L(),u.val()!=y&&u.change()}).bind("keydown.mask",T).bind("keypress.mask",N).bind(n,function(){setTimeout(function(){var e=L(!0);u.caret(e),r.completed&&e==u.val().length&&r.completed.call(u)},0)}),L()}))}})})(jQuery),function(e){var t;t=function(){var n=t.makeArray(arguments);if(n.length===0)return alert("No arguments - no supported"),null;var r=n[0],i=null,s=null,o=null,u=null,f=null,l=null,c=null,h=null,p=!1,d=!1,v={};if(n.length==1){var m=e(r).find(":first"),g=null;for(var y=0;y<m.length;y++){var w=m[y],E=e(w).attr("alpaca-field-id");if(E){var S=t.fieldInstances[E];S&&(g=S)}}if(g!==null)return g;var x=e(r).html();e(r).html(""),i=x}n.length>=2&&(t.isObject(n[1])?(i=n[1].data,o=n[1].schema,s=n[1].options,u=n[1].view,f=n[1].render,l=n[1].postRender,c=n[1].error,h=n[1].connector,n[1].ui&&(v.ui=n[1].ui),n[1].type&&(v.type=n[1].type),t.isEmpty(n[1].notTopLevel)||(p=n[1].notTopLevel),t.isEmpty(n[1].isDynamicCreation)||(d=n[1].isDynamicCreation)):(i=n[1],t.isFunction(i)&&(i=i()))),t.isEmpty(c)&&(c=function(e){var n=e.message;n&&t.isObject(n)&&(n=JSON.stringify(n)),alert("Alpaca error was caught with default error handler: "+n)}),t.isEmpty(h)&&(h=new t.Connector("default")),t.isEmpty(i)&&t.isEmpty(o)&&(t.isEmpty(s)||t.isEmpty(s.type))&&(t.isEmpty(s)?(i="",s="text"):s&&t.isObject(s)&&(i="",s.type="text")),r&&t.isString(r)&&(r=e("#"+r));var T=h;p&&(T=new t.Connector("default")),s||(s={}),t.isUndefined(s.focus)&&(s.focus=!1);var N=function(t){if(s&&s.focus)if(s.focus===!0)t.children&&t.children.length>0&&t.children[0].field&&t.children[0].field[0]&&e(t.children[0]).focus();else{var n=t.getControlByPath(s.focus);n&&n.field&&e(n).focus()}l&&l(t)};return T.loadAll({data:i,options:s,schema:o,view:u},function(e,n,i,s){return t.init(r,e,n,i,s,v,f,N,h,c,d)},function(e){return c(e),null}),e(r)},t.Fields={},t.Connectors={},e.extend(t,{VERSION:"0.1.0",makeArray:function(e){return Array.prototype.slice.call(e)},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"},isString:function(e){return typeof e=="string"},isObject:function(e){return e===!0||e===!1||t.isUndefined(e)||e===null?!1:typeof e=="object"&&typeof e.length=="undefined"},isPlainObject:function(t){return e.isPlainObject(t)},isNumber:function(e){return typeof e=="number"},isArray:function(e){return e===!0||e===!1||t.isUndefined(e)||e===null?!1:e.push&&e.slice},isBoolean:function(e){return typeof e=="boolean"},isUndefined:function(e){return typeof e=="undefined"},trim:function(e){var n=e;return n&&t.isString(n)&&(n=n.replace(/^\s+|\s+$/g,"")),n},safeDomParse:function(n){return n&&t.isString(n)&&(n=t.trim(n),n=e(n)),n},isEmpty:function(e){return t.isUndefined(e)||e===null},copyOf:function(n){var r=n;if(t.isArray(n)){r=[];for(var i=0;i<n.length;i++)r.push(t.copyOf(n[i]))}else if(t.isObject(n)){if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return new RegExp(n);if(n.nodeType&&"cloneNode"in n)r=n.cloneNode(!0);else if(e.isPlainObject(n)){r={};for(var s in n)n.hasOwnProperty(s)&&(r[s]=t.copyOf(n[s]))}}return r},cloneObject:function(e){return t.copyOf(e)},spliceIn:function(e,t,n){return e.substring(0,t)+n+e.substring(t,e.length)},compactArray:function(e){var t=[],n=e.length,r;for(r=0;r<n;r++)!lang.isNull(e[r])&&!lang.isUndefined(e[r])&&t.push(e[r]);return t},removeAccents:function(e){return e.replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[ñ]/g,"n").replace(/[ç]/g,"c").replace(/[œ]/g,"oe").replace(/[æ]/g,"ae")},indexOf:function(e,n,r){var i=n.length,s;t.isFunction(r)||(r=function(e,t){return e===t});for(s=0;s<i;s++)if(r.call({},e,n[s]))return s;return-1},log:function(e){typeof console!="undefined"&&console.log(e)},uniqueIdCounter:0,defaultLocale:"en_US",setDefaultLocale:function(e){this.defaultLocale=e},defaultSchemaFieldMapping:{},registerDefaultSchemaFieldMapping:function(e,t){e&&t&&(this.defaultSchemaFieldMapping[e]=t)},defaultFormatFieldMapping:{},registerDefaultFormatFieldMapping:function(e,t){e&&t&&(this.defaultFormatFieldMapping[e]=t)},getSchemaType:function(e){if(t.isEmpty(e))return"string";if(t.isObject(e))return"object";if(t.isString(e))return"string";if(t.isNumber(e))return"number";if(t.isArray(e))return"array";if(t.isBoolean(e))return"boolean";if(typeof e=="object")return"object"},views:{},viewIdPrefix:"VIEW_",isValidViewId:function(e){return t.startsWith(e,this.viewIdPrefix)},generateViewId:function(){return this.viewIdPrefix+this.generateId()},registerView:function(e){var n=e.id;if(!n)throw t.logError("Cannot register view with missing view id: "+n),new Error("Cannot register view with missing view id: "+n);var r=this.views[n];r?t.mergeObject(r,e):this.views[n]=e},defaultView:"VIEW_WEB_EDIT",setDefaultView:function(e){e&&this.views.hasOwnProperty(e)&&(this.defaultView=e)},getNormalizedView:function(e){return this.normalizedViews[e]},lookupNormalizedView:function(e,t){var n=null;for(var r in this.normalizedViews){var i=this.normalizedViews[r];if(i.ui==e&&i.type==t){n=r;break}}return n},registerTemplate:function(e,t,n){n||(n="VIEW_BASE"),this.views[n]||(this.views[n]={},this.views[n].id=n),this.views[n].templates||(this.views[n].templates={}),this.views[n].templates[e]=t},registerTemplates:function(e,t){for(var n in e)this.registerTemplate(n,e[n],t)},registerMessage:function(e,t,n){n||(n="VIEW_BASE"),this.views[n]||(this.views[n]={},this.views[n].id=n),this.views[n].messages||(this.views[n].messages={}),this.views[n].messages[e]=t},registerMessages:function(e,t){for(var n in e)e.hasOwnProperty(n)&&this.registerMessage(n,e[n],t)},fieldTemplatePostfix:{controlFieldMessageContainer:"-controlfield-message-container",controlFieldLabel:"-controlfield-label",controlFieldContainer:"-controlfield-container",controlFieldHelper:"-controlfield-helper",fieldSetLegend:"-fieldset-legend",fieldSetItemsContainer:"-fieldset-items-container",fieldSetHelper:"-fieldset-helper",fieldSetOuterEl:"-fieldset",formButtonsContainer:"-form-buttons-container",formFieldsContainer:"-form-fields-container"},fieldTemplate:function(n,r,i){var s=this,o=n.data,u=n.data.view,f="";r||(r="controlFieldLabel");var l=this.getTemplateDescriptor(u,r,o);if(i){var c=l.template.value;e(".alpaca"+this.fieldTemplatePostfix[r],t.safeDomParse(c)).length===0&&this.fieldTemplatePostfix[r]&&(c=t.safeDomParse(c).addClass("alpaca"+this.fieldTemplatePostfix[r])),f=t.safeDomParse(c).outerHTML(!0)}else{var h=u.tmpl(l,n.data);h?(this.fieldTemplatePostfix[r]&&(e(".alpaca"+this.fieldTemplatePostfix[r],h).length===0&&h.addClass("alpaca"+this.fieldTemplatePostfix[r]),h.attr("id")||h.attr("id",n.data.id+this.fieldTemplatePostfix[r])),f=h.outerHTML(!0)):f=""}return f},defaultDateFormat:"mm/dd/yy",regexps:{email:/^[a-z0-9!\#\$%&'\*\-\/=\?\+\-\^_`\{\|\}~]+(?:\.[a-z0-9!\#\$%&'\*\-\/=\?\+\-\^_`\{\|\}~]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,6}$/i,url:/^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(\:[0-9]{1,5})?(([0-9]{1,5})?\/.*)?$/i,password:/^[0-9a-zA-Z\x20-\x7E]*$/,date:/^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.]\d\d$/,integer:/^([\+\-]?([1-9]\d*)|0)$/,number:/^([\+\-]?((([0-9]+(\.)?)|([0-9]*\.[0-9]+))([eE][+-]?[0-9]+)?))$/,phone:/^(\D?(\d{3})\D?\D?(\d{3})\D?(\d{4}))?$/,ipv4:/^(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)(?:\.(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)){3}$/,"zipcode-five":/^(\d{5})?$/,"zipcode-nine":/^(\d{5}(-\d{4})?)?$/},fieldInstances:{},fieldClassRegistry:{},registerFieldClass:function(e,t){this.fieldClassRegistry[e]=t},getFieldClass:function(e){return this.fieldClassRegistry[e]},getFieldClassType:function(e){for(var t in this.fieldClassRegistry)if(this.fieldClassRegistry.hasOwnProperty(t)&&this.fieldClassRegistry[t]==e)return t;return null},connectorClassRegistry:{},registerConnectorClass:function(e,t){this.connectorClassRegistry[e]=t},getConnectorClass:function(e){return this.connectorClassRegistry[e]},replaceAll:function(e,t,n){return e.replace(new RegExp(t,"g"),n)},element:function(t,n,r,i){var s=e("<"+t+"/>");n&&s.attr(n),r&&s.css(r);if(i)for(var o in i)s.addClass(o)},elementFromTemplate:function(n,r){var i=n;if(r)for(var s in r)i=t.replaceAll(i,"${"+s+"}",r[s]);return e(i)},generateId:function(){return t.uniqueIdCounter++,"alpaca"+t.uniqueIdCounter},later:function(t,n,r,i,s){t=t||0,n=n||{};var o=r,u=e.makeArray(i),a,f;typeof r=="string"&&(o=n[r]);if(!o)throw{name:"TypeError",message:"The function is undefined."};return a=function(){o.apply(n,u)},f=s?setInterval(a,t):setTimeout(a,t),{id:f,interval:s,cancel:function(){this.interval?clearInterval(f):clearTimeout(f)}}},endsWith:function(e,t){return e.indexOf(t,e.length-t.length)!==-1},startsWith:function(e,t){return e.substr(0,t.length)===t},isUri:function(e){return t.isString(e)&&(t.startsWith(e,"http://")||t.startsWith(e,"https://")||t.startsWith(e,"/")||t.startsWith(e,"./")||t.startsWith(e,"../"))},traverseObject:function(e,n,r){t.isString(n)&&(n=n.split("."));var i=null,s=e,o=null;do o=n.shift(),r&&o==r&&(o=n.shift()),t.isEmpty(s[o])?n=[]:(s=s[o],n.length===0&&(i=s));while(n.length>0);return i},each:function(e,n){if(t.isArray(e))for(var r=0;r<e.length;r++)n.apply(e[r]);else if(t.isObject(e))for(var i in e)n.apply(e[i])},merge:function(e,n,r){e||(e={});for(var i in n){var s=!0;r&&(s=r(i)),s&&(t.isEmpty(n[i])?e[i]=n[i]:t.isObject(n[i])?(e[i]||(e[i]={}),e[i]=t.merge(e[i],n[i])):e[i]=n[i])}return e},mergeObject:function(e,t){return e||(e={}),t||(t={}),this.mergeObject2(t,e),e},mergeObject2:function(n,r){var i=t.isArray,s=t.isObject,o=t.isUndefined,u=t.copyOf,f=function(t,n){return i(t)?i(n)&&e.each(t,function(e){n.push(u(t[e]))}):s(t)?s(n)&&e.each(t,function(e){o(n[e])?n[e]=u(t[e]):n[e]=f(t[e],n[e])}):n=u(t),n};return f(n,r),r},substituteTokens:function(e,n){if(!t.isEmpty(e))for(var r=0;r<n.length;r++){var i="{"+r+"}",s=e.indexOf(i);if(s>-1){var o=e.substring(0,s)+n[r]+e.substring(s+3);e=o}}return e},compareObject:function(e,t){return equiv(e,t)},compareArrayContent:function(t,n){var r=t&&n&&t.length==n.length;return r&&e.each(t,function(t,i){if(!r)return!1;e.inArray(i,n)==-1?r=!1:r=!0}),r},isValEmpty:function(n){var r=!1;return t.isEmpty(n)?r=!0:(t.isString(n)&&n===""&&(r=!0),t.isObject(n)&&e.isEmptyObject(n)&&(r=!0),t.isArray(n)&&n.length===0&&(r=!0),t.isNumber(n)&&isNaN(n)&&(r=!0)),r},init:function(e,n,r,i,s,o,u,f,l,c,h){var p=this;if(t.isObject(s)){var d=s.id;d||(s.id=this.generateViewId());var v=s.parent;v||(s.parent="VIEW_WEB_EDIT"),this.registerView(s),s=s.id}this.compile(function(d){if(d.errors&&d.errors.length>0){for(var v=0;v<d.errors.length;v++){var m=d.errors[v].viewId,y=d.errors[v].templateId,b=d.errors[v].err;t.logError("The template: "+y+" for view: "+m+" failed to compile"),t.logError(JSON.stringify(b))}throw new Error("View compilation failed, cannot initialize Alpaca.  Please check the error logs.")}p._init(e,n,r,i,s,o,u,f,l,c,h)})},_init:function(n,r,i,s,o,u,f,l,c,h,p){var d=null,v=null,m=null;e.mobile&&(d="mobile",r?(v="edit",m="VIEW_MOBILE_EDIT"):(v="create",m="VIEW_MOBILE_CREATE"));var g=typeof e().modal=="function";g&&(d="bootstrap",r?(v="edit",m="VIEW_BOOTSTRAP_EDIT"):(v="create",m="VIEW_BOOTSTRAP_CREATE"));if(!o){var y=u.ui,w=u.type;y||(d||(d=t.defaultUI),d&&(y=d)),y&&(w||(w=v?v:"edit"),t.logDebug("No view provided but found request for UI: "+y+" and type: "+w),o=this.lookupNormalizedView(y,w),o?t.logDebug("Found view: "+o):t.logDebug("No view found for UI: "+y+" and type: "+w))}o||(t.logDebug("A view was not specified."),m?(t.logDebug("Falling back to detected view: "+m),o=m):(t.logDebug("Falling back to default view: "+this.defaultView),o=this.defaultView));if(t.isString(o)&&!this.normalizedViews[o])throw t.logError("The desired view: "+o+" could not be loaded.  Please make sure it is loaded and not misspelled."),new Error("The desired view: "+o+" could not be loaded.  Please make sure it is loaded and not misspelled.");var E=t.createFieldInstance(n,r,i,s,o,c,h);return E.isDynamicCreation=p,t.fieldInstances[E.getId()]=E,t.isEmpty(f)&&(f=E.view.render),t.isEmpty(l)&&(l=E.view.postRender),t.isEmpty(f)?E.render(l):f(E,l),E.callback=f,E.renderedCallback=l,E},createFieldInstance:function(e,n,r,i,s,o,u){t.isValEmpty(r)&&(r={}),t.isValEmpty(i)&&(i={});if(r&&t.isString(r)){var f=r;r={},r.type=f}r.type||(i.type||(i.type=t.getSchemaType(n)),i&&i["enum"]?i["enum"].length>3?r.type="select":r.type="radio":r.type=t.defaultSchemaFieldMapping[i.type],i.format&&t.defaultFormatFieldMapping[i.format]&&(r.type=t.defaultFormatFieldMapping[i.format]));var l=t.getFieldClass(r.type);return l?new l(e,n,r,i,s,o):(u({message:"Unable to find field class for type: "+r.type,reason:"FIELD_INSTANTIATION_ERROR"}),null)},parseJSON:function(t){return t?e.parseJSON(t):null},compile:function(e){var n=this,r={errors:[],count:0,successCount:0},i=function(t){if(r.errors.length===0)for(var i in t)n.normalizedViews[i]=t[i];e(r)},s=function(e,t,n,s,o,u){var a=n.id;r.count++,t?r.errors.push({view:a,template:s,err:t}):(r.successCount++,n.compiledTemplates[s]=o),r.count==u&&i(e)},o=function(e,n,r,i,o){var u=n.id,f=null;t.isObject(i)&&(f=i.type,i=i.template),f||(f="text/x-jquery-tmpl");var l=t.TemplateEngineRegistry.find(f);if(!l){t.logError("Cannot find template engine for type: "+f);var c=new Error("Cannot find template engine for type: "+f);s(e,c,n,r,h,o)}var h=u+"_"+r;if(l.isCached(h))s(e,null,n,r,h,o);else{var p=n.compiledTemplates["view-"+i];p&&(i=t.TemplateCache[p]),l.compile(h,i,function(t,i){s(e,t,n,r,h,o)})}},u=function(e){var t=[];for(var n in e){var r=e[n];r.compiledTemplates={};if(r.templates)for(var i in r.templates){var s=r.templates[i];t.push(function(e,t,n,r){return function(i){o(e,t,n,r,i)}}(e,r,"view-"+i,s))}if(r.fields)for(var u in r.fields)if(r.fields[u].templates)for(var i in r.fields[u].templates){var s=r.fields[u].templates[i];t.push(function(e,t,n,r){return function(i){o(e,t,n,r,i)}}(e,r,"field-"+u+"-"+i,s))}if(r.layout&&r.layout.template){var s=r.layout.template;t.push(function(e,t,n,r){return function(i){o(e,t,n,r,i)}}(e,r,"layoutTemplate",s))}if(r.globalTemplate){var s=r.globalTemplate;t.push(function(e,t,n,r){return function(i){o(e,t,n,r,i)}}(e,r,"globalTemplate",s))}}var a=t.length;for(var f=0;f<t.length;f++)t[f](a)},f=function(){var e={},r=0;t.normalizedViews||(t.normalizedViews={}),n.normalizedViews=t.normalizedViews;for(var s in n.views)if(!t.normalizedViews[s]){var o=new t.NormalizedView(s);if(!o.normalize())throw t.logError("View normalization failed, cannot initialize Alpaca.  Please check the error logs."),new Error("View normalization failed, cannot initialize Alpaca.  Please check the error logs.");e[s]=o,r++}r>0?u(e):i(e)};f()},getTemplateDescriptor:function(e,n,r){var i={},s,o;e.templates&&e.templates[n]&&(s=e.templates[n],o="view");if(r&&r.path){var u=r.path;e&&e.fields&&e.fields[u]&&e.fields[u].templates&&e.fields[u].templates[n]&&(s=e.fields[u].templates[n],o="field")}n=="globalTemplate"&&(s="globalTemplate",o="global"),n=="layoutTemplate"&&(s="layoutTemplate",o="layout"),i.template={},i.template.id=n,i.template.type=o,i.template.value=s;var f=null,l=s;t.isObject(l)&&(f=l.type,l=l.template),f||(f="text/x-jquery-tmpl");var c=t.TemplateEngineRegistry.find(f);if(!c)throw t.logError("Cannot find template engine for type: "+f),new Error("Cannot find template engine for type: "+f);i.engine={},i.engine.type=f,i.engine.id=c.id;var h=null;o=="view"?h="view-"+n:o=="field"?h="field-"+r.path+"-"+n:o=="layout"?h="layoutTemplate":o=="global"&&(h="globalTemplate"),i.compiledTemplateId=h;var p=e.compiledTemplates[h];return!p||!c.isCached(p)?null:(i.cache={},i.cache.key=p,i)},tmpl:function(e,n,r){t.isString(e)&&(e=this.normalizedViews[e]);var i=n.engine.type,s=n.compiledTemplateId,o=t.TemplateEngineRegistry.find(i);if(!o)throw t.logError("Cannot find template engine for type: "+i),new Error("Cannot find template engine for type: "+i);var u=n.cache.key,f=o.execute(u,r,function(n){throw t.logWarn("The compiled template: "+s+" for view: "+e.id+" failed to execute: "+JSON.stringify(n)),new Error("The compiled template: "+s+" for view: "+e.id+" failed to execute: "+JSON.stringify(n))});return t.safeDomParse(f)}}),t.DEBUG=0,t.INFO=1,t.WARN=2,t.ERROR=3,t.logLevel=t.WARN,t.logDebug=function(e){t.log(t.DEBUG,e)},t.logInfo=function(e){t.log(t.INFO,e)},t.logWarn=function(e){t.log(t.WARN,e)},t.logError=function(e){t.log(t.ERROR,e)},t.log=function(e,n){var r={0:"debug",1:"info",2:"warn",3:"error"};if(t.logLevel<=e&&typeof console!="undefined"&&console[i]){var i=r[e];"debug"==i?console.debug(n):"info"==i?console.info(n):"warn"==i?console.warn(n):"error"==i?console.error(n):console.log(n)}},t.checked=function(e,n){return t.attrProp(e,"checked",n)},t.attrProp=function(t,n,r){return typeof r!="undefined"&&(e(t).prop?e(t).prop(n,r):r?e(t).attr(n,r):e(t).removeAttr(n)),e(t).prop?e(t).prop(n):e(t).attr(n)},e.alpaca=window.Alpaca=t,e.fn.alpaca=function(){var e=t.makeArray(arguments),n=[].concat(this,e);return t.apply(this,n)},e.fn.outerHTML=function(t){return t?e("<div></div>").append(this).html():e("<div></div>").append(this.clone()).html()},e.fn.swapWith=function(t){return this.each(function(){var n=e(t).clone(),r=e(this).clone();e(t).replaceWith(r),e(this).replaceWith(n)})},e.fn.attrProp=function(n,r){return t.attrProp(e(this),n,r)},e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}}(jQuery),function(){Alpaca.TemplateEngineRegistry=function(){var e={};return{register:function(t,n){e[t]=n},find:function(t){var n=null;if(e[t])n=e[t];else for(var r in e){var i=e[r].supportedMimetypes();for(var s=0;s<i.length;s++)if(t.toLowerCase()==i[s].toLowerCase()){n=e[r];break}}return n},ids:function(){var t=[];for(var n in e)t.push(n);return t}}}()}(),function(e){typeof Alpaca.TemplateCache=="undefined"&&(Alpaca.TemplateCache={}),Alpaca.AbstractTemplateEngine=Base.extend({constructor:function(t){this.base(),this.id=t,this.cleanMarkup=function(t){var n=Alpaca.safeDomParse(t);return e(n).length==1&&e(n)[0].nodeName.toLowerCase()=="script"&&(t=e(n).html()),t}},compile:function(t,n,r){var i=this,s="html";if(Alpaca.isString(n))if(n.indexOf("./")===0||n.indexOf("/")===0||n.indexOf("../")===0)s="uri";else if(n.indexOf("#")===0||n.indexOf(".")===0||n.indexOf("[")===0)s="selector";if(s=="selector")i._compile(t,n,r);else if(s=="uri"){var o=i.fileExtension(),u=n;u.indexOf("."+o)===-1&&(u+="."+o),e.ajax({url:u,dataType:"html",success:function(e){e=i.cleanMarkup(e),i._compile(t,e,r)},failure:function(e){r(e,null)}})}else if(s=="html"){var f=n;f instanceof jQuery&&(f=Alpaca.safeDomParse(n).outerHTML()),i._compile(t,f,r)}else r(new Error("Template engine cannot determine how to handle type: "+s))},_compile:function(e,t,n){Alpaca.isEmpty(t)&&(t=""),t=Alpaca.trim(t),t.toLowerCase().indexOf("<script")!==0&&(t="<script type='"+this.supportedMimetypes()[0]+"'>"+t+"</script>"),Alpaca.logDebug("Compiling template: "+this.id+", cacheKey: "+e+", template: "+t),this.doCompile(e,t,n)},doCompile:function(e,t,n){},execute:function(t,n,r){Alpaca.logDebug("Executing template for cache key: "+t);var i=this.doExecute(t,n,r),s=function(t){var n=Alpaca.safeDomParse(t);return e(n).length==1&&e(n)[0].nodeName.toLowerCase()=="script"?e(n).html():t};return i=s(i),i},doExecute:function(e,t,n){},fileExtension:function(){return"html"},supportedMimetypes:function(){return[]},isCached:function(e){}})}(jQuery),function(e){Alpaca.JQueryTemplateEngine=Alpaca.AbstractTemplateEngine.extend({fileExtension:function(){return"html"},supportedMimetypes:function(){return["text/x-jquery-template","text/x-jquery-tmpl"]},doCompile:function(t,n,r){try{e.template(t,n)}catch(i){r(i);return}Alpaca.TemplateCache[t]=n,r()},doExecute:function(t,n,r){var i=this,s=null;try{var o=e.tmpl(t,n);o=o.outerHTML();var u=-1;do{u=o.indexOf("_tmplitem=");if(u>-1){var f=o.indexOf(" ",u);f==-1&&(f=o.indexOf(">",u));if(f==-1)throw new Error("Should have found closing whitespace or '>' for _tmplitem attribute");o=o.substring(0,u)+o.substring(f)}}while(u>-1);s=Alpaca.safeDomParse(o)}catch(l){return r({message:l.message}),null}return s},isCached:function(e){return Alpaca.TemplateCache[e]?!0:!1}}),Alpaca.TemplateEngineRegistry.register("tmpl",new Alpaca.JQueryTemplateEngine("tmpl"))}(jQuery),function(e){Alpaca.EJSTemplateEngine=Alpaca.AbstractTemplateEngine.extend({fileExtension:function(){return"ejs"},supportedMimetypes:function(){return["text/x-ejs-template","text/x-ejs-tmpl"]},doCompile:function(e,t,n){var r=null;try{r=new EJS({name:e,text:t})}catch(i){n(i);return}Alpaca.TemplateCache[e]=r,n()},doExecute:function(e,t,n){var r=Alpaca.TemplateCache[e],i=null;try{i=r.render(t)}catch(s){return n(s),null}return i},isCached:function(e){return Alpaca.TemplateCache[e]?!0:!1}}),Alpaca.TemplateEngineRegistry.register("ejs",new Alpaca.EJSTemplateEngine("ejs"))}(jQuery),function(e){Alpaca.HandlebarsTemplateEngine=Alpaca.AbstractTemplateEngine.extend({fileExtension:function(){return"html"},supportedMimetypes:function(){return["text/x-handlebars-template","text/x-handlebars-tmpl"]},doCompile:function(e,t,n){var r=null;try{r=Handlebars.compile(t)}catch(i){n(i);return}Alpaca.TemplateCache[e]=r,n()},doExecute:function(e,t,n){var r=Alpaca.TemplateCache[e],i=null;try{i=r(t)}catch(s){return n(s),null}return i},isCached:function(e){return Alpaca.TemplateCache[e]?!0:!1}}),Alpaca.TemplateEngineRegistry.register("handlebars",new Alpaca.HandlebarsTemplateEngine("handlebars"))}(jQuery),function(e){var t=e.alpaca;t.styleInjections={},t.registerView({id:"VIEW_BASE",title:"Abstract base view",description:"Foundation view which provides an abstract view from which all other views extend.",messages:{countries:{afg:"Afghanistan",ala:"Aland Islands",alb:"Albania",dza:"Algeria",asm:"American Samoa",and:"Andorra",ago:"Angola",aia:"Anguilla",ata:"Antarctica",atg:"Antigua and Barbuda",arg:"Argentina",arm:"Armenia",abw:"Aruba",aus:"Australia",aut:"Austria",aze:"Azerbaijan",bhs:"Bahamas",bhr:"Bahrain",bgd:"Bangladesh",brb:"Barbados",blr:"Belarus",bel:"Belgium",blz:"Belize",ben:"Benin",bmu:"Bermuda",btn:"Bhutan",bol:"Bolivia",bih:"Bosnia and Herzegovina",bwa:"Botswana",bvt:"Bouvet Island",bra:"Brazil",iot:"British Indian Ocean Territory",brn:"Brunei Darussalam",bgr:"Bulgaria",bfa:"Burkina Faso",bdi:"Burundi",khm:"Cambodia",cmr:"Cameroon",can:"Canada",cpv:"Cape Verde",cym:"Cayman Islands",caf:"Central African Republic",tcd:"Chad",chl:"Chile",chn:"China",cxr:"Christmas Island",cck:"Cocos (Keeling), Islands",col:"Colombia",com:"Comoros",cog:"Congo",cod:"Congo, the Democratic Republic of the",cok:"Cook Islands",cri:"Costa Rica",hrv:"Croatia",cub:"Cuba",cyp:"Cyprus",cze:"Czech Republic",civ:"Cote d'Ivoire",dnk:"Denmark",dji:"Djibouti",dma:"Dominica",dom:"Dominican Republic",ecu:"Ecuador",egy:"Egypt",slv:"El Salvador",gnq:"Equatorial Guinea",eri:"Eritrea",est:"Estonia",eth:"Ethiopia",flk:"Falkland Islands (Malvinas),",fro:"Faroe Islands",fji:"Fiji",fin:"Finland",fra:"France",guf:"French Guiana",pyf:"French Polynesia",atf:"French Southern Territories",gab:"Gabon",gmb:"Gambia",geo:"Georgia",deu:"Germany",gha:"Ghana",gib:"Gibraltar",grc:"Greece",grl:"Greenland",grd:"Grenada",glp:"Guadeloupe",gum:"Guam",gtm:"Guatemala",ggy:"Guernsey",gin:"Guinea",gnb:"Guinea-Bissau",guy:"Guyana",hti:"Haiti",hmd:"Heard Island and McDonald Islands",vat:"Holy See (Vatican City State),",hnd:"Honduras",hkg:"Hong Kong",hun:"Hungary",isl:"Iceland",ind:"India",idn:"Indonesia",irn:"Iran, Islamic Republic of",irq:"Iraq",irl:"Ireland",imn:"Isle of Man",isr:"Israel",ita:"Italy",jam:"Jamaica",jpn:"Japan",jey:"Jersey",jor:"Jordan",kaz:"Kazakhstan",ken:"Kenya",kir:"Kiribati",prk:"Korea, Democratic People's Republic of",kor:"Korea, Republic of",kwt:"Kuwait",kgz:"Kyrgyzstan",lao:"Lao People's Democratic Republic",lva:"Latvia",lbn:"Lebanon",lso:"Lesotho",lbr:"Liberia",lby:"Libyan Arab Jamahiriya",lie:"Liechtenstein",ltu:"Lithuania",lux:"Luxembourg",mac:"Macao",mkd:"Macedonia, the former Yugoslav Republic of",mdg:"Madagascar",mwi:"Malawi",mys:"Malaysia",mdv:"Maldives",mli:"Mali",mlt:"Malta",mhl:"Marshall Islands",mtq:"Martinique",mrt:"Mauritania",mus:"Mauritius",myt:"Mayotte",mex:"Mexico",fsm:"Micronesia, Federated States of",mda:"Moldova, Republic of",mco:"Monaco",mng:"Mongolia",mne:"Montenegro",msr:"Montserrat",mar:"Morocco",moz:"Mozambique",mmr:"Myanmar",nam:"Namibia",nru:"Nauru",npl:"Nepal",nld:"Netherlands",ant:"Netherlands Antilles",ncl:"New Caledonia",nzl:"New Zealand",nic:"Nicaragua",ner:"Niger",nga:"Nigeria",niu:"Niue",nfk:"Norfolk Island",mnp:"Northern Mariana Islands",nor:"Norway",omn:"Oman",pak:"Pakistan",plw:"Palau",pse:"Palestinian Territory, Occupied",pan:"Panama",png:"Papua New Guinea",pry:"Paraguay",per:"Peru",phl:"Philippines",pcn:"Pitcairn",pol:"Poland",prt:"Portugal",pri:"Puerto Rico",qat:"Qatar",rou:"Romania",rus:"Russian Federation",rwa:"Rwanda",reu:"Reunion",blm:"Saint Barthelemy",shn:"Saint Helena",kna:"Saint Kitts and Nevis",lca:"Saint Lucia",maf:"Saint Martin (French part)",spm:"Saint Pierre and Miquelon",vct:"Saint Vincent and the Grenadines",wsm:"Samoa",smr:"San Marino",stp:"Sao Tome and Principe",sau:"Saudi Arabia",sen:"Senegal",srb:"Serbia",syc:"Seychelles",sle:"Sierra Leone",sgp:"Singapore",svk:"Slovakia",svn:"Slovenia",slb:"Solomon Islands",som:"Somalia",zaf:"South Africa",sgs:"South Georgia and the South Sandwich Islands",esp:"Spain",lka:"Sri Lanka",sdn:"Sudan",sur:"Suriname",sjm:"Svalbard and Jan Mayen",swz:"Swaziland",swe:"Sweden",che:"Switzerland",syr:"Syrian Arab Republic",twn:"Taiwan, Province of China",tjk:"Tajikistan",tza:"Tanzania, United Republic of",tha:"Thailand",tls:"Timor-Leste",tgo:"Togo",tkl:"Tokelau",ton:"Tonga",tto:"Trinidad and Tobago",tun:"Tunisia",tur:"Turkey",tkm:"Turkmenistan",tca:"Turks and Caicos Islands",tuv:"Tuvalu",uga:"Uganda",ukr:"Ukraine",are:"United Arab Emirates",gbr:"United Kingdom",usa:"United States",umi:"United States Minor Outlying Islands",ury:"Uruguay",uzb:"Uzbekistan",vut:"Vanuatu",ven:"Venezuela",vnm:"Viet Nam",vgb:"Virgin Islands, British",vir:"Virgin Islands, U.S.",wlf:"Wallis and Futuna",esh:"Western Sahara",yem:"Yemen",zmb:"Zambia",zwe:"Zimbabwe"},empty:"",required:"This field is required",valid:"",invalid:"This field is invalid",months:["January","February","March","April","May","June","July","August","September","October","November","December"],timeUnits:{SECOND:"seconds",MINUTE:"minutes",HOUR:"hours",DAY:"days",MONTH:"months",YEAR:"years"}}})}(jQuery),function(e){var t=e.alpaca;t.styleInjections={},t.registerView({id:"VIEW_WEB_DISPLAY",parent:"VIEW_BASE",title:"Default Web Display View",description:"Default web edit view which goes though field hierarchy.",type:"view",platform:"web",displayReadonly:!0,templates:{controlField:'<div class="alpaca-data-container">{{if options.label}}<div class="alpaca-data-label">${options.label}</div>{{/if}}<div class="alpaca-data">&nbsp;${data}</div></div>',fieldSetOuterEl:'<div class="ui-widget ui-widget-content">{{html this.html}}</div>',fieldSetLegend:'{{if options.label}}<div class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</div>{{/if}}',fieldSetItemsContainer:"<div>{{html this.html}}</div>",fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',controlFieldContainer:"<div>{{html this.html}}</div>",arrayToolbar:"",arrayItemToolbar:""}}),t.registerView({id:"VIEW_WEB_EDIT",parent:"VIEW_BASE",title:"Default Web Edit View",description:"Default web edit view which goes though field hierarchy.",type:"edit",platform:"web",displayReadonly:!0,templates:{controlFieldOuterEl:"<span>{{html this.html}}</span>",controlFieldMessage:'<div><span class="ui-icon ui-icon-alert"></span><span class="alpaca-controlfield-message-text">${message}</span></div>',controlFieldLabel:'{{if options.label}}<div class="{{if options.labelClass}}${options.labelClass}{{/if}}"><div>${options.label}</div></div>{{/if}}',controlFieldHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}"><span class="ui-icon ui-icon-info"></span><span class="alpaca-controlfield-helper-text">${options.helper}</span></div>{{/if}}',controlFieldContainer:"<div>{{html this.html}}</div>",controlField:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldLabel")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldContainer",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldHelper")}}{{/wrap}}{{/wrap}}',fieldSetOuterEl:"<fieldset>{{html this.html}}</fieldset>",fieldSetMessage:'<div><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span><span>${message}</span></div>',fieldSetLegend:'{{if options.label}}<legend class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</legend>{{/if}}',fieldSetHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</div>{{/if}}',fieldSetItemsContainer:"<div>{{html this.html}}</div>",fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{html Alpaca.fieldTemplate(this,"fieldSetHelper")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',fieldSetItemContainer:"<div></div>",formFieldsContainer:"<div>{{html this.html}}</div>",formButtonsContainer:'<div>{{if options.buttons}}{{each(k,v) options.buttons}}<button data-key="${k}" class="alpaca-form-button alpaca-form-button-${k}" {{each(k1,v1) v}}${k1}="${v1}"{{/each}}>${v.value}</button>{{/each}}{{/if}}</div>',form:'<form>{{html Alpaca.fieldTemplate(this,"formFieldsContainer")}}{{html Alpaca.fieldTemplate(this,"formButtonsContainer")}}</form>',wizardStep:'<div class="alpaca-clear"></div>',wizardNavBar:"<div></div>",wizardPreButton:"<button>Back</button>",wizardNextButton:"<button>Next</button>",wizardDoneButton:"<button>Done</button>",wizardStatusBar:'<ol id="${id}">{{each(i,v) titles}}<li id="stepDesc${i}"><div><strong><span>${v.title}</span>${v.description}</strong></div></li>{{/each}}</ol>'}}),t.registerView({id:"VIEW_WEB_CREATE",parent:"VIEW_WEB_EDIT",title:"Default Web Create View",description:"Default web create view which doesn't bind initial data.",type:"create",displayReadonly:!1})}(jQuery),function(e){var t=e.alpaca,n={controlFieldOuterEl:'<span class="alpaca-view-web-list">{{html this.html}}</span>',controlFieldMessage:'<div><span class="ui-icon ui-icon-alert"></span><span class="alpaca-controlfield-message-text">${message}</span></div>',controlFieldLabel:'{{if options.label}}<label for="${id}" class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</label>{{/if}}',controlFieldHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}"><span class="ui-icon ui-icon-info"></span><span class="alpaca-controlfield-helper-text">${options.helper}</span></div>{{/if}}',controlFieldContainer:"<div>{{html this.html}}</div>",controlField:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldLabel")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldContainer",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldHelper")}}{{/wrap}}{{/wrap}}',fieldSetOuterEl:'<fieldset class="alpaca-view-web-list">{{html this.html}}</fieldset>',fieldSetMessage:'<div><span class="ui-icon ui-icon-alert alpaca-fieldset-message-list-view"></span><span>${message}</span></div>',fieldSetLegend:'{{if options.label}}<legend class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</legend>{{/if}}',fieldSetHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</div>{{/if}}',fieldSetItemsContainer:"<ol>{{html this.html}}</ol>",fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{html Alpaca.fieldTemplate(this,"fieldSetHelper")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',fieldSetItemContainer:'<li style="list-style:none;"></li>',itemLabel:'{{if options.itemLabel}}<label for="${id}" class="alpaca-controlfield-label alpaca-controlfield-label-list-view"><span class="alpaca-controlfield-item-label-list-view">${options.itemLabel}{{if index}} <span class="alpaca-item-label-counter">${index}</span></span>{{/if}}</label>{{/if}}'};t.registerView({id:"VIEW_WEB_DISPLAY_LIST",parent:"VIEW_WEB_DISPLAY",title:"Web Display View List Style",description:"Web display view based on list styles.",legendStyle:"link",templates:n,styles:{},fields:{"/":{templates:{fieldSetItemsContainer:'<ol class="alpaca-fieldset-itemscontainer-list-view-top">{{html this.html}}</ol>',fieldSetItemContainer:'<li class="alpaca-fieldset-itemcontainer-list-view-top"></li>'}}}}),t.registerView({id:"VIEW_WEB_EDIT_LIST",parent:"VIEW_WEB_EDIT",title:"Web Edit View List Style",description:"Web edit view based on list styles.",legendStyle:"link",templates:n,styles:{},fields:{"/":{templates:{fieldSetItemsContainer:'<ol class="alpaca-fieldset-itemscontainer-list-view-top">{{html this.html}}</ol>',fieldSetItemContainer:'<li class="alpaca-fieldset-itemcontainer-list-view-top"></li>'}}}}),t.registerView({id:"VIEW_WEB_CREATE_LIST",parent:"VIEW_WEB_CREATE",title:"Web Create View List Style",description:"Web create view based on list styles.",legendStyle:"link",templates:n,styles:{},fields:{"/":{templates:{fieldSetItemsContainer:'<ol class="alpaca-fieldset-itemscontainer-list-view-top">{{html this.html}}</ol>',fieldSetItemContainer:'<li class="alpaca-fieldset-itemcontainer-list-view-top"></li>'}}}})}(jQuery),function(e){var t=e.alpaca;t.styleInjections["jquery-ui"]={field:function(e){e.addClass("ui-widget")},required:function(t){e('<span class="ui-icon ui-icon-star"></span>').prependTo(t)},error:function(e){e.addClass("ui-state-error")},errorMessage:function(e){e.addClass("ui-state-error-text")},removeError:function(e){e.removeClass("ui-state-error")},container:function(e){e.addClass("ui-widget-content")},wizardStatusBar:function(e){e.addClass("ui-widget-header ui-corner-all")},wizardCurrentStep:function(e){e.addClass("ui-state-highlight ui-corner-all")},wizardUnCurrentStep:function(e){e.removeClass("ui-state-highlight ui-corner-all")},containerExpandedIcon:"ui-icon-circle-arrow-s",containerCollapsedIcon:"ui-icon-circle-arrow-e",commonIcon:"ui-icon",addIcon:"ui-icon-circle-plus",removeIcon:"ui-icon-circle-minus",upIcon:"ui-icon-circle-arrow-n",downIcon:"ui-icon-circle-arrow-s",wizardPreIcon:"ui-icon-triangle-1-w",wizardNextIcon:"ui-icon-triangle-1-e",wizardDoneIcon:"ui-icon-triangle-1-e",buttonBeautifier:function(t,n,r){t.addClass("ui-button ui-widget ui-state-default ui-corner-all"),r?t.addClass("ui-button-text-icon-primary"):t.addClass("ui-button-icon-only");var i=t.html();t.attr("title",i),t.empty().append('<span class="ui-button-icon-primary ui-icon alpaca-fieldset-legend-button '+n+'"></span><span class="ui-button-text">'+i+"</span>"),t.hover(function(){t.hasClass("alpaca-fieldset-array-item-toolbar-disabled")||e(this).addClass("ui-state-hover")},function(){t.hasClass("alpaca-fieldset-array-item-toolbar-disabled")||e(this).removeClass("ui-state-hover")})}},t.registerView({id:"VIEW_JQUERYUI_DISPLAY",parent:"VIEW_WEB_DISPLAY",title:"Web Display View for jQuery UI",description:"Web Display View for jQuery UI",style:"jquery-ui",ui:"jquery-ui"}),t.registerView({id:"VIEW_JQUERYUI_EDIT",parent:"VIEW_WEB_EDIT",title:"Web Edit View for jQuery UI",description:"Web Edit View for jQuery UI",style:"jquery-ui",ui:"jquery-ui"}),t.registerView({id:"VIEW_JQUERYUI_CREATE",parent:"VIEW_WEB_CREATE",title:"Web Create View for jQuery UI",description:"Web Create View for jQuery UI",style:"jquery-ui",ui:"jquery-ui"}),t.registerView({id:"VIEW_JQUERYUI_EDIT_LIST",parent:"VIEW_WEB_EDIT_LIST",title:"JQuery UI Edit View List Style",description:"JQuery UI edit view based on list styles.",style:"jquery-ui",ui:"jquery-ui"}),t.registerView({id:"VIEW_JQUERYUI_CREATE_LIST",parent:"VIEW_WEB_CREATE_LIST",title:"JQuery UI Create View List Style",description:"JQuery UI create view based on list styles.",style:"jquery-ui",ui:"jquery-ui"})}(jQuery),function(e){var t=e.alpaca;t.styleInjections["jquery-mobile"]={array:function(e){e&&e.find('[data-role="fieldcontain"]').fieldcontain&&(e.find('[data-role="fieldcontain"]').fieldcontain(),e.find('[data-role="fieldcontain"]').find("[type='radio'], [type='checkbox']").checkboxradio(),e.find('[data-role="fieldcontain"]').find("button, [data-role='button'], [type='button'], [type='submit'], [type='reset'], [type='image']").not(".ui-nojs").button(),e.find('[data-role="fieldcontain"]').find("input, textarea").not("[type='radio'], [type='checkbox'], button, [type='button'], [type='submit'], [type='reset'], [type='image']").textinput(),e.find('[data-role="fieldcontain"]').find("input, select").filter("[data-role='slider'], [data-type='range']").slider(),e.find('[data-role="fieldcontain"]').find("select:not([data-role='slider'])").selectmenu(),e.find('[data-role="button"]').buttonMarkup(),e.find('[data-role="controlgroup"]').controlgroup())}},t.registerView({id:"VIEW_MOBILE_DISPLAY",parent:"VIEW_WEB_DISPLAY",title:"Mobile DISPLAY View",description:"Mobile display view using JQuery Mobile Library",type:"view",platform:"mobile",style:"jquery-mobile",ui:"mobile",legendStyle:"link",toolbarStyle:"link",buttonType:"link",templates:{controlField:'<ul data-role="listview"><li>{{if options.label}}<h4>${options.label}</h4>{{/if}}<p><strong>${data}</strong></p></li></ul>',fieldSetOuterEl:'<fieldset data-role="collapsible" id="${id}" data-collapsed="{{if options.collapsed}}true{{else}}false{{/if}}">{{html this.html}}</fieldset>',fieldSetMessage:"<div>* ${message}</div>",fieldSetLegend:'{{if options.label}}<legend for="${id}" class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</legend>{{/if}}',fieldSetHelper:'{{if options.helper}}<h3 class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</h3>{{/if}}',fieldSetItemsContainer:'<div data-role="controlgroup">{{html this.html}}</div>',fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{html Alpaca.fieldTemplate(this,"fieldSetHelper")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',fieldSetItemContainer:"<div></div>"},messages:{required:"Required Field",invalid:"Invalid Field"},render:function(e,t){var r=this;e.render(e.view,function(e){n(e.getEl()),t&&t.call(r,e)})}}),t.registerView({id:"VIEW_MOBILE_EDIT",parent:"VIEW_WEB_EDIT",title:"Mobile Edit View",description:"Mobile edit view using JQuery Mobile Library",type:"edit",platform:"mobile",style:"jquery-mobile",ui:"mobile",legendStyle:"link",toolbarStyle:"link",buttonType:"link",toolbarSticky:!0,templates:{controlFieldOuterEl:'<div data-role="fieldcontain">{{html this.html}}</div>',controlFieldMessage:"<div>* ${message}</div>",controlFieldLabel:'{{if options.label}}<label for="${id}" class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</label>{{/if}}',controlFieldHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</div>{{/if}}',controlFieldContainer:'<div data-replace="true">{{html this.html}}</div>',controlField:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldLabel")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldContainer",true)}}{{/wrap}}{{html Alpaca.fieldTemplate(this,"controlFieldHelper")}}{{/wrap}}',fieldSetOuterEl:'<fieldset id="${id}" data-collapsed="{{if options.collapsed}}true{{else}}false{{/if}}">{{html this.html}}</fieldset>',fieldSetMessage:"<div>* ${message}</div>",fieldSetLegend:'{{if options.label}}<legend for="${id}" class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</legend>{{/if}}',fieldSetHelper:'{{if options.helper}}<h3 class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</h3>{{/if}}',fieldSetItemsContainer:'<div data-role="controlgroup">{{html this.html}}</div>',fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{html Alpaca.fieldTemplate(this,"fieldSetHelper")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',fieldSetItemContainer:"<div></div>",formFieldsContainer:'<div data-role="content">{{html this.html}}</div>',form:'<form>{{html Alpaca.fieldTemplate(this,"formFieldsContainer")}}{{html Alpaca.fieldTemplate(this,"formButtonsContainer")}}</form>',controlFieldRadio:'<fieldset data-role="controlgroup" class="alpaca-radio-fieldset" id="${id}">{{each selectOptions}}<input type="radio" {{if options.readonly}}readonly="readonly"{{/if}} name="${name}" id="${id}-${$index}" value="${value}" {{if value == data}}checked="checked"{{/if}}/><label for="${id}-${$index}">${text}</label>{{/each}}</fieldset>',controlFieldCheckbox:'<fieldset data-role="controlgroup" class="alpaca-radio-fieldset" id="${id}-0"><input type="checkbox" id="${id}-1" name="${id}-1" {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each options.data}}data-${fieldId}="${value}"{{/each}}/>{{if options.rightLabel}}<label for="${id}-1">${options.rightLabel}</label>{{else}}{{if options.label}}<label for="${id}-1">${options.label}?</label>{{/if}}{{/if}}</fieldset>',arrayItemToolbar:'<div class="alpaca-fieldset-array-item-toolbar" data-role="controlgroup" data-type="horizontal" data-mini="true"><span class="alpaca-fieldset-array-item-toolbar-add" data-role="button" data-icon="add" data-iconpos="notext">Add</span><span class="alpaca-fieldset-array-item-toolbar-remove" data-role="button" data-icon="delete" data-iconpos="notext">Delete</span><span class="alpaca-fieldset-array-item-toolbar-up" data-role="button" data-icon="arrow-u" data-iconpos="notext">Up</span><span class="alpaca-fieldset-array-item-toolbar-down" data-role="button" data-icon="arrow-d" data-iconpos="notext">Down</span></div>',arrayToolbar:'<div class="alpaca-fieldset-array-toolbar" data-role="controlgroup"  data-mini="true"><span class="alpaca-fieldset-array-toolbar-icon alpaca-fieldset-array-toolbar-add" data-role="button" data-icon="add" data-inline="true" title="Add">Add</span></div>'},messages:{required:"Required Field",invalid:"Invalid Field"},render:function(e,t){var r=this;e.render(function(e){n(e.getEl()),t&&t.call(r,e)})}});var n=function(n){var r=n;while(!t.isEmpty(r)&&r.attr("data-role")!=="page")r=r.parent();t.isEmpty(r)||e(r).trigger("pagecreate")};t.registerView({id:"VIEW_MOBILE_CREATE",parent:"VIEW_MOBILE_EDIT",title:"Default Mobile Create View",description:"Default mobile create view which doesn't bind initial data.",type:"create",displayReadonly:!1})}(jQuery),function(e){var t=e.alpaca;t.styleInjections.bootstrap={error:function(e){e.addClass("control-group error")},errorMessage:function(e){e.addClass("")},removeError:function(e){e.removeClass("error")},field:function(e){e.addClass("control-group")},required:function(t){e('<span class="icon-star"></span>&nbsp;').prependTo(t)},container:function(e){e.addClass("")},wizardStatusBar:function(e){e.addClass("ui-widget-header ui-corner-all")},wizardCurrentStep:function(e){e.addClass("ui-state-highlight ui-corner-all")},wizardUnCurrentStep:function(e){e.removeClass("ui-state-highlight ui-corner-all")},commonIcon:"",addIcon:"icon-plus-sign",removeIcon:"icon-minus-sign",upIcon:"icon-chevron-up",downIcon:"icon-chevron-down",wizardPreIcon:"ui-icon-triangle-1-w",wizardNextIcon:"ui-icon-triangle-1-e",wizardDoneIcon:"ui-icon-triangle-1-e",containerExpandedIcon:"icon-circle-arrow-down",containerCollapsedIcon:"icon-circle-arrow-right",buttonBeautifier:function(e,t,n){var r=e.html();e.attr("title",r);var i=n?r:"";e.empty().append('<b class="alpaca-fieldset-legend-button '+t+'"></b><span>'+i+"</span>")}};var n={controlFieldLabel:'{{if options.label}}<label class="control-label {{if options.labelClass}}${options.labelClass}{{/if}}" for="${id}">${options.label}</label>{{/if}}',controlFieldHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}"><i class="icon-info-sign"></i> <span class="alpaca-controlfield-helper-text">${options.helper}</span></div>{{/if}}',controlFieldMessage:'<div><span class="icon-exclamation-sign"></span><span class="alpaca-controlfield-message-text help-inline">${message}</span></div>',arrayToolbar:'<span class="alpaca-fieldset-array-toolbar"><button class="btn alpaca-fieldset-array-toolbar-icon alpaca-fieldset-array-toolbar-add">${addItemLabel}</button></span>',arrayItemToolbar:'<div class="btn-toolbar alpaca-fieldset-array-item-toolbar"><div class="btn-group">{{each(k,v) buttons}}<button class="btn btn-small alpaca-fieldset-array-item-toolbar-icon alpaca-fieldset-array-item-toolbar-${v.feature}">${v.label}</button>{{/each}}</div></div>',controlFieldCheckbox:'<span>{{if options.rightLabel}}<label for="${id}" class="checkbox">{{/if}}<input type="checkbox" id="${id}" {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>{{if options.rightLabel}}${options.rightLabel}</label>{{/if}}</span>',controlFieldRadio:'<div id="${id}" class="alpaca-controlfield-radio">{{if !required}}<label class="alpaca-controlfield-radio-label radio inline"><input type="radio" {{if options.readonly}}readonly="readonly"{{/if}} name="${name}" value=""/>None</label>{{/if}}{{each selectOptions}}<label class="alpaca-controlfield-radio-label radio inline"><input type="radio" {{if options.readonly}}readonly="readonly"{{/if}} name="${name}" value="${value}" {{if value == data}}checked="checked"{{/if}}/>${text}</label>{{/each}}</div>',fieldSetHelper:'{{if options.helper}}<p class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</p>{{/if}}'},r=function(t,n){var r=this;t.render(function(t){e("select,input,textarea",t.outerEl).addClass("input-xlarge"),e("button:submit, button:reset, .alpaca-form-button").addClass("btn"),n&&n.call(r,t)})};t.registerView({id:"VIEW_BOOTSTRAP_DISPLAY",parent:"VIEW_WEB_DISPLAY",title:"Display View for Bootstrap",description:"Display View for Bootstrap",style:"bootstrap",ui:"bootstrap",templates:n,render:r}),t.registerView({id:"VIEW_BOOTSTRAP_EDIT",parent:"VIEW_WEB_EDIT",title:"Edit View for Bootstrap",description:"Edit View for Bootstrap",style:"bootstrap",ui:"bootstrap",templates:n,render:r}),t.registerView({id:"VIEW_BOOTSTRAP_CREATE",parent:"VIEW_WEB_CREATE",title:"Create View for Bootstrap",description:"Create View for Bootstrap",style:"bootstrap",ui:"bootstrap",templates:n,render:r})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_WEB_EDIT_TABLE",parent:"VIEW_WEB_EDIT",title:"Web Edit View Table Style",description:"Web edit view based on table styles.",type:"edit",displayReadonly:!0,collapsible:!1,legendStyle:"link",templates:{controlFieldOuterEl:null,controlFieldLabel:'<td>{{if options.label}}<label for="${id}" class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</label>{{/if}}</td>',controlFieldContainer:'<td data-control="append">{{html this.html}}</td>',controlFieldMessage:'<div><span class="ui-icon ui-icon-alert"></span><span class="alpaca-controlfield-message-text">${message}</span></div>',controlFieldHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}"><span class="ui-icon ui-icon-info"></span><span class="alpaca-controlfield-helper-text">${options.helper}</span></div>{{/if}}',controlField:'{{html Alpaca.fieldTemplate(this,"controlFieldLabel")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldContainer",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldHelper")}}{{/wrap}}',fieldSetOuterEl:'<fieldset class="alpaca-view-web-edit-table">{{html this.html}}</fieldset>',fieldSetMessage:'<div><span class="ui-icon ui-icon-alert alpaca-fieldset-message-table-view"></span><span>${message}</span></div>',fieldSetLegend:'{{if options.label}}<legend class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</legend>{{/if}}',fieldSetHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</div>{{/if}}',fieldSetItemsContainer:"<table><tbody>{{html this.html}}</tbody></table>",fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{html Alpaca.fieldTemplate(this,"fieldSetHelper")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',fieldSetItemContainer:"<tr></tr>",itemLabel:'{{if options.itemLabel}}<label for="${id}" class="alpaca-controlfield-label alpaca-controlfield-label-list-view"><span class="alpaca-controlfield-item-label-list-view">${options.itemLabel}{{if index}} <span class="alpaca-item-label-counter">${index}</span></span>{{/if}}</label>{{/if}}'},styles:{},fields:{"/":{templates:{fieldSetItemsContainer:'<table class="alpaca-fieldset-itemscontainer-list-view-top">{{html this.html}}</table>',fieldSetItemContainer:'<tr class="alpaca-fieldset-itemscontainer-list-view-top"></tr>'}}}}),t.registerView({id:"VIEW_WEB_CREATE_TABLE",parent:"VIEW_WEB_EDIT_TABLE",title:"Default Web Create View Table Stle",description:"Default web create view (Table Style) which doesn't bind initial data.",type:"create",displayReadonly:!1})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_WEB_EDIT_YAML",parent:"VIEW_WEB_EDIT",title:"Web Edit View List Style",description:"Web edit list styled to look like a YAML editor.",type:"edit",displayReadonly:!0,collapsible:!0,legendStyle:"link",templates:{controlFieldOuterEl:'<span class="alpaca-view-web-edit-yaml" title="${options.helper}">{{html this.html}}</span>',controlFieldMessage:'<div><span class="ui-icon ui-icon-alert"></span><span class="alpaca-controlfield-message-text">${message}</span></div>',controlFieldLabel:'{{if options.label}}<label for="${id}" class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}:</label>{{/if}}',controlFieldHelper:'<span style="display:none" />',controlFieldContainer:"<div>{{html this.html}}</div>",controlField:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldLabel")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"controlFieldContainer",true)}}{{html Alpaca.fieldTemplate(this,"controlFieldHelper")}}{{/wrap}}{{/wrap}}',fieldSetOuterEl:'<fieldset class="alpaca-view-web-edit-yaml">{{html this.html}}</fieldset>',fieldSetMessage:'<div><span class="ui-icon ui-icon-alert alpaca-fieldset-message-list-view"></span><span>${message}</span></div>',fieldSetLegend:'{{if options.label}}<legend class="{{if options.labelClass}}${options.labelClass}{{/if}}">${options.label}</legend>{{/if}}',fieldSetHelper:'{{if options.helper}}<div class="{{if options.helperClass}}${options.helperClass}{{/if}}">${options.helper}</div>{{/if}}',fieldSetItemsContainer:"<ol>{{html this.html}}</ol>",fieldSet:'{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetOuterEl",true)}}{{html Alpaca.fieldTemplate(this,"fieldSetLegend")}}{{html Alpaca.fieldTemplate(this,"fieldSetHelper")}}{{wrap(null, {}) Alpaca.fieldTemplate(this,"fieldSetItemsContainer",true)}}{{/wrap}}{{/wrap}}',fieldSetItemContainer:'<li style="list-style:none;"></li>',itemLabel:'{{if options.itemLabel}}<label for="${id}" class="alpaca-controlfield-label alpaca-controlfield-label-list-view"><span class="alpaca-controlfield-item-label-list-view">${options.itemLabel}{{if index}} <span class="alpaca-item-label-counter">${index}</span></span>{{/if}}</label>{{/if}}'},styles:{},fields:{"/":{templates:{fieldSetItemsContainer:'<ol class="alpaca-fieldset-itemscontainer-list-view-top">{{html this.html}}</ol>',fieldSetItemContainer:'<li class="alpaca-fieldset-itemcontainer-list-view-top"></li>'}}}})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_WEB_EDIT_INLINE",parent:"VIEW_WEB_EDIT",title:"Default Web Edit with fields inlining capabilities",description:"Edit template with form fields inlining capabilities, via options.inline level to display some forms parts inline. Useful to display for example an ArrayField containing ObjectField items in a compact manner.",type:"edit",platform:"web",style:"jquery-ui",displayReadonly:!0,templates:{fieldSetOuterEl:'<fieldset class="{{if options.inline}}alpaca-inline{{/if}}">{{html this.html}}</fieldset>',fieldSetItemContainer:'<div class="alpaca-inline-item-container"></div>',arrayItemToolbar:'<div class="alpaca-fieldset-array-item-toolbar" data-role="controlgroup" data-type="horizontal" data-mini="true"><span class="alpaca-fieldset-array-item-toolbar-add" data-role="button" data-icon="add" data-iconpos="notext">Add</span><span class="alpaca-fieldset-array-item-toolbar-remove" data-role="button" data-icon="delete" data-iconpos="notext">Delete</span><span class="alpaca-fieldset-array-item-toolbar-up" data-role="button" data-icon="arrow-u" data-iconpos="notext">Up</span><span class="alpaca-fieldset-array-item-toolbar-down" data-role="button" data-icon="arrow-d" data-iconpos="notext">Down</span></div>'}})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_WEB_EDIT",templates:{twoColumnLayout:'<div class="alpaca-layout-two-column-mask">{{if options.label}}<h3>${options.label}</h3>{{/if}}{{if options.helper}}<h4>${options.helper}</h4>{{/if}}<div class="alpaca-layout-two-column-left alpaca-layout-region"  id="leftcolumn"></div><div class="alpaca-layout-two-column-right alpaca-layout-region" id="rightcolumn"></div></div>'}}),t.registerView({id:"VIEW_WEB_EDIT_LAYOUT_TWO_COLUMN",parent:"VIEW_WEB_EDIT",title:"Web Edit View with Two-Column Layout",description:"Web edit default view with two-column layout.",layout:{template:"twoColumnLayout"}}),t.registerView({id:"VIEW_WEB_EDIT_LIST_LAYOUT_TWO_COLUMN",parent:"VIEW_WEB_EDIT_LIST",title:"Web List Edit View with Two-Column Layout",description:"Web edit list view with two-column layout.",layout:{template:"twoColumnLayout"}})}(jQuery),function(e){var t=e.alpaca;t.NormalizedView=Base.extend({constructor:function(e){this.id=e},normalize:function(){var e=t.views[this.id];if(!e)return t.logError("View compilation failed - view not found: "+this.id),!1;var n=[],r=e;while(r){n.push(r);var i=r.parent;if(i){var s=t.views[r.parent];if(!s)return t.logError("View compilation failed - cannot find parent view: "+i+" for view: "+r.id),!1;r=s}else r=null}n=n.reverse();var o=function(e,n,r){var i=n[r],s=e[r];!t.isUndefined(s)&&!t.isUndefined(i)&&t.logDebug("View property: "+r+" already has value: "+s+" and overwriting to: "+i),t.isUndefined(i)||(e[r]=i)},u=function(e,n,r){var i=n[r],s=e[r];!t.isUndefined(s)&&!t.isUndefined(i)&&t.logDebug("View property: "+r+" already has function, overwriting"),t.isUndefined(i)||(e[r]=i)},f=function(e,n,r){var i=n[r];i&&(e[r]||(e[r]={}),t.mergeObject2(i,e[r]))};for(var l=0;l<n.length;l++){var c=n[l];o(this,c,"type"),o(this,c,"displayReadonly"),o(this,c,"platform"),o(this,c,"device"),o(this,c,"style"),o(this,c,"ui"),o(this,c,"collapsible"),o(this,c,"legendStyle"),o(this,c,"toolbarStyle"),o(this,c,"buttonStyle"),o(this,c,"toolbarSticky"),o(this,c,"globalTemplate"),u(this,c,"render"),u(this,c,"postRender"),f(this,c,"styles"),f(this,c,"templates"),f(this,c,"messages"),f(this,c,"wizard"),f(this,c,"fields"),f(this,c,"layout"),f(this,c,"compiledTemplates")}return t.logDebug("View compilation complete for view: "+this.id),t.logDebug("Final view: "),t.logDebug(JSON.stringify(this,null,"   ")),!0}})}(jQuery),function(e){var t=e.alpaca;t.RuntimeView=Base.extend({constructor:function(e,t){this.field=t,this.setView(e)},setView:function(e){if(!e){this.id="VIEW_WEB_EDIT";return}var n=t.getNormalizedView(e);if(!n)throw t.logError("Runtime view for view id: "+e+" could not find a normalized view"),new Error("Runtime view for view id: "+e+" could not find a normalized view");for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r])},getWizard:function(){return this.getViewParam("wizard")},getGlobalTemplateDescriptor:function(){return this.getTemplateDescriptor("globalTemplate")},getLayout:function(){var e=this.getTemplateDescriptor("layoutTemplate");return{templateDescriptor:e,bindings:this.getViewParam(["layout","bindings"],!0)}},getStyles:function(){return this.styles},getTemplateDescriptor:function(e){return t.getTemplateDescriptor(this,e)},getMessage:function(e){var n=this.getViewParam(["messages",t.defaultLocale,e]);return t.isEmpty(n)?this.getViewParam(["messages",e]):n},getViewParam:function(e,n){var r=this.field.path;if(this.fields&&this.fields[r]){var i=this._getConfigVal(this.fields[r],e);if(!t.isEmpty(i))return i}if(r&&r.indexOf("[")!=-1&&r.indexOf("]")!=-1){r=r.replace(/\[\d+\]/g,"[*]");if(this.fields&&this.fields[r]){var i=this._getConfigVal(this.fields[r],e);if(!t.isEmpty(i))return i}}return!t.isEmpty(n)&&n&&this.field.path!="/"?null:this._getConfigVal(this,e)},_getConfigVal:function(e,n){if(t.isArray(n))for(var r=0;r<n.length&&!t.isEmpty(e);r++)e=e[n[r]];else t.isEmpty(e)||(e=e[n]);return e},getInjectedStyle:function(e){var n=null,r={};if(this.style){var i=t.styleInjections[this.style];i&&t.mergeObject(i,r)}return n[e]},tmpl:function(e,n){return t.tmpl(this,e,n)}})}(jQuery),function(e){var t=e.alpaca;t.Field=Base.extend({constructor:function(e,n,r,i,s,o,u){var f=this;this.initializing=!0,this.container=e,this.parent=null,this.data=n,this.options=r,this.schema=i,this.connector=o,this.errorCallback=u,this.errorCallback||(this.errorCallback=function(e){alert(e.message?e.message:"Caught some error!")}),this.singleLevelRendering=!1,this.view=new t.RuntimeView(s,this);var l=!1;this.options||(this.options={},l=!0),this.id=this.options.id,this.type=this.options.type,this.id||(this.id=t.generateId());var c=!1;this.schema||(this.schema={},c=!0),!this.options.label&&this.schema.title!==null&&(this.options.label=this.schema.title),!this.options.helper&&this.schema.description!==null&&(this.options.helper=this.schema.description),t.isEmpty(this.options.readonly)&&!t.isEmpty(this.schema.readonly)&&(this.options.readonly=this.schema.readonly),t.isValEmpty(this.data)&&!t.isEmpty(this.schema["default"])&&(this.data=this.schema["default"]),this.path="/",this.validation={},this.backupData=t.copyOf(this.data),this.isDisplayOnly=function(){return f.view.type=="view"}},getDefaultFieldTemplateId:function(){return"controlField"},setDefaultTemplateDescriptor:function(){var e=this.view.getTemplateDescriptor(this.getDefaultFieldTemplateId()),t=this.view.getGlobalTemplateDescriptor(),n=this.view.getLayout(),r=!1;this.parent||(t?(this.setTemplateDescriptor(t),this.singleLevelRendering=!0,r=!0):n&&n.templateDescriptor&&(this.setTemplateDescriptor(n.templateDescriptor),r=!0)),!r&&e&&this.setTemplateDescriptor(e)},setup:function(){this.initializing||(this.data=this.getValue()),this.setDefaultTemplateDescriptor(),t.isUndefined(this.schema.required)&&(this.schema.required=!1),t.isUndefined(this.options.validate)&&(this.options.validate=!0),t.isUndefined(this.options.disabled)&&(this.options.disabled=!1),t.isUndefined(this.options.showMessages)&&(this.options.showMessages=!0)},bindData:function(){t.isEmpty(this.data)||this.setValue(this.data)},render:function(e,n){e&&(t.isString(e)||t.isObject(e))?this.view.setView(e):t.isEmpty(n)&&t.isFunction(e)&&(n=e),this.options.label===null&&this.propertyId&&(this.options.label=this.propertyId),this.options.name&&(this.name=this.options.name);if(!this.name)if(this.parent&&this.parent.name&&this.path){var r=this.path.substring(this.path.lastIndexOf("/")+1);r.indexOf("[")!=-1&&r.indexOf("]")!=-1&&(r=r.substring(r.indexOf("[")+1,r.indexOf("]"))),r&&(this.name=this.parent.name+"_"+r,this.nameCalculated=!0)}else this.path&&(this.name=this.path.replace(/\//g,"").replace(/\[/g,"_").replace(/\]/g,""),this.nameCalculated=!0);this.setup(),this._render(n)},_render:function(e){var n=this;this.getEl()&&this.getEl().remove();if(this.options.renderForm){this.options.form.viewType=this.view.type;var r=this.form;r||(r=new t.Form(this.container,this.options.form,this.view.id,this.connector,this.errorCallback)),r.render(function(r){n._processRender(r.formFieldsContainer,function(){n.getEl().appendTo(r.formFieldsContainer),r.topControl=n,n.view.type&&n.view.type!="view"&&r.initEvents(),n.form=r,n.postRender(),e&&t.isFunction(e)&&e(n)})})}else this._processRender(this.container,function(){n.getEl().appendTo(n.container),n.postRender(),e&&t.isFunction(e)&&e(n)})},_processRender:function(t,n){var r=this,i=this.getTemplateDescriptor(),s=this.data;this.isDisplayOnly()&&typeof s=="object"&&(s=JSON.stringify(s));var o=r.view.tmpl(i,{id:this.getId(),options:this.options,schema:this.schema,data:s,view:this.view,path:this.path},{});o.appendTo(t);var u=o;o.size()>1&&o.each(function(t,n){e(this).attr("data-control")=="append"&&(u=e(this))}),this.setEl(u),this.singleLevelRendering?n&&n(this):!this.isDisplayOnly()||!this.isControlField?this.renderField(function(){n&&n(this)}):n&&n(this)},renderField:function(e){},getStyleInjection:function(e,n){this.view.style&&t.styleInjections[this.view.style]&&t.styleInjections[this.view.style][e]&&t.styleInjections[this.view.style][e].call(this,n)},postRender:function(){if(this.view.type!="view"){this.getStyleInjection("field",this.getEl()),this.getEl().addClass("alpaca-field"),this.getEl().attr("id")===null&&this.getEl().attr("id",this.getId()+"-field-outer"),t.isEmpty(this.getEl().attr("alpaca-field-id"))&&this.getEl().attr("alpaca-field-id",this.getId()),this.schema.required?this.getEl().addClass("alpaca-field-required"):this.getEl().addClass("alpaca-field-optional"),this.options.readonly&&(this.getEl().addClass("alpaca-field-readonly"),e(":input",this.getEl()).attr("readonly","readonly"),e("select",this.getEl()).attr("disabled","disabled"),e(":radio",this.getEl()).attr("disabled","disabled"),e(":checkbox",this.getEl()).attr("disabled","disabled"));var n=function(e,n){if(n){var r=0,i=null;if(t.isArray(n))for(r=0;r<n.length;r++)e.addClass(n[r]);else if(n.indexOf(",")>-1){i=n.split(",");for(r=0;r<i.length;r++)e.addClass(i[r])}else if(n.indexOf(" ")>-1){i=n.split(" ");for(r=0;r<i.length;r++)e.addClass(i[r])}else e.addClass(n)}};n(this.getEl(),this.options.fieldClass);var r=this.view.getStyles();if(r)for(var i in r)e(i,this.container).css(r[i]);this.labelDiv&&this.schema.required&&this.getStyleInjection("required",this.labelDiv),this.options.disabled&&this.disable(),this.view.type&&this.view.type=="edit"&&this.bindData(),this.view.type&&this.view.type!="view"&&this.initEvents()}this.options.hidden&&this.getEl().hide(),this.initializing=!1;var s=this.view.type=="create";this.hideInitValidationError=t.isValEmpty(this.options.hideInitValidationError)?s:this.options.hideInitValidationError,this.view.type!="view"&&this.renderValidationState(),this.hideInitValidationError=!1,this.view.displayReadonly||e(".alpaca-field-readonly",this.getEl()).hide(),this.options.postRender&&this.options.postRender(this)},getEl:function(){return this.outerEl},setEl:function(e){this.outerEl=e},getId:function(){return this.id},getParent:function(){return this.parent},isTopLevel:function(){return t.isEmpty(this.parent)},getValue:function(){return this.data},setValue:function(e){this.data=e,this.triggerUpdate()},setDefault:function(){},getTemplateDescriptor:function(){return this.templateDescriptor},setTemplateDescriptor:function(e){this.templateDescriptor=e},displayMessage:function(t,n){var r=this;e("[id^='"+r.getId()+"-field-message']",r.getEl()).remove(),t&&t.length>0&&e.each(t,function(t,n){if(n.length>0){var i=r.view.getTemplateDescriptor("controlFieldMessage");i&&(r.messageElement=r.view.tmpl(i,{message:n}),r.getStyleInjection("errorMessage",r.messageElement),r.hideInitValidationError?r.messageElement.addClass("alpaca-controlfield-message-hidden"):r.messageElement.addClass("alpaca-controlfield-message"),r.messageElement.attr("id",r.getId()+"-field-message-"+t),e(".alpaca-controlfield-message-container",r.getEl()).length?r.messageElement.appendTo(e(".alpaca-controlfield-message-container",r.getEl())):r.messageElement.appendTo(r.getEl()))}})},renderValidationState:function(e){var n=function(e,r){if(this.options.validate){if(e&&this.children)for(var i=0;i<this.children.length;i++)n.call(this.children[i],e,!0);this.getStyleInjection("removeError",this.getEl()),this.getEl().removeClass("alpaca-field-invalid alpaca-field-invalid-hidden alpaca-field-valid");var s=this.isValid();this.validate()?this.getEl().addClass("alpaca-field-valid"):this.options.readonly?t.logWarn("The field (id="+this.getId()+", title="+this.getTitle()+", label="+this.options.label+") is invalid and also read-only"):this.hideInitValidationError?this.getEl().addClass("alpaca-field-invalid-hidden"):(this.getStyleInjection("error",this.getEl()),this.getEl().addClass("alpaca-field-invalid"));var o=this.isValid();if(this.options.showMessages&&!this.initializing&&!this.options.readonly){var u=[];for(var f in this.validation)this.validation[f].status||u.push(this.validation[f].message);this.displayMessage(u,s)}if(!r){var l=!1,h=this.parent;while(h)h.options&&(h.options.forceRevalidation||h.options.validator)&&(l=!0),h=h.parent;(s!=o&&this.parent&&this.parent.renderValidationState||l)&&this.parent.renderValidationState()}this._validateCustomValidator()}};n.call(this,e,!1)},showHiddenMessages:function(){var t=e(".alpaca-field-invalid-hidden",this.outerEl);t.removeClass("alpaca-field-invalid-hidden"),this.getStyleInjection("error",t),t.addClass("alpaca-field-invalid"),e(".alpaca-controlfield-message-hidden",this.outerEl).removeClass("alpaca-controlfield-message-hidden").addClass("alpaca-controlfield-message")},updateValidationState:function(e,t){if(this.options.validate){var n=this.isValid();this.validation[e]=t,this.hideInitValidationError||this.options.readonly||t&&!t.status&&(this.getEl().removeClass("alpaca-field-valid"),this.getStyleInjection("error",this.getEl()),this.getEl().addClass("alpaca-field-invalid")),this.validation[e]=t;if(this.options.showMessages&&!this.initializing&&!this.hideInitValidationError&&!this.options.readonly){var r=[];for(var i in this.validation)this.validation[i].status||r.push(this.validation[i].message);this.displayMessage(r,n)}this.isValid()&&this.parent&&this.parent.renderValidationState&&this.parent.renderValidationState()}},validate:function(e){if(this.children&&e)for(var t=0;t<this.children.length;t++){var n=this.children[t];n.validate(e)}var r=!0;return!this.initializing&&this.options.validate&&(r=this.handleValidate()),r},handleValidate:function(){var e=this.validation,n=this._validateOptional();return e.notOptional={message:n?"":this.view.getMessage("notOptional"),status:n},n=this._validateDisallow(),e.disallowValue={message:n?"":t.substituteTokens(this.view.getMessage("disallowValue"),[this.schema.disallow.join(",")]),status:n},e.notOptional.status&&e.disallowValue.status},_validateCustomValidator:function(){var e=this;this.options.validator&&t.isFunction(this.options.validator)&&this.options.validator(this,function(t){e.updateValidationState("customValidator",t)})},_validateOptional:function(){return this.schema.required&&this.isEmpty()?!1:!0},_validateDisallow:function(){if(!t.isValEmpty(this.schema.disallow)){var n=this.getValue(),r=this.schema.disallow;if(t.isArray(r)){var i=!0;return e.each(r,function(e,r){(t.isObject(n)||t.isArray(n))&&t.isString(r)&&(r=t.parseJSON(r)),t.compareObject(n,r)&&(i=!1)}),i}return(t.isObject(n)||t.isArray(n))&&t.isString(r)&&(r=t.parseJSON(r)),!t.compareObject(n,r)}return!0},triggerUpdate:function(){this.getEl().trigger("fieldupdate")},disable:function(){},enable:function(){},focus:function(){},destroy:function(){t&&t.fieldInstances&&t.fieldInstances[this.getId()]&&delete t.fieldInstances[this.getId()],this.getEl().remove()},show:function(){if(this.options&&this.options.hidden)return;this.getEl().css({display:""})},hide:function(){this.getEl().css({display:"none"})},isVisible:function(){return!this.isHidden()},isHidden:function(){return"none"==this.getEl().css("display")},print:function(){this.container.printArea&&this.container.printArea()},reload:function(){this.initializing=!0,t.isEmpty(this.callback)?this.render(this.renderedCallback):this.callback(this,this.renderedCallback)},clear:function(){var e=null;this.data&&(e=this.data),this.setValue(e)},isEmpty:function(){return t.isValEmpty(this.getValue())},isValid:function(t){if(t&&this.children)for(var n=0;n<this.children.length;n++){var r=this.children[n];if(!r.isValid(t))return!1}if(e.isEmptyObject(this.validation))return!0;for(var i in this.validation)if(!this.validation[i].status)return!1;return!0},initEvents:function(){var n=this;this.field&&(this.field.change(function(e){n.onChange(e)}),this.field.focus(function(e){n.onFocus(e)}),this.field.blur(function(e){n.onBlur(e)}),this.field.mouseover(function(e){n.onMouseOver(e)}),this.field.mouseout(function(e){n.onMouseOut(e)}),e.each(this.options,function(e,r){if(t.startsWith(e,"onField")&&t.isFunction(r)){var i=e.substring(7).toLowerCase();n.field.on(i,function(e){r.call(n,e)})}}))},onFocus:function(e){this.getEl().removeClass("alpaca-field-empty"),this.getEl().addClass("alpaca-field-focused")},onBlur:function(e){this.getEl().removeClass("alpaca-field-focused"),this.renderValidationState()},onChange:function(e){this.data=this.getValue(),this.triggerUpdate()},onMouseOver:function(e){},onMouseOut:function(e){},getControlByPath:function(e){var n=this;if(e){var r=e.split("/");for(var i=0;i<r.length;i++){if(!!t.isValEmpty(r[i]))return null;if(!n||!n.childrenByPropertyId)return null;if(!n.childrenByPropertyId[r[i]])return null;n=n.childrenByPropertyId[r[i]]}return n}},getFieldType:function(){},getType:function(){}}),t.registerMessages({disallowValue:"{0} are disallowed values.",notOptional:"This field is not optional."})}(jQuery),function(e){var t=e.alpaca;t.ControlField=t.Field.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o),this.isControlField=!0},setDefault:function(){var e=t.isEmpty(this.schema["default"])?"":this.schema["default"];this.setValue(e)},renderField:function(e){},injectField:function(t){var n=e(".alpaca-controlfield-container",this.outerEl);n.length?this.fieldContainer=n:this.fieldContainer=this.outerEl;var r=e(".alpaca-field-container-field",this.fieldContainer);r.length>0?r.attr("data-replace")=="true"?r.replaceWith(t):t.appendTo(r):this.fieldContainer.attr("data-replace")=="true"?this.fieldContainer.replaceWith(t):t.prependTo(this.fieldContainer)},postRender:function(){var t=e(".alpaca-controlfield-label",this.outerEl);t.length&&(this.labelDiv=t);var n=e(".alpaca-controlfield-helper",this.outerEl);n.length&&(this.helperDiv=n),this.base(),this.outerEl.addClass("alpaca-controlfield")},_validateEnum:function(){if(this.schema["enum"]){var n=this.data;return!this.schema.required&&t.isValEmpty(n)?!0:e.inArray(n,this.schema["enum"])>-1?!0:!1}return!0},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateEnum();return n.invalidValueOfEnum={message:r?"":t.substituteTokens(this.view.getMessage("invalidValueOfEnum"),[this.schema["enum"].join(",")]),status:r},e&&n.invalidValueOfEnum.status},initEvents:function(){this.base();var e=this;this.field&&(this.field.keypress(function(t){e.onKeyPress(t)}),this.field.keyup(function(t){e.onKeyUp(t)}),this.field.keydown(function(t){e.onKeyDown(t)}),this.field.click(function(t){e.onClick(t)}))},onKeyPress:function(e){var t=this.isValid();t||this.renderValidationState()},onKeyDown:function(e){},onKeyUp:function(e){},onClick:function(e){}}),t.registerMessages({invalidValueOfEnum:"This field should have one of the values in {0}."})}(jQuery),function(e){var t=e.alpaca;t.ContainerField=t.Field.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base();var e=!0;t.isEmpty(this.view.collapsible)||(e=this.view.collapsible),t.isEmpty(this.options.collapsible)||(e=this.options.collapsible),this.options.collapsible=e;var n="button";t.isEmpty(this.view.legendStyle)||(n=this.view.legendStyle),t.isEmpty(this.options.legendStyle)||(n=this.options.legendStyle),this.options.legendStyle=n,this.lazyLoading=!1,t.isEmpty(this.options.lazyLoading)||(this.lazyLoading=this.options.lazyLoading,this.lazyLoading&&(this.options.collapsed=!0)),this.children=[],this.childrenById=[],this.childrenByPropertyId=[],this.expandedIcon="",this.collapsedIcon="",this.commonIcon="",this.addIcon="",this.removeIcon="",this.upIcon="",this.downIcon="",this.view.style&&t.styleInjections[this.view.style]&&(t.styleInjections[this.view.style].commonIcon&&(this.commonIcon=t.styleInjections[this.view.style].commonIcon),t.styleInjections[this.view.style].containerExpandedIcon&&(this.expandedIcon=t.styleInjections[this.view.style].containerExpandedIcon),t.styleInjections[this.view.style].containerCollapsedIcon&&(this.collapsedIcon=t.styleInjections[this.view.style].containerCollapsedIcon),t.styleInjections[this.view.style].buttonBeautifier&&(this.buttonBeautifier=t.styleInjections[this.view.style].buttonBeautifier),t.styleInjections[this.view.style].addIcon&&(this.addIcon=t.styleInjections[this.view.style].addIcon),t.styleInjections[this.view.style].removeIcon&&(this.removeIcon=t.styleInjections[this.view.style].removeIcon),t.styleInjections[this.view.style].upIcon&&(this.upIcon=t.styleInjections[this.view.style].upIcon),t.styleInjections[this.view.style].downIcon&&(this.downIcon=t.styleInjections[this.view.style].downIcon))},getDefaultFieldTemplateId:function(){return"fieldSet"},setDefaultTemplateDescriptor:function(){this.base()},addChild:function(e,n){t.isEmpty(n)?this.children.push(e):this.children.splice(n,0,e),this.childrenById[e.getId()]=e,e.propertyId&&(this.childrenByPropertyId[e.propertyId]=e),e.parent=this},initEvents:function(){var n=this;if(this.labelDiv&&this.options.collapsible){this.labelDiv.addClass("legend-expanded"),this.fieldSetDiv.addClass("fieldset-expanded");var r=this.expandedIcon;!t.isEmpty(this.options.collapsed)&&this.options.collapsed&&(r=this.collapsedIcon,this.labelDiv.nextAll(".alpaca-fieldset-helper").slideToggle(500),this.labelDiv.nextAll(".alpaca-fieldset-items-container").slideToggle(500),this.labelDiv.nextAll(".alpaca-fieldset-array-toolbar").slideToggle(500),this.fieldSetDiv.toggleClass("fieldset-expanded"),this.fieldSetDiv.toggleClass("fieldset-collapsed"),this.labelDiv.toggleClass("legend-expanded"),this.labelDiv.toggleClass("legend-collapsed")),this.options.legendStyle=="link"&&(e('<span class="'+this.commonIcon+" "+r+' alpaca-fieldset-legend-link"></span>').prependTo(this.labelDiv),this.labelDiv.click(function(){n.fieldSetDiv.toggleClass("fieldset-collapsed"),n.fieldSetDiv.toggleClass("fieldset-expanded"),e(this).toggleClass("legend-collapsed"),e(this).toggleClass("legend-expanded"),e(".alpaca-fieldset-legend-link",this).toggleClass(n.collapsedIcon).toggleClass(n.expandedIcon),e(this).nextAll(".alpaca-fieldset-helper").slideToggle(500),e(this).nextAll(".alpaca-fieldset-items-container").slideToggle(500),e(this).nextAll(".alpaca-fieldset-array-toolbar").slideToggle(500)})),this.options.legendStyle=="button"&&(this.buttonBeautifier&&this.buttonBeautifier.call(this,this.labelDiv,r,!0),this.labelDiv.click(function(){n.fieldSetDiv.toggleClass("fieldset-collapsed"),n.fieldSetDiv.toggleClass("fieldset-expanded"),e(this).toggleClass("legend-collapsed"),e(this).toggleClass("legend-expanded"),e(".alpaca-fieldset-legend-button",this).toggleClass(n.collapsedIcon).toggleClass(n.expandedIcon),e(this).nextAll(".alpaca-fieldset-helper").slideToggle(500),e(this).nextAll(".alpaca-fieldset-items-container").slideToggle(500),e(this).nextAll(".alpaca-fieldset-array-toolbar").slideToggle(500)}))}},clear:function(e){t.each(this.children,function(){this.clear(!1)}),e||this.triggerUpdate()},setDefault:function(){t.isEmpty(this.schema["default"])?t.each(this.children,function(){this.setDefault()}):this.setValue(this.schema["default"])},destroy:function(){this.form&&(this.form.destroy(!0),delete this.form),t.each(this.children,function(){this.destroy()}),this.base()},renderItemContainer:function(t,n,r){var i=this,s=this.view.getTemplateDescriptor("fieldSetItemContainer");if(s){var o=i.view.tmpl(s,{});if(o.attr("data-replace")=="true")return this.fieldContainer;if(t)e("#"+t+"-item-container",this.outerEl).after(o);else{var u=this.fieldContainer,a=this.view.getLayout().bindings;if(a){var f=a[r];f&&e("#"+f,u).length>0&&(u=e("#"+f,u))}o.appendTo(u)}return o}return this.fieldContainer},renderField:function(t){var n=this;this.getStyleInjection("container",this.outerEl);var r=e(".alpaca-fieldset-legend",this.outerEl);r.length?this.labelDiv=r:this.outerEl.addClass("alpaca-fieldset-no-legend");var i=e(".alpaca-fieldset",this.outerEl);i.length?this.fieldSetDiv=i:this.fieldSetDiv=this.outerEl;var s=e(".alpaca-fieldset-items-container",this.outerEl);s.length?this.fieldContainer=s:this.fieldContainer=this.outerEl,!this.singleLevelRendering&&!this.lazyLoading&&this.renderItems(),this.lazyLoading&&this.labelDiv&&e(this.labelDiv).click(function(){n.lazyLoading&&(n.renderItems(),n.lazyLoading=!1)}),t&&t()},renderItems:function(e){}})}(jQuery),function(e){var t=e.alpaca;t.Connector=Base.extend({constructor:function(e,t){this.id=e,this.configs=t},connect:function(e,n){e&&t.isFunction(e)&&e()},loadTemplate:function(e,n,r){t.isEmpty(e)?r({message:"Empty data source.",reason:"TEMPLATE_LOADING_ERROR"}):t.isUri(e)?this.loadUri(e,!1,function(e){n&&t.isFunction(n)&&n(e)},function(e){r&&t.isFunction(r)&&r(e)}):n(e)},loadData:function(e,n,r){var i=e.data,s=e.schema,o=function(){return!t.isEmpty(i)&&t.isUri(i)&&(!s||!s.format||s.format!="uri")};o()?this.loadJson(i,function(t){e.data=t,n(e)},r):n(e)},loadSchema:function(e,n,r){var i=e.schema,s=function(){return!t.isEmpty(i)&&t.isUri(i)};s()?this.loadJson(i,function(t){e.schema=t,n(e)},r):n(e)},loadOptions:function(e,n,r){var i=e.options,s=function(){return!t.isEmpty(i)&&t.isUri(i)};s()?this.loadJson(i,function(t){e.options=t,n(e)},r):n(e)},loadView:function(e,n,r){var i=e.view,s=function(){return!t.isEmpty(i)&&t.isUri(i)};s()?this.loadJson(i,function(t){e.view=t,n(e)},r):n(e)},loadAll:function(e,n,r){var i=0,s=e.data,o=e.options,u=e.schema,f=e.view,l=function(e){i++,i==4&&n&&t.isFunction(n)&&n(e.data,e.options,e.schema,e.view)},c=function(e){r&&t.isFunction(r)&&r(e)};this.loadData(e,l,c),this.loadSchema(e,l,c),this.loadOptions(e,l,c),this.loadView(e,l,c)},saveData:function(e,t,n){},loadJson:function(e,t,n){this.loadUri(e,!0,t,n)},loadUri:function(n,r,i,s){var o={url:n,type:"get",success:function(e){i&&t.isFunction(i)&&i(e)},error:function(e,r,i){s&&t.isFunction(s)&&s({message:"Unable to load data from uri : "+n,stage:"DATA_LOADING_ERROR",details:{jqXHR:e,textStatus:r,errorThrown:i}})}};r?o.dataType="json":o.dataType="text",e.ajax(o)}}),t.registerConnectorClass("default",t.Connector)}(jQuery),function(e){var t=e.alpaca;t.Form=Base.extend({constructor:function(e,n,r,i,s){var o=this;this.container=e,this.parent=null,this.connector=i,this.errorCallback=s,this.options=n,this.options.attributes?this.attributes=this.options.attributes:this.attributes={},this.options.buttons&&(this.options.buttons.submit&&(this.options.buttons.submit.type||(this.options.buttons.submit.type="submit"),this.options.buttons.submit.name||(this.options.buttons.submit.name="submit"),this.options.buttons.submit.value||(this.options.buttons.submit.value="Submit")),this.options.buttons.reset&&(this.options.buttons.reset.type||(this.options.buttons.reset.type="reset"),this.options.buttons.reset.name||(this.options.buttons.reset.name="reset"),this.options.buttons.reset.value||(this.options.buttons.reset.value="Reset"))),this.attributes.id?this.id=this.attributes.id:(this.id=t.generateId(),this.attributes.id=this.id),this.options.buttons&&this.options.buttons.submit&&t.isUndefined(this.options.toggleSubmitValidState)&&(this.options.toggleSubmitValidState=!0),this.viewType=n.viewType,this.view=new t.RuntimeView(r,this)},render:function(e){var t=this;this.templateDescriptor=this.view.getTemplateDescriptor("form"),this.outerEl&&this.outerEl.remove(),this.processRender(this.container,function(){t.outerEl.appendTo(t.container),t.outerEl.addClass("alpaca-form"),e&&e(t)})},isFormValid:function(){this.topControl.validate(!0);var e=this.topControl.isValid(!0);return this.renderValidationState(),e},validate:function(e){return this.topControl.validate(e)},enableSubmitButton:function(){e(".alpaca-form-button-submit").attrProp("disabled",!1);if(e.mobile)try{e(".alpaca-form-button-submit").button("refresh")}catch(t){}},disableSubmitButton:function(){e(".alpaca-form-button-submit").attrProp("disabled",!0);if(e.mobile)try{e(".alpaca-form-button-submit").button("refresh")}catch(t){}},adjustSubmitButtonState:function(){this.disableSubmitButton();var e=this.isFormValid();console.log("isFormValid: "+e),this.isFormValid()&&this.enableSubmitButton()},processRender:function(n,r){var i=this,s=this.getTemplateDescriptor(),o={id:this.getId(),options:this.options,view:this.view},u=i.view.tmpl(s,o,{});u.appendTo(n),this.outerEl=u,t.isEmpty(this.outerEl.attr("id"))&&this.outerEl.attr("id",this.getId()+"-form-outer"),t.isEmpty(this.outerEl.attr("alpaca-field-id"))&&this.outerEl.attr("alpaca-field-id",this.getId()),e(".alpaca-form-fields-container",this.outerEl)?this.formFieldsContainer=e(".alpaca-form-fields-container",this.outerEl):this.formFieldsContainer=this.outerEl,this.field=e("form",this.container),this.field&&this.field.attr(this.attributes),this.buttons={},e.each(e(".alpaca-form-button",this.container),function(t,n){e(n).mousedown(function(){var t=e(this);t.attr("button-pushed","true"),setTimeout(function(){t.attr("button-pushed")&&t.attr("button-pushed")=="true"&&t.click()},150)}),e(n).click(function(){e(this).removeAttr("button-pushed")}),i.buttons[e(n).attr("data-key")]=e(n)}),r()},getEl:function(){return this.outerEl},getId:function(){return this.id},getType:function(){return this.type},getParent:function(){return this.parent},getValue:function(){return this.topControl.getValue()},setValue:function(e){this.topControl.setValue(e)},initEvents:function(){var t=this;if(this.field){var n=this.getValue();e(this.field).submit(n,function(e){return t.onSubmit(e,t)})}this.options.toggleSubmitValidState&&(e(t.topControl.getEl()).bind("fieldupdate",function(){t.adjustSubmitButtonState()}),this.adjustSubmitButtonState())},onSubmit:function(e,n){if(this.submitHandler){e.stopPropagation();var r=this.submitHandler(e,n);return t.isUndefined(r)&&(r=!1),r}},registerSubmitHandler:function(e){t.isFunction(e)&&(this.submitHandler=e)},renderValidationState:function(e){this.topControl.renderValidationState(e)},disable:function(){this.topControl.disable()},enable:function(){this.topControl.enable()},focus:function(){this.topControl.focus()},destroy:function(e){this.getEl().remove(),e||this.parent.destroy()},show:function(){this.getEl().css({display:""})},hide:function(){this.getEl().css({display:"none"})},clear:function(e){this.topControl.clear(e)},isEmpty:function(){return this.topControl.isEmpty()},getTemplateDescriptor:function(){return this.templateDescriptor},setTemplateDescriptor:function(e){this.templateDescriptor=e}})}(jQuery),function(e){var t=e.alpaca;t.Fields.TextField=t.ControlField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.size||(this.options.size=40),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldText")},destroy:function(){this.base(),this.field&&this.field.typeahead&&this.options.typeahead&&e(this.field).typeahead("destroy")},renderField:function(e){var t=this;this.controlFieldTemplateDescriptor&&(this.field=t.view.tmpl(this.controlFieldTemplateDescriptor,{id:this.getId(),name:this.name,options:this.options}),this.injectField(this.field)),e&&e()},postRender:function(){var t=this;this.base();if(this.field){this.field&&this.field.mask&&this.options.maskString&&this.field.mask(this.options.maskString);if(this.field&&this.field.typeahead&&this.options.typeahead){var n={};for(var r in this.options.typeahead)n[r]=this.options.typeahead[r];n.name||(n.name=this.getId()),e(this.field).typeahead(n),e(this.field).on("typeahead:autocompleted",function(e,n){t.setValue(n.value)}),e(this.field).on("typeahead:selected",function(e,n){t.setValue(n.value)}),n.events&&(n.events.autocompleted&&e(this.field).on("typeahead:autocompleted",function(e,t){n.events.autocompleted(e,t)}),n.events.selected&&e(this.field).on("typeahead:selected",function(e,t){n.events.selected(e,t)}))}this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-text")}},getValue:function(){var e=null;return this.field?e=this.field.val():e=this.base(),e},setValue:function(e){this.field&&(t.isEmpty(e)?this.field.val(""):this.field.val(e)),this.base(e)},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validatePattern();return n.invalidPattern={message:r?"":t.substituteTokens(this.view.getMessage("invalidPattern"),[this.schema.pattern]),status:r},r=this._validateMaxLength(),n.stringTooLong={message:r?"":t.substituteTokens(this.view.getMessage("stringTooLong"),[this.schema.maxLength]),status:r},r=this._validateMinLength(),n.stringTooShort={message:r?"":t.substituteTokens(this.view.getMessage("stringTooShort"),[this.schema.minLength]),status:r},e&&n.invalidPattern.status&&n.stringTooLong.status&&n.stringTooShort.status},_validatePattern:function(){if(this.schema.pattern){var e=this.getValue();if(e===""&&this.options.allowOptionalEmpty&&!this.schema.required)return!0;t.isEmpty(e)&&(e="");if(!e.match(this.schema.pattern))return!1}return!0},_validateMinLength:function(){if(!t.isEmpty(this.schema.minLength)){var e=this.getValue();if(e===""&&this.options.allowOptionalEmpty&&!this.schema.required)return!0;t.isEmpty(e)&&(e="");if(e.length<this.schema.minLength)return!1}return!0},_validateMaxLength:function(){if(!t.isEmpty(this.schema.maxLength)){var e=this.getValue();if(e===""&&this.options.allowOptionalEmpty&&!this.schema.required)return!0;t.isEmpty(e)&&(e="");if(e.length>this.schema.maxLength)return!1}return!0},disable:function(){this.field&&(this.field.disabled=!0)},enable:function(){this.field&&(this.field.disabled=!1)},focus:function(){this.field&&this.field.focus()}}),t.registerTemplate("controlFieldText",'<input type="text" id="${id}"  {{if options.placeholder}}placeholder="${options.placeholder}"{{/if}} {{if options.size}}size="${options.size}"{{/if}} {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>'),t.registerMessages({invalidPattern:"This field should have pattern {0}",stringTooShort:"This field should contain at least {0} numbers or characters",stringTooLong:"This field should contain at most {0} numbers or characters"}),t.registerFieldClass("text",t.Fields.TextField),t.registerDefaultSchemaFieldMapping("string","text")}(jQuery),function(e){var t=e.alpaca;t.Fields.TextAreaField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.rows||(this.options.rows=5),this.options.cols||(this.options.cols=40),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldTextarea")},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-textarea")},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateWordCount();return n.wordLimitExceeded={message:r?"":t.substituteTokens(this.view.getMessage("wordLimitExceeded"),[this.options.wordlimit]),status:r},e&&n.wordLimitExceeded.status},_validateWordCount:function(){if(this.options.wordlimit&&this.options.wordlimit>-1){var e=this.data;if(e){var t=e.split(" ").length;if(t>this.options.wordlimit)return!1}}return!0},setValue:function(t){e(this.field).val(t),this.base(t)},getValue:function(){return e(this.field).val()}}),t.registerMessages({wordLimitExceeded:"The maximum word limit of {0} has been exceeded."}),t.registerTemplate("controlFieldTextarea",'<textarea id="${id}" {{if options.rows}}rows="${options.rows}"{{/if}} {{if options.cols}}cols="${options.cols}"{{/if}} {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each options.data}}data-${fieldId}="${value}"{{/each}}/>'),t.registerFieldClass("textarea",t.Fields.TextAreaField)}(jQuery),function(e){var t=e.alpaca;t.Fields.CheckBoxField=t.ControlField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.rightLabel||(this.options.rightLabel="")},onClick:function(e){this.renderValidationState()},renderField:function(t){var n=this,r=this.view.getTemplateDescriptor("controlFieldCheckbox");r&&(this.field=n.view.tmpl(r,{id:this.getId(),name:this.name,options:this.options}),this.injectField(this.field),this.field=e('input[id="'+this.getId()+'"]',this.field)),t&&t()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-checkbox")},getValue:function(){return t.checked(this.field)},setValue:function(e){t.isString(e)&&(e=e==="true"),t.checked(this.field,e),this.base(e)},disable:function(){this.field.disabled=!0},enable:function(){this.field.disabled=!1}}),t.registerTemplate("controlFieldCheckbox",'<span><input type="checkbox" id="${id}" {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>{{if options.rightLabel}}<label for="${id}">${options.rightLabel}</label>{{/if}}</span>'),t.registerFieldClass("checkbox",t.Fields.CheckBoxField),t.registerDefaultSchemaFieldMapping("boolean","checkbox")}(jQuery),function(e){var t=e.alpaca;t.Fields.FileField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldFile")},setValue:function(t){var n=this.field;this.field=e(".alpaca-filefield-control",this.fieldContainer),this.base(t),this.field=n},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-file")}}),t.registerTemplate("controlFieldFile",'<input type="file" id="${id}" {{if options.size}}size="${options.size}"{{/if}} {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>'),t.registerFieldClass("file",t.Fields.FileField)}(jQuery),function(e){var t=e.alpaca;t.Fields.ListField=t.ControlField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){var n=this;n.base(),n.selectOptions=[],n.getEnum()&&e.each(n.getEnum(),function(e,r){var i=r;n.options.optionLabels&&(t.isEmpty(n.options.optionLabels[e])?t.isEmpty(n.options.optionLabels[r])||(i=n.options.optionLabels[r]):i=n.options.optionLabels[e]),n.selectOptions.push({value:r,text:i})})},getEnum:function(){if(this.schema&&this.schema["enum"])return this.schema["enum"]},getValue:function(n){var r=this;return t.isArray(n)?e.each(n,function(t,i){e.each(r.selectOptions,function(e,r){r.value==i&&(n[t]=r.value)})}):e.each(this.selectOptions,function(e,t){t.value==n&&(n=t.value)}),n},renderField:function(n){var r=this;if(this.options.dataSource)if(t.isFunction(this.options.dataSource))this.options.dataSource(this,function(){r._renderField(n)});else if(t.isUri(this.options.dataSource))e.ajax({url:this.options.dataSource,type:"get",dataType:"json",success:function(i){var s=i;r.options.dsTransformer&&t.isFunction(r.options.dsTransformer)&&(s=r.options.dsTransformer(s)),s&&(t.isArray(s)&&e.each(s,function(e,t){r.selectOptions.push({value:t,text:t})}),t.isObject(s)&&e.each(s,function(e,t){r.selectOptions.push({value:e,text:t})})),r._renderField(n)},error:function(e,t,n){r.errorCallback({message:"Unable to load data from uri : "+r.options.dataSource,stage:"DATASOURCE_LOADING_ERROR",details:{jqXHR:e,textStatus:t,errorThrown:n}})}});else{var i=this.options.dataSource;r.options.dsTransformer&&t.isFunction(r.options.dsTransformer)&&(i=r.options.dsTransformer(i));if(i){t.isArray(i)&&e.each(i,function(e,t){r.selectOptions.push({value:t,text:t})});if(t.isObject(i))for(var s in i)r.selectOptions.push({value:s,text:i[s]});r._renderField(n)}}else this._renderField(n)}})}(jQuery),function(e){var t=e.alpaca;t.Fields.RadioField=t.Fields.ListField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.name?this.name=this.options.name:this.name||(this.name=this.getId()+"-name"),t.isUndefined(this.options.emptySelectFirst)&&(this.options.emptySelectFirst=!1)},getValue:function(){var t=this.base(e("input:radio[name="+this.name+"]:checked",this.field).val());return e.each(this.selectOptions,function(){String(this["value"])==t&&(t=this.value)}),t},setValue:function(t){t!=this.getValue()&&(e.each(e("input:radio[name="+this.name+"]",this.field),function(){e(this).val()==t?e(this).attr("checked","checked"):e(this).removeAttr("checked")}),this.options.emptySelectFirst&&e("input:radio:checked",this.field).length===0&&e("input:radio:first",this.field).attr("checked","checked"),this.base(t))},_renderField:function(t){var n=this,r=this.view.getTemplateDescriptor("controlFieldRadio");r&&(this.field=n.view.tmpl(r,{id:this.getId(),options:this.options,selectOptions:this.selectOptions,required:this.schema.required,name:this.name,data:this.data}),this.options.emptySelectFirst&&this.selectOptions&&this.selectOptions.length>0&&(this.data=this.selectOptions[0].value,e("input:radio:checked",this.field).length===0&&e("input:radio:first",this.field).attr("checked","checked")),this.injectField(this.field)),t&&t()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-radio")},onClick:function(e){this.base(e);var n=this;t.later(25,this,function(){var e=n.getValue();n.setValue(e),n.renderValidationState()})}}),t.registerTemplate("controlFieldRadio",'<div id="${id}" class="alpaca-controlfield-radio">{{if !required}}<span class="alpaca-controlfield-radio-item"><input type="radio" {{if options.readonly}}readonly="readonly"{{/if}} name="${name}" value=""/><span class="alpaca-controlfield-radio-label">None</span></span>{{/if}}{{each selectOptions}}<span class="alpaca-controlfield-radio-item"><input type="radio" {{if options.readonly}}readonly="readonly"{{/if}} name="${name}" value="${value}" {{if value == data}}checked="checked"{{/if}}/><span class="alpaca-controlfield-radio-label">${text}</span></span>{{/each}}</div>'),t.registerFieldClass("radio",t.Fields.RadioField)}(jQuery),function(e){var t=e.alpaca;t.Fields.SelectField=t.Fields.ListField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),t.isUndefined(this.options.emptySelectFirst)&&(this.options.emptySelectFirst=!1)},getValue:function(){if(this.field)return this.base(this.field.val())},setValue:function(e){t.isArray(e)?t.compareArrayContent(e,this.getValue())||(!t.isEmpty(e)&&this.field&&this.field.val(e),this.base(e)):e!=this.getValue()&&(!t.isEmpty(e)&&this.field&&this.field.val(e),this.base(e))},getEnum:function(){if(this.schema){if(this.schema["enum"])return this.schema["enum"];if(this.schema.type&&this.schema.type=="array"&&this.schema.items&&this.schema.items["enum"])return this.schema.items["enum"]}},_renderField:function(e){var n=this;this.schema.type&&this.schema.type=="array"&&(this.options.multiple=!0);var r;this.options.multiple&&t.isArray(this.data)?r=this.view.getTemplateDescriptor("controlFieldSelectMultiple"):r=this.view.getTemplateDescriptor("controlFieldSelect"),r&&(this.field=n.view.tmpl(r,{id:this.getId(),options:this.options,required:this.schema.required,selectOptions:this.selectOptions,name:this.name,data:this.data}),t.isUndefined(this.data)&&this.options.emptySelectFirst&&this.selectOptions&&this.selectOptions.length>0&&(this.data=this.selectOptions[0].value),this.injectField(this.field)),e&&e()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-select")},_validateEnum:function(){if(this.schema["enum"]){var n=this.data;if(!this.schema.required&&t.isValEmpty(n))return!0;if(this.options.multiple){var r=!0,i=this;return e.each(n,function(t,n){if(e.inArray(n,i.schema["enum"])<=-1)return r=!1,!1}),r}return e.inArray(n,this.schema["enum"])>-1}return!0},onChange:function(e){this.base(e);var n=this;t.later(25,this,function(){var e=n.getValue();n.setValue(e),n.renderValidationState()})},_validateMinItems:function(){return this.schema.items&&this.schema.items.minItems&&e(":selected",this.field).length<this.schema.items.minItems?!1:!0},_validateMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&e(":selected",this.field).length>this.schema.items.maxItems?!1:!0},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateMaxItems();return n.tooManyItems={message:r?"":t.substituteTokens(this.view.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:r},r=this._validateMinItems(),n.notEnoughItems={message:r?"":t.substituteTokens(this.view.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:r},e&&n.tooManyItems.status&&n.notEnoughItems.status}}),t.registerTemplate("controlFieldSelect",'<select id="${id}" {{if options.readonly}}readonly="readonly"{{/if}} {{if options.multiple}}multiple{{/if}} {{if options.size}}size="${options.size}"{{/if}} {{if name}}name="${name}"{{/if}}>{{if !required}}<option value="">None</option>{{/if}}{{each(i,value) selectOptions}}<option value="${value}" {{if value == data}}selected="selected"{{/if}}>${text}</option>{{/each}}</select>'),t.registerTemplate("controlFieldSelectMultiple",'<select id="${id}" {{if options.readonly}}readonly="readonly"{{/if}} {{if options.multiple}}multiple="multiple"{{/if}} {{if options.size}}size="${options.size}"{{/if}} {{if name}}name="${name}"{{/if}}>{{if !required}}<option value="">None</option>{{/if}}{{each(i,value) selectOptions}}<option value="${value}" {{each(j,val) data}}{{if value == val}}selected="selected"{{/if}}{{/each}}>${text}</option>{{/each}}</select>'),t.registerFieldClass("select",t.Fields.SelectField)}(jQuery),function(e){var t=e.alpaca;t.Fields.NumberField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},getValue:function(){var e=this.field.val();return t.isValEmpty(e)?"":parseFloat(e)},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-number")},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateNumber();return n.stringNotANumber={message:r?"":this.view.getMessage("stringNotANumber"),status:r},r=this._validateDivisibleBy(),n.stringDivisibleBy={message:r?"":t.substituteTokens(this.view.getMessage("stringDivisibleBy"),[this.schema.divisibleBy]),status:r},r=this._validateMaximum(),n.stringValueTooLarge={message:"",status:r},r||(this.schema.exclusiveMaximum?n.stringValueTooLarge.message=t.substituteTokens(this.view.getMessage("stringValueTooLargeExclusive"),[this.schema.maximum]):n.stringValueTooLarge.message=t.substituteTokens(this.view.getMessage("stringValueTooLarge"),[this.schema.maximum])),r=this._validateMinimum(),n.stringValueTooSmall={message:"",status:r},r||(this.schema.exclusiveMinimum?n.stringValueTooSmall.message=t.substituteTokens(this.view.getMessage("stringValueTooSmallExclusive"),[this.schema.minimum]):n.stringValueTooSmall.message=t.substituteTokens(this.view.getMessage("stringValueTooSmall"),[this.schema.minimum])),e&&n.stringNotANumber.status&&n.stringDivisibleBy.status&&n.stringValueTooLarge.status&&n.stringValueTooSmall.status},_validateNumber:function(){var e=this.field.val();if(t.isValEmpty(e))return!0;var n=this.getValue();return isNaN(n)?!1:e.match(t.regexps.number)?!0:!1},_validateDivisibleBy:function(){var e=this.getValue();return!t.isEmpty(this.schema.divisibleBy)&&e%this.schema.divisibleBy!==0?!1:!0},_validateMaximum:function(){var e=this.getValue();if(!t.isEmpty(this.schema.maximum)){if(e>this.schema.maximum)return!1;if(!t.isEmpty(this.schema.exclusiveMaximum)&&e==this.schema.maximum&&this.schema.exclusiveMaximum)return!1}return!0},_validateMinimum:function(){var e=this.getValue();if(!t.isEmpty(this.schema.minimum)){if(e<this.schema.minimum)return!1;if(!t.isEmpty(this.schema.exclusiveMinimum)&&e==this.schema.minimum&&this.schema.exclusiveMinimum)return!1}return!0}}),t.registerMessages({stringValueTooSmall:"The minimum value for this field is {0}",stringValueTooLarge:"The maximum value for this field is {0}",stringValueTooSmallExclusive:"Value of this field must be greater than {0}",stringValueTooLargeExclusive:"Value of this field must be less than {0}",stringDivisibleBy:"The value must be divisible by {0}",stringNotANumber:"This value is not a number."}),t.registerFieldClass("number",t.Fields.NumberField),t.registerDefaultSchemaFieldMapping("number","number")}(jQuery),function(e){var t=e.alpaca;t.Fields.ArrayField=t.ContainerField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base();if(t.isEmpty(this.data))return;if(!t.isArray(this.data)){if(!t.isString(this.data))return;try{this.data=t.parseJSON(this.data);if(!t.isArray(this.data)){t.logWarn("ArrayField parsed data but it was not an array: "+JSON.stringify(this.data));return}}catch(e){this.data=[this.data]}}this.options.toolbarStyle=t.isEmpty(this.view.toolbarStyle)?"button":this.view.toolbarStyle,this.options.items||(this.options.items={});var n=!1;t.isEmpty(this.view.toolbarSticky)||(n=this.view.toolbarSticky),t.isEmpty(this.options.toolbarSticky)||(n=this.options.toolbarSticky),t.isEmpty(this.options.items.showMoveUpItemButton)&&(this.options.items.showMoveUpItemButton=!0),t.isEmpty(this.options.items.showMoveDownItemButton)&&(this.options.items.showMoveDownItemButton=!0),this.options.toolbarSticky=n,this.schema.items&&this.schema.uniqueItems&&t.mergeObject(this.options,{forceRevalidation:!0})},setValue:function(e){if(!e||!t.isArray(e))return;for(var n=0;n<this.children.length;n++){var r=this.children[n];e.length>n?r.setValue(e[n]):this.removeItem(r.id)}while(n<e.length)this.addItem(n,null,e[n]),n++},getValue:function(){var e=[];for(var t=0;t<this.children.length;t++){var n=this.children[t].getValue();e.push(n)}return e},getSize:function(){return this.children.length},updateChildrenPathAndName:function(n){var r=this;n.children&&e.each(n.children,function(i,s){n.prePath&&t.startsWith(s.path,n.prePath)&&(s.prePath=s.path,s.path=s.path.replace(n.prePath,n.path)),n.preName&&t.startsWith(s.name,n.preName)&&(s.preName=s.name,s.name=s.name.replace(n.preName,n.name),s.field&&e(s.field).attr("name",s.name)),r.updateChildrenPathAndName(s)})},updatePathAndName:function(){var t=this;this.children&&e.each(this.children,function(n,r){var i=r.path.lastIndexOf("/"),s=r.path.substring(i+1);s.indexOf("[")!=-1&&s.indexOf("]")!=-1&&(s=s.substring(s.indexOf("[")+1,s.indexOf("]"))),s!=n&&(r.prePath=r.path,r.path=r.path.substring(0,i)+"/["+n+"]"),r.nameCalculated&&(r.preName=r.name,r.parent&&r.parent.name&&r.path?r.name=r.parent.name+"_"+n:r.path&&(r.name=r.path.replace(/\//g,"").replace(/\[/g,"_").replace(/\]/g,"")),e(r.field).attr("name",r.name)),r.prePath||(r.prePath=r.path),t.updateChildrenPathAndName(r)})},moveItem:function(t,n){var r=this;this.childrenById[t]&&e.each(this.children,function(i,s){if(s.getId()==t){var o;n===!0?(o=i-1,o<0&&(o=r.children.length-1)):(o=i+1,o>=r.children.length&&(o=0));if(r.children[o]){var u=r.children[o].getId(),a=e("#"+t+"-item-container"),f=e("#"+u+"-item-container");r.reRenderItem(r.children[i],f),r.reRenderItem(r.children[o],a);var l=r.children[i];return r.children[i]=r.children[o],r.children[o]=l,r.updatePathAndName(),!1}}})},removeItem:function(t){this._validateEqualMinItems()&&(this.children=e.grep(this.children,function(e,n){return e.getId()!=t}),delete this.childrenById[t],e("#"+t+"-item-container",this.outerEl).remove(),this.renderValidationState(),this.updateToolbarItemsStatus(),this.updatePathAndName(),this.triggerUpdate())},updateToolbarItemsStatus:function(){var t=this;t._validateEqualMaxItems()?e(".alpaca-fieldset-array-item-toolbar-add",this.outerEl).each(function(t){e(this).removeClass("alpaca-fieldset-array-item-toolbar-disabled")}):e(".alpaca-fieldset-array-item-toolbar-add",this.outerEl).each(function(t){e(this).addClass("alpaca-fieldset-array-item-toolbar-disabled")}),t._validateEqualMinItems()?e(".alpaca-fieldset-array-item-toolbar-remove",this.outerEl).each(function(t){e(this).removeClass("alpaca-fieldset-array-item-toolbar-disabled")}):e(".alpaca-fieldset-array-item-toolbar-remove",this.outerEl).each(function(t){e(this).addClass("alpaca-fieldset-array-item-toolbar-disabled")}),this.getSize()===0?this.renderArrayToolbar(this.outerEl):this.arrayToolbar&&this.arrayToolbar.remove(),e(".alpaca-item-label-counter",this.outerEl).each(function(t){e(this).html(t+1)})},renderToolbar:function(t){var n=this;if(!this.options.readonly){var r=t.attr("alpaca-id"),i=this.childrenById[r],s=this.view.getTemplateDescriptor("arrayItemToolbar");if(s){var o=[{feature:"add",icon:n.addIcon,label:n.options.items&&n.options.items.addItemLabel?n.options.items.addItemLabel:"Add Item",clickCallback:function(e,n){var r=n.addItem(t.index()+1,null,null,e,!0);return n.enrichElements(r),!1}},{feature:"remove",icon:n.removeIcon,label:n.options.items&&n.options.items.removeItemLabel?n.options.items.removeItemLabel:"Remove Item",clickCallback:function(e,t){t.removeItem(e)}}];n.options.items&&n.options.items.showMoveUpItemButton&&o.push({feature:"up",icon:n.upIcon,label:n.options.items&&n.options.items.moveUpItemLabel?n.options.items.moveUpItemLabel:"Move Up",clickCallback:function(e,t){t.moveItem(e,!0)}}),n.options.items&&n.options.items.showMoveDownItemButton&&o.push({feature:"down",icon:n.downIcon,label:n.options.items&&n.options.items.moveDownItemLabel?n.options.items.moveDownItemLabel:"Move Down",clickCallback:function(e,t){t.moveItem(e,!1)}}),n.options.items&&n.options.items.extraToolbarButtons&&(o=e.merge(o,n.options.items.extraToolbarButtons));var u=n.view.tmpl(s,{id:r,buttons:o});u.attr("id")===null&&u.attr("id",r+"-item-toolbar");for(var a in o)(function(e){var t=u.find(".alpaca-fieldset-array-item-toolbar-"+e.feature);t.click(function(t){return e.clickCallback(r,n,t)}),n.buttonBeautifier&&n.buttonBeautifier.call(n,t,e.icon)})(o[a]);this.options.toolbarSticky?u.prependTo(t):(u.hide().prependTo(t),t.hover(function(){e(".alpaca-fieldset-array-item-toolbar",this).show()},function(){e(".alpaca-fieldset-array-item-toolbar",this).hide()}))}}},renderArrayToolbar:function(t){var n=this,r=t.attr("alpaca-id"),i=this.view.getTemplateDescriptor("arrayToolbar");if(i){var s=n.view.tmpl(i,{id:r,addItemLabel:n.options.items&&n.options.items.addItemLabel?n.options.items.addItemLabel:"Add Item"});s.attr("id")===null&&s.attr("id",r+"-array-toolbar");if(this.options.toolbarStyle=="link")e(".alpaca-fieldset-array-toolbar-add",s).click(function(){var e=n.addItem(0,null,"",r,!0);n.enrichElements(e)});else{var o=e(".alpaca-fieldset-array-toolbar-add",s);n.buttonBeautifier&&n.buttonBeautifier.call(n,o,n.addIcon,!0),o.click(function(){return n.addItem(0,null,"",r,!0),!1}).wrap("<small></small>")}s.appendTo(t),this.arrayToolbar=s}},reRenderItem:function(t,n){t.container=n,t.render(),n.attr("id",t.getId()+"-item-container"),n.attr("alpaca-id",t.getId()),n.addClass("alpaca-item-container"),e(".alpaca-fieldset-array-item-toolbar",n).remove(),this.renderToolbar(n),this.enrichElements(n)},addItem:function(e,t,n,r,i){return this._addItem(e,t,n,r,i)},_addItem:function(e,t,n,r,i){var s=this;if(s._validateEqualMaxItems()){var o;s.schema&&s.schema.items&&(o=s.schema.items),t===null&&s.options&&s.options.fields&&s.options.fields.item&&(t=s.options.fields.item);var u=s.renderItemContainer(r);return u.alpaca({data:n,options:t,schema:o,view:this.view.id?this.view.id:this.view,connector:this.connector,notTopLevel:!0,isDynamicCreation:i||this.isDynamicCreation,render:function(t){t.parent=s,t.path=s.path+"["+e+"]",t.nameCalculated=!0,t.render(),u.attr("id",t.getId()+"-item-container"),u.attr("alpaca-id",t.getId()),u.addClass("alpaca-item-container");if(s.options&&s.options.itemLabel){var n=s.view.getTemplateDescriptor("itemLabel"),r=s.view.tmpl(n,{options:s.options,index:e?e+1:1,id:s.id});r.prependTo(u)}s.addChild(t,e),s.renderToolbar(u),s.renderValidationState(),s.updatePathAndName(),s.triggerUpdate()}}),this.updateToolbarItemsStatus(this.outerEl),u}},enrichElements:function(e){this.getStyleInjection("array",e)},renderItems:function(){var t=this;this.data&&e.each(this.data,function(e,n){var r;t.options&&t.options.fields&&t.options.fields.item&&(r=t.options.fields.item),t.addItem(e,r,n,!1)}),this.updateToolbarItemsStatus()},_validateEqualMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&this.getSize()>=this.schema.items.maxItems?!1:!0},_validateEqualMinItems:function(){return this.schema.items&&this.schema.items.minItems&&this.getSize()<=this.schema.items.minItems?!1:!0},_validateMinItems:function(){return this.schema.items&&this.schema.items.minItems&&this.getSize()<this.schema.items.minItems?!1:!0},_validateMaxItems:function(){return this.schema.items&&this.schema.items.maxItems&&this.getSize()>this.schema.items.maxItems?!1:!0},_validateUniqueItems:function(){if(this.schema.items&&this.schema.uniqueItems){var e={};for(var t=0,n=this.children.length;t<n;++t){if(!!e.hasOwnProperty(this.children[t]))return!1;e[this.children[t]]=!0}}return!0},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateUniqueItems();return n.valueNotUnique={message:r?"":this.view.getMessage("valueNotUnique"),status:r},r=this._validateMaxItems(),n.tooManyItems={message:r?"":t.substituteTokens(this.view.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:r},r=this._validateMinItems(),n.notEnoughItems={message:r?"":t.substituteTokens(this.view.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:r},e&&n.valueNotUnique.status&&n.tooManyItems.status&&n.notEnoughItems.status}}),t.registerTemplate("itemLabel",'{{if options.itemLabel}}<div class="alpaca-controlfield-label"><div>${options.itemLabel}{{if index}} <span class="alpaca-item-label-counter">${index}</span>{{/if}}</div></div>{{/if}}'),t.registerTemplate("arrayToolbar",'<span class="ui-widget ui-corner-all alpaca-fieldset-array-toolbar"><button class="alpaca-fieldset-array-toolbar-icon alpaca-fieldset-array-toolbar-add">${addItemLabel}</button></span>'),t.registerTemplate("arrayItemToolbar",'<div class="ui-widget-header ui-corner-all alpaca-fieldset-array-item-toolbar">{{each(k,v) buttons}}<button class="alpaca-fieldset-array-item-toolbar-icon alpaca-fieldset-array-item-toolbar-${v.feature}">${v.label}</button>{{/each}}</div>'),t.registerMessages({notEnoughItems:"The minimum number of items is {0}",tooManyItems:"The maximum number of items is {0}",valueNotUnique:"Values are not unique",notAnArray:"This value is not an Array"}),t.registerFieldClass("array",t.Fields.ArrayField),t.registerDefaultSchemaFieldMapping("array","array")}(jQuery),function(e){var t=e.alpaca;t.Fields.ObjectField=t.ContainerField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base();if(t.isEmpty(this.data))return;if(!t.isObject(this.data)){if(!t.isString(this.data))return;try{this.data=t.parseJSON(this.data);if(!t.isObject(this.data)){t.logWarn("ObjectField parsed data but it was not an object: "+JSON.stringify(this.data));return}}catch(e){return}}this.wizardPreIcon="",this.wizardNextIcon="",this.wizardDoneIcon="",this.view.style&&t.styleInjections[this.view.style]&&(t.styleInjections[this.view.style].wizardPreIcon&&(this.wizardPreIcon=t.styleInjections[this.view.style].wizardPreIcon),t.styleInjections[this.view.style].wizardNextIcon&&(this.wizardNextIcon=t.styleInjections[this.view.style].wizardNextIcon),t.styleInjections[this.view.style].wizardDoneIcon&&(this.wizardDoneIcon=t.styleInjections[this.view.style].wizardDoneIcon))},setValue:function(e){if(!e||!t.isObject(e))return;for(var n in this.childrenById){var r=this.childrenById[n].propertyId,i=t.traverseObject(e,r);if(!t.isEmpty(i)){var s=this.childrenById[n];s.setValue(i)}}},getValue:function(){var e={};for(var t=0;t<this.children.length;t++){var n=this.children[t].propertyId,r=this.children[t].getValue();this.determineAllDependenciesValid(n)&&(e[n]=r)}return e},postRender:function(){this.base();if(this.isTopLevel()&&this.view){this.wizardConfigs=this.view.getWizard(),this.wizardConfigs&&(t.isUndefined(this.wizardConfigs.validation)&&(this.wizardConfigs.validation=!0),this.wizardConfigs.buttons||(this.wizardConfigs.buttons={}),this.wizardConfigs.buttons.done||(this.wizardConfigs.buttons.done={}),t.isUndefined(this.wizardConfigs.buttons.done.validateOnClick)&&(this.wizardConfigs.buttons.done.validateOnClick=!0),this.wizardConfigs.buttons.prev||(this.wizardConfigs.buttons.prev={}),t.isUndefined(this.wizardConfigs.buttons.prev.validateOnClick)&&(this.wizardConfigs.buttons.prev.validateOnClick=!0),this.wizardConfigs.buttons.next||(this.wizardConfigs.buttons.next={}),t.isUndefined(this.wizardConfigs.buttons.next.validateOnClick)&&(this.wizardConfigs.buttons.next.validateOnClick=!0));var e=this.view.getLayout().templateDescriptor;this.wizardConfigs&&this.wizardConfigs.renderWizard&&(e?this.wizard():this.autoWizard())}},getIndex:function(e){if(t.isEmpty(e))return-1;for(var n=0;n<this.children.length;n++){var r=this.children[n].propertyId;if(r==e)return n}return-1},addItem:function(e,n,r,i,s){var o=this,u;o.schema&&o.schema.properties&&o.schema.properties[e]&&(u=o.schema.properties[e]);var f=o.renderItemContainer(i,this,e);f.alpaca({data:r,options:n,schema:u,view:this.view.id?this.view.id:this.view,connector:this.connector,notTopLevel:!0,isDynamicCreation:s||this.isDynamicCreation,render:function(n){n.parent=o,n.propertyId=e,o.path!="/"?n.path=o.path+"/"+e:n.path=o.path+e,n.render(),f.attr("id",n.getId()+"-item-container"),f.attr("alpaca-id",n.getId()),f.addClass("alpaca-fieldset-item-container");if(t.isEmpty(i))o.addChild(n);else{var r=o.getIndex(i);r!=-1?o.addChild(n,r+1):o.addChild(n)}i&&o.renderValidationState(),o.triggerUpdate()}})},renderItems:function(){var e=this,n={};for(var r in e.data)n[r]=r;var i=e.data;e.schema&&e.schema.properties&&(i=e.schema.properties);for(var s in i){var o={};e.options&&e.options.fields&&e.options.fields[s]&&(o=e.options.fields[s]);var u=null;e.data&&(u=e.data[s]),e.addItem(s,o,u),delete n[s]}var f=[];for(var l in n)f.push(l);f.length>0&&t.logDebug("There were "+f.length+" extra data keys that were not part of the schema "+JSON.stringify(f));for(var s in i)this.showOrHidePropertyBasedOnDependencies(s);for(var s in i)this.bindDependencyFieldUpdateEvent(s);this.renderValidationState()},showOrHidePropertyBasedOnDependencies:function(e){var t=this.childrenByPropertyId[e];if(!t)throw new Error("Missing property: "+e);var n=this.determineAllDependenciesValid(e);n?t.show():t.hide()},determineAllDependenciesValid:function(n){var r=this,i=this.childrenByPropertyId[n];if(!i)throw new Error("Missing property: "+n);var s=i.schema.dependencies;if(!s)return!0;var o=!0;return t.isString(s)?o=r.determineSingleDependencyValid(n,s):t.isArray(s)&&e.each(s,function(e,t){o=o&&r.determineSingleDependencyValid(n,t)}),o},bindDependencyFieldUpdateEvent:function(n){var r=this,i=this.childrenByPropertyId[n];if(!i)throw new Error("Missing property: "+n);var s=i.schema.dependencies;if(!s)return!0;var o=function(n,i){var s=r.childrenByPropertyId[i];s&&s.getEl().bind("fieldupdate",function(i){r.showOrHidePropertyBasedOnDependencies(n);for(var s in r.schema.properties){var o=r.schema.properties[s];if(o.dependencies){var u=r.childrenByPropertyId[s];t.isString(o.dependencies)&&o.dependencies==n?(r.showOrHidePropertyBasedOnDependencies(s),u.triggerUpdate()):t.isArray(o.dependencies)&&e.each(o.dependencies,function(e,t){t==n&&(r.showOrHidePropertyBasedOnDependencies(s),u.triggerUpdate())})}}})};t.isString(s)?o(n,s):t.isArray(s)&&e.each(s,function(e,t){o(n,t)})},determineSingleDependencyValid:function(n,r){var i=!1,s=this.childrenByPropertyId[r];if(!s)return!1;t.isValEmpty(s.data)||(s.data===!1?i=!1:i=!0);var o=this.childrenByPropertyId[n].options.dependencies;o&&(!t.isEmpty(o[r])&&t.isFunction(o[r])?i=o[r].call(this,this.childrenByPropertyId[r].data):i&&(t.isArray(o[r])?o[r]&&e.inArray(this.childrenByPropertyId[r].data,o[r])==-1&&(i=!1):!t.isEmpty(o[r])&&o[r]!=this.childrenByPropertyId[r].data&&(i=!1)));var u=this.childrenByPropertyId[r];return u&&u.isHidden()&&(i=!1),i},wizard:function(){var t=this,n=this.outerEl,r=e(".alpaca-wizard-step",n),i=r.size();this.totalSteps=i;var s=[];this.wizardConfigs.stepTitles?s=this.wizardConfigs.stepTitles:r.each(function(t){var n={title:"",description:""};e(".alpaca-wizard-step-title",this)&&(n.title=e(".alpaca-wizard-step-title",this).html(),e(".alpaca-wizard-step-title",this).hide()),e(".alpaca-wizard-step-description",this)&&(n.description=e(".alpaca-wizard-step-description",this).html(),e(".alpaca-wizard-step-description",this).hide()),s.push(n)});var o=this._renderWizardStatusBar(s);o&&e(n).before(o),r.each(function(n){var r=e(this).attr("id"),s="step"+n,o=t.view.getTemplateDescriptor("wizardStep");if(o){var u=t.view.tmpl(o,{});u.attr("id",s),e(this).wrap(u)}var a=s+"-nav-bar",f=t.view.getTemplateDescriptor("wizardNavBar");if(f){var l=t.view.tmpl(f,{});l.attr("id",a),l.addClass("alpaca-wizard-nav-bar"),e(this).append(l)}var c={},p=t.view.getLayout().bindings;for(var d in p){var v=p[d];v==r&&(c[d]=r)}var m=function(n,r){return function(){var n=!0;return t.wizardConfigs&&t.wizardConfigs.validation&&r&&e.each(r,function(e,r){n&=t.childrenByPropertyId[e].validate(),t.childrenByPropertyId[e].renderValidationState()}),n}}(n,c);n===0?(t._createNextButton(n,!0,m),t._selectStep(n)):n==i-1?(e("#step"+n).hide(),t._createPrevButton(n,!1),t._createDoneButton(n,!0,m)):(e("#step"+n).hide(),t._createPrevButton(n,!1),t._createNextButton(n,!0,m))})},autoWizard:function(){var t=this,n=this.wizardConfigs.steps;n||(n=1),this.totalSteps=n;var r=this.wizardConfigs.bindings;r||(r={});for(var i in this.childrenByPropertyId)r.hasOwnProperty(i)||(r[i]=1);for(var s=0;s<n;s++){var o=s+1,u=[];for(var i in r)r[i]==o&&this.childrenByPropertyId&&this.childrenByPropertyId[i]&&u.push("#"+this.childrenByPropertyId[i].container.attr("id"));var a="step"+s,f=this.view.getTemplateDescriptor("wizardStep");if(f){var l=t.view.tmpl(f,{});l.attr("id",a),e(u.join(",")).wrapAll(l)}var c=a+"-nav-bar",h=this.view.getTemplateDescriptor("wizardNavBar");if(h){var p=t.view.tmpl(h,{});p.attr("id",c),p.addClass("alpaca-wizard-nav-bar"),e("#"+a,this.outerEl).append(p)}}var d=this._renderWizardStatusBar(this.wizardConfigs.stepTitles);d&&d.prependTo(this.fieldContainer);for(var s=0;s<n;s++){var v=function(n,r){return function(){var i=!0;return t.view&&t.wizardConfigs&&t.wizardConfigs.validation&&r&&e.each(r,function(e,r){r==n+1&&i&&(i=t.childrenByPropertyId[e].validate(),t.childrenByPropertyId[e].validate())}),i}}(s,r);s===0?(t._createNextButton(s,!1,v),t._selectStep(s)):s==n-1?(e("#step"+s).hide(),t._createPrevButton(s,!1),t._createDoneButton(s,!0,v)):(e("#step"+s).hide(),t._createPrevButton(s,!1),t._createNextButton(s,!1,v))}},_renderWizardStatusBar:function(e){var t=this,n=this.wizardConfigs.statusBar;if(n&&e){var r=this.view.getTemplateDescriptor("wizardStatusBar");if(r){var i=t.view.tmpl(r,{id:this.getId()+"-wizard-status-bar",titles:e});return i.addClass("alpaca-wizard-status-bar"),this.getStyleInjection("wizardStatusBar",i),i}}},_createPrevButton:function(t,n,r){this.wizardConfigs.buttons&&this.wizardConfigs.buttons.prev&&(this.wizardConfigs.buttons.prev.validateOnClick||(r=null));var i="step"+t,s=this,o=this.view.getTemplateDescriptor("wizardPreButton");if(o){var u=s.view.tmpl(o,{});u.attr("id",i+"-button-pre"),u.addClass("alpaca-wizard-button-pre"),s.buttonBeautifier&&s.buttonBeautifier.call(s,u,this.wizardPreIcon,!0),u.click(function(n,r,i){return function(){var o=!0;return i&&(o=i(n,r)),o&&(e("#"+n).hide(),e("#step"+(t-1)).show(),s._selectStep(t-1),s.wizardConfigs.buttons.prev&&s.wizardConfigs.buttons.prev.onClick&&s.wizardConfigs.buttons.prev.onClick()),!1}}(i,t,r)),e("#"+i+"-nav-bar").append(u),n&&e("#"+i+"-nav-bar").parent().append("<div style='clear:both'></div>")}},_createNextButton:function(t,n,r){this.wizardConfigs.buttons&&this.wizardConfigs.buttons.next&&(this.wizardConfigs.buttons.next.validateOnClick||(r=null));var i="step"+t,s=this,o=this.view.getTemplateDescriptor("wizardNextButton");if(o){var u=s.view.tmpl(o,{});u.attr("id",i+"-button-next"),u.addClass("alpaca-wizard-button-next"),s.buttonBeautifier&&s.buttonBeautifier.call(s,u,this.wizardNextIcon,!0),u.click(function(t,n,r){return function(){var i=!0;return r&&(i=r(t,n)),i&&(e("#"+t).hide(),e("#step"+(n+1)).show(),s._selectStep(n+1),s.wizardConfigs.buttons.next&&s.wizardConfigs.buttons.next.onClick&&s.wizardConfigs.buttons.next.onClick()),!1}}(i,t,r)),e("#"+i+"-nav-bar").append(u),n&&e("#"+i+"-nav-bar").parent().append("<div style='clear:both'></div>")}},_createDoneButton:function(t,n,r){this.wizardConfigs.buttons&&this.wizardConfigs.buttons.done&&(this.wizardConfigs.buttons.done.validateOnClick||(r=null));var i="step"+t,s=this,o=this.view.getTemplateDescriptor("wizardDoneButton");if(o){var u=s.view.tmpl(o,{});u.attr("id",i+"-button-done"),u.addClass("alpaca-wizard-button-done"),s.buttonBeautifier&&s.buttonBeautifier.call(s,u,this.wizardDoneIcon,!0),u.click(function(t,r,i){return function(){var o=!0;return i&&(o=i(t,r)),o&&(e("#"+t+"-nav-bar").append(u),n&&e("#"+t+"-nav-bar").parent().append("<div style='clear:both'></div>"),s.wizardConfigs.buttons.done&&s.wizardConfigs.buttons.done.onClick&&s.wizardConfigs.buttons.done.onClick()),!1}}(i,t,r)),e("#"+i+"-nav-bar").append(u),n&&e("#"+i+"-nav-bar").parent().append("<div style='clear:both'></div>")}},_selectStep:function(t){var n=e("#"+this.getId()+"-wizard-status-bar li");n.removeClass("current current-has-next"),this.getStyleInjection("wizardUnCurrentStep",n);var r=e("#stepDesc"+t);r.addClass("current"),this.getStyleInjection("wizardCurrentStep",r),t<this.totalSteps-1&&e("#stepDesc"+t).addClass("current-has-next")}}),t.registerFieldClass("object",t.Fields.ObjectField),t.registerDefaultSchemaFieldMapping("object","object")}(jQuery),function(e){var t=e.alpaca;t.Fields.AnyField=t.ControlField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldAny")},renderField:function(e){this.controlFieldTemplateDescriptor&&(this.field=this.view.tmpl(this.controlFieldTemplateDescriptor,{id:this.getId(),name:this.name,options:this.options}),this.injectField(this.field)),e&&e()},postRender:function(){this.base()},getValue:function(){return this.field.val()},setValue:function(e){t.isEmpty(e)?this.field.val(""):this.field.val(e),this.base(e)},handleValidate:function(){var e=this.base();return e},disable:function(){this.field.disabled=!0},enable:function(){this.field.disabled=!1},focus:function(){this.field.focus()}}),t.registerTemplate("controlFieldAny",'<input type="text" id="${id}" size="40" {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>'),t.registerFieldClass("any",t.Fields.AnyField),t.registerDefaultSchemaFieldMapping("any","any")}(jQuery),function(e){var t=e.alpaca;t.Fields.HiddenField=t.ControlField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.size||(this.options.size=40),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldHidden")},renderField:function(e){var t=this;this.controlFieldTemplateDescriptor&&(this.field=t.view.tmpl(this.controlFieldTemplateDescriptor,{id:this.getId(),name:this.name,options:this.options}),this.injectField(this.field)),e&&e()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-hidden")},getValue:function(){return this.field.val()},setValue:function(e){t.isEmpty(e)?this.field.val(""):this.field.val(e),this.base(e)},getTitle:function(){return"Hidden"},getDescription:function(){return"Field for a hidden HTML input"},getType:function(){return"string"},getFieldType:function(){return"hidden"}}),t.registerTemplate("controlFieldHidden",'<input type="hidden" id="${id}" {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>'),t.registerFieldClass("hidden",t.Fields.HiddenField)}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_BASE",messages:{zh_CN:{required:"&#27492;&#22495;&#24517;&#39035;",invalid:"&#27492;&#22495;&#19981;&#21512;&#26684;",months:["&#19968;&#26376;","&#20108;&#26376;","&#19977;&#26376;","&#22235;&#26376;","&#20116;&#26376;","&#20845;&#26376;","&#19971;&#26376;","&#20843;&#26376;","&#20061;&#26376;","&#21313;&#26376;","&#21313;&#19968;&#26376;","&#21313;&#20108;&#26376;"],timeUnits:{SECOND:"&#31186;",MINUTE:"&#20998;",HOUR:"&#26102;",DAY:"&#26085;",MONTH:"&#26376;",YEAR:"&#24180;"},notOptional:"&#27492;&#22495;&#38750;&#20219;&#36873;",disallowValue:"&#38750;&#27861;&#36755;&#20837;&#21253;&#25324; {0}.",invalidValueOfEnum:"&#20801;&#35768;&#36755;&#20837;&#21253;&#25324; {0}.",notEnoughItems:"&#26368;&#23567;&#20010;&#25968; {0}",tooManyItems:"&#26368;&#22823;&#20010;&#25968; {0}",valueNotUnique:"&#36755;&#20837;&#20540;&#19981;&#29420;&#29305;",notAnArray:"&#19981;&#26159;&#25968;&#32452;",invalidDate:"&#26085;&#26399;&#26684;&#24335;&#22240;&#35813;&#26159; {0}",invalidEmail:"&#20234;&#22969;&#20799;&#26684;&#24335;&#19981;&#23545;, ex: info@cloudcms.com",stringNotAnInteger:"&#19981;&#26159;&#25972;&#25968;.",invalidIPv4:"&#19981;&#26159;&#21512;&#27861;IP&#22320;&#22336;, ex: 192.168.0.1",stringValueTooSmall:"&#26368;&#23567;&#20540;&#26159; {0}",stringValueTooLarge:"&#26368;&#22823;&#20540;&#26159; {0}",stringValueTooSmallExclusive:"&#20540;&#24517;&#39035;&#22823;&#20110; {0}",stringValueTooLargeExclusive:"&#20540;&#24517;&#39035;&#23567;&#20110; {0}",stringDivisibleBy:"&#20540;&#24517;&#39035;&#33021;&#34987; {0} &#25972;&#38500;",stringNotANumber:"&#19981;&#26159;&#25968;&#23383;.",invalidPassword:"&#38750;&#27861;&#23494;&#30721;",invalidPhone:"&#38750;&#27861;&#30005;&#35805;&#21495;&#30721;, ex: (123) 456-9999",invalidPattern:"&#27492;&#22495;&#39035;&#26377;&#26684;&#24335; {0}",stringTooShort:"&#27492;&#22495;&#33267;&#23569;&#38271;&#24230; {0}",stringTooLong:"&#27492;&#22495;&#26368;&#22810;&#38271;&#24230; {0}"}}})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_BASE",messages:{es_ES:{required:"Este campo es obligatorio",invalid:"Este campo es inválido",months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],timeUnits:{SECOND:"segundos",MINUTE:"minutos",HOUR:"horas",DAY:"días",MONTH:"meses",YEAR:"años"},notOptional:"Este campo no es opcional.",disallowValue:"{0} son los valores rechazados.",invalidValueOfEnum:"Este campo debe tener uno de los valores adentro {0}.",notEnoughItems:"El número mínimo de artículos es {0}",tooManyItems:"El número máximo de artículos es {0}",valueNotUnique:"Los valores no son únicos",notAnArray:"Este valor no es un arsenal",invalidDate:"Fecha inválida para el formato {0}",invalidEmail:"Email address inválido, ex: info@cloudcms.com",stringNotAnInteger:"Este valor no es un número entero.",invalidIPv4:"Dirección inválida IPv4, ex: 192.168.0.1",stringValueTooSmall:"El valor mínimo para este campo es {0}",stringValueTooLarge:"El valor míximo para este campo es {0}",stringValueTooSmallExclusive:"El valor de este campo debe ser mayor que {0}",stringValueTooLargeExclusive:"El valor de este campo debe ser menos que {0}",stringDivisibleBy:"El valor debe ser divisible cerca {0}",stringNotANumber:"Este valor no es un número.",invalidPassword:"Contraseña inválida",invalidPhone:"Número de teléfono inválido, ex: (123) 456-9999",invalidPattern:"Este campo debe tener patrón {0}",stringTooShort:"Este campo debe contener por lo menos {0} números o caracteres",stringTooLong:"Este campo debe contener a lo más {0} números o caracteres"}}})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_BASE",messages:{fr_FR:{required:"Ce champ est requis",invalid:"Ce champ est invalide",months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],timeUnits:{SECOND:"secondes",MINUTE:"minutes",HOUR:"heures",DAY:"jours",MONTH:"mois",YEAR:"années"},notOptional:"Ce champ n'est pas optionnel.",disallowValue:"{0} sont des valeurs interdites.",invalidValueOfEnum:"Ce champ doit prendre une des valeurs suivantes : {0}.",notEnoughItems:"Le nombre minimum d'éléments est {0}",tooManyItems:"Le nombre maximum d'éléments est {0}",valueNotUnique:"Les valeurs sont uniques",notAnArray:"Cette valeur n'est pas une liste",invalidDate:"Cette date ne correspond pas au format {0}",invalidEmail:"Adresse de courriel invalide, ex: info@cloudcms.com",stringNotAnInteger:"Cette valeur n'est pas un nombre entier.",invalidIPv4:"Adresse IPv4 invalide, ex: 192.168.0.1",stringValueTooSmall:"La valeur minimale pour ce champ est {0}",stringValueTooLarge:"La valeur maximale pour ce champ est {0}",stringValueTooSmallExclusive:"La valeur doit-être supérieure à {0}",stringValueTooLargeExclusive:"La valeur doit-être inférieure à {0}",stringDivisibleBy:"La valeur doit-être divisible par {0}",stringNotANumber:"Cette valeur n'est pas un nombre.",invalidPassword:"Mot de passe invalide",invalidPhone:"Numéro de téléphone invalide, ex: (123) 456-9999",invalidPattern:"Ce champ doit correspondre au motif {0}",stringTooShort:"Ce champ doit contenir au moins {0} caractères",stringTooLong:"Ce champ doit contenir au plus {0} caractères"}}})}(jQuery),function(e){var t=e.alpaca;t.registerView({id:"VIEW_BASE",messages:{de_AT:{required:"Eingabe erforderlich",invalid:"Eingabe invalid",months:["Jänner","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],timeUnits:{SECOND:"Sekunden",MINUTE:"Minuten",HOUR:"Stunden",DAY:"Tage",MONTH:"Monate",YEAR:"Jahre"},notOptional:"Dieses Feld ist nicht optional",disallowValue:"Diese Werte sind nicht erlaubt: {0}",invalidValueOfEnum:"Diese Feld sollte einen der folgenden Werte enthalten: {0}",notEnoughItems:"Die Mindestanzahl von Elementen ist {0}",tooManyItems:"Die Maximalanzahl von Elementen ist {0}",valueNotUnique:"Diese Werte sind nicht eindeutig",notAnArray:"Keine Liste von Werten",invalidDate:"Falsches Datumsformat: {0}",invalidEmail:"Ungültige e-Mail Adresse, z.B.: info@cloudcms.com",stringNotAnInteger:"Eingabe ist keine Ganz Zahl.",invalidIPv4:"Ungültige IPv4 Adresse, z.B.: 192.168.0.1",stringValueTooSmall:"Die Mindestanzahl von Zeichen ist {0}",stringValueTooLarge:"Die Maximalanzahl von Zeichen ist {0}",stringValueTooSmallExclusive:"Die Anzahl der Zeichen muss größer sein als {0}",stringValueTooLargeExclusive:"Die Anzahl der Zeichen muss kleiner sein als {0}",stringDivisibleBy:"Der Wert muss durch {0} dividierbar sein",stringNotANumber:"Die Eingabe ist keine Zahl",invalidPassword:"Ungültiges Passwort.",invalidPhone:"Ungültige Telefonnummer, z.B.: (123) 456-9999",invalidPattern:"Diese Feld stimmt nicht mit folgender Vorgabe überein {0}",stringTooShort:"Dieses Feld sollte mindestens {0} Zeichen enthalten",stringTooLong:"Dieses Feld sollte höchstens {0} Zeichen enthalten"}}})}(jQuery),function(e){var t=e.alpaca;t.Fields.AddressField=t.Fields.ObjectField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.schema={title:"Home Address",type:"object",properties:{street:{title:"Street",type:"array",items:{type:"string",maxLength:30,minItems:0,maxItems:3}},city:{title:"City",type:"string"},state:{title:"State",type:"string","enum":["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"]},zip:{title:"Zip Code",type:"string",pattern:/^(\d{5}(-\d{4})?)?$/}}},t.merge(this.options,{fields:{zip:{maskString:"99999",size:5},state:{optionLabels:["ALABAMA","ALASKA","AMERICANSAMOA","ARIZONA","ARKANSAS","CALIFORNIA","COLORADO","CONNECTICUT","DELAWARE","DISTRICTOFCOLUMBIA","FEDERATEDSTATESOFMICRONESIA","FLORIDA","GEORGIA","GUAM","HAWAII","IDAHO","ILLINOIS","INDIANA","IOWA","KANSAS","KENTUCKY","LOUISIANA","MAINE","MARSHALLISLANDS","MARYLAND","MASSACHUSETTS","MICHIGAN","MINNESOTA","MISSISSIPPI","MISSOURI","MONTANA","NEBRASKA","NEVADA","NEWHAMPSHIRE","NEWJERSEY","NEWMEXICO","NEWYORK","NORTHCAROLINA","NORTHDAKOTA","NORTHERNMARIANAISLANDS","OHIO","OKLAHOMA","OREGON","PALAU","PENNSYLVANIA","PUERTORICO","RHODEISLAND","SOUTHCAROLINA","SOUTHDAKOTA","TENNESSEE","TEXAS","UTAH","VERMONT","VIRGINISLANDS","VIRGINIA","WASHINGTON","WESTVIRGINIA","WISCONSIN","WYOMING"]}}}),t.isEmpty(this.options.addressValidation)&&(this.options.addressValidation=!0)},getAddress:function(){var t=this.getValue();this.view.type=="view"&&(t=this.data);var n="";return t&&(t.street&&e.each(t.street,function(e,t){n+=t+" "}),t.city&&(n+=t.city+" "),t.state&&(n+=t.state+" "),t.zip&&(n+=t.zip)),n},renderField:function(t){this.base();var n=this;e(this.fieldContainer).addClass("alpaca-addressfield");if(this.options.addressValidation&&!this.isDisplayOnly()){e('<div style="clear:both;"></div>').appendTo(this.fieldContainer);var r=e('<div class="alpaca-form-button">Google Map</div>').appendTo(this.fieldContainer);r.button&&r.button({text:!0}),r.click(function(){if(google&&google.maps){var t=new google.maps.Geocoder,r=n.getAddress();t&&t.geocode({address:r},function(t,r){if(r==google.maps.GeocoderStatus.OK){var i=n.getId()+"-map-canvas";e("#"+i).length===0&&e("<div id='"+i+"' class='alpaca-controlfield-address-mapcanvas'></div>").appendTo(n.fieldContainer);var s=new google.maps.Map(document.getElementById(n.getId()+"-map-canvas"),{zoom:10,center:t[0].geometry.location,mapTypeId:google.maps.MapTypeId.ROADMAP}),o=new google.maps.Marker({map:s,position:t[0].geometry.location})}else n.displayMessage("Geocoding failed: "+r)})}else n.displayMessage("Google Map API is not installed.")}).wrap("<small/>")}t&&t()}}),t.registerFieldClass("address",t.Fields.AddressField)}(jQuery),function(e){var t=e.alpaca;t.Fields.DateField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.dateFormat||(this.options.dateFormat=t.defaultDateFormat),this.options.dateFormatRegex||(this.options.dateFormatRegex=t.regexps.date)},postRender:function(){this.base(),this.field&&e.datepicker&&(this.field.datepicker({dateFormat:this.options.dateFormat}),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-date"))},onChange:function(e){this.base(),this.renderValidationState()},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateDateFormat();return n.invalidDate={message:r?"":t.substituteTokens(this.view.getMessage("invalidDate"),[this.options.dateFormat]),status:r},e&&n.invalidDate.status},_validateDateFormat:function(){var t=this.field.val();if(!e.datepicker)return t.match(this.options.dateFormatRegex);try{return e.datepicker.parseDate(this.options.dateFormat,t),!0}catch(n){return!1}},setValue:function(e){if(e===""){this.base(e);return}this.base(e)}}),t.registerMessages({invalidDate:"Invalid date for format {0}"}),t.registerFieldClass("date",t.Fields.DateField),t.registerDefaultFormatFieldMapping("date","date")}(jQuery),function(e){var t=e.alpaca;t.Fields.DatetimeField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base()},postRender:function(){var t=this;this.base(),this.field&&this.field.datetimepicker&&(this.field.hover(function(){e(this).hasClass("hasDatepicker")||e(this).datetimepicker(t.options.datetime?t.options.datetime:{})}),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-datetime"))},setValue:function(e){e?(t.isNumber()&&(e=new Date(e)),Object.prototype.toString.call(e)=="[object Date]"?this.base(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()):this.base(e)):this.base(e)},getValue:function(){return this.base()},getDatetime:function(){try{return this.field.datetimepicker("getDate")}catch(e){return this.getValue()}}}),t.registerFieldClass("datetime",t.Fields.DatetimeField),t.registerDefaultFormatFieldMapping("datetime","datetime")}(jQuery),function(e){var t=e.alpaca;t.Fields.EditorField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldEditor")},postRender:function(){this.base();var t=this;if(this.fieldContainer){this.fieldContainer.addClass("alpaca-controlfield-editor"),e(this.fieldContainer).parent().css("width","100%");var n=this.options.aceHeight;n&&e(this.fieldContainer).css("height",n);var r=this.options.aceWidth;r||(r="100%"),e(this.fieldContainer).css("width",r)}var i=e(this.fieldContainer).find(".control-field-editor-el")[0];!ace&&window.ace&&(ace=window.ace),this.editor=ace.edit(i);var s=this.options.aceTheme;s||(s="ace/theme/chrome"),this.editor.setTheme(s);var o=this.options.aceMode;o||(o="ace/mode/json"),this.editor.getSession().setMode(o),this.editor.renderer.setHScrollBarAlwaysVisible(!1),this.editor.setShowPrintMargin(!1),this.editor.setValue(this.data),this.editor.clearSelection();if(this.options.aceFitContentHeight){var u=function(){var n=t.editor.getSession().getScreenLength()*t.editor.renderer.lineHeight+t.editor.renderer.scrollBar.getWidth();e(t.fieldContainer).height(n.toString()+"px"),t.editor.resize()};u(),t.editor.getSession().on("change",u)}this.schema.readonly&&this.editor.setReadOnly(!0),e(i).bind("destroyed",function(){t.editor&&(t.editor.destroy(),t.editor=null)})},destroy:function(){this.editor&&(this.editor.destroy(),this.editor=null),this.base()},getEditor:function(){return this.editor},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateWordCount();return n.wordLimitExceeded={message:r?"":t.substituteTokens(this.view.getMessage("wordLimitExceeded"),[this.options.wordlimit]),status:r},e&&n.wordLimitExceeded.status},_validateWordCount:function(){if(this.options.wordlimit&&this.options.wordlimit>-1){var e=this.editor.getValue();if(e){var t=e.split(" ").length;if(t>this.options.wordlimit)return!1}}return!0},setValue:function(e){var t=this;this.editor&&this.editor.setValue(e),this.base(e)},getValue:function(){var e=null;return this.editor&&(e=this.editor.getValue()),e}}),t.registerMessages({wordLimitExceeded:"The maximum word limit of {0} has been exceeded."}),t.registerTemplate("controlFieldEditor",'<div id="${id}" class="control-field-editor-el"></div>'),t.registerFieldClass("editor",t.Fields.EditorField)}(jQuery),function(e){var t=e.alpaca;t.Fields.EmailField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.schema.pattern||(this.schema.pattern=t.regexps.email)},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-email")},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.view.getMessage("invalidEmail")),e}}),t.registerMessages({invalidEmail:"Invalid Email address e.g. info@cloudcms.com"}),t.registerFieldClass("email",t.Fields.EmailField),t.registerDefaultFormatFieldMapping("email","email")}(jQuery),function(e){var t=e.alpaca;t.Fields.IntegerField=t.Fields.NumberField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},getValue:function(){var e=this.field.val();return t.isValEmpty(e)?"":parseInt(e,10)},onChange:function(e){this.base(),this.slider&&this.slider.slider("value",this.getValue())},postRender:function(){this.base();var n=this;this.options.slider&&!t.isEmpty(this.schema.maximum)&&!t.isEmpty(this.schema.minimum)&&this.field&&(this.field.after('<div id="slider"></div>'),this.slider=e("#slider",this.field.parent()).slider({value:this.getValue(),min:this.schema.minimum,max:this.schema.maximum,slide:function(e,t){n.setValue(t.value),n.renderValidationState()}})),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-integer")},handleValidate:function(){var e=this.base(),t=this.validation;return t.stringNotANumber.status||(t.stringNotANumber.message=this.view.getMessage("stringNotAnInteger")),e},_validateNumber:function(){var e=this.field.val();if(t.isValEmpty(e))return!0;var n=this.getValue();return isNaN(n)?!1:e.match(t.regexps.integer)?!0:!1}}),t.registerMessages({stringNotAnInteger:"This value is not an integer."}),t.registerFieldClass("integer",t.Fields.IntegerField),t.registerDefaultSchemaFieldMapping("integer","integer")}(jQuery),function(e){var t=e.alpaca;t.Fields.IPv4Field=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.schema.pattern||(this.schema.pattern=t.regexps.ipv4)},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-ipv4")},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.view.getMessage("invalidIPv4")),e}}),t.registerMessages({invalidIPv4:"Invalid IPv4 address, e.g. 192.168.0.1"}),t.registerFieldClass("ipv4",t.Fields.IPv4Field),t.registerDefaultFormatFieldMapping("ip-address","ipv4")}(jQuery),function(e){function n(e){if(typeof e.data!="string")return;var t=e.handler,n=e.data.toLowerCase().split(" ");e.handler=function(e){if(!(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&e.target.type!=="text"))return;var r=e.type!=="keypress"&&jQuery.hotkeys.specialKeys[e.which],i=String.fromCharCode(e.which).toLowerCase(),s,o="",u={};e.altKey&&r!=="alt"&&(o+="alt+"),e.ctrlKey&&r!=="ctrl"&&(o+="ctrl+"),e.metaKey&&!e.ctrlKey&&r!=="meta"&&(o+="meta+"),e.shiftKey&&r!=="shift"&&(o+="shift+"),r?u[o+r]=!0:(u[o+i]=!0,u[o+jQuery.hotkeys.shiftNums[i]]=!0,o==="shift+"&&(u[jQuery.hotkeys.shiftNums[i]]=!0));for(var a=0,l=n.length;a<l;a++)if(u[n[a]])return t.apply(this,arguments)}}var t=e.alpaca;t.Fields.JSONField=t.Fields.TextAreaField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setValue:function(e){if(t.isObject(e)||typeof e=="object")e=JSON.stringify(e,null,3);this.base(e)},getValue:function(){var e=this.base();return e&&t.isString(e)&&(e=JSON.parse(e)),e},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateJSON();return t.stringNotAJSON={message:n.status?"":this.view.getMessage("stringNotAJSON")+" "+n.message,status:n.status},e&&t.stringNotAJSON.status},_validateJSON:function(){var e=this.field.val();if(t.isValEmpty(e))return{status:!0};try{var n=JSON.parse(e);return this.setValue(JSON.stringify(n,null,3)),{status:!0}}catch(r){return{status:!1,message:r.message}}},postRender:function(){this.base();var e=this;this.field&&(this.field.bind("keypress",function(t){t.which==34&&e.field.insertAtCaret('"'),t.which==123&&e.field.insertAtCaret("}"),t.which==91&&e.field.insertAtCaret("]")}),this.field.bind("keypress","Ctrl+l",function(){e.getEl().removeClass("alpaca-field-focused"),e.renderValidationState()}),this.field.attr("title","Type Ctrl+L to format and validate the JSON string.")),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-json")}}),t.registerMessages({stringNotAJSON:"This value is not a valid JSON string."}),t.registerFieldClass("json",t.Fields.JSONField),e.fn.insertAtCaret=function(e){return this.each(function(){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=e,this.focus();else if(this.selectionStart||this.selectionStart=="0"){var t=this.selectionStart,n=this.selectionEnd,r=this.scrollTop;this.value=this.value.substring(0,t)+e+this.value.substring(n,this.value.length),this.focus(),this.selectionStart=t,this.selectionEnd=t,this.scrollTop=r}else this.value+=e,this.focus()})},jQuery.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:n}})}(jQuery),function(e){var t=e.alpaca;t.Fields.IntegerField=t.Fields.NumberField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},getValue:function(){var e=this.field.val();return t.isValEmpty(e)?"":parseInt(e,10)},onChange:function(e){this.base(),this.slider&&this.slider.slider("value",this.getValue())},postRender:function(){this.base();var n=this;this.options.slider&&!t.isEmpty(this.schema.maximum)&&!t.isEmpty(this.schema.minimum)&&this.field&&(this.field.after('<div id="slider"></div>'),this.slider=e("#slider",this.field.parent()).slider({value:this.getValue(),min:this.schema.minimum,max:this.schema.maximum,slide:function(e,t){n.setValue(t.value),n.renderValidationState()}})),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-integer")},handleValidate:function(){var e=this.base(),t=this.validation;return t.stringNotANumber.status||(t.stringNotANumber.message=this.view.getMessage("stringNotAnInteger")),e},_validateNumber:function(){var e=this.field.val();if(t.isValEmpty(e))return!0;var n=this.getValue();return isNaN(n)?!1:e.match(t.regexps.integer)?!0:!1}}),t.registerMessages({stringNotAnInteger:"This value is not an integer."}),t.registerFieldClass("integer",t.Fields.IntegerField),t.registerDefaultSchemaFieldMapping("integer","integer")}(jQuery),function(e){var t=e.alpaca;t.Fields.LowerCaseField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-lowercase")},setValue:function(e){var t=e.toLowerCase();t!=this.getValue()&&this.base(t)},onKeyPress:function(e){this.base(e);var n=this;t.later(25,this,function(){var e=n.getValue();n.setValue(e)})}}),t.registerFieldClass("lowercase",t.Fields.LowerCaseField),t.registerDefaultFormatFieldMapping("lowercase","lowercase")}(jQuery),function(e){var t=e.alpaca;t.Fields.MapField=t.Fields.ArrayField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base();if(t.isEmpty(this.data))return;if(!t.isArray(this.data)&&t.isObject(this.data)){var n=[];e.each(this.data,function(e,r){var i=t.copyOf(r);i._key=e,n.push(i)}),this.data=n}t.mergeObject(this.options,{forceRevalidation:!0})},getValue:function(){var e={};for(var t=0;t<this.children.length;t++){var n=this.children[t].getValue(),r=n._key;r&&(delete n._key,e[r]=n)}return e},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateMapKeysNotEmpty();t.keyMissing={message:n?"":this.view.getMessage("keyMissing"),status:n};var r=this._validateMapKeysUnique();return t.keyNotUnique={message:r?this.view.getMessage("keyNotUnique"):"",status:r},e&&t.keyMissing.status&&t.keyNotUnique.status},_validateMapKeysNotEmpty:function(){var e=!0;for(var t=0;t<this.children.length;t++){var n=this.children[t].getValue(),r=n._key;if(!r){e=!1;break}}return e},_validateMapKeysUnique:function(){var e=!0,t={};for(var n=0;n<this.children.length;n++){var r=this.children[n].getValue(),i=r._key;t[i]&&(e=!1),t[i]=i}return e},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-map")}}),t.registerFieldClass("map",t.Fields.MapField),t.registerMessages({keyNotUnique:"Keys of map field are not unique.",keyMissing:"Map contains an empty key."})}(jQuery),function(e){var t=e.alpaca;t.Fields.PasswordField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.schema.pattern||(this.schema.pattern=t.regexps.password),this.controlFieldTemplateDescriptor=this.view.getTemplateDescriptor("controlFieldPassword")},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-password")},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.view.getMessage("invalidPassword")),e}}),t.registerTemplate("controlFieldPassword",'<input type="password" id="${id}" {{if options.size}}size="${options.size}"{{/if}} {{if options.readonly}}readonly="readonly"{{/if}} {{if name}}name="${name}"{{/if}} {{each(i,v) options.data}}data-${i}="${v}"{{/each}}/>'),t.registerMessages({invalidPassword:"Invalid Password"}),t.registerFieldClass("password",t.Fields.PasswordField),t.registerDefaultFormatFieldMapping("password","password")}(jQuery),function(e){var t=e.alpaca;t.Fields.PersonalNameField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-personalname")},setValue:function(e){var t="";for(var n=0;n<e.length;n++)n===0?t+=e.charAt(n).toUpperCase():e.charAt(n-1)==" "||e.charAt(n-1)=="-"||e.charAt(n-1)=="'"?t+=e.charAt(n).toUpperCase():t+=e.charAt(n);t!=this.getValue()&&this.base(t)},onKeyPress:function(e){this.base(e);var n=this;t.later(25,this,function(){var e=n.getValue();n.setValue(e)})}}),t.registerFieldClass("personalname",t.Fields.PersonalNameField)}(jQuery),function(e){var t=e.alpaca;t.Fields.PhoneField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.schema.pattern||(this.schema.pattern=t.regexps.phone),t.isEmpty(this.options.maskString)&&(this.options.maskString="(999) 999-9999")},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-phone")},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.view.getMessage("invalidPhone")),e}}),t.registerMessages({invalidPhone:"Invalid Phone Number, e.g. (123) 456-9999"}),t.registerFieldClass("phone",t.Fields.PhoneField),t.registerDefaultFormatFieldMapping("phone","phone")}(jQuery),function(e){var t=e.alpaca;t.Fields.TagField=t.Fields.LowerCaseField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.separator||(this.options.separator=",")},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-tag")},getValue:function(){var e=this.base();return e===""?[]:e.split(this.options.separator)},setValue:function(e){if(e==="")return;this.base(e.join(this.options.separator))},onBlur:function(t){this.base(t);var n=this.getValue(),r=[];e.each(n,function(e,t){t.trim()!==""&&r.push(t.trim())}),this.setValue(r)}}),t.registerFieldClass("tag",t.Fields.TagField)}(jQuery),function(e){var t=e.alpaca;t.Fields.TimeField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.base(),this.options.timeFormat||(this.options.timeFormat="hh:mm:ss"),this.options.timeFormatRegex||(this.options.timeFormatRegex=/^(([0-1][0-9])|([2][0-3])):([0-5][0-9]):([0-5][0-9])$/),t.isEmpty(this.options.maskString)&&(this.options.maskString="99:99:99")},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-time")},onChange:function(e){this.base(),this.renderValidationState()},handleValidate:function(){var e=this.base(),n=this.validation,r=this._validateTimeFormat();return n.invalidTime={message:r?"":t.substituteTokens(this.view.getMessage("invalidTime"),[this.options.timeFormat]),status:r},e&&n.invalidTime.status},_validateTimeFormat:function(){var e=this.field.val();return!this.schema.required&&(t.isValEmpty(e)||e=="__:__:__")?!0:e.match(this.options.timeFormatRegex)}}),t.registerMessages({invalidTime:"Invalid time for format {0}"}),t.registerFieldClass("time",t.Fields.TimeField),t.registerDefaultFormatFieldMapping("time","time")}(jQuery),function(e){var t=e.alpaca;t.Fields.UpperCaseField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-uppercase")},setValue:function(e){var t=e.toUpperCase();t!=this.getValue()&&this.base(t)},onKeyPress:function(e){this.base(e);var n=this;t.later(25,this,function(){var e=n.getValue();n.setValue(e)})}}),t.registerFieldClass("uppercase",t.Fields.UpperCaseField),t.registerDefaultFormatFieldMapping("uppercase","uppercase")}(jQuery),function(e){var t=e.alpaca;t.Fields.WysiwygField=t.Fields.TextAreaField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o),this.controlsConfig={},this.controlsConfig.simple={html:{visible:!0},createLink:{visible:!1},unLink:{visible:!1},h1:{visible:!1},h2:{visible:!1},h3:{visible:!1},indent:{visible:!1},insertHorizontalRule:{visible:!1},insertImage:{visible:!1},insertOrderedList:{visible:!1},insertTable:{visible:!1},insertUnorderedList:{visible:!1},justifyCenter:{visible:!1},justifyFull:{visible:!1},justifyLeft:{visible:!1},justifyRight:{visible:!1},outdent:{visible:!1},redo:{visible:!1},removeFormat:{visible:!1},subscript:{visible:!1},superscript:{visible:!1},undo:{visible:!1},code:{visible:!1},strikeThrough:{visible:!1}}},setup:function(){this.base(),this.plugin=null},postRender:function(){this.base();var t=this;if(this.field&&e.wysiwyg){var n=this.options.wysiwyg?this.options.wysiwyg:{};n.controls&&typeof n.controls=="string"&&(n.controls=this.controlsConfig[n.controls],n.controls||(n.controls={})),this.options.onDemand?this.outerEl.find("textarea").mouseover(function(){t.plugin||(t.plugin=e(this).wysiwyg(n),t.outerEl.find(".wysiwyg").mouseout(function(){t.plugin&&t.plugin.wysiwyg("destroy"),t.plugin=null}))}):this.plugin=this.field.wysiwyg(n),this.outerEl.find(".wysiwyg").mouseout(function(){t.data=t.getValue(),t.renderValidationState()})}this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-wysiwyg")}}),t.registerFieldClass("wysiwyg",t.Fields.WysiwygField)}(jQuery),function(e){var t=e.alpaca;t.Fields.StateField=t.Fields.SelectField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){t.isUndefined(this.options.capitalize)&&(this.options.capitalize=!1),t.isUndefined(this.options.includeStates)&&(this.options.includeStates=!0),t.isUndefined(this.options.includeTerritories)&&(this.options.includeTerritories=!0),t.isUndefined(this.options.format)&&(this.options.format="name"),this.options.format!="name"&&this.options.format!="code"&&(t.logError("The configured state format: "+this.options.format+" is not a legal value [name, code]"),this.options.format="name");var e=t.retrieveUSHoldings(this.options.includeStates,this.options.includeTerritories,this.options.format=="code",this.options.capitalize);this.schema["enum"]=e.keys,this.options.optionLabels=e.values,this.base()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-state")},handleValidate:function(){var e=this.base();return e}}),t.registerFieldClass("state",t.Fields.StateField),t.registerDefaultFormatFieldMapping("state","state"),t.retrieveUSHoldings=function(){var e=[];return e.push({name:"Arkansas",code:"AK",state:!0,territory:!1}),e.push({name:"Alabama",code:"AL",state:!0,territory:!1}),e.push({name:"American Samoa",code:"AS",state:!1,territory:!0}),e.push({name:"Arizona",code:"AR",state:!0,territory:!1}),e.push({name:"California",code:"CA",state:!0,territory:!1}),e.push({name:"Colorado",code:"CO",state:!0,territory:!1}),e.push({name:"Connecticut",code:"CT",state:!0,territory:!1}),e.push({name:"Delaware",code:"DE",state:!0,territory:!1}),e.push({name:"Distict of Columbia",code:"DC",state:!1,territory:!0}),e.push({name:"Federated States of Micronesia",code:"FM",state:!1,territory:!0}),e.push({name:"Florida",code:"FL",state:!0,territory:!1}),e.push({name:"Georgia",code:"GA",state:!0,territory:!1}),e.push({name:"Guam",code:"GU",state:!1,territory:!0}),e.push({name:"Georgia",code:"GA",state:!0,territory:!1}),e.push({name:"Hawaii",code:"HI",state:!0,territory:!1}),e.push({name:"Idaho",code:"ID",state:!0,territory:!1}),e.push({name:"Illinois",code:"IL",state:!0,territory:!1}),e.push({name:"Indiana",code:"IN",state:!0,territory:!1}),e.push({name:"Iowa",code:"IA",state:!0,territory:!1}),e.push({name:"Kansas",code:"KS",state:!0,territory:!1}),e.push({name:"Kentucky",code:"KY",state:!0,territory:!1}),e.push({name:"Louisiana",code:"LA",state:!0,territory:!1}),e.push({name:"Maine",code:"ME",state:!0,territory:!1}),e.push({name:"Marshall Islands",code:"MH",state:!1,territory:!0}),e.push({name:"Maryland",code:"MD",state:!0,territory:!1}),e.push({name:"Massachusetts",code:"MA",state:!0,territory:!1}),e.push({name:"Michigan",code:"MI",state:!0,territory:!1}),e.push({name:"Minnesota",code:"MN",state:!0,territory:!1}),e.push({name:"Mississippi",code:"MS",state:!0,territory:!1}),e.push({name:"Missouri",code:"MO",state:!0,territory:!1}),e.push({name:"Montana",code:"MT",state:!0,territory:!1}),e.push({name:"Nebraska",code:"NE",state:!0,territory:!1}),e.push({name:"Nevada",code:"NV",state:!0,territory:!1}),e.push({name:"New Hampshire",code:"NH",state:!0,territory:!1}),e.push({name:"New Jersey",code:"NJ",state:!0,territory:!1}),e.push({name:"New Mexico",code:"NM",state:!0,territory:!1}),e.push({name:"New York",code:"NY",state:!0,territory:!1}),e.push({name:"North Carolina",code:"NC",state:!0,territory:!1}),e.push({name:"North Dakota",code:"ND",state:!0,territory:!1}),e.push({name:"Northern Mariana Islands",code:"MP",state:!0,territory:!1}),e.push({name:"Ohio",code:"OH",state:!0,territory:!1}),e.push({name:"Oklahoma",code:"OK",state:!0,territory:!1}),e.push({name:"Oregon",code:"OR",state:!0,territory:!1}),e.push({name:"Palau",code:"PW",state:!1,territory:!0}),e.push({name:"Pennsylvania",code:"PA",state:!0,territory:!1}),e.push({name:"Puerto Rico",code:"PR",state:!1,territory:!0}),e.push({name:"Rhode Island",code:"RI",state:!0,territory:!1}),e.push({name:"South Carolina",code:"SC",state:!0,territory:!1}),e.push({name:"South Dakota",code:"SD",state:!0,territory:!1}),e.push({name:"Tennessee",code:"TN",state:!0,territory:!1}),e.push({name:"Texas",code:"TX",state:!0,territory:!1}),e.push({name:"Utah",code:"UT",state:!0,territory:!1}),e.push({name:"Vermont",code:"VT",state:!0,territory:!1}),e.push({name:"Virgin Islands",code:"VI",state:!1,territory:!0}),e.push({name:"Virginia",code:"VA",state:!0,territory:!1}),e.push({name:"Washington",code:"WA",state:!0,territory:!1}),e.push({name:"West Virginia",code:"WV",state:!0,territory:!1}),e.push({name:"Wisconsin",code:"WI",state:!0,territory:!1}),e.push({name:"Wyoming",code:"WY",state:!0,territory:!1}),function(t,n,r,i){var s={keys:[],values:[]};for(var o=0;o<e.length;o++){var u=!1;e[o].state&&t?u=!0:e[o].territory&&n&&(u=!0);if(u){var a=e[o].code,f=e[o].name;r&&(f=e[o].code),i&&(f=f.toUpperCase()),s.keys.push(a),s.values.push(f)}}return s}}()}(jQuery),function(e){var t=e.alpaca;t.Fields.CountryField=t.Fields.SelectField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){t.isUndefined(this.options.capitalize)&&(this.options.capitalize=!1),this.schema["enum"]=[],this.options.optionLabels=[];var e=this.view.getMessage("countries");if(e)for(var n in e){this.schema["enum"].push(n);var r=e[n];this.options.capitalize&&(r=r.toUpperCase()),this.options.optionLabels.push(r)}this.base()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-country")},handleValidate:function(){var e=this.base();return e}}),t.registerFieldClass("country",t.Fields.CountryField),t.registerDefaultFormatFieldMapping("country","country")}(jQuery),function(e){var t=e.alpaca;t.Fields.ZipcodeField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.options.format=this.options.format?this.options.format:"nine",this.options.format=="nine"?this.schema.pattern=t.regexps["zipcode-nine"]:this.options.format=="five"?this.schema.pattern=t.regexps["zipcode-five"]:(t.logError("The configured zipcode format: "+this.options.format+" is not a legal value [five, nine]"),this.options.format="nine",this.schema.pattern=t.regexps["zipcode-nine"]),this.options.format=="nine"?this.options.maskString="99999-9999":this.options.format=="five"&&(this.options.maskString="99999"),this.base()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-zipcode")},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(this.options.format=="nine"?t.invalidPattern.message=this.view.getMessage("invalidZipcodeFormatNine"):this.options.format=="five"&&(t.invalidPattern.message=this.view.getMessage("invalidZipcodeFormatFive"))),e}}),t.registerMessages({invalidZipcodeFormatFive:"Invalid Five-Digit Zipcode (#####)",invalidZipcodeFormatNine:"Invalid Nine-Digit Zipcode (#####-####)"}),t.registerFieldClass("zipcode",t.Fields.ZipcodeField),t.registerDefaultFormatFieldMapping("zipcode","zipcode")}(jQuery),function(e){var t=e.alpaca;t.Fields.URLField=t.Fields.TextField.extend({constructor:function(e,t,n,r,i,s,o){this.base(e,t,n,r,i,s,o)},setup:function(){this.schema.pattern=t.regexps.url,this.schema.format="uri",this.base()},postRender:function(){this.base(),this.fieldContainer&&this.fieldContainer.addClass("alpaca-controlfield-url")},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.view.getMessage("invalidURLFormat")),e}}),t.registerMessages({invalidURLFormat:"The URL provided is not a valid web address."}),t.registerFieldClass("url",t.Fields.URLField),t.registerDefaultFormatFieldMapping("url","url")}(jQuery),define("alpaca",["jquery"],function(){}),eval("define('Views/Section.Signup/ItemView.SignupForm',['require','jquery','underscore','backbone','marionette','templates','alpaca'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Alpaca = require('alpaca');\n\n	var SignupFormView = Backbone.Marionette.ItemView.extend({\n		template: Template.SignupForm,\n		initialize: function (options) {\n			this.formData = this.cache.get('formData');\n			this.formSchema = this.cache.get('formSchema');\n		},\n		displayForm: function () {\n			$.alpaca(this.$('.well'), {\n				view: 'VIEW_BOOTSTRAP_CREATE',\n				// data: this.formData.get('data'),\n				schema: this.formSchema.get('schema'),\n				options: this.formSchema.get('options')\n			});\n			this.$('.icon-star').hide();\n		},\n		onShow: function () {\n			this.displayForm();\n		}\n	});\n	return SignupFormView;\n});\n//# sourceURL=/Views/Section.Signup/ItemView.SignupForm.js"),eval("define('Views/Section.Signup/ItemView.BasicRegistration',['require','jquery','underscore','backbone','marionette','templates','backbone.syphon'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Syphon = require('backbone.syphon');\n\n	var BasicRegistration = Backbone.Marionette.ItemView.extend({\n		template: Template.BasicRegistration,\n		events: {\n			'click #signup-btn': 'submits',\n			'click a.close': 'surpress'\n		},\n		initialize: function () {\n			this.user = this.cache.prepare('user');\n		},\n		surpress: function (event) {\n			event.stopPropagation();\n			event.preventDefault();\n		},\n		displayErrors: function () {\n			// var errors = this.user.getErrors();\n\n			this.$('.alert').removeClass('hidden');\n		},\n		submit: function (event) {\n			this.surpress(event);\n\n			var self = this;\n			this.user.set(Backbone.Syphon.serialize(this));\n\n			if (this.user.hasErrors()) {\n				this.displayErrors();\n			} else {\n				this.user.serverCreate({\n					error: function () {\n						self.displayErrors();\n					},\n					success: function () {\n						App.Router.navigate('Dashboard', {\n							trigger: true\n						});\n					}\n				});\n			}\n		}\n	});\n	return BasicRegistration;\n});\n//# sourceURL=/Views/Section.Signup/ItemView.BasicRegistration.js"),eval("define('Views/Section.Signup/ItemView.AdvancedRegistration',['require','jquery','underscore','backbone','marionette','templates','backbone.syphon'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Syphon = require('backbone.syphon');\n\n	var AdvancedRegistration = Backbone.Marionette.ItemView.extend({\n		template: Template.AdvancedRegistration,\n		events: {\n			'click #complete-btn': 'complete',\n			'click a': 'surpress'\n		},\n		initialize: function () {\n			this.user = this.cache.get('user');\n		},\n		surpress: function (event) {\n			event.stopPropagation();\n			event.preventDefault();\n		},\n		displayErrors: function () {\n			// var errors = this.user.getErrors();\n\n			this.$('.alert').removeClass('hidden');\n		},\n		complete: function (event) {\n			this.surpress(event);\n\n			var self = this;\n			this.user.set(Backbone.Syphon.serialize(this));\n\n			if (this.user.hasErrors()) {\n				this.displayErrors();\n			} else {\n				this.user.serverUpdate({\n					error: function () {\n						self.displayErrors();\n					},\n					success: function () {\n						App.Router.navigate('Dashboard', {\n							trigger: true\n						});\n					}\n				});\n			}\n		}\n	});\n	return AdvancedRegistration;\n});\n//# sourceURL=/Views/Section.Signup/ItemView.AdvancedRegistration.js"),eval("define('Views/Section.Signup/SignupLoading/ItemView.SignupLoading',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var SignupLoading = Backbone.Marionette.ItemView.extend({\n		tagName: 'div',\n		className: 'loading',\n		template: Template.SignupLoading\n	});\n	return SignupLoading;\n});\n//# sourceURL=/Views/Section.Signup/SignupLoading/ItemView.SignupLoading.js"),eval("define('Views/Section.Signup/Layout.Signup',['require','jquery','underscore','backbone','marionette','templates','./ItemView.SignupForm','./ItemView.BasicRegistration','./ItemView.AdvancedRegistration','./SignupLoading/ItemView.SignupLoading'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var SignupForm = require('./ItemView.SignupForm');\n	var BasicRegistration = require('./ItemView.BasicRegistration');\n	var AdvancedRegistration = require('./ItemView.AdvancedRegistration');\n	var SignupLoading = require('./SignupLoading/ItemView.SignupLoading');\n\n	var SignupLayout = Backbone.Marionette.Layout.extend({\n		template: Template.Signup,\n		tagName: 'div',\n		regions: {\n			section1: '#section1',\n			section2: '#section2',\n			section3: '#section3'\n		},\n		initialize: function (options) {\n			this.formData = this.cache.get('formData');\n			this.formSchema = this.cache.get('formSchema');\n		},\n		onShow: function () {\n\n			var self = this;\n			var data = this.formData.deferred;\n			var schema = this.formSchema.deferred;\n\n			if (data.state() === 'pending' ||\n				schema.state() === 'pending') {\n\n				this.section1.show(new SignupLoading());\n			}\n\n			$.when(data, schema).then(function () {\n				self.section1.show(new BasicRegistration());\n				self.section2.show(new SignupForm());\n				self.section3.show(new AdvancedRegistration());\n			});\n		}\n	});\n	return SignupLayout;\n});\n//# sourceURL=/Views/Section.Signup/Layout.Signup.js"),eval("define('Routes/Route.Signup',['require','Views/Section.Signup/Layout.Signup'],function (require) {\n	'use strict';\n\n	var Signup = require('Views/Section.Signup/Layout.Signup');\n\n	return {\n		resources: {\n			signup: {\n				constructor: Signup,\n				trigger: 'signup',\n				button: '#signup'\n			}\n		},\n		routes: {\n			'Signup': 'signup',\n			'Signup/:id': 'signupBySection'\n		},\n		controller: {\n			signup: function (page) {\n				this.trackPageView('signup');\n				this.triggerRoute('signup');\n			},\n			signupBySection: function (section) {\n				this.trackPageView('signup/' + section);\n				this.triggerRoute('signup', {\n					section: section\n				});\n			}\n		}\n	};\n});\n//# sourceURL=/Routes/Route.Signup.js"),eval("define('App.Router',['require','jquery','underscore','backbone','marionette','./Routes/Route.Dashboard','./Routes/Route.Errors','./Routes/Route.Login','./Routes/Route.marketing','./Routes/Route.Signup'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n\n	// var Accounts = require('./Routes/Routes.Accounts');\n	var dashboard = require('./Routes/Route.Dashboard');\n	var errors = require('./Routes/Route.Errors');\n	var login = require('./Routes/Route.Login');\n	var marketing = require('./Routes/Route.marketing');\n	var signup = require('./Routes/Route.Signup');\n\n	var resourceMap = _.extend({}, dashboard.resources, signup.resources, login.resources, marketing.resources, errors.resources);\n\n	// Section Model manages the state of the subnav section\n	var sectionModel = new Backbone.Model();\n\n	return Backbone.Marionette.AppRouter.extend({\n		sectionModel: sectionModel,\n		getState: function () {\n			return sectionModel.get('state');\n		},\n		appRoutes: _.extend({\n			// Default\n			'': 'defaultRoute'\n\n		}, dashboard.routes, signup.routes, login.routes, marketing.routes, errors.routes),\n		controller: _.extend({\n			defaultRoute: function () {\n				App.Router.navigate('Dashboard', {\n					trigger: true\n				});\n			},\n			triggerRoute: function (section, options) {\n				var resource = resourceMap[section];\n\n				sectionModel.set('state', section);\n\n				App.content.show(new resource.constructor(options || {}));\n\n				// Scroll the window to the top\n				App.$body.animate({\n					scrollTop: 0\n				});\n			},\n\n			// trackPageView\n			// Handles forwarding App.analytics and Google Analytics calls\n			trackPageView: function (page) {\n\n			}\n		}, dashboard.controller, signup.controller, login.controller, marketing.controller, errors.controller)\n	});\n});\n//# sourceURL=/App.Router.js"),function(e){var t={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper"},n=e(window),r=e(document),i=[],s=n.height(),o=function(){var e=n.scrollTop(),t=r.height(),o=t-s,u=e>o?o-e:0;for(var a=0;a<i.length;a++){var f=i[a],l=f.stickyWrapper.offset().top,c=l-f.topSpacing-u;if(e<=c)f.currentTop!==null&&(f.stickyElement.css("position","").css("top","").removeClass(f.className),f.stickyElement.parent().removeClass(f.className),f.currentTop=null);else{var h=t-f.stickyElement.outerHeight()-f.topSpacing-f.bottomSpacing-e-u;h<0?h+=f.topSpacing:h=f.topSpacing,f.currentTop!=h&&(f.stickyElement.css("position","fixed").css("top",h).addClass(f.className),f.stickyElement.parent().addClass(f.className),f.currentTop=h)}}},u=function(){s=n.height()},a={init:function(n){var r=e.extend(t,n);return this.each(function(){var t=e(this);stickyId=t.attr("id"),wrapper=e("<div></div>").attr("id",stickyId+"-sticky-wrapper").addClass(r.wrapperClassName),t.wrapAll(wrapper);var n=t.parent();n.css("height",t.outerHeight()),i.push({topSpacing:r.topSpacing,bottomSpacing:r.bottomSpacing,stickyElement:t,currentTop:null,stickyWrapper:n,className:r.className})})},update:o};window.addEventListener?(window.addEventListener("scroll",o,!1),window.addEventListener("resize",u,!1)):window.attachEvent&&(window.attachEvent("onscroll",o),window.attachEvent("onresize",u)),e.fn.sticky=function(t){if(a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return a.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.sticky")},e(function(){setTimeout(o,0)})}(jQuery),define("jquery.sticky",["jquery"],function(){}),eval("define('Views/Header/Trait.Search',['require','jquery','underscore','error'],function(require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var ErrorInstance = require('error');\n\n	return {\n		events: {\n			'keyup #toolbarSearch' : 'search',\n			'click #clearSearch' : 'clearSearch'\n		},\n		search: function(){\n			this.$search = this.$search || this.$('#toolbarSearch');\n\n			var text = this.$search.val();\n			App.vent.trigger('toolbar:search', text);\n		},\n		clearSearch: function(){\n			this.$search.val('');\n		}\n	};\n});\n//# sourceURL=/Views/Header/Trait.Search.js"),eval("define('Views/Header/ItemView.Header',['require','jquery','underscore','backbone','marionette','templates','jquery.sticky','./Trait.Search'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n	var Sticky = require('jquery.sticky');\n\n	var Search = require('./Trait.Search');\n\n	var Header = Backbone.Marionette.ItemView.extend(_.extend(Search, {\n		tagName: 'div',\n		className: '',\n		template: Template.Header,\n		// templateHelpers: function () {\n		// 	return {\n\n		// 	};\n		// },\n		// events: {\n		// 	'click .nav li': 'clickNav'\n		// },\n		// clickNav: function (event) {\n		// 	event.preventDefault();\n		// 	event.stopPropagation();\n\n		// 	this.$('.nav li').removeClass('active');\n		// 	this.$(event.target).parent().addClass('active');\n\n		// 	App.Router.navigate(event.target.id, {\n		// 		trigger: true\n		// 	});\n		// },\n		onShow: function () {\n			this.parallax();\n		},\n		parallax: function () {\n			// $('#navbar').sticky({\n			// 	topSpacing: 0\n			// });\n\n			// PARALLAX\n			var landingImg = $('#landing img');\n			var endingImg = $('#ending img');\n\n			if (landingImg.length) {\n				$(window).scroll(function () {\n					var $this = $(this);\n					var top = $this.scrollTop();\n					landingImg.css('transform', 'translateY(' + (top / 3) + 'px)');\n					endingImg.css('transform', 'translateY(' + (top / 3) + 'px)');\n				});\n			}\n		}\n	}));\n	return Header;\n});\n//# sourceURL=/Views/Header/ItemView.Header.js"),eval("define('Views/Footer/ItemView.Footer',['require','jquery','underscore','backbone','marionette','templates'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Template = require('templates');\n\n	var Footer = Backbone.Marionette.ItemView.extend({\n		tagName: 'div',\n		className: 'grey-bg full-width clearfix',\n		template: Template.Footer\n	});\n	return Footer;\n});\n//# sourceURL=/Views/Footer/ItemView.Footer.js"),eval("define('Shared/Regions/Region.Modal',['require','jquery','underscore','backbone','marionette'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n\n	return Backbone.Marionette.Region.extend({\n		el: '#modal',\n		constructor: function () {\n			_.bindAll(this);\n			Backbone.Marionette.Region.prototype.constructor.apply(this, arguments);\n			this.on('view:show', this.showModal, this);\n		},\n		getEl: function (selector) {\n			var $el = $(selector);\n			$el.on('hidden', this.close);\n			return $el;\n		},\n		isOpen: function () {\n			return !!this.currentView;\n		},\n		showModal: function (view) {\n			this.bindTo(App.vent, 'closeModal', this.hideModal, this);\n			view.on('view:close', this.hideModal, this);\n			this.$el.modal('show');\n		},\n		hideModal: function () {\n			this.$el.modal('hide');\n		}\n	});\n});\n//# sourceURL=/Shared/Regions/Region.Modal.js"),eval("define('Shared/Regions/Region.Notification',['require','jquery','underscore','backbone','marionette'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n\n	return Backbone.Marionette.Region.extend({\n		el: '#notification',\n		constructor: function () {\n			_.bindAll(this);\n			Backbone.Marionette.Region.prototype.constructor.apply(this, arguments);\n			this.on('view:show', this.showNotification, this);\n		},\n		getEl: function (selector) {\n			var $el = $(selector);\n			$el.on('hidden', this.close);\n			return $el;\n		},\n		showNotification: function (view) {\n			view.on('close', this.hideNotification, this);\n\n			this.$el.modal('show');\n		},\n		hideNotification: function () {\n			this.$el.modal('hide');\n		}\n	});\n});\n//# sourceURL=/Shared/Regions/Region.Notification.js"),eval("define('App',['require','jquery','underscore','backbone','marionette','./Shared/Analytics/App.Analytics','./Shared/Analytics/App.GoogleAnalytics','./Shared/Cache/App.Cache','./ServerResources/Map.ServerResources','./App.Router','./Views/Header/ItemView.Header','./Views/Footer/ItemView.Footer','./Shared/Regions/Region.Modal','./Shared/Regions/Region.Notification'],function (require) {\n	'use strict';\n\n	var $ = require('jquery');\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n\n	// Modules\n	var Analytics = require('./Shared/Analytics/App.Analytics');\n	var GoogleAnalytics = require('./Shared/Analytics/App.GoogleAnalytics');\n	var Cache = require('./Shared/Cache/App.Cache');\n	var cacheMap = require('./ServerResources/Map.ServerResources');\n	var Router = require('./App.Router');\n\n	// Views\n	var Header = require('./Views/Header/ItemView.Header');\n	var Footer = require('./Views/Footer/ItemView.Footer');\n\n	// Regions\n	var Modal = require('./Shared/Regions/Region.Modal');\n	var Notification = require('./Shared/Regions/Region.Notification');\n\n	// ***** BEGIN APP ***** //\n	var App = new Backbone.Marionette.Application();\n\n	App.addRegions({\n\n		// Main regions\n		header: '#header',\n		content: '#content',\n		footer: '#footer',\n\n		// Overlap regions\n		modal: Modal,\n		notification: Notification\n	});\n\n	App.addInitializer(function (env) {\n\n		// Extend App with environment variables\n		App.env = env;\n\n		// Add global event binder\n		_.extend(App, Backbone.Events);\n\n		App.Erroring = {};\n		App.Erroring.log = [];\n\n		App.on('error:ajaxReadFail', function (state) {\n			App.Erroring.log.push(state);\n			App.trigger('error:ajaxReadFail:render');\n			App.Router.navigate('Error/Connecting', {\n				trigger: true\n			});\n		});\n\n		// Useful jQuery globals\n		App.$window = $(window);\n		App.$document = $(document);\n		App.$body = $('html, body');\n\n		// App Modules\n		App.Cache = new Cache(_.extend(env.cache, cacheMap));\n\n		// Prepare Auth since it will be a POST only model\n		var auth = App.Cache.prepare('auth');\n		if(App.env.session){\n			auth.set('id', App.env.session);\n		}\n\n		// App.Analytics = new Analytics(env);\n		App.GoogleAnalytics = new GoogleAnalytics(env.ga);\n\n		App.Router = new Router();\n\n		// Extend cache functionality to all views\n		Backbone.Marionette.View.prototype.cache = App.Cache;\n\n		// Fetch the prerequisite server resources\n\n		if(App.env.session){\n			// var user = App.Cache.get('user');\n			// var accounts = App.Cache.get('accounts');\n		} else {\n			// var formData = App.Cache.get('formData');\n			// var formSchema = App.Cache.get('formSchema');\n		}\n\n\n		// $.when(user.deferred, accounts.deferred).then(function () {\n\n		// Show App Regions\n		App.header.show(new Header());\n		App.footer.show(new Footer());\n\n		Backbone.history.start();\n		// });\n	});\n	return App;\n});\n//# sourceURL=/App.js"),eval("define('Shared/App.Erroring',['require','jquery'],function (require){\n	'use strict';\n\n	var $ = require('jquery');\n\n	// Handle Internal Error Tracking\n	function Erroring (global, environment){\n		this.global = global;\n		this.errorTracking = environment.errorTracking;\n		\n		global.onError = this.defaultError;\n	}\n\n	Erroring.prototype = {\n	    postError: function (data){\n		    var jQueryAvailable = global.$ && global.$.ajax;\n\n		    if (jQueryAvailable) {\n			    global.$.ajax({\n			        url: ENVIRONMENT.environment.services.analytics,\n			        type: 'POST',\n			        contentType: 'application/json',\n			        data: JSON.stringify({\n			            eventType: 'error',\n			            eventData: data\n			        })\n			    });\n		    }\n	    },\n	    ajaxError: function (event, response){\n\n		// $(window.document).ajaxError(function (evt, jqXHR, settings) {\n		// 	if (jqXHR.status === 409) {\n		// 		global.App.SessionTimer.logout();\n		// 	}\n		// });\n\n	    	switch(resposne){\n	    		case 400: break; // bad request\n	    		case 401: break; // unauthorized\n	    		case 403: break; // forbidden\n	    		case 405: break; // method not allowed\n	    		case 408: break; // request timeout\n	    	}\n	    },\n	    requirejsError: function (error){\n		    var routerAvailable = global.App && global.App.Router && typeof global.App.Router.getSection === 'function';\n		    var stackTraceAvailable = !!global.printStackTrace;\n\n		    this.postError({\n		        type: 'requirejs',\n		        page: (routerAvailable) ? global.App.Router.getSection() : 'unknown',\n		        name: error.name,\n		        message: error.message,\n		        stack: (stackTraceAvailable) ? global.printStackTrace({\n			        e: error\n		        }) : ''\n		    });\n	    },\n	    defaultError: function (message, file, line){\n		    var routerAvailable = global.App && global.App.Router && typeof global.App.Router.getSection === 'function';\n\n		    this.postError({\n		        type: 'runtime',\n		        page: (routerAvailable) ? global.App.Router.getSection() : 'unknown',\n		        name: 'OnError',\n		        message: message,\n		        file: file,\n		        line: line\n		    });\n	    }\n	};\n\n	return Erroring;\n});\n//# sourceURL=/Shared/App.Erroring.js"),eval("define('marionetteShim',['require','underscore','backbone','marionette','handlebars'],function (require) {\n	'use strict';\n\n	var _ = require('underscore');\n	var Backbone = require('backbone');\n	var Marionette = require('marionette');\n	var Handlebars = require('handlebars');\n\n	// Override Marionette to use Precompiled Handlebars Templates\n	Backbone.Marionette.Renderer.render = function (template, data) {\n		return template(data);\n	};\n\n	return Backbone.Marionette;\n});\n//# sourceURL=/Shared/Shims/Shim.Marionette.js"),function(e,t){require.config({waitSeconds:20,paths:{jquery:"../public/components/jquery/jquery","jquery-ui":"../public/components/jquery-ui/ui/jquery-ui","jquery-tmpl":"../public/components/jquery-tmpl/jquery.tmpl","jquery.sticky":"../public/components/jquery.sticky/jquery.sticky","jquery.cookie":"../public/components/jquery.cookie/jquery.cookie",underscore:"../public/components/lodash/lodash",handlebars:"../public/components/handlebars/handlebars",backbone:"../public/components/backbone/backbone","backbone.syphon":"../public/components/backbone.syphon/lib/amd/backbone.syphon",marionette:"../public/components/marionette/lib/backbone.marionette",text:"../public/components/requirejs-text/text",debug:"../public/libs/javascript-debug-master/ba-debug",alpaca:"../public/libs/alpaca/alpaca.min",d3:"../public/components/d3/d3",nvd3:"../public/components/nvd3/nv.d3",moment:"../public/components/moment/moment",marionetteShim:"./Shared/Shims/Shim.Marionette",hbars:"./Shared/Shims/Shim.Handlebars",error:"./Shared/Utils/ErrorInstance",locale:"./Locale/Locale.ENG"},shim:{jquery:{exports:"jQuery"},underscore:{exports:"_"},handlebars:{exports:"Handlebars"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},marionette:{deps:["jquery","underscore","backbone"],exports:"Marionette"},"jquery.cookie":{deps:["jquery"]},"jquery.sticky":{deps:["jquery"]},alpaca:{deps:["jquery"]},d3:{exports:"d3"},nvd3:{deps:["d3"],exports:"nv"}}});var n={};require(["./App.Environment","./Config/local"],function(t,r){n=t(r,e)}),require(["jquery","./App","./Shared/App.Erroring","marionetteShim"],function(t,r,i){t(function(){try{e.App=r,e.App.start(n)}catch(t){}})})}(window),define("App.Bootloader",function(){});